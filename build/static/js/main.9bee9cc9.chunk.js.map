{"version":3,"sources":["layout/themeContext.js","translate/languages/pt.js","translate/languages/index.js","translate/languages/en.js","translate/languages/es.js","translate/i18n.js","errors/toastError.js","services/api.js","services/socket.js","hooks/useWhatsApps/index.js","context/WhatsApp/WhatsAppsContext.js","hooks/useAuth.js/index.js","context/Auth/AuthContext.js","rules.js","components/Can/index.js","pages/ToDoList/index.js","hooks/usePlans/index.js","layout/MainListItems.js","components/ButtonWithSpinner/index.js","components/MarkdownWrapper/index.js","context/Tickets/TicketsContext.js","components/ModalImageCors/index.js","components/ConfirmationModal/index.js","context/ReplyingMessage/ReplyingMessageContext.js","components/MessageOptionsMenu/index.js","components/LocationPreview/index.js","components/MessagesList/index.js","components/TicketHeaderSkeleton/index.js","components/TicketHeader/index.js","components/TicketInfo/index.js","components/TicketMessagesDialog/index.js","helpers/contrastColor.js","components/ContactTag/index.js","components/TicketListItemCustom/index.js","hooks/useTickets/index.js","components/NotificationsPopOver/index.js","components/NotificationsVolume/index.js","components/QueueSelect/index.js","components/UserModal/index.js","components/BackdropLoading/index.js","components/DarkMode/index.js","components/AnnouncementsPopover/index.js","hooks/useDate/index.js","pages/Chat/ChatPopover.js","layout/index.js","pages/Dashboard/Title.js","pages/Dashboard/Chart.js","components/Dashboard/CardCounter.js","components/Dashboard/TableAttendantsStatus.js","hooks/useDashboard/index.js","hooks/useCompanies/index.js","pages/Dashboard/index.js","components/ContactModal/index.js","components/NewTicketModal/index.js","components/TicketsListSkeleton/index.js","components/TicketsListCustom/index.js","components/TabPanel/index.js","components/TicketsQueueSelect/index.js","components/TagsFilter/index.js","components/UsersFilter/index.js","components/TicketsManagerTabs/index.js","components/ContactDrawerSkeleton/index.js","components/ContactForm/index.js","components/ContactNotesDialogListItem/index.js","hooks/useTicketNotes/index.js","components/ContactNotes/index.js","components/ContactDrawer/index.js","components/MessageInputCustom/RecordingTimer.js","hooks/useQuickMessages/index.js","components/MessageInputCustom/index.js","hooks/useLocalStorage/index.js","hooks/useQueues/index.js","components/TransferTicketModalCustom/index.js","components/OutlinedDiv/index.js","components/MessageVariablesPicker/index.js","components/ScheduleModal/index.js","components/TicketOptionsMenu/index.js","components/TicketActionButtonsCustom/index.js","components/TagsContainer/index.js","components/Ticket/index.js","pages/TicketsCustom/index.js","components/TicketAdvancedLayout/index.js","pages/TicketsAdvanced/index.js","pages/TicketResponsiveContainer/index.js","pages/Signup/index.js","pages/Login/index.js","components/MainContainer/index.js","components/MainHeader/index.js","components/MainHeaderButtonsWrapper/index.js","components/Title/index.js","components/TableRowSkeleton/index.js","components/WhatsAppModal/index.js","components/QrcodeModal/index.js","pages/Connections/index.js","components/SchedulesForm/index.js","components/QueueSelectCustom/index.js","components/ModalUsers/index.js","components/CompaniesManager/index.js","components/PlansManager/index.js","hooks/useHelps/index.js","components/HelpsManager/index.js","hooks/useSettings/index.js","components/Settings/Options.js","components/OnlyForSuperUser/index.js","pages/SettingsCustom/index.js","components/FormFields/InputField.js","components/FormFields/SelectField.js","components/CheckoutPage/Forms/AddressForm.js","components/CheckoutPage/Forms/PaymentForm.js","components/CheckoutPage/ReviewOrder/styles.js","components/CheckoutPage/ReviewOrder/ShippingDetails.js","components/CheckoutPage/ReviewOrder/index.js","components/CheckoutPage/ReviewOrder/ReviewOrder.js","components/CheckoutPage/CheckoutSuccess/style.js","components/CheckoutPage/CheckoutSuccess/CheckoutSuccess.js","components/CheckoutPage/CheckoutSuccess/index.js","components/CheckoutPage/FormModel/checkoutFormModel.js","components/CheckoutPage/FormModel/validationSchema.js","components/CheckoutPage/FormModel/formInitialValues.js","components/CheckoutPage/styles.js","components/CheckoutPage/index.js","components/CheckoutPage/CheckoutPage.js","components/SubscriptionModal/index.js","pages/Financeiro/index.js","pages/Users/index.js","pages/Contacts/index.js","components/ColorPicker/index.js","components/QueueOptions/index.js","components/QueueModal/index.js","pages/Queues/index.js","components/TagModal/index.js","pages/Tags/index.js","pages/MessagesAPI/index.js","pages/Helps/index.js","components/ContactListDialog/index.js","pages/ContactLists/index.js","components/ContactListItemModal/index.js","hooks/useContactLists/index.js","pages/ContactListItems/index.js","components/QuickMessageDialog/index.js","pages/QuickMessages/index.js","pages/Kanban/index.js","routes/Route.js","pages/Schedules/index.js","components/CampaignModal/index.js","pages/Campaigns/index.js","pages/CampaignsConfig/index.js","pages/CampaignReport/index.js","components/AnnouncementModal/index.js","pages/Annoucements/index.js","pages/Chat/ChatList.js","pages/Chat/ChatMessages.js","pages/Chat/index.js","pages/Subscription/index.js","components/FileModal/index.js","pages/Files/index.js","components/QueueSelectSingle/index.js","components/PromptModal/index.js","pages/Prompts/index.js","components/QueueIntegrationModal/index.js","pages/QueueIntegration/index.js","routes/index.js","App.js","index.js","assets/logo.png","assets/planilha.xlsx","assets/wa-background.png","assets/wa-background-dark.png","assets/sound.mp3","assets/chat_notify.mp3","assets/n8n.png","assets/dialogflow.png","assets/webhook.png","assets/typebot.jpg"],"names":["ColorModeContext","React","createContext","toggleColorMode","messages","pt","translations","signup","title","toasts","success","fail","form","name","email","password","buttons","submit","login","register","plans","users","connections","campaigns","schedules","enabled","disabled","clear","delete","save","yes","no","money","companies","plan","token","auth","dashboard","charts","perDay","deleted","confirmationModal","deleteTitle","deleteMessage","disconnectTitle","disconnectMessage","add","disconnect","tryAgain","qrcode","newQr","connecting","toolTips","disconnected","content","connected","timeout","table","status","lastUpdate","default","actions","session","whatsappModal","edit","sendIdQueue","timeSendQueue","queueRedirection","queueRedirectionDesc","prompt","maxUseBotQueues","timeUseBotQueues","expiresTicket","expiresInactiveMessage","okAdd","okEdit","cancel","qrCode","message","contacts","searchPlaceholder","importTitlte","importMessage","import","whatsapp","queueIntegrationModal","id","type","projectName","language","jsonContent","urlN8N","typebotSlug","typebotExpires","typebotKeywordFinish","typebotKeywordRestart","typebotRestartMessage","typebotUnknownMessage","typebotDelayMessage","test","testSuccess","addSuccess","editSuccess","promptModal","voice","max_tokens","temperature","apikey","max_messages","voiceKey","voiceRegion","prompts","queue","contactModal","mainInfo","extraInfo","number","extraName","extraValue","addExtraInfo","queueModal","color","greetingMessage","complationMessage","outOfHoursMessage","ratingMessage","orderQueue","integrationId","userModal","profile","scheduleModal","body","contact","sendAt","sentAt","tagModal","chat","noTicketMessage","uploads","titles","titleUploadMsgDragDrop","titleFileList","ticketsManager","newTicket","ticketsQueueSelect","placeholder","tickets","notification","tabs","open","closed","search","showAll","transferTicketModal","fieldLabel","fieldQueueLabel","fieldQueuePlaceholder","noOptions","ok","ticketsList","pendingHeader","assignedHeader","noTicketsTitle","noTicketsMessage","accept","reopen","newTicketModal","mainDrawer","listItems","quickMessages","queues","tags","administration","settings","helps","messagesAPI","annoucements","chats","financeiro","files","queueIntegration","appBar","user","logout","deletedAll","deleteAll","deleteAllTitle","deleteAllMessage","textMessage","mediaMessage","media","notifications","noTickets","noAttachment","attach","dialog","shortcode","geral","visao","mediaName","messageVariablesPicker","label","vars","contactFirstName","contactName","greeting","protocolNumber","date","hour","contactLists","company","contactListItems","lists","contactList","scheduledAt","completedAt","confirmation","new","update","readonly","message1","message2","message3","message4","message5","confirmationMessage1","confirmationMessage2","confirmationMessage3","confirmationMessage4","confirmationMessage5","messagePlaceholder","tagList","fileList","okadd","restart","close","announcements","active","inactive","priority","text","mediaPath","campaignsConfig","queueSelect","inputLabel","userCreation","options","messagesList","header","assignedTo","return","resolve","messagesInput","placeholderOpen","placeholderClosed","signMessage","contactDrawer","fileModal","fileOptions","ticketOptionsMenu","schedule","transfer","registerAppointment","appointmentsModal","textarea","confirm","messageOptionsMenu","reply","backendErrors","ERR_NO_OTHER_WHATSAPP","ERR_NO_DEF_WAPP_FOUND","ERR_WAPP_NOT_INITIALIZED","ERR_WAPP_CHECK_CONTACT","ERR_WAPP_INVALID_CONTACT","ERR_WAPP_DOWNLOAD_MEDIA","ERR_INVALID_CREDENTIALS","ERR_SENDING_WAPP_MSG","ERR_DELETE_WAPP_MSG","ERR_OTHER_OPEN_TICKET","ERR_SESSION_EXPIRED","ERR_USER_CREATION_DISABLED","ERR_NO_PERMISSION","ERR_DUPLICATED_CONTACT","ERR_NO_SETTING_FOUND","ERR_NO_CONTACT_FOUND","ERR_NO_TICKET_FOUND","ERR_NO_USER_FOUND","ERR_NO_WAPP_FOUND","ERR_CREATING_MESSAGE","ERR_CREATING_TICKET","ERR_FETCH_WAPP_MSG","ERR_QUEUE_COLOR_ALREADY_EXISTS","ERR_WAPP_GREETING_REQUIRED","en","titleFrom","es","i18n","use","LanguageDetector","init","debug","defaultNS","fallbackLng","ns","resources","toastError","err","_err$response","_err$response$data","errorMsg","response","data","error","exists","toast","t","toastId","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","theme","isString","api","axios","create","baseURL","process","withCredentials","openApi","socketConnection","params","userId","localStorage","getItem","openSocket","transports","pingTimeout","pingInterval","query","isObject","reducer","state","action","payload","whatsApp","whatsAppIndex","findIndex","s","updatedAt","retries","whatsAppId","splice","useWhatsApps","whatsApps","dispatch","useReducer","loading","setLoading","useState","useEffect","async","get","fetchSession","companyId","socket","on","whatsappId","WhatsAppsContext","WhatsAppsProvider","_ref","children","createElement","Provider","value","useAuth","history","useHistory","isAuth","setIsAuth","setUser","interceptors","request","config","headers","JSON","parse","Promise","reject","_error$response","_error$response2","originalRequest","_retry","post","setItem","stringify","defaults","Authorization","removeItem","handleLogin","userData","has","isArray","setting","find","key","moment","locale","dueDate","vencimento","format","diff","before","isBefore","dias","duration","asDays","Math","round","warn","push","handleLogout","getCurrentUserInfo","AuthContext","AuthProvider","rules","static","admin","Can","role","perform","check","permissions","staticPermissions","includes","dynamicPermissions","dynamic","permissionCondition","defaultProps","useStyles","makeStyles","root","display","flexDirection","alignItems","margin","inputContainer","width","marginBottom","input","flexGrow","marginRight","listContainer","height","marginTop","backgroundColor","borderRadius","list","ToDoList","classes","task","setTask","tasks","setTasks","editIndex","setEditIndex","savedTasks","className","TextField","onChange","event","target","variant","Button","onClick","handleAddTask","trim","now","Date","newTasks","createdAt","List","map","index","ListItem","ListItemText","primary","secondary","toLocaleString","ListItemSecondaryAction","IconButton","handleEditTask","EditIcon","handleDeleteTask","DeleteIcon","usePlans","getPlanList","url","method","responseData","finder","remove","getPlanCompany","ListSubheader","ListItemLink","props","icon","to","renderLink","useMemo","forwardRef","itemProps","ref","RouterLink","Object","assign","button","dense","component","ListItemIcon","newChats","forEach","chatIndex","u","chatId","MainListItems","drawerClose","collapsed","useContext","connectionWarning","setConnectionWarning","openCampaignSubmenu","setOpenCampaignSubmenu","showCampaigns","setShowCampaigns","showKanban","setShowKanban","showOpenAi","setShowOpenAi","showIntegrations","setShowIntegrations","showSchedules","setShowSchedules","showInternalChat","setShowInternalChat","showExternalApi","setShowExternalApi","invisible","setInvisible","pageNumber","setPageNumber","searchParam","planConfigs","useCampaigns","useKanban","useOpenAi","useIntegrations","useSchedules","useInternalChat","useExternalApi","fetchData","delayDebounceFn","setTimeout","fetchChats","clearTimeout","unreadsCount","length","chatUser","unreads","filter","whats","records","DashboardOutlinedIcon","WhatsAppIcon","TableChartIcon","FlashOnIcon","BorderColorIcon","ContactPhoneOutlinedIcon","EventIcon","LocalOfferIcon","Badge","ForumIcon","HelpOutlineIcon","Fragment","Divider","hidden","style","position","fontSize","textAlign","paddingLeft","inset","prev","EventAvailableIcon","ExpandLessIcon","ExpandMoreIcon","Collapse","in","unmountOnExit","disablePadding","ListIcon","PeopleIcon","SettingsOutlinedIcon","super","AnnouncementIcon","AllInclusive","DeviceHubOutlined","badgeContent","SyncAltIcon","AttachFile","AccountTreeOutlinedIcon","PeopleAltOutlinedIcon","CodeRoundedIcon","LocalAtmIcon","Typography","padding","fontWeight","buttonProgress","green","top","left","marginLeft","ButtonWithSpinner","rest","CircularProgress","size","elements","allowedElements","CustomLink","rel","MarkdownWrapper","_ref2","boldRegex","tildaRegex","replace","markdownOptions","disableParsingRawHTML","forceInline","overrides","a","element","el","Markdown","TicketsContext","TicketsContextProvider","currentTicket","setCurrentTicket","code","uuid","messageMedia","objectFit","borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius","ModalImageCors","imageUrl","fetching","setFetching","blobUrl","setBlobUrl","responseType","window","URL","createObjectURL","Blob","fetchImage","ModalImage","smallSrcSet","medium","large","alt","ConfirmationModal","onClose","onConfirm","Dialog","aria-labelledby","DialogTitle","DialogContent","dividers","DialogActions","ReplyMessageContext","ReplyMessageProvider","replyingMessage","setReplyingMessage","MessageOptionsMenu","menuOpen","handleClose","anchorEl","confirmationOpen","setConfirmationOpen","Menu","getContentAnchorEl","anchorOrigin","vertical","horizontal","transformOrigin","fromMe","MenuItem","e","hanldeReplyMessage","LocationPreview","image","link","description","handleLocation","minWidth","float","src","flexWrap","gutterBottom","dangerouslySetInnerHTML","__html","fullWidth","messagesListWrapper","overflow","minHeight","backgroundImage","mode","whatsBackground","whatsBackgroundDark","overflowY","scrollbarStyles","circleLoading","opacity","messageLeft","maxWidth","right","whiteSpace","alignSelf","paddingRight","paddingTop","paddingBottom","boxShadow","quotedContainerLeft","quotedMsg","quotedSideColorLeft","flex","messageRight","quotedContainerRight","quotedMsgRight","quotedSideColorRight","messageActionsButton","zIndex","messageContactName","textContentItem","overflowWrap","textContentItemEdited","textContentItemDeleted","fontStyle","timestamp","bottom","dailyTimestamp","dailyTimestampText","ackIcons","verticalAlign","deletedIcon","ackDoneAllIcon","downloadMedia","justifyContent","newMessages","messageIndex","m","newMessage","messageToUpdate","MessagesList","ticket","ticketId","isGroup","hasMore","setHasMore","lastMessageRef","useRef","selectedMessage","setSelectedMessage","setAnchorEl","messageOptionsMenuOpen","Boolean","currentTicketId","current","scrollToBottom","fetchMessages","emit","scrollIntoView","handleOpenMessageOptionsMenu","currentTarget","checkMessageMedia","mediaType","split","locationParts","imageLocation","linkLocation","descriptionLocation","mediaUrl","controls","startIcon","GetApp","href","renderDailyTimestamps","parseISO","messageDay","previousMessageDay","isSameDay","renderNumberTicket","_message$ticket","_message$ticket$whats","messageTicket","ticketNunberClosed","ticketNunberOpen","renderMessageDivider","renderQuotedMessage","_message$quotedMsg","_message$quotedMsg2","_message$quotedMsg3","_message$quotedMsg3$c","_message$quotedMsg4","clsx","onScroll","scrollTop","document","getElementById","prevPageNumber","renderMessages","_message$contact","_message$contact2","messageCenter","isDeleted","ExpandMore","xmlns","viewBox","fill","d","isEdited","Block","ack","AccessTime","Done","DoneAll","renderMessageAck","ticketHeader","borderBottom","TicketHeaderSkeleton","Card","square","CardHeader","titleTypographyProps","noWrap","subheaderTypographyProps","avatar","Skeleton","animation","Avatar","subheader","palette","tabHeaderBackground","breakpoints","down","TicketHeader","TicketInfo","userName","setUserName","setContactName","offsetWidth","truncadName","substring","cursor","profilePicUrl","mainWrapper","borderLeft","transition","transitions","easing","sharp","leavingScreen","mainWrapperShift","easeOut","enteringScreen","TicketMessagesDialog","setDrawerOpen","setContact","setTicket","queueId","q","fetchTicket","prevState","_data$contact","handleDrawerOpen","renderTicketInfo","Box","contrastColor","tag","ContactTag","toUpperCase","pendingTicket","queueTag","background","noTicketsDiv","newMessagesCount","noTicketsText","lineHeight","connectionTag","contactNameWrapper","lastMessageTime","justifySelf","closedBadge","contactLastMessage","badgeStyle","acceptButton","ticketQueueColor","ticketInfo","secondaryContentSecond","alignContent","ticketInfo1","Radiusdot","transform","TicketListItemCustom","_ticket$queue5","_ticket$queue5$name","_ticket$queue6","_ticket$contact","_ticket$contact2","_ticket$whatsapp","_ticket$whatsapp2","_ticket$whatsapp2$nam","_ticket$queue7","_ticket$queue8","_ticket$queue8$name","ticketUser","setTicketUser","ticketQueueName","setTicketQueueName","setTicketQueueColor","setTag","whatsAppName","setWhatsAppName","openTicketMessageDialog","setOpenTicketMessageDialog","useParams","isMounted","_ticket$queue","_ticket$queue$name","_ticket$queue2","_ticket$user","_ticket$user$name","_ticket$whatsapp$name","handleSendMessage","read","uuidv4","handleSelectTicket","selected","Tooltip","arrow","placement","ListItemAvatar","disableTypography","VisibilityIcon","blue","chatbot","AndroidIcon","grey","lastMessage","unreadMessages","badge","settingIndex","put","handleAcepptTicket","_ticket$queue3","useIntegration","promptId","handleCloseTicket","_ticket$queue4","handleReopenTicket","useTickets","queueIds","withUnreadMessages","setTickets","fetchTickets","tabContainer","maxHeight","popoverPaper","spacing","noShadow","NotificationsPopOver","volume","ticketIdUrl","location","pathname","ticketIdRef","isOpen","setIsOpen","setNotifications","showPendingTickets","setShowPendingTickets","setDesktopNotifications","play","useSound","alertSound","soundAlertRef","historyRef","allTicket","fetchSettings","Notification","requestPermission","console","log","processNotifications","newNotifications","ticketIndex","notfiticationIndex","n","String","_user$queues","some","visibilityState","handleNotifications","urlPicture","renotify","onclick","preventDefault","focus","handleClickAway","NotificationTicket","handleClick","aria-label","overlap","ChatIcon","Popover","disableScrollLock","paper","TicketListItem","icons","customBadge","NotificationsVolume","setVolume","VolumeUpIcon","Grid","container","item","VolumeDownIcon","xs","Slider","step","min","max","handleVolumeChange","chips","chip","QueueSelect","selectedQueueIds","multiple","setQueues","fetchQueues","FormControl","InputLabel","shrink","Select","labelWidth","MenuProps","renderValue","_queues$find","_queues$find2","Chip","multFieldLine","btnWrapper","formControl","UserSchema","Yup","shape","required","UserModal","initialState","loggedInUser","setSelectedQueueIds","setWhatsappId","_data$queues","userQueueIds","fetchUser","scroll","Formik","initialValues","enableReinitialize","validationSchema","onSubmit","values","handleSaveUser","setSubmitting","touched","errors","isSubmitting","Form","Field","as","autoFocus","helperText","labelId","backdrop","drawer","BackdropLoading","Backdrop","switch","visible","btnHeader","DarkMode","mainPaper","AnnouncementDialog","announcement","aria-describedby","border","filename","backgroundRepeat","backgroundSize","backgroundPosition","DialogContentText","newAnnouncements","announcementIndex","announcementId","AnnouncementsPopover","setAnnouncement","showAnnouncementDialog","setShowAnnouncementDialog","fetchAnnouncements","record","Notifications","Paper","scrollHeight","clientHeight","useDate","dateToClient","strDate","isValid","datetimeToClient","dateToDatabase","ChatPopover","notifySound","userObj","senderId","goToMessages","fancyBackground","toolbar","dark","main","barraSuperior","toolbarIcon","appBarShift","menuButton","menuButtonHidden","drawerPaper","scrollbarStylesSoft","drawerPaperClose","overflowX","up","appBarSpacer","containerWithScroll","logo","LoggedInLayout","_user$company","_user$company2","_user$company3","_user$company4","themeToggle","userModalOpen","setUserModalOpen","setMenuOpen","drawerOpen","drawerVariant","setDrawerVariant","useTheme","colorMode","greaterThenSm","useMediaQuery","reload","interval","setInterval","clearInterval","handleCloseMenu","Drawer","ChevronLeftIcon","AppBar","Toolbar","edge","MenuIcon","Brightness7Icon","Brightness4Icon","handleRefreshPage","CachedIcon","aria-controls","aria-haspopup","AccountCircle","handleOpenUserModal","handleClickLogout","Title","Chart","toISOString","chartData","setChartData","time","amount","aux","startOfHour","ResponsiveContainer","BarChart","barSize","CartesianGrid","strokeDasharray","XAxis","dataKey","stroke","YAxis","allowDecimals","Label","angle","textAnchor","Bar","cardAvatar","cardTitle","cardSubtitle","CardCounter","off","red","pointer","RatingBox","rating","ratingTrunc","trunc","Rating","defaultValue","readOnly","TableAttendantsStatus","attendants","TableContainer","Table","TableHead","TableRow","TableCell","align","TableBody","k","minutes","avgSupportTime","startOf","online","CheckCircleIcon","ErrorIcon","useDashboard","useCompanies","finding","findAll","updateSchedules","fixedHeightPaper","alignRight","selectContainer","card1","card2","card3","card4","card5","card6","card7","card8","card9","Dashboard","counters","setCounters","setAttendants","filterType","setFilterType","period","setPeriod","companyDueDate","setCompanyDueDate","dateFrom","setDateFrom","dateTo","setDateTo","days","isEmpty","date_from","date_to","keys","firstLoad","loadCompanies","companiesList","formatTime","Container","sm","md","elevation","paragraph","supportPending","CallIcon","supportHappening","HourglassEmptyIcon","supportFinished","leads","AddIcon","AccessAlarmIcon","avgWaitTime","TimerIcon","handleChangeFilterType","FormHelperText","InputLabelProps","handleChangePeriod","textField","extraAttr","ContactSchema","ContactModal","contactId","onSave","fetchContact","handleSaveContact","FieldArray","_ref3","info","DeleteOutlineIcon","offline","createFilterOptions","NewTicketModal","modalOpen","initialContact","setOptions","setSearchParam","selectedContact","setSelectedContact","selectedQueue","setSelectedQueue","selectedWhatsapp","setSelectedWhatsapp","newContact","setNewContact","whatsapps","setWhatsapps","contactModalOpen","setContactModalOpen","openAlert","setOpenAlert","userTicketOpen","setUserTicketOpen","queueTicketOpen","setQueueTicketOpen","then","fetchContacts","handleSaveTicket","createAddContactOption","filterOptions","filtered","inputValue","renderOption","option","renderOptionLabel","handleCloseContactModal","Autocomplete","clearOnBlur","autoHighlight","freeSolo","clearOnEscape","getOptionLabel","newValue","handleSelectOption","renderInput","onKeyPress","InputProps","endAdornment","displayEmpty","w","TicketsSkeleton","ticketsListWrapper","borderTop","ticketsListHeader","ticketsCount","unshift","TicketsListCustom","updateCount","filteredTickets","indexOf","shouldUpdateTicket","_data$ticket$queue","TicketsListSkeleton","TabPanel","TicketsQueueSelect","userQueues","Checkbox","checked","TagsFilter","onFiltered","setTags","selecteds","setSelecteds","loadTags","v","r","renderTags","getTagProps","textShadow","UsersFilter","initialUsers","setUsers","loadUsers","Array","userList","getOptionSelected","toLowerCase","getUserProps","ticketsWrapper","tabsHeader","tabsInternal","settingsIcon","tab","internalTab","ticketOptionsBox","optionsBackground","ticketSearchLine","serachInputWrapper","total","searchIcon","searchInput","insiderTabPanel","insiderDoubleTabPanel","labelContainer","iconLabelWrapper","insiderTabLabel","smallFormControl","TicketsManagerTabs","setTab","tabOpen","setTabOpen","newTicketModalOpen","setNewTicketModalOpen","showAllTickets","setShowAllTickets","searchInputRef","openCount","setOpenCount","pendingCount","setPendingCount","selectedTags","setSelectedTags","selectedUsers","setSelectedUsers","searchTimeout","applyPanelStyle","handleCloseOrOpenTicket","Tabs","handleChangeTab","indicatorColor","textColor","Tab","MoveToInboxIcon","CheckBoxIcon","SearchIcon","InputBase","inputRef","searchedTerm","FormControlLabel","labelPlacement","control","Switch","handleChangeTabOpen","TicketsList","val","ContactDrawerSkeleton","contactHeader","contactAvatar","contactDetails","contactExtraInfo","textCenter","ContactForm","onCancel","inline","ContactNotesDialogListItem","note","deleteItem","useTicketNotes","saveNote","deleteNote","listNotes","NoteSchema","ContactNotes","newNote","setNewNote","showOnDeleteDialog","setShowOnDeleteDialog","selectedNote","setSelectedNote","notes","setNotes","handleResetState","loadNotes","openAndFetchData","handleChangeComment","handleOpenDialogDelete","handleSave","setErrors","rows","multiline","flexShrink","borderRight","contactdrawer","ContactDrawer","_contact$extraInfo","handleDrawerClose","setModalOpen","openForm","setOpenForm","anchor","PaperProps","BackdropProps","ModalProps","CloseIcon","CreateIcon","Link","timerBox","RecordingTimer","timer","setTimer","seconds","addZero","useQuickMessages","deleteRecord","Mp3Recorder","MicRecorder","bitRate","bordabox","newMessageBox","newmessagebox","messageInputWrapper","inputdigita","messageInput","sendMessageIcons","uploadInput","viewMediaInputWrapper","emojiBox","audioLoading","recorderWrapper","cancelAudioIcon","sendAudioIcon","replyginMsgWrapper","replyginMsgContainer","replyginMsgBody","replyginContactMsgSideColor","replyginSelfMsgSideColor","EmojiOptions","showEmoji","setShowEmoji","handleAddEmoji","MoodIcon","Picker","perLine","showPreview","showSkinTones","onSelect","SignSwitch","setSignMessage","isWidthUp","FileInput","handleChangeMedias","disableOption","htmlFor","AttachFileIcon","ActionButtons","inputMessage","recording","ticketStatus","handleCancelAudio","handleUploadAudio","handleStartRecording","SendIcon","HighlightOffIcon","CheckCircleOutlineIcon","MicIcon","CustomInput","setInputMessage","handleInputPaste","handleQuickAnswersClick","setQuickMessages","popupOpen","setPopupOpen","listQuickMessages","truncatedMessage","firstWord","charAt","filteredOptions","setInputRef","closeIcon","opt","isNil","onInputChange","reason","onPaste","shiftKey","maxRows","withWidth","_medias$","medias","setMedias","setRecording","initialValue","storedValue","setStoredValue","valueToStore","Function","useLocalStorage","emoji","native","selectedMedias","from","clipboardData","blob","extension","formData","FormData","getTime","append","handleUploadQuickMessageMedia","navigator","mediaDevices","getUserMedia","audio","start","stop","getMp3","CancelIcon","ClearIcon","renderReplyingMessage","useQueues","TransferTicketModalCustom","ticketid","allQueues","setAllQueues","selectedUser","setSelectedUser","findAllQueues","loadQueues","fetchUsers","noOptionsText","InputComponent","other","OutlinedDiv","inputComponent","inputProps","MessageVariablesPicker","msgVars","msgVar","onMouseDown","ScheduleSchema","ScheduleModal","scheduleId","cleanContact","setSchedule","currentContact","setCurrentContact","setContacts","attachment","setAttachment","attachmentFile","messageInputRef","c","customList","capitalize","file","head","handleAttachmentFile","scheduleData","handleSaveSchedule","setFieldValue","setValueFunc","firstHalfText","selectionStart","secondHalfText","selectionEnd","newCursorPos","setSelectionRange","handleClickMsgVar","DeleteOutline","click","TicketOptionsMenu","transferTicketModalOpen","setTransferTicketModalOpen","scheduleModalOpen","setScheduleModalOpen","setContactId","handleOpenConfirmationModal","keepMounted","handleOpenScheduleModal","handleCloseTransferTicketModal","handleCloseScheduleModal","actionButtons","TicketActionButtonsCustom","ticketOptionsMenuOpen","customTheme","createTheme","handleUpdateTicketStatus","Replay","UndoRoundedIcon","ThemeProvider","MoreVert","TagsContainer","createTag","optionsChanged","newTag","syncTags","PaperComponent","Ticket","TicketActionButtons","MessageInput","chatContainer","chatPapper","contactsWrapper","messagesWrapper","welcomeMsg","boxticket","TicketsCustom","TicketsManager","TicketAdvancedLayout","styled","gridTemplateRows","placeholderContainer","placeholderItem","TicketAdvanced","setOption","BottomNavigation","showLabels","BottomNavigationAction","QuestionAnswerIcon","Tickets","SignUp","qs","phone","planId","setPlans","listPlans","CssBaseline","recurrence","campaignsEnabled","handleSignUp","autoComplete","justify","mt","powered","Login","handleChangeInput","noValidate","mainContainer","contentWrapper","MainContainer","contactsHeader","MainHeader","MainHeaderButtonsWrapper","customTableCell","TableRowSkeleton","columns","_","SessionSchema","memo","isDefault","provider","setWhatsApp","selectedQueueId","setSelectedQueueId","selectedPrompt","setSelectedPrompt","setPrompts","whatsQueueIds","transferQueueId","handleChangePrompt","whatsappData","handleSaveWhatsApp","selectedIds","timeToTransfer","selectedId","setQrCode","QRCode","tooltip","typography","pxToRem","tooltipPopper","CustomToolTip","popper","Connections","whatsAppModalOpen","setWhatsAppModalOpen","qrModalOpen","setQrModalOpen","selectedWhatsApp","setSelectedWhatsApp","confirmModalOpen","setConfirmModalOpen","confirmationModalInitialState","confirmModalInfo","setConfirmModalInfo","handleOpenWhatsAppModal","handleCloseWhatsAppModal","useCallback","handleCloseQrModal","renderActionButtons","handleOpenQrModal","handleStartWhatsAppSession","handleRequestNewQrCode","QrcodeModal","WhatsAppModal","SignalCellularConnectedNoInternet0Bar","CropFree","SignalCellular4Bar","SignalCellularConnectedNoInternet2Bar","renderStatusToolTips","CheckCircle","handleEditWhatsApp","Edit","textfield","row","buttonContainer","SchedulesForm","labelSaveButton","setSchedules","weekday","weekdayEn","startTime","endTime","render","arrayHelpers","FastField","field","NumberFormat","customInput","_ref4","QueueSelectCustom","ModalUsers","tableContainer","textRight","CompanyForm","onDelete","modalUser","setModalUser","firstUser","setFirstUser","setRecord","handleCloseModalUsers","resetForm","handleSubmit","setValues","incrementDueDate","handleOpenModalUsers","CompaniesManagerGrid","rowStyle","renderPlan","renderCampaignsStatus","renderStatus","CompaniesManager","showConfirmDialog","setShowConfirmDialog","setRecords","loadPlans","companyList","handleCancel","handleOpenDeleteDialog","handleDelete","PlanManagerForm","PlansManagerGrid","minimumFractionDigits","renderCampaigns","renderSchedules","renderInternalChat","renderExternalApi","renderKanban","renderOpenAi","renderIntegrations","PlansManager","planList","_data$value","HelpManagerForm","HelpsManagerGrid","video","HelpsManager","useHelps","loadHelps","helpList","useSettings","getAll","fontecor","Options","scheduleTypeChanged","userRating","setUserRating","scheduleType","setScheduleType","callType","setCallType","chatbotType","setChatbotType","CheckMsgIsGroup","setCheckMsgIsGroupType","loadingUserRating","setLoadingUserRating","loadingScheduleType","setLoadingScheduleType","loadingCallType","setLoadingCallType","loadingChatbotType","setLoadingChatbotType","loadingCheckMsgIsGroup","setCheckMsgIsGroup","ipixcType","setIpIxcType","loadingIpIxcType","setLoadingIpIxcType","tokenixcType","setTokenIxcType","loadingTokenIxcType","setLoadingTokenIxcType","ipmkauthType","setIpMkauthType","loadingIpMkauthType","setLoadingIpMkauthType","clientidmkauthType","setClientIdMkauthType","loadingClientIdMkauthType","setLoadingClientIdMkauthType","clientsecretmkauthType","setClientSecrectMkauthType","loadingClientSecrectMkauthType","setLoadingClientSecrectMkauthType","asaasType","setAsaasType","loadingAsaasType","setLoadingAsaasType","SendGreetingAccepted","setSendGreetingAccepted","loadingSendGreetingAccepted","setLoadingSendGreetingAccepted","SettingsTransfTicket","setSettingsTransfTicket","loadingSettingsTransfTicket","setLoadingSettingsTransfTicket","handleChangeUserRating","handleScheduleType","handleGroupType","handleCallType","handleChatbotType","handleSendGreetingAccepted","handleSettingsTransfTicket","scrollButtons","handleChangeAsaas","OnlyForSuperUser","SettingsCustom","setCompany","currentUser","setCurrentUser","setSettings","schedulesEnabled","setSchedulesEnabled","getAllSettings","settingList","findData","isSuper","handleTabChange","InputField","errorText","meta","useField","at","_renderHelperText","SelectField","selectedValue","isError","countries","AddressForm","billingName","setBillingName","addressZipCode","setAddressZipCode","addressStreet","setAddressStreet","addressState","setAddressState","addressCity","setAddressCity","addressDistrict","setAddressDistrict","formField","firstName","address1","city","zipcode","country","ul","listStyle","cardHeader","cardPricing","footer","divider","customCard","custom","Pricing","setActiveStep","activeStep","usersPlans","setUsersPlans","companiesPlans","setCompaniesPlans","connectionsPlans","setConnectionsPlans","storagePlans","setStoragePlans","customValuePlans","setCustomValuePlans","plansCompanies","price","buttonText","buttonVariant","tiers","tier","StarIcon","CardContent","line","CardActions","listItem","PaymentDetails","formValues","newPlan","ReviewOrder","useFormikContext","ShippingDetails","div","Total","SuccessContent","CheckoutSuccess","pix","pixString","copied","setCopied","valor","original","CopyToClipboard","onCopy","handleCopyQR","FaCheckCircle","FaCopy","formId","requiredErrorMsg","lastName","invalidErrorMsg","useAddressForPaymentDetails","invoiceId","nameOnCard","cardNumber","expiryDate","cvv","checkoutFormModel","nullable","stepper","wrapper","CheckoutPage","steps","datePayment","setDatePayment","setinvoiceId","Invoice","currentValidationSchema","isLastStep","_handleBack","Stepper","Step","StepLabel","formInitialValues","newValues","address2","_submitForm","setTouched","PaymentForm","_renderStepContent","invoices","newUsers","userIndex","Invoices","selectedContactId","setSelectedContactId","fetchInvoices","hoje","rowStatus","SubscriptionModal","detail","currency","handleOpenContactModal","Users","deletingUser","setDeletingUser","handleDeleteUser","handleCloseUserModal","startAdornment","InputAdornment","handleEditUser","newContacts","contactIndex","Contacts","contactTicket","setContactTicket","deletingContact","setDeletingContact","confirmOpen","setConfirmOpen","handleDeleteContact","go","handleimportContact","CSVLink","textDecoration","separator","hadleEditContact","ColorPicker","currentColor","selectedColor","setSelectedColor","BlockPicker","triangle","colors","hex","onChangeComplete","addButton","QueueOptionStepper","updateOptions","activeOption","setActiveOption","handleOption","parentId","optionList","edition","handleEdition","renderTitle","handleOptionChangeTitle","SaveIcon","order","handleDeleteOption","renderMessage","handleOptionChangeMessage","renderStep","StepContent","optionNumber","handleAddOption","nonLinear","orientation","QueueOptions","fetchOptions","addOption","newOption","renderStepper","colorAdorment","QueueSchema","QueueModal","colorPickerModalOpen","setColorPickerModalOpen","setQueue","greetingRef","integrations","setIntegrations","queueIntegrations","handleSaveQueue","onFocus","Colorize","textField1","integration","newQueues","queueIndex","Queues","queueModalOpen","setQueueModalOpen","handleCloseConfirmationModal","handleDeleteQueue","handleCloseQueueModal","handleOpenQueueModal","handleEditQueue","TagSchema","TagModal","tagId","kanban","setKanban","handleKanbanChange","tagData","handleSaveTag","ColorBox","disableAlpha","hslGradient","newTags","tagIndex","Tags","selectedTag","setSelectedTag","deletingTag","setDeletingTag","tagModalOpen","setTagModalOpen","fetchTags","handleDeleteTag","handleCloseTagModal","handleOpenTagModal","handleEditTag","mainHeader","elementMargin","formContainer","MessagesAPI","formMessageTextData","formMessageMediaData","setFile","catch","handleSendTextMessage","firstFile","handleSendMediaMessage","mainPaperContainer","gridTemplateColumns","gap","helpPaper","shadows","paperHover","videoThumbnail","videoTitle","videoDescription","videoModal","videoModalContent","outline","aspectRatio","Helps","selectedVideo","setSelectedVideo","closeVideoModal","handleModalClose","addEventListener","removeEventListener","openVideoModal","Modal","frameBorder","allow","allowFullScreen","ContactListSchema","ContactListModal","contactListId","setContactList","fetchContactList","contactListData","handleSaveContactList","newContactLists","contactListIndex","ContactLists","selectedContactList","setSelectedContactList","deletingContactList","setDeletingContactList","contactListModalOpen","setContactListModalOpen","fetchContactLists","handleDeleteContactList","ContactListDialog","handleCloseContactListModal","handleOpenContactListModal","contactsCount","planilhaExemplo","download","DownloadIcon","goToContacts","handleEditContactList","ContactListItemModal","useContactLists","findById","ContactListItems","contactListItemModalOpen","setContactListItemModalOpen","fileUploadRef","findContactList","handleCloseContactListItemModal","handleImportContacts","goToContactLists","handleOpenContactListItemModal","isWhatsappValid","titleAccess","htmlColor","BlockIcon","path","require","QuickeMessageSchema","QuickMessageDialog","quickemessageId","quickemessage","setQuickemessage","quickemessageData","isMedia","basename","handleSaveQuickeMessage","quickmessages","newQuickmessages","quickemessageIndex","Quickemessages","selectedQuickemessage","setSelectedQuickemessage","deletingQuickemessage","setDeletingQuickemessage","quickemessageModalOpen","setQuickMessageDialogOpen","quickemessages","fetchQuickemessages","handleDeleteQuickemessage","resetPagination","handleCloseQuickMessageDialog","handleOpenQuickMessageDialog","_quickemessage$mediaN","handleEditQuickemessage","Kanban","reloadData","setReloadData","isInitialLoadComplete","setIsInitialLoadComplete","fetchedTags","lista","jsonString","lanes","UserQueue","teste","handleCardClick","cards","toString","popularCards","Board","onCardMoveAcrossLanes","cardId","sourceLaneId","targetLaneId","Route","Component","isPrivate","Redirect","RouterRoute","eventTitleStyle","textOverflow","localizer","momentLocalizer","defaultMessages","allDay","week","work_week","day","month","previous","next","yesterday","tomorrow","today","agenda","noEventsInRange","showMore","scheduleIndex","Schedules","selectedSchedule","setSelectedSchedule","deletingSchedule","setDeletingSchedule","paramName","URLSearchParams","fetchSchedules","handleOpenScheduleModalFromContactId","handleDeleteSchedule","Calendar","formats","agendaDateFormat","weekdayFormat","events","handleEditSchedule","end","startAccessor","endAccessor","tabmsg","campaigntab","CampaignSchema","CampaignModal","campaignId","tagListId","campaign","setCampaign","setContactLists","messageTab","setMessageTab","campaignEditable","setCampaignEditable","tagLists","setTagLists","formattedTagLists","_ref5","prevCampaignData","entries","_ref6","moreThenAnHour","Number","isNaN","isEditable","renderMessageField","identifier","renderConfirmationMessageField","dataValues","_ref7","handleSaveCampaign","_ref8","fileListId","f","centered","restartCampaign","cancelCampaign","newCampaigns","campaignIndex","Campaigns","selectedCampaign","setSelectedCampaign","deletingCampaign","setDeletingCampaign","campaignModalOpen","setCampaignModalOpen","fetchCampaigns","handleDeleteCampaign","handleCloseCampaignModal","handleOpenCampaignModal","formatStatus","PauseCircleOutlineIcon","PlayCircleOutlineIcon","DescriptionIcon","handleEditCampaign","tabPanelsContainer","initialSettings","messageInterval","longerIntervalAfter","greaterInterval","variables","CampaignsConfig","showVariablesForm","setShowVariablesForm","selectedKey","setSelectedKey","variable","setVariable","settingsList","fromEntries","handleOnChangeVariable","changedProp","handleOnChangeSettings","removeVariable","newList","addVariable","variablesExists","CampaignReport","validContacts","setValidContacts","delivered","setDelivered","confirmationRequested","setConfirmationRequested","confirmed","setConfirmed","percent","setPercent","mounted","findCampaign","valids","isNull","deliveredAt","confirmationRequestedAt","LinearProgress","GroupIcon","DoneIcon","DoneAllIcon","ListAltIcon","ScheduleIcon","AnnouncementSchema","AnnouncementModal","announcementData","handleSaveAnnouncement","Announcements","selectedAnnouncement","setSelectedAnnouncement","deletingAnnouncement","setDeletingAnnouncement","announcementModalOpen","setAnnouncementModalOpen","handleDeleteAnnouncement","handleCloseAnnouncementModal","handleOpenAnnouncementModal","_announcement$mediaNa","handleEditAnnouncement","boxlist","chatList","ChatList","handleSelectChat","handleDeleteChat","handleEditChat","pageInfo","selectedChat","setSelectedChat","getPrimaryText","mainText","getSecondaryText","getItemStyle","ownerId","messageList","chatlist","inputArea","buttonSend","boxLeft","boxRight","ChatMessages","handleLoadMore","scrollToBottomRef","baseRef","contentMessage","setContentMessage","sender","Input","onKeyUp","gridContainer","gridItem","gridItemTab","btnContainer","ChatModal","handleLoadNewChat","setTitle","alert","showDialog","setShowDialog","dialogType","setDialogType","currentChat","setCurrentChat","setChats","chatsPageInfo","setChatsPageInfo","setMessages","messagesPageInfo","setMessagesPageInfo","messagesPage","setMessagesPage","findChats","selectChat","findMessages","changedChats","filteredChats","sendMessage","deleteChat","loadMoreMessages","_formatDate","past","abs","ceil","trialExpiration","FileListSchema","FilesModal","setFiles","selectedFileNames","setSelectedFileNames","setFileList","uploadFiles","filesOptions","fileOption","fileData","handleSaveFileList","minRows","selectedFile","updatedOptions","updatedFileNames","newFiles","fileListIndex","FileLists","selectedFileList","setSelectedFileList","deletingFileList","setDeletingFileList","fileListModalOpen","setFileListModalOpen","fetchFileLists","fileId","handleDeleteFileList","FileModal","handleCloseFileListModal","handleOpenFileListModal","handleEditFileList","QueueSelectSingle","PromptModal","selectedVoice","setSelectedVoice","showApiKey","setShowApiKey","handleToggleApiKey","maxTokens","apiKey","maxMessages","setPrompt","fetchPrompt","handleChangeVoice","promptData","handleSavePrompt","VisibilityOff","Visibility","newPrompts","promptIndex","p","Prompts","promptModalOpen","setPromptModalOpen","handleDeletePrompt","handleClosePromptModal","handleOpenPromptModal","handleEditPrompt","btnLeft","DialogflowSchema","QueueIntegration","setIntegration","handleSaveDialogflow","xl","helpertext","handleTestSession","newIntegrations","integrationIndex","selectedIntegration","setSelectedIntegration","fetchIntegrations","handleDeleteIntegration","IntegrationModal","handleCloseIntegrationModal","dialogflow","n8n","webhooks","typebot","handleEditIntegration","Routes","BrowserRouter","exact","Signup","TicketResponsiveContainer","QuickMessages","Files","Financeiro","Annoucements","Subscription","Chat","ToastContainer","queryClient","QueryClient","App","setLocale","prefersDarkMode","preferredTheme","setMode","prevMode","textPrimary","borderPrimary","light","announcementspopover","boxchatlist","messageIcons","inputBackground","mediainput","i18nlocale","ptBR","QueryClientProvider","client","ReactDOM","module","exports"],"mappings":"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X,cAACoI,GAAY,CACXG,GAAG,cACHrB,QAASjM,KAAKmB,EAAE,mCAChBkM,KAAM5f,IAAAsX,cAACiP,KAAY,QAGrBvmB,IAAAsX,cAACoI,GAAY,CACXG,GAAG,YACHrB,QAASjM,KAAKmB,EAAE,iCAChBkM,KAAM5f,IAAAsX,cAACsO,IAAoB,SAI3B3E,GAAajhB,IAAAsX,cAACtX,IAAMykB,SAAQ,KAC5BzkB,IAAAsX,cAACoN,IAAO,MAOR1kB,IAAAsX,cAACkP,IAAU,CAAC5B,MAAO,CAAEE,SAAU,OAAQ2B,QAAS,OAAQ1B,UAAW,QAAS2B,WAAY,SAAU,0B,iJCjehH,MAAMjL,GAAYC,YAAWvH,IAAK,CACjCmM,OAAQ,CACPuE,SAAU,YAGX8B,eAAgB,CACfnf,MAAOof,KAAM,KACb/B,SAAU,WACVgC,IAAK,MACLC,KAAM,MACNtK,WAAY,GACZuK,YAAa,OAiBAC,OAbW5P,IAAqC,IAApC,QAAEb,EAAO,SAAEc,KAAa4P,GAAM7P,EACxD,MAAMyF,EAAUpB,KAEhB,OACCzb,IAAAsX,cAACqG,KAAMyC,OAAAC,OAAA,CAAChD,UAAWR,EAAQyD,OAAQ7e,SAAU8U,GAAa0Q,GACxD5P,EACAd,GACAvW,IAAAsX,cAAC4P,KAAgB,CAACC,KAAM,GAAI9J,UAAWR,EAAQ8J,mB,UCzBnD,MAAMS,GAAW,CAChB,IACA,OACA,UACA,OACA,UACA,QACA,QACA,IACA,OACA,MACA,MACA,MACA,aACA,OACA,KACA,SACA,SACA,UACA,OACA,OACA,MACA,WACA,OACA,WACA,KACA,MACA,UACA,MACA,SACA,MACA,KACA,KACA,KACA,QACA,WACA,aACA,SACA,SACA,OACA,KACA,KACA,KACA,KACA,KACA,KACA,OACA,SACA,SACA,KACA,OACA,IACA,SACA,MACA,QACA,MACA,MACA,SACA,QACA,SACA,KACA,OACA,OACA,MACA,OACA,UACA,OACA,WACA,OACA,QACA,MACA,WACA,SACA,KACA,WACA,SACA,SACA,IACA,QACA,UACA,MACA,WACA,IACA,KACA,KACA,OACA,IACA,OACA,SA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","file":"static/js/main.9bee9cc9.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst ColorModeContext = React.createContext({ toggleColorMode: () => {} });\r\n\r\nexport default ColorModeContext;","const messages = {\r\n  pt: {\r\n    translations: {\r\n      signup: {\r\n        title: \"Cadastre-se\",\r\n        toasts: {\r\n          success: \"Usuário criado com sucesso! Faça seu login!!!.\",\r\n          fail: \"Erro ao criar usuário. Verifique os dados informados.\",\r\n        },\r\n        form: {\r\n          name: \"Nome\",\r\n          email: \"Email\",\r\n          password: \"Senha\",\r\n        },\r\n        buttons: {\r\n          submit: \"Cadastrar\",\r\n          login: \"Já tem uma conta? Entre!\",\r\n        },\r\n      },\r\n      login: {\r\n        title: \"Login\",\r\n        form: {\r\n          email: \"Email\",\r\n          password: \"Senha\",\r\n        },\r\n        buttons: {\r\n          submit: \"Entrar\",\r\n          register: \"Registre-se, agora mesmo!\",\r\n        },\r\n      },\r\n      plans: {\r\n        form: {\r\n          name: \"Nome\",\r\n          users: \"Usuários\",\r\n          connections: \"Conexões\",\r\n          campaigns: \"Campanhas\",\r\n          schedules: \"Agendamentos\",\r\n          enabled: \"Habilitadas\",\r\n          disabled: \"Desabilitadas\",\r\n          clear: \"Cancelar\",\r\n          delete: \"Excluir\",\r\n          save: \"Salvar\",\r\n          yes: \"Sim\",\r\n          no: \"Não\",\r\n          money: \"R$\",\r\n        },\r\n      },\r\n      companies: {\r\n        title: \"Cadastrar Empresa\",\r\n        form: {\r\n          name: \"Nome da Empresa\",\r\n          plan: \"Plano\",\r\n          token: \"Token\",\r\n          submit: \"Cadastrar\",\r\n          success: \"Empresa criada com sucesso!\",\r\n        },\r\n      },\r\n      auth: {\r\n        toasts: {\r\n          success: \"Login efetuado com sucesso!\",\r\n        },\r\n        token: \"Token\",\r\n      },\r\n      dashboard: {\r\n        charts: {\r\n          perDay: {\r\n            title: \"Atendimentos hoje: \",\r\n          },\r\n        },\r\n      },\r\n      connections: {\r\n        title: \"Conexões\",\r\n        toasts: {\r\n          deleted: \"Conexão com o WhatsApp excluída com sucesso!\",\r\n        },\r\n        confirmationModal: {\r\n          deleteTitle: \"Deletar\",\r\n          deleteMessage: \"Você tem certeza? Essa ação não pode ser revertida.\",\r\n          disconnectTitle: \"Desconectar\",\r\n          disconnectMessage:\r\n            \"Tem certeza? Você precisará ler o QR Code novamente.\",\r\n        },\r\n        buttons: {\r\n          add: \"Adicionar WhatsApp\",\r\n          disconnect: \"desconectar\",\r\n          tryAgain: \"Tentar novamente\",\r\n          qrcode: \"QR CODE\",\r\n          newQr: \"Novo QR CODE\",\r\n          connecting: \"Conectando\",\r\n        },\r\n        toolTips: {\r\n          disconnected: {\r\n            title: \"Falha ao iniciar sessão do WhatsApp\",\r\n            content:\r\n              \"Certifique-se de que seu celular esteja conectado à internet e tente novamente, ou solicite um novo QR Code\",\r\n          },\r\n          qrcode: {\r\n            title: \"Esperando leitura do QR Code\",\r\n            content:\r\n              \"Clique no botão 'QR CODE' e leia o QR Code com o seu celular para iniciar a sessão\",\r\n          },\r\n          connected: {\r\n            title: \"Conexão estabelecida!\",\r\n          },\r\n          timeout: {\r\n            title: \"A conexão com o celular foi perdida\",\r\n            content:\r\n              \"Certifique-se de que seu celular esteja conectado à internet e o WhatsApp esteja aberto, ou clique no botão 'Desconectar' para obter um novo QR Code\",\r\n          },\r\n        },\r\n        table: {\r\n          name: \"Nome\",\r\n          status: \"Status\",\r\n          lastUpdate: \"Última atualização\",\r\n          default: \"Padrão\",\r\n          actions: \"Ações\",\r\n          session: \"Sessão\",\r\n        },\r\n      },\r\n      whatsappModal: {\r\n        title: {\r\n          add: \"Adicionar WhatsApp\",\r\n          edit: \"Editar WhatsApp\",\r\n        },\r\n        form: {\r\n          name: \"Nome\",\r\n          default: \"Padrão\",\r\n          sendIdQueue: \"Fila\",\r\n          timeSendQueue: \"Redirecionar para fila em X minutos\",\r\n          queueRedirection: \"Redirecionamento de Fila\",\r\n          queueRedirectionDesc: \"Selecione uma fila para os contatos que não possuem fila serem redirecionados\",\r\n          prompt: \"Prompt\",\r\n          maxUseBotQueues: \"Enviar bot x vezes\",\r\n          timeUseBotQueues: \"Intervalo em minutos entre envio de bot\",\r\n          expiresTicket: \"Encerrar chats abertos após x minutos\",\r\n          expiresInactiveMessage: \"Mensagem de encerramento por inatividade\",\r\n        },\r\n        buttons: {\r\n          okAdd: \"Adicionar\",\r\n          okEdit: \"Salvar\",\r\n          cancel: \"Cancelar\",\r\n        },\r\n        success: \"WhatsApp salvo com sucesso.\",\r\n      },\r\n      qrCode: {\r\n        message: \"Leia o QrCode para iniciar a sessão\",\r\n      },\r\n      contacts: {\r\n        title: \"Contatos\",\r\n        toasts: {\r\n          deleted: \"Contato excluído com sucesso!\",\r\n        },\r\n        searchPlaceholder: \"Pesquisar...\",\r\n        confirmationModal: {\r\n          deleteTitle: \"Deletar \",\r\n          importTitlte: \"Importar contatos\",\r\n          deleteMessage:\r\n            \"Tem certeza que deseja deletar este contato? Todos os atendimentos relacionados serão perdidos.\",\r\n          importMessage: \"Deseja importar todos os contatos do telefone?\",\r\n        },\r\n        buttons: {\r\n          import: \"Importar Contatos\",\r\n          add: \"Adicionar Contato\",\r\n        },\r\n        table: {\r\n          name: \"Nome\",\r\n          whatsapp: \"WhatsApp\",\r\n          email: \"Email\",\r\n          actions: \"Ações\",\r\n        },\r\n      },\r\n      queueIntegrationModal: {\r\n        title: {\r\n          add: \"Adicionar projeto\",\r\n          edit: \"Editar projeto\",\r\n        },\r\n        form: {\r\n          id: \"ID\",\r\n          type: \"Tipo\",\r\n          name: \"Nome\",\r\n          projectName: \"Nome do Projeto\",\r\n          language: \"Linguagem\",\r\n          jsonContent: \"JsonContent\",\r\n          urlN8N: \"URL\",\r\n          typebotSlug: \"Typebot - Slug\",\r\n          typebotExpires: \"Tempo em minutos para expirar uma conversa\",\r\n          typebotKeywordFinish: \"Palavra para finalizar o ticket\",\r\n          typebotKeywordRestart: \"Palavra para reiniciar o fluxo\",\r\n          typebotRestartMessage: \"Mensagem ao reiniciar a conversa\",\r\n          typebotUnknownMessage: \"Mensagem de opção inválida\",\r\n          typebotDelayMessage: \"Intervalo (ms) entre mensagens\",   \r\n        },\r\n        buttons: {\r\n          okAdd: \"Adicionar\",\r\n          okEdit: \"Salvar\",\r\n          cancel: \"Cancelar\",\r\n          test: \"Testar Bot\",\r\n        },\r\n        messages: {\r\n          testSuccess: \"Integração testada com sucesso!\",\r\n          addSuccess: \"Integração adicionada com sucesso.\",\r\n          editSuccess: \"Integração editada com sucesso.\",\r\n        },\r\n      },\r\n      promptModal: {\r\n        form: {\r\n          name: \"Nome\",\r\n          prompt: \"Prompt\",\r\n          voice: \"Voz\",\r\n          max_tokens: \"Máximo de Tokens na resposta\",\r\n          temperature: \"Temperatura\",\r\n          apikey: \"API Key\",\r\n          max_messages: \"Máximo de mensagens no Histórico\",\r\n          voiceKey: \"Chave da API de Voz\",\r\n          voiceRegion: \"Região de Voz\",\r\n        },\r\n        success: \"Prompt salvo com sucesso!\",\r\n        title: {\r\n          add: \"Adicionar Prompt\",\r\n          edit: \"Editar Prompt\",\r\n        },\r\n        buttons: {\r\n          okAdd: \"Adicionar\",\r\n          okEdit: \"Salvar\",\r\n          cancel: \"Cancelar\",\r\n        },\r\n      },\r\n      prompts: {\r\n        title: \"Prompts\",\r\n        table: {\r\n          name: \"Nome\",\r\n          queue: \"Setor/Fila\",\r\n          max_tokens: \"Máximo Tokens Resposta\",\r\n          actions: \"Ações\",\r\n        },\r\n        confirmationModal: {\r\n          deleteTitle: \"Excluir\",\r\n          deleteMessage: \"Você tem certeza? Essa ação não pode ser revertida!\",\r\n        },\r\n        buttons: {\r\n          add: \"Adicionar Prompt\",\r\n        },\r\n      },\r\n      contactModal: {\r\n        title: {\r\n          add: \"Adicionar contato\",\r\n          edit: \"Editar contato\",\r\n        },\r\n        form: {\r\n          mainInfo: \"Dados do contato\",\r\n          extraInfo: \"Informações adicionais\",\r\n          name: \"Nome\",\r\n          number: \"Número do Whatsapp\",\r\n          email: \"Email\",\r\n          extraName: \"Nome do campo\",\r\n          extraValue: \"Valor\",\r\n          whatsapp: \"Conexão Origem: \"\r\n        },\r\n        buttons: {\r\n          addExtraInfo: \"Adicionar informação\",\r\n          okAdd: \"Adicionar\",\r\n          okEdit: \"Salvar\",\r\n          cancel: \"Cancelar\",\r\n        },\r\n        success: \"Contato salvo com sucesso.\",\r\n      },\r\n      queueModal: {\r\n        title: {\r\n          add: \"Adicionar fila\",\r\n          edit: \"Editar fila\",\r\n        },\r\n        form: {\r\n          name: \"Nome\",\r\n          color: \"Cor\",\r\n          greetingMessage: \"Mensagem de saudação\",\r\n          complationMessage: \"Mensagem de conclusão\",\r\n          outOfHoursMessage: \"Mensagem de fora de expediente\",\r\n          ratingMessage: \"Mensagem de avaliação\",\r\n          token: \"Token\",\r\n          orderQueue: \"Ordem da fila (Bot)\",\r\n          integrationId: \"Integração\",\r\n        },\r\n        buttons: {\r\n          okAdd: \"Adicionar\",\r\n          okEdit: \"Salvar\",\r\n          cancel: \"Cancelar\",\r\n        },\r\n      },\r\n      userModal: {\r\n        title: {\r\n          add: \"Adicionar usuário\",\r\n          edit: \"Editar usuário\",\r\n        },\r\n        form: {\r\n          name: \"Nome\",\r\n          email: \"Email\",\r\n          password: \"Senha\",\r\n          profile: \"Perfil\",\r\n          whatsapp: \"Conexão Padrão\"\r\n        },\r\n        buttons: {\r\n          okAdd: \"Adicionar\",\r\n          okEdit: \"Salvar\",\r\n          cancel: \"Cancelar\",\r\n        },\r\n        success: \"Usuário salvo com sucesso.\",\r\n      },\r\n      scheduleModal: {\r\n        title: {\r\n          add: \"Novo Agendamento\",\r\n          edit: \"Editar Agendamento\",\r\n        },\r\n        form: {\r\n          body: \"Mensagem\",\r\n          contact: \"Contato\",\r\n          sendAt: \"Data de Agendamento\",\r\n          sentAt: \"Data de Envio\",\r\n        },\r\n        buttons: {\r\n          okAdd: \"Adicionar\",\r\n          okEdit: \"Salvar\",\r\n          cancel: \"Cancelar\",\r\n        },\r\n        success: \"Agendamento salvo com sucesso.\",\r\n      },\r\n      tagModal: {\r\n        title: {\r\n          add: \"Nova Tag\",\r\n          edit: \"Editar Tag\",\r\n        },\r\n        form: {\r\n          name: \"Nome\",\r\n          color: \"Cor\",\r\n        },\r\n        buttons: {\r\n          okAdd: \"Adicionar\",\r\n          okEdit: \"Salvar\",\r\n          cancel: \"Cancelar\",\r\n        },\r\n        success: \"Tag salvo com sucesso.\",\r\n      },\r\n      chat: {\r\n        noTicketMessage: \"Selecione um ticket para começar a conversar.\",\r\n      },\r\n      uploads: {\r\n        titles: {\r\n          titleUploadMsgDragDrop: \"ARRASTE E SOLTE ARQUIVOS NO CAMPO ABAIXO\",\r\n          titleFileList: \"Lista de arquivo(s)\"\r\n        },\r\n      },\r\n      ticketsManager: {\r\n        buttons: {\r\n          newTicket: \"Novo\",\r\n        },\r\n      },\r\n      ticketsQueueSelect: {\r\n        placeholder: \"Filas\",\r\n      },\r\n      tickets: {\r\n        toasts: {\r\n          deleted: \"O atendimento que você estava foi deletado.\",\r\n        },\r\n        notification: {\r\n          message: \"Mensagem de\",\r\n        },\r\n        tabs: {\r\n          open: { title: \"Abertas\" },\r\n          closed: { title: \"Resolvidos\" },\r\n          search: { title: \"Busca\" },\r\n        },\r\n        search: {\r\n          placeholder: \"Buscar atendimento e mensagens\",\r\n        },\r\n        buttons: {\r\n          showAll: \"Todos\",\r\n        },\r\n      },\r\n      transferTicketModal: {\r\n        title: \"Transferir Ticket\",\r\n        fieldLabel: \"Digite para buscar usuários\",\r\n        fieldQueueLabel: \"Transferir para fila\",\r\n        fieldQueuePlaceholder: \"Selecione uma fila\",\r\n        noOptions: \"Nenhum usuário encontrado com esse nome\",\r\n        buttons: {\r\n          ok: \"Transferir\",\r\n          cancel: \"Cancelar\",\r\n        },\r\n      },\r\n      ticketsList: {\r\n        pendingHeader: \"Aguardando\",\r\n        assignedHeader: \"Atendendo\",\r\n        noTicketsTitle: \"Nada aqui!\",\r\n        noTicketsMessage:\r\n          \"Nenhum atendimento encontrado com esse status ou termo pesquisado\",\r\n        buttons: {\r\n          accept: \"Aceitar\",\r\n          closed: \"Finalizar\",\r\n          reopen: \"Reabrir\"\r\n        },\r\n      },\r\n      newTicketModal: {\r\n        title: \"Criar Ticket\",\r\n        fieldLabel: \"Digite para pesquisar o contato\",\r\n        add: \"Adicionar\",\r\n        buttons: {\r\n          ok: \"Salvar\",\r\n          cancel: \"Cancelar\",\r\n        },\r\n      },\r\n      mainDrawer: {\r\n        listItems: {\r\n          dashboard: \"Dashboard\",\r\n          connections: \"Conexões\",\r\n          tickets: \"Atendimentos\",\r\n          quickMessages: \"Respostas Rápidas\",\r\n          contacts: \"Contatos\",\r\n          queues: \"Filas & Chatbot\",\r\n          tags: \"Tags\",\r\n          administration: \"Administração\",\r\n          users: \"Usuários\",\r\n          settings: \"Configurações\",\r\n          helps: \"Ajuda\",\r\n          messagesAPI: \"API\",\r\n          schedules: \"Agendamentos\",\r\n          campaigns: \"Campanhas\",\r\n          annoucements: \"Informativos\",\r\n          chats: \"Chat Interno\",\r\n          financeiro: \"Financeiro\",\r\n          files: \"Lista de arquivos\",\r\n          prompts: \"Open.Ai\",\r\n          queueIntegration: \"Integrações\",\r\n        },\r\n        appBar: {\r\n          user: {\r\n            profile: \"Perfil\",\r\n            logout: \"Sair\",\r\n          },\r\n        },\r\n      },\r\n      queueIntegration: {\r\n        title: \"Integrações\",\r\n        table: {\r\n          id: \"ID\",\r\n          type: \"Tipo\",\r\n          name: \"Nome\",\r\n          projectName: \"Nome do Projeto\",\r\n          language: \"Linguagem\",\r\n          lastUpdate: \"Ultima atualização\",\r\n          actions: \"Ações\",\r\n        },\r\n        buttons: {\r\n          add: \"Adicionar Projeto\",\r\n        },\r\n        searchPlaceholder: \"Pesquisar...\",\r\n        confirmationModal: {\r\n          deleteTitle: \"Excluir\",\r\n          deleteMessage:\r\n            \"Você tem certeza? Essa ação não pode ser revertida! e será removida das filas e conexões vinculadas\",\r\n        },\r\n      },\r\n      files: {\r\n        title: \"Lista de arquivos\",\r\n        table: {\r\n          name: \"Nome\",\r\n          contacts: \"Contatos\",\r\n          actions: \"Ação\",\r\n        },\r\n        toasts: {\r\n          deleted: \"Lista excluída com sucesso!\",\r\n          deletedAll: \"Todas as listas foram excluídas com sucesso!\",\r\n        },\r\n        buttons: {\r\n          add: \"Adicionar\",\r\n          deleteAll: \"Deletar Todos\",\r\n        },\r\n        confirmationModal: {\r\n          deleteTitle: \"Deletar\",\r\n          deleteAllTitle: \"Deletar Todos\",\r\n          deleteMessage: \"Tem certeza que deseja deletar esta lista?\",\r\n          deleteAllMessage: \"Tem certeza que deseja deletar todas as listas?\",\r\n        },\r\n      },\r\n      messagesAPI: {\r\n        title: \"API\",\r\n        textMessage: {\r\n          number: \"Número\",\r\n          body: \"Mensagem\",\r\n          token: \"Token cadastrado\",\r\n        },\r\n        mediaMessage: {\r\n          number: \"Número\",\r\n          body: \"Nome do arquivo\",\r\n          media: \"Arquivo\",\r\n          token: \"Token cadastrado\",\r\n        },\r\n      },\r\n      notifications: {\r\n        noTickets: \"Nenhuma notificação.\",\r\n      },\r\n      quickMessages: {\r\n        title: \"Respostas Rápidas\",\r\n        searchPlaceholder: \"Pesquisar...\",\r\n        noAttachment: \"Sem anexo\",\r\n        confirmationModal: {\r\n          deleteTitle: \"Exclusão\",\r\n          deleteMessage: \"Esta ação é irreversível! Deseja prosseguir?\",\r\n        },\r\n        buttons: {\r\n          add: \"Adicionar\",\r\n          attach: \"Anexar Arquivo\",\r\n          cancel: \"Cancelar\",\r\n          edit: \"Editar\",\r\n        },\r\n        toasts: {\r\n          success: \"Atalho adicionado com sucesso!\",\r\n          deleted: \"Atalho removido com sucesso!\",\r\n        },\r\n        dialog: {\r\n          title: \"Mensagem Rápida\",\r\n          shortcode: \"Atalho\",\r\n          message: \"Resposta\",\r\n          save: \"Salvar\",\r\n          cancel: \"Cancelar\",\r\n          geral: \"Permitir editar\",\r\n          add: \"Adicionar\",\r\n          edit: \"Editar\",\r\n          visao: \"Permitir visão\",\r\n        },\r\n        table: {\r\n          shortcode: \"Atalho\",\r\n          message: \"Mensagem\",\r\n          actions: \"Ações\",\r\n          mediaName: \"Nome do Arquivo\",\r\n          status: \"Status\",\r\n        },\r\n      },\r\n      messageVariablesPicker: {\r\n        label: \"Variavéis disponíveis\",\r\n        vars: {\r\n          contactFirstName: \"Primeiro Nome\",\r\n          contactName: \"Nome\",\r\n          greeting: \"Saudação\",\r\n          protocolNumber: \"Protocolo\",\r\n          date: \"Data\",\r\n          hour: \"Hora\",\r\n        },\r\n      },\r\n      contactLists: {\r\n        title: \"Listas de Contatos\",\r\n        table: {\r\n          name: \"Nome\",\r\n          contacts: \"Contatos\",\r\n          actions: \"Ações\",\r\n        },\r\n        buttons: {\r\n          add: \"Nova Lista\",\r\n        },\r\n        dialog: {\r\n          name: \"Nome\",\r\n          company: \"Empresa\",\r\n          okEdit: \"Editar\",\r\n          okAdd: \"Adicionar\",\r\n          add: \"Adicionar\",\r\n          edit: \"Editar\",\r\n          cancel: \"Cancelar\",\r\n        },\r\n        confirmationModal: {\r\n          deleteTitle: \"Excluir\",\r\n          deleteMessage: \"Esta ação não pode ser revertida.\",\r\n        },\r\n        toasts: {\r\n          deleted: \"Registro excluído\",\r\n        },\r\n      },\r\n      contactListItems: {\r\n        title: \"Contatos\",\r\n        searchPlaceholder: \"Pesquisa\",\r\n        buttons: {\r\n          add: \"Novo\",\r\n          lists: \"Listas\",\r\n          import: \"Importar\",\r\n        },\r\n        dialog: {\r\n          name: \"Nome\",\r\n          number: \"Número\",\r\n          whatsapp: \"Whatsapp\",\r\n          email: \"E-mail\",\r\n          okEdit: \"Editar\",\r\n          okAdd: \"Adicionar\",\r\n          add: \"Adicionar\",\r\n          edit: \"Editar\",\r\n          cancel: \"Cancelar\",\r\n        },\r\n        table: {\r\n          name: \"Nome\",\r\n          number: \"Número\",\r\n          whatsapp: \"Whatsapp\",\r\n          email: \"E-mail\",\r\n          actions: \"Ações\",\r\n        },\r\n        confirmationModal: {\r\n          deleteTitle: \"Excluir\",\r\n          deleteMessage: \"Esta ação não pode ser revertida.\",\r\n          importMessage: \"Deseja importar os contatos desta planilha? \",\r\n          importTitlte: \"Importar\",\r\n        },\r\n        toasts: {\r\n          deleted: \"Registro excluído\",\r\n        },\r\n      },\r\n      campaigns: {\r\n        title: \"Campanhas\",\r\n        searchPlaceholder: \"Pesquisa\",\r\n        buttons: {\r\n          add: \"Nova Campanha\",\r\n          contactLists: \"Listas de Contatos\",\r\n        },\r\n        table: {\r\n          name: \"Nome\",\r\n          whatsapp: \"Conexão\",\r\n          contactList: \"Lista de Contatos\",\r\n          status: \"Status\",\r\n          scheduledAt: \"Agendamento\",\r\n          completedAt: \"Concluída\",\r\n          confirmation: \"Confirmação\",\r\n          actions: \"Ações\",\r\n        },\r\n        dialog: {\r\n          new: \"Nova Campanha\",\r\n          update: \"Editar Campanha\",\r\n          readonly: \"Apenas Visualização\",\r\n          form: {\r\n            name: \"Nome\",\r\n            message1: \"Mensagem 1\",\r\n            message2: \"Mensagem 2\",\r\n            message3: \"Mensagem 3\",\r\n            message4: \"Mensagem 4\",\r\n            message5: \"Mensagem 5\",\r\n            confirmationMessage1: \"Mensagem de Confirmação 1\",\r\n            confirmationMessage2: \"Mensagem de Confirmação 2\",\r\n            confirmationMessage3: \"Mensagem de Confirmação 3\",\r\n            confirmationMessage4: \"Mensagem de Confirmação 4\",\r\n            confirmationMessage5: \"Mensagem de Confirmação 5\",\r\n            messagePlaceholder: \"Conteúdo da mensagem\",\r\n            whatsapp: \"Conexão\",\r\n            status: \"Status\",\r\n            scheduledAt: \"Agendamento\",\r\n            confirmation: \"Confirmação\",\r\n            contactList: \"Lista de Contato\",\r\n            tagList: \"Lista de Tags\",\r\n            fileList: \"Lista de Arquivos\"\r\n          },\r\n          buttons: {\r\n            add: \"Adicionar\",\r\n            edit: \"Atualizar\",\r\n            okadd: \"Ok\",\r\n            cancel: \"Cancelar Disparos\",\r\n            restart: \"Reiniciar Disparos\",\r\n            close: \"Fechar\",\r\n            attach: \"Anexar Arquivo\",\r\n          },\r\n        },\r\n        confirmationModal: {\r\n          deleteTitle: \"Excluir\",\r\n          deleteMessage: \"Esta ação não pode ser revertida.\",\r\n        },\r\n        toasts: {\r\n          success: \"Operação realizada com sucesso\",\r\n          cancel: \"Campanha cancelada\",\r\n          restart: \"Campanha reiniciada\",\r\n          deleted: \"Registro excluído\",\r\n        },\r\n      },\r\n      announcements: {\r\n        active: 'Ativo',\r\n        inactive: 'Inativo',\r\n        title: \"Informativos\",\r\n        searchPlaceholder: \"Pesquisa\",\r\n        buttons: {\r\n          add: \"Novo Informativo\",\r\n          contactLists: \"Listas de Informativos\",\r\n        },\r\n        table: {\r\n          priority: \"Prioridade\",\r\n          title: \"Title\",\r\n          text: \"Texto\",\r\n          mediaName: \"Arquivo\",\r\n          status: \"Status\",\r\n          actions: \"Ações\",\r\n        },\r\n        dialog: {\r\n          edit: \"Edição de Informativo\",\r\n          add: \"Novo Informativo\",\r\n          update: \"Editar Informativo\",\r\n          readonly: \"Apenas Visualização\",\r\n          form: {\r\n            priority: \"Prioridade\",\r\n            title: \"Title\",\r\n            text: \"Texto\",\r\n            mediaPath: \"Arquivo\",\r\n            status: \"Status\",\r\n          },\r\n          buttons: {\r\n            add: \"Adicionar\",\r\n            edit: \"Atualizar\",\r\n            okadd: \"Ok\",\r\n            cancel: \"Cancelar\",\r\n            close: \"Fechar\",\r\n            attach: \"Anexar Arquivo\",\r\n          },\r\n        },\r\n        confirmationModal: {\r\n          deleteTitle: \"Excluir\",\r\n          deleteMessage: \"Esta ação não pode ser revertida.\",\r\n        },\r\n        toasts: {\r\n          success: \"Operação realizada com sucesso\",\r\n          deleted: \"Registro excluído\",\r\n        },\r\n      },\r\n      campaignsConfig: {\r\n        title: \"Configurações de Campanhas\",\r\n      },\r\n      queues: {\r\n        title: \"Filas & Chatbot\",\r\n        table: {\r\n          name: \"Nome\",\r\n          color: \"Cor\",\r\n          greeting: \"Mensagem de saudação\",\r\n          actions: \"Ações\",\r\n          orderQueue: \"Ordenação da fila (bot)\",\r\n        },\r\n        buttons: {\r\n          add: \"Adicionar fila\",\r\n        },\r\n        confirmationModal: {\r\n          deleteTitle: \"Excluir\",\r\n          deleteMessage:\r\n            \"Você tem certeza? Essa ação não pode ser revertida! Os atendimentos dessa fila continuarão existindo, mas não terão mais nenhuma fila atribuída.\",\r\n        },\r\n      },\r\n      queueSelect: {\r\n        inputLabel: \"Filas\",\r\n      },\r\n      users: {\r\n        title: \"Usuários\",\r\n        table: {\r\n          name: \"Nome\",\r\n          email: \"Email\",\r\n          profile: \"Perfil\",\r\n          actions: \"Ações\",\r\n        },\r\n        buttons: {\r\n          add: \"Adicionar usuário\",\r\n        },\r\n        toasts: {\r\n          deleted: \"Usuário excluído com sucesso.\",\r\n        },\r\n        confirmationModal: {\r\n          deleteTitle: \"Excluir\",\r\n          deleteMessage:\r\n            \"Todos os dados do usuário serão perdidos. Os atendimento abertos deste usuário serão movidos para a fila.\",\r\n        },\r\n      },\r\n      helps: {\r\n        title: \"Central de Ajuda\",\r\n      },\r\n      schedules: {\r\n        title: \"Agendamentos\",\r\n        confirmationModal: {\r\n          deleteTitle: \"Você tem certeza que quer excluir este Agendamento?\",\r\n          deleteMessage: \"Esta ação não pode ser revertida.\",\r\n        },\r\n        table: {\r\n          contact: \"Contato\",\r\n          body: \"Mensagem\",\r\n          sendAt: \"Data de Agendamento\",\r\n          sentAt: \"Data de Envio\",\r\n          status: \"Status\",\r\n          actions: \"Ações\",\r\n        },\r\n        buttons: {\r\n          add: \"Novo Agendamento\",\r\n        },\r\n        toasts: {\r\n          deleted: \"Agendamento excluído com sucesso.\",\r\n        },\r\n      },\r\n      tags: {\r\n        title: \"Tags\",\r\n        confirmationModal: {\r\n          deleteTitle: \"Você tem certeza que quer excluir esta Tag?\",\r\n          deleteMessage: \"Esta ação não pode ser revertida.\",\r\n        },\r\n        table: {\r\n          name: \"Nome\",\r\n          color: \"Cor\",\r\n          tickets: \"Registros Tagdos\",\r\n          actions: \"Ações\",\r\n        },\r\n        buttons: {\r\n          add: \"Nova Tag\",\r\n        },\r\n        toasts: {\r\n          deleted: \"Tag excluído com sucesso.\",\r\n        },\r\n      },\r\n      settings: {\r\n        success: \"Configurações salvas com sucesso.\",\r\n        title: \"Configurações\",\r\n        settings: {\r\n          userCreation: {\r\n            name: \"Criação de usuário\",\r\n            options: {\r\n              enabled: \"Ativado\",\r\n              disabled: \"Desativado\",\r\n            },\r\n          },\r\n        },\r\n      },\r\n      messagesList: {\r\n        header: {\r\n          assignedTo: \"Atribuído à:\",\r\n          buttons: {\r\n            return: \"Retornar\",\r\n            resolve: \"Resolver\",\r\n            reopen: \"Reabrir\",\r\n            accept: \"Aceitar\",\r\n          },\r\n        },\r\n      },\r\n      messagesInput: {\r\n        placeholderOpen: \"Digite uma mensagem\",\r\n        placeholderClosed:\r\n          \"Reabra ou aceite esse ticket para enviar uma mensagem.\",\r\n        signMessage: \"Assinar\",\r\n      },\r\n      contactDrawer: {\r\n        header: \"Dados do contato\",\r\n        buttons: {\r\n          edit: \"Editar contato\",\r\n        },\r\n        extraInfo: \"Outras informações\",\r\n      },\r\n      fileModal: {\r\n        title: {\r\n          add: \"Adicionar lista de arquivos\",\r\n          edit: \"Editar lista de arquivos\",\r\n        },\r\n        buttons: {\r\n          okAdd: \"Salvar\",\r\n          okEdit: \"Editar\",\r\n          cancel: \"Cancelar\",\r\n          fileOptions: \"Adicionar arquivo\",\r\n        },\r\n        form: {\r\n          name: \"Nome da lista de arquivos\",\r\n          message: \"Detalhes da lista\",\r\n          fileOptions: \"Lista de arquivos\",\r\n          extraName: \"Mensagem para enviar com arquivo\",\r\n          extraValue: \"Valor da opção\",\r\n        },\r\n        success: \"Lista de arquivos salva com sucesso!\",\r\n      },\r\n      ticketOptionsMenu: {\r\n        schedule: \"Agendamento\",\r\n        delete: \"Deletar\",\r\n        transfer: \"Transferir\",\r\n        registerAppointment: \"Observações do Contato\",\r\n        appointmentsModal: {\r\n          title: \"Observações do Contato\",\r\n          textarea: \"Observação\",\r\n          placeholder: \"Insira aqui a informação que deseja registrar\",\r\n        },\r\n        confirmationModal: {\r\n          title: \"Deletar o ticket do contato\",\r\n          message:\r\n            \"Atenção! Todas as mensagens relacionadas ao ticket serão perdidas.\",\r\n        },\r\n        buttons: {\r\n          delete: \"Excluir\",\r\n          cancel: \"Cancelar\",\r\n        },\r\n      },\r\n      confirmationModal: {\r\n        buttons: {\r\n          confirm: \"Ok\",\r\n          cancel: \"Cancelar\",\r\n        },\r\n      },\r\n      messageOptionsMenu: {\r\n        delete: \"Deletar\",\r\n        reply: \"Responder\",\r\n        confirmationModal: {\r\n          title: \"Apagar mensagem?\",\r\n          message: \"Esta ação não pode ser revertida.\",\r\n        },\r\n      },\r\n      backendErrors: {\r\n        ERR_NO_OTHER_WHATSAPP: \"Deve haver pelo menos um WhatsApp padrão.\",\r\n        ERR_NO_DEF_WAPP_FOUND:\r\n          \"Nenhum WhatsApp padrão encontrado. Verifique a página de conexões.\",\r\n        ERR_WAPP_NOT_INITIALIZED:\r\n          \"Esta sessão do WhatsApp não foi inicializada. Verifique a página de conexões.\",\r\n        ERR_WAPP_CHECK_CONTACT:\r\n          \"Não foi possível verificar o contato do WhatsApp. Verifique a página de conexões\",\r\n        ERR_WAPP_INVALID_CONTACT: \"Este não é um número de Whatsapp válido.\",\r\n        ERR_WAPP_DOWNLOAD_MEDIA:\r\n          \"Não foi possível baixar mídia do WhatsApp. Verifique a página de conexões.\",\r\n        ERR_INVALID_CREDENTIALS:\r\n          \"Erro de autenticação. Por favor, tente novamente.\",\r\n        ERR_SENDING_WAPP_MSG:\r\n          \"Erro ao enviar mensagem do WhatsApp. Verifique a página de conexões.\",\r\n        ERR_DELETE_WAPP_MSG: \"Não foi possível excluir a mensagem do WhatsApp.\",\r\n        ERR_OTHER_OPEN_TICKET: \"Já existe um tíquete aberto para este contato.\",\r\n        ERR_SESSION_EXPIRED: \"Sessão expirada. Por favor entre.\",\r\n        ERR_USER_CREATION_DISABLED:\r\n          \"A criação do usuário foi desabilitada pelo administrador.\",\r\n        ERR_NO_PERMISSION: \"Você não tem permissão para acessar este recurso.\",\r\n        ERR_DUPLICATED_CONTACT: \"Já existe um contato com este número.\",\r\n        ERR_NO_SETTING_FOUND: \"Nenhuma configuração encontrada com este ID.\",\r\n        ERR_NO_CONTACT_FOUND: \"Nenhum contato encontrado com este ID.\",\r\n        ERR_NO_TICKET_FOUND: \"Nenhum tíquete encontrado com este ID.\",\r\n        ERR_NO_USER_FOUND: \"Nenhum usuário encontrado com este ID.\",\r\n        ERR_NO_WAPP_FOUND: \"Nenhum WhatsApp encontrado com este ID.\",\r\n        ERR_CREATING_MESSAGE: \"Erro ao criar mensagem no banco de dados.\",\r\n        ERR_CREATING_TICKET: \"Erro ao criar tíquete no banco de dados.\",\r\n        ERR_FETCH_WAPP_MSG:\r\n          \"Erro ao buscar a mensagem no WhtasApp, talvez ela seja muito antiga.\",\r\n        ERR_QUEUE_COLOR_ALREADY_EXISTS:\r\n          \"Esta cor já está em uso, escolha outra.\",\r\n        ERR_WAPP_GREETING_REQUIRED:\r\n          \"A mensagem de saudação é obrigatório quando há mais de uma fila.\",\r\n      },\r\n    },\r\n  },\r\n};\r\n\r\nexport { messages };\r\n","import { messages as portugueseMessages } from \"./pt\";\r\nimport { messages as englishMessages } from \"./en\";\r\nimport { messages as spanishMessages } from \"./es\";\r\n\r\nconst messages = {\r\n\t...portugueseMessages,\r\n\t...englishMessages,\r\n\t...spanishMessages,\r\n};\r\n\r\nexport { messages };\r\n","const messages = {\r\n\ten: {\r\n\t\ttranslations: {\r\n\t\t\tsignup: {\r\n\t\t\t\ttitle: \"Sign up\",\r\n\t\t\t\ttoasts: {\r\n\t\t\t\t\tsuccess: \"User created successfully! Please login!\",\r\n\t\t\t\t\tfail: \"Error creating user. Check the reported data.\",\r\n\t\t\t\t},\r\n\t\t\t\tform: {\r\n\t\t\t\t\tname: \"Name\",\r\n\t\t\t\t\temail: \"Email\",\r\n\t\t\t\t\tpassword: \"Password\",\r\n\t\t\t\t},\r\n\t\t\t\tbuttons: {\r\n\t\t\t\t\tsubmit: \"Register\",\r\n\t\t\t\t\tlogin: \"Already have an account? Log in!\",\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tlogin: {\r\n\t\t\t\ttitle: \"Login\",\r\n\t\t\t\tform: {\r\n\t\t\t\t\temail: \"Email\",\r\n\t\t\t\t\tpassword: \"Password\",\r\n\t\t\t\t},\r\n\t\t\t\tbuttons: {\r\n\t\t\t\t\tsubmit: \"Enter\",\r\n\t\t\t\t\tregister: \"Don't have an account? Register!\",\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tauth: {\r\n\t\t\t\ttoasts: {\r\n\t\t\t\t\tsuccess: \"Login successfully!\",\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tdashboard: {\r\n\t\t\t\tcharts: {\r\n\t\t\t\t\tperDay: {\r\n\t\t\t\t\t\ttitle: \"Tickets today: \",\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tconnections: {\r\n\t\t\t\ttitle: \"Connections\",\r\n\t\t\t\ttoasts: {\r\n\t\t\t\t\tdeleted: \"WhatsApp connection deleted sucessfully!\",\r\n\t\t\t\t},\r\n\t\t\t\tconfirmationModal: {\r\n\t\t\t\t\tdeleteTitle: \"Delete\",\r\n\t\t\t\t\tdeleteMessage: \"Are you sure? It cannot be reverted.\",\r\n\t\t\t\t\tdisconnectTitle: \"Disconnect\",\r\n\t\t\t\t\tdisconnectMessage: \"Are you sure? You'll need to read QR Code again.\",\r\n\t\t\t\t},\r\n\t\t\t\tbuttons: {\r\n\t\t\t\t\tadd: \"Add WhatsApp\",\r\n\t\t\t\t\tdisconnect: \"Disconnect\",\r\n\t\t\t\t\ttryAgain: \"Try Again\",\r\n\t\t\t\t\tqrcode: \"QR CODE\",\r\n\t\t\t\t\tnewQr: \"New QR CODE\",\r\n\t\t\t\t\tconnecting: \"Connectiing\",\r\n\t\t\t\t},\r\n\t\t\t\ttoolTips: {\r\n\t\t\t\t\tdisconnected: {\r\n\t\t\t\t\t\ttitle: \"Failed to start WhatsApp session\",\r\n\t\t\t\t\t\tcontent:\r\n\t\t\t\t\t\t\t\"Make sure your cell phone is connected to the internet and try again, or request a new QR Code\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tqrcode: {\r\n\t\t\t\t\t\ttitle: \"Waiting for QR Code read\",\r\n\t\t\t\t\t\tcontent:\r\n\t\t\t\t\t\t\t\"Click on 'QR CODE' button and read the QR Code with your cell phone to start session\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tconnected: {\r\n\t\t\t\t\t\ttitle: \"Connection established\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttimeout: {\r\n\t\t\t\t\t\ttitle: \"Connection with cell phone has been lost\",\r\n\t\t\t\t\t\tcontent:\r\n\t\t\t\t\t\t\t\"Make sure your cell phone is connected to the internet and WhatsApp is open, or click on 'Disconnect' button to get a new QRcode\",\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\ttable: {\r\n\t\t\t\t\tname: \"Name\",\r\n\t\t\t\t\tstatus: \"Status\",\r\n\t\t\t\t\tlastUpdate: \"Last Update\",\r\n\t\t\t\t\tdefault: \"Default\",\r\n\t\t\t\t\tactions: \"Actions\",\r\n\t\t\t\t\tsession: \"Session\",\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\twhatsappModal: {\r\n\t\t\t\ttitle: {\r\n\t\t\t\t\tadd: \"Add WhatsApp\",\r\n\t\t\t\t\tedit: \"Edit WhatsApp\",\r\n\t\t\t\t},\r\n\t\t\t\tform: {\r\n\t\t\t\t\tname: \"Name\",\r\n\t\t\t\t\tdefault: \"Default\",\r\n\t\t\t\t},\r\n\t\t\t\tbuttons: {\r\n\t\t\t\t\tokAdd: \"Add\",\r\n\t\t\t\t\tokEdit: \"Save\",\r\n\t\t\t\t\tcancel: \"Cancel\",\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: \"WhatsApp saved successfully.\",\r\n\t\t\t},\r\n\t\t\tqrCode: {\r\n\t\t\t\tmessage: \"Read QrCode to start the session\",\r\n\t\t\t},\r\n\t\t\tcontacts: {\r\n\t\t\t\ttitle: \"Contacts\",\r\n\t\t\t\ttoasts: {\r\n\t\t\t\t\tdeleted: \"Contact deleted sucessfully!\",\r\n\t\t\t\t},\r\n\t\t\t\tsearchPlaceholder: \"Search ...\",\r\n\t\t\t\tconfirmationModal: {\r\n\t\t\t\t\tdeleteTitle: \"Delete\",\r\n\t\t\t\t\timportTitlte: \"Import contacts\",\r\n\t\t\t\t\tdeleteMessage:\r\n\t\t\t\t\t\t\"Are you sure you want to delete this contact? All related tickets will be lost.\",\r\n\t\t\t\t\timportMessage: \"Do you want to import all contacts from the phone?\",\r\n\t\t\t\t},\r\n\t\t\t\tbuttons: {\r\n\t\t\t\t\timport: \"Import Contacts\",\r\n\t\t\t\t\tadd: \"Add Contact\",\r\n\t\t\t\t},\r\n\t\t\t\ttable: {\r\n\t\t\t\t\tname: \"Name\",\r\n\t\t\t\t\twhatsapp: \"WhatsApp\",\r\n\t\t\t\t\temail: \"Email\",\r\n\t\t\t\t\tactions: \"Actions\",\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tcontactModal: {\r\n\t\t\t\ttitle: {\r\n\t\t\t\t\tadd: \"Add contact\",\r\n\t\t\t\t\tedit: \"Edit contact\",\r\n\t\t\t\t},\r\n\t\t\t\tform: {\r\n\t\t\t\t\tmainInfo: \"Contact details\",\r\n\t\t\t\t\textraInfo: \"Additional information\",\r\n\t\t\t\t\tname: \"Name\",\r\n\t\t\t\t\tnumber: \"Whatsapp number\",\r\n\t\t\t\t\temail: \"Email\",\r\n\t\t\t\t\textraName: \"Field name\",\r\n\t\t\t\t\textraValue: \"Value\",\r\n\t\t\t\t},\r\n\t\t\t\tbuttons: {\r\n\t\t\t\t\taddExtraInfo: \"Add information\",\r\n\t\t\t\t\tokAdd: \"Add\",\r\n\t\t\t\t\tokEdit: \"Save\",\r\n\t\t\t\t\tcancel: \"Cancel\",\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: \"Contact saved successfully.\",\r\n\t\t\t},\r\n\t\t\tqueueModal: {\r\n\t\t\t\ttitle: {\r\n\t\t\t\t\tadd: \"Add queue\",\r\n\t\t\t\t\tedit: \"Edit queue\",\r\n\t\t\t\t},\r\n\t\t\t\tform: {\r\n\t\t\t\t\tname: \"Name\",\r\n\t\t\t\t\tcolor: \"Color\",\r\n\t\t\t\t\tgreetingMessage: \"Greeting Message\",\r\n\t\t\t\t},\r\n\t\t\t\tbuttons: {\r\n\t\t\t\t\tokAdd: \"Add\",\r\n\t\t\t\t\tokEdit: \"Save\",\r\n\t\t\t\t\tcancel: \"Cancel\",\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tuserModal: {\r\n\t\t\t\ttitle: {\r\n\t\t\t\t\tadd: \"Add user\",\r\n\t\t\t\t\tedit: \"Edit user\",\r\n\t\t\t\t},\r\n\t\t\t\tform: {\r\n\t\t\t\t\tname: \"Name\",\r\n\t\t\t\t\temail: \"Email\",\r\n\t\t\t\t\tpassword: \"Password\",\r\n\t\t\t\t\tprofile: \"Profile\",\r\n\t\t\t\t},\r\n\t\t\t\tbuttons: {\r\n\t\t\t\t\tokAdd: \"Add\",\r\n\t\t\t\t\tokEdit: \"Save\",\r\n\t\t\t\t\tcancel: \"Cancel\",\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: \"User saved successfully.\",\r\n\t\t\t},\r\n\t\t\tchat: {\r\n\t\t\t\tnoTicketMessage: \"Select a ticket to start chatting.\",\r\n\t\t\t},\r\n\t\t\tticketsManager: {\r\n\t\t\t\tbuttons: {\r\n\t\t\t\t\tnewTicket: \"New\",\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tticketsQueueSelect: {\r\n\t\t\t\tplaceholder: \"Queues\",\r\n\t\t\t},\r\n\t\t\ttickets: {\r\n\t\t\t\ttoasts: {\r\n\t\t\t\t\tdeleted: \"The ticket you were on has been deleted.\",\r\n\t\t\t\t},\r\n\t\t\t\tnotification: {\r\n\t\t\t\t\tmessage: \"Message from\",\r\n\t\t\t\t},\r\n\t\t\t\ttabs: {\r\n\t\t\t\t\topen: { title: \"Inbox\" },\r\n\t\t\t\t\tclosed: { title: \"Resolved\" },\r\n\t\t\t\t\tsearch: { title: \"Search\" },\r\n\t\t\t\t},\r\n\t\t\t\tsearch: {\r\n\t\t\t\t\tplaceholder: \"Search tickets and messages.\",\r\n\t\t\t\t},\r\n\t\t\t\tbuttons: {\r\n\t\t\t\t\tshowAll: \"All\",\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\ttransferTicketModal: {\r\n\t\t\t\ttitle: \"Transfer Ticket\",\r\n\t\t\t\tfieldLabel: \"Type to search for users\",\r\n\t\t\t\tnoOptions: \"No user found with this name\",\r\n\t\t\t\tbuttons: {\r\n\t\t\t\t\tok: \"Transfer\",\r\n\t\t\t\t\tcancel: \"Cancel\",\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tticketsList: {\r\n\t\t\t\tpendingHeader: \"Queue\",\r\n\t\t\t\tassignedHeader: \"Working on\",\r\n\t\t\t\tnoTicketsTitle: \"Nothing here!\",\r\n\t\t\t\tnoTicketsMessage: \"No tickets found with this status or search term.\",\r\n\t\t\t\tbuttons: {\r\n\t\t\t\t\taccept: \"Accept\",\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tnewTicketModal: {\r\n\t\t\t\ttitle: \"Create Ticket\",\r\n\t\t\t\tfieldLabel: \"Type to search for a contact\",\r\n\t\t\t\tadd: \"Add\",\r\n\t\t\t\tbuttons: {\r\n\t\t\t\t\tok: \"Save\",\r\n\t\t\t\t\tcancel: \"Cancel\",\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tmainDrawer: {\r\n\t\t\t\tlistItems: {\r\n\t\t\t\t\tdashboard: \"Dashboard\",\r\n\t\t\t\t\tconnections: \"Connections\",\r\n\t\t\t\t\ttickets: \"Tickets\",\r\n\t\t\t\t\tcontacts: \"Contacts\",\r\n\t\t\t\t\tqueues: \"Queues\",\r\n\t\t\t\t\tadministration: \"Administration\",\r\n\t\t\t\t\tusers: \"Users\",\r\n\t\t\t\t\tsettings: \"Settings\",\r\n\t\t\t\t},\r\n\t\t\t\tappBar: {\r\n\t\t\t\t\tuser: {\r\n\t\t\t\t\t\tprofile: \"Profile\",\r\n\t\t\t\t\t\tlogout: \"Logout\",\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tnotifications: {\r\n\t\t\t\tnoTickets: \"No notifications.\",\r\n\t\t\t},\r\n\t\t\tqueues: {\r\n\t\t\t\ttitle: \"Queues\",\r\n\t\t\t\ttable: {\r\n\t\t\t\t\tname: \"Name\",\r\n\t\t\t\t\tcolor: \"Color\",\r\n\t\t\t\t\tgreeting: \"Greeting message\",\r\n\t\t\t\t\tactions: \"Actions\",\r\n\t\t\t\t},\r\n\t\t\t\tbuttons: {\r\n\t\t\t\t\tadd: \"Add queue\",\r\n\t\t\t\t},\r\n\t\t\t\tconfirmationModal: {\r\n\t\t\t\t\tdeleteTitle: \"Delete\",\r\n\t\t\t\t\tdeleteMessage:\r\n\t\t\t\t\t\t\"Are you sure? It cannot be reverted! Tickets in this queue will still exist, but will not have any queues assigned.\",\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tqueueSelect: {\r\n\t\t\t\tinputLabel: \"Queues\",\r\n\t\t\t},\r\n\t\t\tusers: {\r\n\t\t\t\ttitle: \"Users\",\r\n\t\t\t\ttable: {\r\n\t\t\t\t\tname: \"Name\",\r\n\t\t\t\t\temail: \"Email\",\r\n\t\t\t\t\tprofile: \"Profile\",\r\n\t\t\t\t\tactions: \"Actions\",\r\n\t\t\t\t},\r\n\t\t\t\tbuttons: {\r\n\t\t\t\t\tadd: \"Add user\",\r\n\t\t\t\t},\r\n\t\t\t\ttoasts: {\r\n\t\t\t\t\tdeleted: \"User deleted sucessfully.\",\r\n\t\t\t\t},\r\n\t\t\t\tconfirmationModal: {\r\n\t\t\t\t\tdeleteTitle: \"Delete\",\r\n\t\t\t\t\tdeleteMessage:\r\n\t\t\t\t\t\t\"All user data will be lost. Users' open tickets will be moved to queue.\",\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tsettings: {\r\n\t\t\t\tsuccess: \"Settings saved successfully.\",\r\n\t\t\t\ttitle: \"Settings\",\r\n\t\t\t\tsettings: {\r\n\t\t\t\t\tuserCreation: {\r\n\t\t\t\t\t\tname: \"User creation\",\r\n\t\t\t\t\t\toptions: {\r\n\t\t\t\t\t\t\tenabled: \"Enabled\",\r\n\t\t\t\t\t\t\tdisabled: \"Disabled\",\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tmessagesList: {\r\n\t\t\t\theader: {\r\n\t\t\t\t\tassignedTo: \"Assigned to:\",\r\n\t\t\t\t\tbuttons: {\r\n\t\t\t\t\t\treturn: \"Return\",\r\n\t\t\t\t\t\tresolve: \"Resolve\",\r\n\t\t\t\t\t\treopen: \"Reopen\",\r\n\t\t\t\t\t\taccept: \"Accept\",\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tmessagesInput: {\r\n\t\t\t\tplaceholderOpen: \"Type a message\",\r\n\t\t\t\tplaceholderClosed: \"Reopen or accept this ticket to send a message.\",\r\n\t\t\t\tsignMessage: \"Sign\",\r\n\t\t\t},\r\n\t\t\tcontactDrawer: {\r\n\t\t\t\theader: \"Contact details\",\r\n\t\t\t\tbuttons: {\r\n\t\t\t\t\tedit: \"Edit contact\",\r\n\t\t\t\t},\r\n\t\t\t\textraInfo: \"Other information\",\r\n\t\t\t},\r\n\t\t\tticketOptionsMenu: {\r\n\t\t\t\tdelete: \"Delete\",\r\n\t\t\t\ttransfer: \"Transfer\",\r\n\t\t\t\tconfirmationModal: {\r\n\t\t\t\t\ttitle: \"Delete ticket #\",\r\n\t\t\t\t\ttitleFrom: \"from contact \",\r\n\t\t\t\t\tmessage: \"Attention! All ticket's related messages will be lost.\",\r\n\t\t\t\t},\r\n\t\t\t\tbuttons: {\r\n\t\t\t\t\tdelete: \"Delete\",\r\n\t\t\t\t\tcancel: \"Cancel\",\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tconfirmationModal: {\r\n\t\t\t\tbuttons: {\r\n\t\t\t\t\tconfirm: \"Ok\",\r\n\t\t\t\t\tcancel: \"Cancel\",\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tmessageOptionsMenu: {\r\n\t\t\t\tdelete: \"Delete\",\r\n\t\t\t\treply: \"Reply\",\r\n\t\t\t\tconfirmationModal: {\r\n\t\t\t\t\ttitle: \"Delete message?\",\r\n\t\t\t\t\tmessage: \"This action cannot be reverted.\",\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tbackendErrors: {\r\n\t\t\t\tERR_NO_OTHER_WHATSAPP:\r\n\t\t\t\t\t\"There must be at lest one default WhatsApp connection.\",\r\n\t\t\t\tERR_NO_DEF_WAPP_FOUND:\r\n\t\t\t\t\t\"No default WhatsApp found. Check connections page.\",\r\n\t\t\t\tERR_WAPP_NOT_INITIALIZED:\r\n\t\t\t\t\t\"This WhatsApp session is not initialized. Check connections page.\",\r\n\t\t\t\tERR_WAPP_CHECK_CONTACT:\r\n\t\t\t\t\t\"Could not check WhatsApp contact. Check connections page.\",\r\n\t\t\t\tERR_WAPP_INVALID_CONTACT: \"This is not a valid whatsapp number.\",\r\n\t\t\t\tERR_WAPP_DOWNLOAD_MEDIA:\r\n\t\t\t\t\t\"Could not download media from WhatsApp. Check connections page.\",\r\n\t\t\t\tERR_INVALID_CREDENTIALS: \"Authentication error. Please try again.\",\r\n\t\t\t\tERR_SENDING_WAPP_MSG:\r\n\t\t\t\t\t\"Error sending WhatsApp message. Check connections page.\",\r\n\t\t\t\tERR_DELETE_WAPP_MSG: \"Couldn't delete message from WhatsApp.\",\r\n\t\t\t\tERR_OTHER_OPEN_TICKET:\r\n\t\t\t\t\t\"There's already an open ticket for this contact.\",\r\n\t\t\t\tERR_SESSION_EXPIRED: \"Session expired. Please login.\",\r\n\t\t\t\tERR_USER_CREATION_DISABLED:\r\n\t\t\t\t\t\"User creation was disabled by administrator.\",\r\n\t\t\t\tERR_NO_PERMISSION: \"You don't have permission to access this resource.\",\r\n\t\t\t\tERR_DUPLICATED_CONTACT: \"A contact with this number already exists.\",\r\n\t\t\t\tERR_NO_SETTING_FOUND: \"No setting found with this ID.\",\r\n\t\t\t\tERR_NO_CONTACT_FOUND: \"No contact found with this ID.\",\r\n\t\t\t\tERR_NO_TICKET_FOUND: \"No ticket found with this ID.\",\r\n\t\t\t\tERR_NO_USER_FOUND: \"No user found with this ID.\",\r\n\t\t\t\tERR_NO_WAPP_FOUND: \"No WhatsApp found with this ID.\",\r\n\t\t\t\tERR_CREATING_MESSAGE: \"Error while creating message on database.\",\r\n\t\t\t\tERR_CREATING_TICKET: \"Error while creating ticket on database.\",\r\n\t\t\t\tERR_FETCH_WAPP_MSG:\r\n\t\t\t\t\t\"Error fetching the message in WhtasApp, maybe it is too old.\",\r\n\t\t\t\tERR_QUEUE_COLOR_ALREADY_EXISTS:\r\n\t\t\t\t\t\"This color is already in use, pick another one.\",\r\n\t\t\t\tERR_WAPP_GREETING_REQUIRED:\r\n\t\t\t\t\t\"Greeting message is required if there is more than one queue.\",\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n};\r\n\r\nexport { messages };\r\n","const messages = {\r\n\tes: {\r\n\t\ttranslations: {\r\n\t\t\tsignup: {\r\n\t\t\t\ttitle: \"Registro\",\r\n\t\t\t\ttoasts: {\r\n\t\t\t\t\tsuccess:\r\n\t\t\t\t\t\t\"¡El usuario ha sido creado satisfactoriamente! ¡Ahora inicia sesión!\",\r\n\t\t\t\t\tfail: \"Error creando el usuario. Verifica la data reportada.\",\r\n\t\t\t\t},\r\n\t\t\t\tform: {\r\n\t\t\t\t\tname: \"Nombre\",\r\n\t\t\t\t\temail: \"Correo Electrónico\",\r\n\t\t\t\t\tpassword: \"Contraseña\",\r\n\t\t\t\t},\r\n\t\t\t\tbuttons: {\r\n\t\t\t\t\tsubmit: \"Regístrate\",\r\n\t\t\t\t\tlogin: \"¿Ya tienes una cuenta? ¡Inicia sesión!\",\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tlogin: {\r\n\t\t\t\ttitle: \"Inicio de Sesión\",\r\n\t\t\t\tform: {\r\n\t\t\t\t\temail: \"Correo Electrónico\",\r\n\t\t\t\t\tpassword: \"Contraseña\",\r\n\t\t\t\t},\r\n\t\t\t\tbuttons: {\r\n\t\t\t\t\tsubmit: \"Ingresa\",\r\n\t\t\t\t\tregister: \"¿No tienes cuenta? ¡Regístrate!\",\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tauth: {\r\n\t\t\t\ttoasts: {\r\n\t\t\t\t\tsuccess: \"¡Inicio de sesión exitoso!\",\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tdashboard: {\r\n\t\t\t\tcharts: {\r\n\t\t\t\t\tperDay: {\r\n\t\t\t\t\t\ttitle: \"Tickets hoy: \",\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tconnections: {\r\n\t\t\t\ttitle: \"Conexiones\",\r\n\t\t\t\ttoasts: {\r\n\t\t\t\t\tdeleted:\r\n\t\t\t\t\t\t\"¡La conexión de WhatsApp ha sido borrada satisfactoriamente!\",\r\n\t\t\t\t},\r\n\t\t\t\tconfirmationModal: {\r\n\t\t\t\t\tdeleteTitle: \"Borrar\",\r\n\t\t\t\t\tdeleteMessage: \"¿Estás seguro? Este proceso no puede ser revertido.\",\r\n\t\t\t\t\tdisconnectTitle: \"Desconectar\",\r\n\t\t\t\t\tdisconnectMessage: \"Estás seguro? Deberá volver a leer el código QR\",\r\n\t\t\t\t},\r\n\t\t\t\tbuttons: {\r\n\t\t\t\t\tadd: \"Agrega WhatsApp\",\r\n\t\t\t\t\tdisconnect: \"Desconectar\",\r\n\t\t\t\t\ttryAgain: \"Inténtalo de nuevo\",\r\n\t\t\t\t\tqrcode: \"QR CODE\",\r\n\t\t\t\t\tnewQr: \"Nuevo QR CODE\",\r\n\t\t\t\t\tconnecting: \"Conectando\",\r\n\t\t\t\t},\r\n\t\t\t\ttoolTips: {\r\n\t\t\t\t\tdisconnected: {\r\n\t\t\t\t\t\ttitle: \"No se pudo iniciar la sesión de WhatsApp\",\r\n\t\t\t\t\t\tcontent:\r\n\t\t\t\t\t\t\t\"Asegúrese de que su teléfono celular esté conectado a Internet y vuelva a intentarlo o solicite un nuevo código QR\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tqrcode: {\r\n\t\t\t\t\t\ttitle: \"Esperando la lectura del código QR\",\r\n\t\t\t\t\t\tcontent:\r\n\t\t\t\t\t\t\t\"Haga clic en el botón 'CÓDIGO QR' y lea el Código QR con su teléfono celular para iniciar la sesión\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tconnected: {\r\n\t\t\t\t\t\ttitle: \"Conexión establecida\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttimeout: {\r\n\t\t\t\t\t\ttitle: \"Se perdió la conexión con el teléfono celular\",\r\n\t\t\t\t\t\tcontent:\r\n\t\t\t\t\t\t\t\"Asegúrese de que su teléfono celular esté conectado a Internet y que WhatsApp esté abierto, o haga clic en el botón 'Desconectar' para obtener un nuevo código QR\",\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\ttable: {\r\n\t\t\t\t\tname: \"Nombre\",\r\n\t\t\t\t\tstatus: \"Estado\",\r\n\t\t\t\t\tlastUpdate: \"Última Actualización\",\r\n\t\t\t\t\tdefault: \"Por Defecto\",\r\n\t\t\t\t\tactions: \"Acciones\",\r\n\t\t\t\t\tsession: \"Sesión\",\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\twhatsappModal: {\r\n\t\t\t\ttitle: {\r\n\t\t\t\t\tadd: \"Agrega WhatsApp\",\r\n\t\t\t\t\tedit: \"Edita WhatsApp\",\r\n\t\t\t\t},\r\n\t\t\t\tform: {\r\n\t\t\t\t\tname: \"Nombre\",\r\n\t\t\t\t\tdefault: \"Por Defecto\",\r\n\t\t\t\t},\r\n\t\t\t\tbuttons: {\r\n\t\t\t\t\tokAdd: \"Agregar\",\r\n\t\t\t\t\tokEdit: \"Guardar\",\r\n\t\t\t\t\tcancel: \"Cancelar\",\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: \"WhatsApp guardado satisfactoriamente.\",\r\n\t\t\t},\r\n\t\t\tqrCode: {\r\n\t\t\t\tmessage: \"Lée el código QR para empezar la sesión.\",\r\n\t\t\t},\r\n\t\t\tcontacts: {\r\n\t\t\t\ttitle: \"Contactos\",\r\n\t\t\t\ttoasts: {\r\n\t\t\t\t\tdeleted: \"¡Contacto borrado satisfactoriamente!\",\r\n\t\t\t\t},\r\n\t\t\t\tsearchPlaceholder: \"Buscar...\",\r\n\t\t\t\tconfirmationModal: {\r\n\t\t\t\t\tdeleteTitle: \"Borrar\",\r\n\t\t\t\t\timportTitlte: \"Importar contactos\",\r\n\t\t\t\t\tdeleteMessage:\r\n\t\t\t\t\t\t\"¿Estás seguro que deseas borrar este contacto? Todos los tickets relacionados se perderán.\",\r\n\t\t\t\t\timportMessage:\r\n\t\t\t\t\t\t\"¿Quieres importar todos los contactos desde tu teléfono?\",\r\n\t\t\t\t},\r\n\t\t\t\tbuttons: {\r\n\t\t\t\t\timport: \"Importar Contactos\",\r\n\t\t\t\t\tadd: \"Agregar Contacto\",\r\n\t\t\t\t},\r\n\t\t\t\ttable: {\r\n\t\t\t\t\tname: \"Nombre\",\r\n\t\t\t\t\twhatsapp: \"WhatsApp\",\r\n\t\t\t\t\temail: \"Correo Electrónico\",\r\n\t\t\t\t\tactions: \"Acciones\",\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tcontactModal: {\r\n\t\t\t\ttitle: {\r\n\t\t\t\t\tadd: \"Agregar contacto\",\r\n\t\t\t\t\tedit: \"Editar contacto\",\r\n\t\t\t\t},\r\n\t\t\t\tform: {\r\n\t\t\t\t\tmainInfo: \"Detalles del contacto\",\r\n\t\t\t\t\textraInfo: \"Información adicional\",\r\n\t\t\t\t\tname: \"Nombre\",\r\n\t\t\t\t\tnumber: \"Número de Whatsapp\",\r\n\t\t\t\t\temail: \"Correo Electrónico\",\r\n\t\t\t\t\textraName: \"Nombre del Campo\",\r\n\t\t\t\t\textraValue: \"Valor\",\r\n\t\t\t\t},\r\n\t\t\t\tbuttons: {\r\n\t\t\t\t\taddExtraInfo: \"Agregar información\",\r\n\t\t\t\t\tokAdd: \"Agregar\",\r\n\t\t\t\t\tokEdit: \"Guardar\",\r\n\t\t\t\t\tcancel: \"Cancelar\",\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: \"Contacto guardado satisfactoriamente.\",\r\n\t\t\t},\r\n\t\t\tqueueModal: {\r\n\t\t\t\ttitle: {\r\n\t\t\t\t\tadd: \"Agregar cola\",\r\n\t\t\t\t\tedit: \"Editar cola\",\r\n\t\t\t\t},\r\n\t\t\t\tform: {\r\n\t\t\t\t\tname: \"Nombre\",\r\n\t\t\t\t\tcolor: \"Color\",\r\n\t\t\t\t\tgreetingMessage: \"Mensaje de saludo\",\r\n\t\t\t\t},\r\n\t\t\t\tbuttons: {\r\n\t\t\t\t\tokAdd: \"Añadir\",\r\n\t\t\t\t\tokEdit: \"Ahorrar\",\r\n\t\t\t\t\tcancel: \"Cancelar\",\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tuserModal: {\r\n\t\t\t\ttitle: {\r\n\t\t\t\t\tadd: \"Agregar usuario\",\r\n\t\t\t\t\tedit: \"Editar usuario\",\r\n\t\t\t\t},\r\n\t\t\t\tform: {\r\n\t\t\t\t\tname: \"Nombre\",\r\n\t\t\t\t\temail: \"Correo Electrónico\",\r\n\t\t\t\t\tpassword: \"Contraseña\",\r\n\t\t\t\t\tprofile: \"Perfil\",\r\n\t\t\t\t},\r\n\t\t\t\tbuttons: {\r\n\t\t\t\t\tokAdd: \"Agregar\",\r\n\t\t\t\t\tokEdit: \"Guardar\",\r\n\t\t\t\t\tcancel: \"Cancelar\",\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: \"Usuario guardado satisfactoriamente.\",\r\n\t\t\t},\r\n\t\t\tchat: {\r\n\t\t\t\tnoTicketMessage: \"Selecciona un ticket para empezar a chatear.\",\r\n\t\t\t},\r\n\t\t\tticketsManager: {\r\n\t\t\t\tbuttons: {\r\n\t\t\t\t\tnewTicket: \"Nuevo\",\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tticketsQueueSelect: {\r\n\t\t\t\tplaceholder: \"Linhas\",\r\n\t\t\t},\r\n\t\t\ttickets: {\r\n\t\t\t\ttoasts: {\r\n\t\t\t\t\tdeleted: \"El ticket en el que estabas ha sido borrado.\",\r\n\t\t\t\t},\r\n\t\t\t\tnotification: {\r\n\t\t\t\t\tmessage: \"Mensaje de\",\r\n\t\t\t\t},\r\n\t\t\t\ttabs: {\r\n\t\t\t\t\topen: { title: \"Bandeja\" },\r\n\t\t\t\t\tclosed: { title: \"Resueltos\" },\r\n\t\t\t\t\tsearch: { title: \"Buscar\" },\r\n\t\t\t\t},\r\n\t\t\t\tsearch: {\r\n\t\t\t\t\tplaceholder: \"Buscar tickets y mensajes.\",\r\n\t\t\t\t},\r\n\t\t\t\tbuttons: {\r\n\t\t\t\t\tshowAll: \"Todos\",\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\ttransferTicketModal: {\r\n\t\t\t\ttitle: \"Transferir Ticket\",\r\n\t\t\t\tfieldLabel: \"Escriba para buscar usuarios\",\r\n\t\t\t\tnoOptions: \"No se encontraron usuarios con ese nombre\",\r\n\t\t\t\tbuttons: {\r\n\t\t\t\t\tok: \"Transferir\",\r\n\t\t\t\t\tcancel: \"Cancelar\",\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tticketsList: {\r\n\t\t\t\tpendingHeader: \"Cola\",\r\n\t\t\t\tassignedHeader: \"Trabajando en\",\r\n\t\t\t\tnoTicketsTitle: \"¡Nada acá!\",\r\n\t\t\t\tnoTicketsMessage:\r\n\t\t\t\t\t\"No se encontraron tickets con este estado o término de búsqueda\",\r\n\t\t\t\tbuttons: {\r\n\t\t\t\t\taccept: \"Acceptar\",\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tnewTicketModal: {\r\n\t\t\t\ttitle: \"Crear Ticket\",\r\n\t\t\t\tfieldLabel: \"Escribe para buscar un contacto\",\r\n\t\t\t\tadd: \"Añadir\",\r\n\t\t\t\tbuttons: {\r\n\t\t\t\t\tok: \"Guardar\",\r\n\t\t\t\t\tcancel: \"Cancelar\",\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tmainDrawer: {\r\n\t\t\t\tlistItems: {\r\n\t\t\t\t\tdashboard: \"Dashboard\",\r\n\t\t\t\t\tconnections: \"Conexiones\",\r\n\t\t\t\t\ttickets: \"Tickets\",\r\n\t\t\t\t\tcontacts: \"Contactos\",\r\n\t\t\t\t\tqueues: \"Linhas\",\r\n\t\t\t\t\tadministration: \"Administración\",\r\n\t\t\t\t\tusers: \"Usuarios\",\r\n\t\t\t\t\tsettings: \"Configuración\",\r\n\t\t\t\t},\r\n\t\t\t\tappBar: {\r\n\t\t\t\t\tuser: {\r\n\t\t\t\t\t\tprofile: \"Perfil\",\r\n\t\t\t\t\t\tlogout: \"Cerrar Sesión\",\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tnotifications: {\r\n\t\t\t\tnoTickets: \"Sin notificaciones.\",\r\n\t\t\t},\r\n\t\t\tqueues: {\r\n\t\t\t\ttitle: \"Linhas\",\r\n\t\t\t\ttable: {\r\n\t\t\t\t\tname: \"Nombre\",\r\n\t\t\t\t\tcolor: \"Color\",\r\n\t\t\t\t\tgreeting: \"Mensaje de saludo\",\r\n\t\t\t\t\tactions: \"Comportamiento\",\r\n\t\t\t\t},\r\n\t\t\t\tbuttons: {\r\n\t\t\t\t\tadd: \"Agregar cola\",\r\n\t\t\t\t},\r\n\t\t\t\tconfirmationModal: {\r\n\t\t\t\t\tdeleteTitle: \"Eliminar\",\r\n\t\t\t\t\tdeleteMessage:\r\n\t\t\t\t\t\t\"¿Estás seguro? ¡Esta acción no se puede revertir! Los tickets en esa cola seguirán existiendo, pero ya no tendrán ninguna cola asignada.\",\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tqueueSelect: {\r\n\t\t\t\tinputLabel: \"Linhas\",\r\n\t\t\t},\r\n\t\t\tusers: {\r\n\t\t\t\ttitle: \"Usuarios\",\r\n\t\t\t\ttable: {\r\n\t\t\t\t\tname: \"Nombre\",\r\n\t\t\t\t\temail: \"Correo Electrónico\",\r\n\t\t\t\t\tprofile: \"Perfil\",\r\n\t\t\t\t\tactions: \"Acciones\",\r\n\t\t\t\t},\r\n\t\t\t\tbuttons: {\r\n\t\t\t\t\tadd: \"Agregar usuario\",\r\n\t\t\t\t},\r\n\t\t\t\ttoasts: {\r\n\t\t\t\t\tdeleted: \"Usuario borrado satisfactoriamente.\",\r\n\t\t\t\t},\r\n\t\t\t\tconfirmationModal: {\r\n\t\t\t\t\tdeleteTitle: \"Borrar\",\r\n\t\t\t\t\tdeleteMessage:\r\n\t\t\t\t\t\t\"Toda la información del usuario se perderá. Los tickets abiertos de los usuarios se moverán a la cola.\",\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tsettings: {\r\n\t\t\t\tsuccess: \"Configuración guardada satisfactoriamente.\",\r\n\t\t\t\ttitle: \"Configuración\",\r\n\t\t\t\tsettings: {\r\n\t\t\t\t\tuserCreation: {\r\n\t\t\t\t\t\tname: \"Creación de usuarios\",\r\n\t\t\t\t\t\toptions: {\r\n\t\t\t\t\t\t\tenabled: \"Habilitado\",\r\n\t\t\t\t\t\t\tdisabled: \"Deshabilitado\",\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tmessagesList: {\r\n\t\t\t\theader: {\r\n\t\t\t\t\tassignedTo: \"Asignado a:\",\r\n\t\t\t\t\tbuttons: {\r\n\t\t\t\t\t\treturn: \"Devolver\",\r\n\t\t\t\t\t\tresolve: \"Resolver\",\r\n\t\t\t\t\t\treopen: \"Reabrir\",\r\n\t\t\t\t\t\taccept: \"Aceptar\",\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tmessagesInput: {\r\n\t\t\t\tplaceholderOpen: \"Escribe un mensaje\",\r\n\t\t\t\tplaceholderClosed:\r\n\t\t\t\t\t\"Vuelva a abrir o acepte este ticket para enviar un mensaje.\",\r\n\t\t\t\tsignMessage: \"Firmar\",\r\n\t\t\t},\r\n\t\t\tcontactDrawer: {\r\n\t\t\t\theader: \"Detalles del contacto\",\r\n\t\t\t\tbuttons: {\r\n\t\t\t\t\tedit: \"Editar contacto\",\r\n\t\t\t\t},\r\n\t\t\t\textraInfo: \"Otra información\",\r\n\t\t\t},\r\n\t\t\tticketOptionsMenu: {\r\n\t\t\t\tdelete: \"Borrar\",\r\n\t\t\t\ttransfer: \"Transferir\",\r\n\t\t\t\tconfirmationModal: {\r\n\t\t\t\t\ttitle: \"¿Borrar ticket #\",\r\n\t\t\t\t\ttitleFrom: \"del contacto \",\r\n\t\t\t\t\tmessage:\r\n\t\t\t\t\t\t\"¡Atención! Todos los mensajes Todos los mensajes relacionados con el ticket se perderán.\",\r\n\t\t\t\t},\r\n\t\t\t\tbuttons: {\r\n\t\t\t\t\tdelete: \"Borrar\",\r\n\t\t\t\t\tcancel: \"Cancelar\",\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tconfirmationModal: {\r\n\t\t\t\tbuttons: {\r\n\t\t\t\t\tconfirm: \"Ok\",\r\n\t\t\t\t\tcancel: \"Cancelar\",\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tmessageOptionsMenu: {\r\n\t\t\t\tdelete: \"Borrar\",\r\n\t\t\t\treply: \"Responder\",\r\n\t\t\t\tconfirmationModal: {\r\n\t\t\t\t\ttitle: \"¿Borrar mensaje?\",\r\n\t\t\t\t\tmessage: \"Esta acción no puede ser revertida.\",\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tbackendErrors: {\r\n\t\t\t\tERR_NO_OTHER_WHATSAPP:\r\n\t\t\t\t\t\"Debe haber al menos una conexión de WhatsApp predeterminada.\",\r\n\t\t\t\tERR_NO_DEF_WAPP_FOUND:\r\n\t\t\t\t\t\"No se encontró WhatsApp predeterminado. Verifique la página de conexiones.\",\r\n\t\t\t\tERR_WAPP_NOT_INITIALIZED:\r\n\t\t\t\t\t\"Esta sesión de WhatsApp no ​​está inicializada. Verifique la página de conexiones.\",\r\n\t\t\t\tERR_WAPP_CHECK_CONTACT:\r\n\t\t\t\t\t\"No se pudo verificar el contacto de WhatsApp. Verifique la página de conexiones.\",\r\n\t\t\t\tERR_WAPP_INVALID_CONTACT: \"Este no es un número de whatsapp válido.\",\r\n\t\t\t\tERR_WAPP_DOWNLOAD_MEDIA:\r\n\t\t\t\t\t\"No se pudieron descargar los medios de WhatsApp. Verifique la página de conexiones.\",\r\n\t\t\t\tERR_INVALID_CREDENTIALS: \"Error de autenticación. Vuelva a intentarlo.\",\r\n\t\t\t\tERR_SENDING_WAPP_MSG:\r\n\t\t\t\t\t\"Error al enviar el mensaje de WhatsApp. Verifique la página de conexiones.\",\r\n\t\t\t\tERR_DELETE_WAPP_MSG: \"No se pudo borrar el mensaje de WhatsApp.\",\r\n\t\t\t\tERR_OTHER_OPEN_TICKET: \"Ya hay un ticket abierto para este contacto.\",\r\n\t\t\t\tERR_SESSION_EXPIRED: \"Sesión caducada. Inicie sesión.\",\r\n\t\t\t\tERR_USER_CREATION_DISABLED:\r\n\t\t\t\t\t\"La creación de usuarios fue deshabilitada por el administrador.\",\r\n\t\t\t\tERR_NO_PERMISSION: \"No tienes permiso para acceder a este recurso.\",\r\n\t\t\t\tERR_DUPLICATED_CONTACT: \"Ya existe un contacto con este número.\",\r\n\t\t\t\tERR_NO_SETTING_FOUND:\r\n\t\t\t\t\t\"No se encontró ninguna configuración con este ID.\",\r\n\t\t\t\tERR_NO_CONTACT_FOUND: \"No se encontró ningún contacto con este ID.\",\r\n\t\t\t\tERR_NO_TICKET_FOUND: \"No se encontró ningún ticket con este ID.\",\r\n\t\t\t\tERR_NO_USER_FOUND: \"No se encontró ningún usuario con este ID.\",\r\n\t\t\t\tERR_NO_WAPP_FOUND: \"No se encontró WhatsApp con este ID.\",\r\n\t\t\t\tERR_CREATING_MESSAGE: \"Error al crear el mensaje en la base de datos.\",\r\n\t\t\t\tERR_CREATING_TICKET: \"Error al crear el ticket en la base de datos.\",\r\n\t\t\t\tERR_FETCH_WAPP_MSG:\r\n\t\t\t\t\t\"Error al obtener el mensaje en WhtasApp, tal vez sea demasiado antiguo.\",\r\n\t\t\t\tERR_QUEUE_COLOR_ALREADY_EXISTS:\r\n\t\t\t\t\t\"Este color ya está en uso, elija otro.\",\r\n\t\t\t\tERR_WAPP_GREETING_REQUIRED:\r\n\t\t\t\t\t\"El mensaje de saludo es obligatorio cuando hay más de una cola.\",\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n};\r\n\r\nexport { messages };\r\n","import i18n from \"i18next\";\r\nimport LanguageDetector from \"i18next-browser-languagedetector\";\r\n\r\nimport { messages } from \"./languages\";\r\n\r\ni18n.use(LanguageDetector).init({\r\n\tdebug: false,\r\n\tdefaultNS: [\"translations\"],\r\n\tfallbackLng: \"pt\",\r\n\tns: [\"translations\"],\r\n\tresources: messages,\r\n});\r\n\r\nexport { i18n };\r\n","import { toast } from \"react-toastify\";\r\nimport { i18n } from \"../translate/i18n\";\r\nimport { isString } from 'lodash';\r\n\r\nconst toastError = err => {\r\n\tconst errorMsg = err.response?.data?.error;\r\n\tif (errorMsg) {\r\n\t\tif (i18n.exists(`backendErrors.${errorMsg}`)) {\r\n\t\t\ttoast.error(i18n.t(`backendErrors.${errorMsg}`), {\r\n\t\t\t\ttoastId: errorMsg,\r\n\t\t\t\tautoClose: 2000,\r\n\t\t\t\thideProgressBar: false,\r\n\t\t\t\tcloseOnClick: true,\r\n\t\t\t\tpauseOnHover: false,\r\n\t\t\t\tdraggable: true,\r\n\t\t\t\tprogress: undefined,\r\n\t\t\t\ttheme: \"light\",\r\n\t\t\t});\r\n\t\t\treturn\r\n\t\t} else {\r\n\t\t\ttoast.error(errorMsg, {\r\n\t\t\t\ttoastId: errorMsg,\r\n\t\t\t\tautoClose: 2000,\r\n\t\t\t\thideProgressBar: false,\r\n\t\t\t\tcloseOnClick: true,\r\n\t\t\t\tpauseOnHover: false,\r\n\t\t\t\tdraggable: true,\r\n\t\t\t\tprogress: undefined,\r\n\t\t\t\ttheme: \"light\",\r\n\t\t\t});\r\n\t\t\treturn\r\n\t\t}\r\n\t} if (isString(err)) {\r\n\t\ttoast.error(err);\r\n\t\treturn\r\n\t} else {\r\n\t\ttoast.error(\"An error occurred!\");\r\n\t\treturn\r\n\t}\r\n};\r\n\r\nexport default toastError;\r\n","import axios from \"axios\";\r\n\r\nconst api = axios.create({\r\n\tbaseURL: process.env.REACT_APP_BACKEND_URL,\r\n\twithCredentials: true,\r\n});\r\n\r\nexport const openApi = axios.create({\r\n\tbaseURL: process.env.REACT_APP_BACKEND_URL\r\n});\r\n\r\nexport default api;\r\n","import openSocket from \"socket.io-client\";\r\nimport { isObject } from \"lodash\";\r\n\r\nexport function socketConnection(params) {\r\n  let userId = null;\r\n  if (localStorage.getItem(\"userId\")) {\r\n    userId = localStorage.getItem(\"userId\");\r\n  }\r\n  return openSocket(process.env.REACT_APP_BACKEND_URL, {\r\n    transports: [\"websocket\", \"polling\", \"flashsocket\"],\r\n    pingTimeout: 18000,\r\n    pingInterval: 18000,\r\n    query: isObject(params) ? { ...params} : { userId: params.userId },\r\n  });\r\n}\r\n","import { useState, useEffect, useReducer } from \"react\";\r\nimport toastError from \"../../errors/toastError\";\r\n\r\nimport api from \"../../services/api\";\r\nimport { socketConnection } from \"../../services/socket\";\r\n\r\nconst reducer = (state, action) => {\r\n  if (action.type === \"LOAD_WHATSAPPS\") {\r\n    const whatsApps = action.payload;\r\n\r\n    return [...whatsApps];\r\n  }\r\n\r\n  if (action.type === \"UPDATE_WHATSAPPS\") {\r\n    const whatsApp = action.payload;\r\n    const whatsAppIndex = state.findIndex((s) => s.id === whatsApp.id);\r\n\r\n    if (whatsAppIndex !== -1) {\r\n      state[whatsAppIndex] = whatsApp;\r\n      return [...state];\r\n    } else {\r\n      return [whatsApp, ...state];\r\n    }\r\n  }\r\n\r\n  if (action.type === \"UPDATE_SESSION\") {\r\n    const whatsApp = action.payload;\r\n    const whatsAppIndex = state.findIndex((s) => s.id === whatsApp.id);\r\n\r\n    if (whatsAppIndex !== -1) {\r\n      state[whatsAppIndex].status = whatsApp.status;\r\n      state[whatsAppIndex].updatedAt = whatsApp.updatedAt;\r\n      state[whatsAppIndex].qrcode = whatsApp.qrcode;\r\n      state[whatsAppIndex].retries = whatsApp.retries;\r\n      return [...state];\r\n    } else {\r\n      return [...state];\r\n    }\r\n  }\r\n\r\n  if (action.type === \"DELETE_WHATSAPPS\") {\r\n    const whatsAppId = action.payload;\r\n\r\n    const whatsAppIndex = state.findIndex((s) => s.id === whatsAppId);\r\n    if (whatsAppIndex !== -1) {\r\n      state.splice(whatsAppIndex, 1);\r\n    }\r\n    return [...state];\r\n  }\r\n\r\n  if (action.type === \"RESET\") {\r\n    return [];\r\n  }\r\n};\r\n\r\nconst useWhatsApps = () => {\r\n  const [whatsApps, dispatch] = useReducer(reducer, []);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    const fetchSession = async () => {\r\n      try {\r\n        const { data } = await api.get(\"/whatsapp/?session=0\");\r\n        dispatch({ type: \"LOAD_WHATSAPPS\", payload: data });\r\n        setLoading(false);\r\n      } catch (err) {\r\n        setLoading(false);\r\n        toastError(err);\r\n      }\r\n    };\r\n    fetchSession();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const companyId = localStorage.getItem(\"companyId\");\r\n    const socket = socketConnection({ companyId });\r\n\r\n    socket.on(`company-${companyId}-whatsapp`, (data) => {\r\n      if (data.action === \"update\") {\r\n        dispatch({ type: \"UPDATE_WHATSAPPS\", payload: data.whatsapp });\r\n      }\r\n    });\r\n\r\n    socket.on(`company-${companyId}-whatsapp`, (data) => {\r\n      if (data.action === \"delete\") {\r\n        dispatch({ type: \"DELETE_WHATSAPPS\", payload: data.whatsappId });\r\n      }\r\n    });\r\n\r\n    socket.on(`company-${companyId}-whatsappSession`, (data) => {\r\n      if (data.action === \"update\") {\r\n        dispatch({ type: \"UPDATE_SESSION\", payload: data.session });\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      socket.disconnect();\r\n    };\r\n  }, []);\r\n\r\n  return { whatsApps, loading };\r\n};\r\n\r\nexport default useWhatsApps;\r\n","import React, { createContext } from \"react\";\r\n\r\nimport useWhatsApps from \"../../hooks/useWhatsApps\";\r\n\r\nconst WhatsAppsContext = createContext();\r\n\r\nconst WhatsAppsProvider = ({ children }) => {\r\n\tconst { loading, whatsApps } = useWhatsApps();\r\n\r\n\treturn (\r\n\t\t<WhatsAppsContext.Provider value={{ whatsApps, loading }}>\r\n\t\t\t{children}\r\n\t\t</WhatsAppsContext.Provider>\r\n\t);\r\n};\r\n\r\nexport { WhatsAppsContext, WhatsAppsProvider };\r\n","import { useState, useEffect } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { has, isArray } from \"lodash\";\r\n\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport api from \"../../services/api\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport { socketConnection } from \"../../services/socket\";\r\nimport moment from \"moment\";\r\nconst useAuth = () => {\r\n  const history = useHistory();\r\n  const [isAuth, setIsAuth] = useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n  const [user, setUser] = useState({});\r\n\r\n  api.interceptors.request.use(\r\n    (config) => {\r\n      const token = localStorage.getItem(\"token\");\r\n      if (token) {\r\n        config.headers[\"Authorization\"] = `Bearer ${JSON.parse(token)}`;\r\n        setIsAuth(true);\r\n      }\r\n      return config;\r\n    },\r\n    (error) => {\r\n      Promise.reject(error);\r\n    }\r\n  );\r\n\r\n  api.interceptors.response.use(\r\n    (response) => {\r\n      return response;\r\n    },\r\n    async (error) => {\r\n      const originalRequest = error.config;\r\n      if (error?.response?.status === 403 && !originalRequest._retry) {\r\n        originalRequest._retry = true;\r\n\r\n        const { data } = await api.post(\"/auth/refresh_token\");\r\n        if (data) {\r\n          localStorage.setItem(\"token\", JSON.stringify(data.token));\r\n          api.defaults.headers.Authorization = `Bearer ${data.token}`;\r\n        }\r\n        return api(originalRequest);\r\n      }\r\n      if (error?.response?.status === 401) {\r\n        localStorage.removeItem(\"token\");\r\n        localStorage.removeItem(\"companyId\");\r\n        api.defaults.headers.Authorization = undefined;\r\n        setIsAuth(false);\r\n      }\r\n      return Promise.reject(error);\r\n    }\r\n  );\r\n\r\n  useEffect(() => {\r\n    const token = localStorage.getItem(\"token\");\r\n    (async () => {\r\n      if (token) {\r\n        try {\r\n          const { data } = await api.post(\"/auth/refresh_token\");\r\n          api.defaults.headers.Authorization = `Bearer ${data.token}`;\r\n          setIsAuth(true);\r\n          setUser(data.user);\r\n        } catch (err) {\r\n          toastError(err);\r\n        }\r\n      }\r\n      setLoading(false);\r\n    })();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const companyId = localStorage.getItem(\"companyId\");\r\n    if (companyId) {\r\n   \r\n    const socket = socketConnection({ companyId });\r\n\r\n      socket.on(`company-${companyId}-user`, (data) => {\r\n        if (data.action === \"update\" && data.user.id === user.id) {\r\n          setUser(data.user);\r\n        }\r\n      });\r\n    \r\n    \r\n    return () => {\r\n      socket.disconnect();\r\n    };\r\n  }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [user]);\r\n\r\n  const handleLogin = async (userData) => {\r\n    setLoading(true);\r\n\r\n    try {\r\n      const { data } = await api.post(\"/auth/login\", userData);\r\n      const {\r\n        user: { companyId, id, company },\r\n      } = data;\r\n\r\n      if (has(company, \"settings\") && isArray(company.settings)) {\r\n        const setting = company.settings.find(\r\n          (s) => s.key === \"campaignsEnabled\"\r\n        );\r\n        if (setting && setting.value === \"true\") {\r\n          localStorage.setItem(\"cshow\", null); //regra pra exibir campanhas\r\n        }\r\n      }\r\n\r\n      moment.locale('pt-br');\r\n      const dueDate = data.user.company.dueDate;\r\n      const hoje = moment(moment()).format(\"DD/MM/yyyy\");\r\n      const vencimento = moment(dueDate).format(\"DD/MM/yyyy\");\r\n\r\n      var diff = moment(dueDate).diff(moment(moment()).format());\r\n\r\n      var before = moment(moment().format()).isBefore(dueDate);\r\n      var dias = moment.duration(diff).asDays();\r\n\r\n      if (before === true) {\r\n        localStorage.setItem(\"token\", JSON.stringify(data.token));\r\n        localStorage.setItem(\"companyId\", companyId);\r\n        localStorage.setItem(\"userId\", id);\r\n        localStorage.setItem(\"companyDueDate\", vencimento);\r\n        api.defaults.headers.Authorization = `Bearer ${data.token}`;\r\n        setUser(data.user);\r\n        setIsAuth(true);\r\n        toast.success(i18n.t(\"auth.toasts.success\"));\r\n        if (Math.round(dias) < 5) {\r\n          toast.warn(`Sua assinatura vence em ${Math.round(dias)} ${Math.round(dias) === 1 ? 'dia' : 'dias'} `);\r\n        }\r\n        history.push(\"/tickets\");\r\n        setLoading(false);\r\n      } else {\r\n        toastError(`Opss! Sua assinatura venceu ${vencimento}.\r\nEntre em contato com o Suporte para mais informações! `);\r\n        setLoading(false);\r\n      }\r\n\r\n      //quebra linha \r\n    } catch (err) {\r\n      toastError(err);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleLogout = async () => {\r\n    setLoading(true);\r\n\r\n    try {\r\n      await api.delete(\"/auth/logout\");\r\n      setIsAuth(false);\r\n      setUser({});\r\n      localStorage.removeItem(\"token\");\r\n      localStorage.removeItem(\"companyId\");\r\n      localStorage.removeItem(\"userId\");\r\n      localStorage.removeItem(\"cshow\");\r\n      api.defaults.headers.Authorization = undefined;\r\n      setLoading(false);\r\n      history.push(\"/login\");\r\n    } catch (err) {\r\n      toastError(err);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const getCurrentUserInfo = async () => {\r\n    try {\r\n      const { data } = await api.get(\"/auth/me\");\r\n      return data;\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n  };\r\n\r\n  return {\r\n    isAuth,\r\n    user,\r\n    loading,\r\n    handleLogin,\r\n    handleLogout,\r\n    getCurrentUserInfo,\r\n  };\r\n};\r\n\r\nexport default useAuth;\r\n","import React, { createContext } from \"react\";\r\n\r\nimport useAuth from \"../../hooks/useAuth.js\";\r\n\r\nconst AuthContext = createContext();\r\n\r\nconst AuthProvider = ({ children }) => {\r\n\tconst { loading, user, isAuth, handleLogin, handleLogout } = useAuth();\r\n\r\n\treturn (\r\n\t\t<AuthContext.Provider\r\n\t\t\tvalue={{ loading, user, isAuth, handleLogin, handleLogout }}\r\n\t\t>\r\n\t\t\t{children}\r\n\t\t</AuthContext.Provider>\r\n\t);\r\n};\r\n\r\nexport { AuthContext, AuthProvider };\r\n","const rules = {\r\n\tuser: {\r\n\t\tstatic: [],\r\n\t},\r\n\r\n\tadmin: {\r\n\t\tstatic: [\r\n\t\t\t\"dashboard:view\",\r\n\t\t\t\"drawer-admin-items:view\",\r\n\t\t\t\"tickets-manager:showall\",\r\n\t\t\t\"user-modal:editProfile\",\r\n\t\t\t\"user-modal:editQueues\",\r\n\t\t\t\"ticket-options:deleteTicket\",\r\n\t\t\t\"contacts-page:deleteContact\",\r\n\t\t\t\"connections-page:actionButtons\",\r\n\t\t\t\"connections-page:addConnection\",\r\n\t\t\t\"connections-page:editOrDeleteConnection\"\r\n\t\t],\r\n\t},\r\n};\r\n\r\nexport default rules;\r\n","import rules from \"../../rules\";\r\n\r\nconst check = (role, action, data) => {\r\n\tconst permissions = rules[role];\r\n\tif (!permissions) {\r\n\t\t// role is not present in the rules\r\n\t\treturn false;\r\n\t}\r\n\r\n\tconst staticPermissions = permissions.static;\r\n\r\n\tif (staticPermissions && staticPermissions.includes(action)) {\r\n\t\t// static rule not provided for action\r\n\t\treturn true;\r\n\t}\r\n\r\n\tconst dynamicPermissions = permissions.dynamic;\r\n\r\n\tif (dynamicPermissions) {\r\n\t\tconst permissionCondition = dynamicPermissions[action];\r\n\t\tif (!permissionCondition) {\r\n\t\t\t// dynamic rule not provided for action\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn permissionCondition(data);\r\n\t}\r\n\treturn false;\r\n};\r\n\r\nconst Can = ({ role, perform, data, yes, no }) =>\r\n\tcheck(role, perform, data) ? yes() : no();\r\n\r\nCan.defaultProps = {\r\n\tyes: () => null,\r\n\tno: () => null,\r\n};\r\n\r\nexport { Can };\r\n","import React, { useState, useEffect } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n    margin: '2rem'\r\n  },\r\n  inputContainer: {\r\n    display: 'flex',\r\n    width: '100%',\r\n    marginBottom: '1rem'\r\n  },\r\n  input: {\r\n    flexGrow: 1,\r\n    marginRight: '1rem'\r\n  },\r\n  listContainer: {\r\n    width: '100%',\r\n    height: '100%',\r\n    marginTop: '1rem',\r\n    backgroundColor: '#f5f5f5',\r\n    borderRadius: '5px',\r\n  },\r\n  list: {\r\n    marginBottom: '5px'\r\n  }\r\n});\r\n\r\nconst ToDoList = () => {\r\n  const classes = useStyles();\r\n\r\n  const [task, setTask] = useState('');\r\n  const [tasks, setTasks] = useState([]);\r\n  const [editIndex, setEditIndex] = useState(-1);\r\n\r\n  useEffect(() => {\r\n    const savedTasks = localStorage.getItem('tasks');\r\n    if (savedTasks) {\r\n      setTasks(JSON.parse(savedTasks));\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    localStorage.setItem('tasks', JSON.stringify(tasks));\r\n  }, [tasks]);\r\n\r\n  const handleTaskChange = (event) => {\r\n    setTask(event.target.value);\r\n  };\r\n\r\n  const handleAddTask = () => {\r\n    if (!task.trim()) {\r\n      // Impede que o usuário crie uma tarefa sem texto\r\n      return;\r\n    }\r\n\r\n    const now = new Date();\r\n    if (editIndex >= 0) {\r\n      // Editar tarefa existente\r\n      const newTasks = [...tasks];\r\n      newTasks[editIndex] = {text: task, updatedAt: now, createdAt: newTasks[editIndex].createdAt};\r\n      setTasks(newTasks);\r\n      setTask('');\r\n      setEditIndex(-1);\r\n    } else {\r\n      // Adicionar nova tarefa\r\n      setTasks([...tasks, {text: task, createdAt: now, updatedAt: now}]);\r\n      setTask('');\r\n    }\r\n  };\r\n\r\n  const handleEditTask = (index) => {\r\n    setTask(tasks[index].text);\r\n    setEditIndex(index);\r\n  };\r\n\r\n  const handleDeleteTask = (index) => {\r\n    const newTasks = [...tasks];\r\n    newTasks.splice(index, 1);\r\n    setTasks(newTasks);\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <div className={classes.inputContainer}>\r\n        <TextField\r\n          className={classes.input}\r\n          label=\"Nova tarefa\"\r\n          value={task}\r\n          onChange={handleTaskChange}\r\n          variant=\"outlined\"\r\n        />\r\n        <Button variant=\"contained\" color=\"primary\" onClick={handleAddTask}>\r\n          {editIndex >= 0 ? 'Salvar' : 'Adicionar'}\r\n        </Button>\r\n      </div>\r\n      <div className={classes.listContainer}>\r\n        <List>\r\n          {tasks.map((task, index) => (\r\n            <ListItem key={index} className={classes.list}>\r\n              <ListItemText primary={task.text} secondary={task.updatedAt.toLocaleString()} />\r\n              <ListItemSecondaryAction>\r\n                <IconButton onClick={() => handleEditTask(index)}>\r\n                  <EditIcon />\r\n                </IconButton>\r\n                <IconButton onClick={() => handleDeleteTask(index)}>\r\n                  <DeleteIcon />\r\n                </IconButton>\r\n              </ListItemSecondaryAction>\r\n            </ListItem>\r\n          ))}\r\n        </List>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n\r\nexport default ToDoList;\r\n","import api, { openApi } from \"../../services/api\";\r\n\r\nconst usePlans = () => {\r\n\r\n    const getPlanList = async (params) => {\r\n        const { data } = await openApi.request({\r\n            url: '/plans/list',\r\n            method: 'GET',\r\n            params\r\n        });\r\n        return data;\r\n    }\r\n\r\n    const list = async (params) => {\r\n        const { data } = await api.request({\r\n            url: '/plans/all',\r\n            method: 'GET',\r\n            params\r\n        });\r\n        return data;\r\n    }\r\n\r\n    const finder = async (id) => {\r\n        const { data } = await api.request({\r\n            url: `/plans/${id}`,\r\n            method: 'GET'\r\n        });\r\n        return data;\r\n    }\r\n\r\n    const save = async (data) => {\r\n        const { data: responseData } = await api.request({\r\n            url: '/plans',\r\n            method: 'POST',\r\n            data\r\n        });\r\n        return responseData;\r\n    }\r\n\r\n    const update = async (data) => {\r\n        const { data: responseData } = await api.request({\r\n            url: `/plans/${data.id}`,\r\n            method: 'PUT',\r\n            data\r\n        });\r\n        return responseData;\r\n    }\r\n\r\n    const remove = async (id) => {\r\n        const { data } = await api.request({\r\n            url: `/plans/${id}`,\r\n            method: 'DELETE'\r\n        });\r\n        return data;\r\n    }\r\n\r\n    const getPlanCompany = async (params, id) => {\r\n        const { data } = await api.request({\r\n            url: `/companies/listPlan/${id}`,\r\n            method: 'GET',\r\n            params\r\n        });\r\n        return data;\r\n    }\r\n\r\n    return {\r\n        getPlanList,\r\n        list,\r\n        save,\r\n        update,\r\n        finder,\r\n        remove,\r\n        getPlanCompany\r\n    }\r\n}\r\n\r\nexport default usePlans;","import React, { useContext, useEffect, useReducer, useState } from \"react\";\r\nimport { Link as RouterLink, useHistory } from \"react-router-dom\";\r\n\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport ListSubheader from \"@material-ui/core/ListSubheader\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport { Badge, Collapse, List } from \"@material-ui/core\";\r\nimport DashboardOutlinedIcon from \"@material-ui/icons/DashboardOutlined\";\r\nimport WhatsAppIcon from \"@material-ui/icons/WhatsApp\";\r\nimport SyncAltIcon from \"@material-ui/icons/SyncAlt\";\r\nimport SettingsOutlinedIcon from \"@material-ui/icons/SettingsOutlined\";\r\nimport PeopleAltOutlinedIcon from \"@material-ui/icons/PeopleAltOutlined\";\r\nimport ContactPhoneOutlinedIcon from \"@material-ui/icons/ContactPhoneOutlined\";\r\nimport AccountTreeOutlinedIcon from \"@material-ui/icons/AccountTreeOutlined\";\r\nimport FlashOnIcon from \"@material-ui/icons/FlashOn\";\r\nimport HelpOutlineIcon from \"@material-ui/icons/HelpOutline\";\r\nimport CodeRoundedIcon from \"@material-ui/icons/CodeRounded\";\r\nimport EventIcon from \"@material-ui/icons/Event\";\r\nimport LocalOfferIcon from \"@material-ui/icons/LocalOffer\";\r\nimport EventAvailableIcon from \"@material-ui/icons/EventAvailable\";\r\nimport ExpandLessIcon from \"@material-ui/icons/ExpandLess\";\r\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\r\nimport PeopleIcon from \"@material-ui/icons/People\";\r\nimport ListIcon from \"@material-ui/icons/ListAlt\";\r\nimport AnnouncementIcon from \"@material-ui/icons/Announcement\";\r\nimport ForumIcon from \"@material-ui/icons/Forum\";\r\nimport LocalAtmIcon from '@material-ui/icons/LocalAtm';\r\nimport RotateRight from \"@material-ui/icons/RotateRight\";\r\nimport { i18n } from \"../translate/i18n\";\r\nimport { WhatsAppsContext } from \"../context/WhatsApp/WhatsAppsContext\";\r\nimport { AuthContext } from \"../context/Auth/AuthContext\";\r\nimport LoyaltyRoundedIcon from '@material-ui/icons/LoyaltyRounded';\r\nimport { Can } from \"../components/Can\";\r\nimport { socketConnection } from \"../services/socket\";\r\nimport { isArray } from \"lodash\";\r\nimport TableChartIcon from '@material-ui/icons/TableChart';\r\nimport api from \"../services/api\";\r\nimport BorderColorIcon from '@material-ui/icons/BorderColor';\r\nimport ToDoList from \"../pages/ToDoList/\";\r\nimport toastError from \"../errors/toastError\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { AllInclusive, AttachFile, BlurCircular, DeviceHubOutlined, Schedule } from '@material-ui/icons';\r\nimport usePlans from \"../hooks/usePlans\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  ListSubheader: {\r\n    height: 26,\r\n    marginTop: \"-15px\",\r\n    marginBottom: \"-10px\",\r\n  },\r\n}));\r\n\r\n\r\nfunction ListItemLink(props) {\r\n  const { icon, primary, to, className } = props;\r\n\r\n  const renderLink = React.useMemo(\r\n    () =>\r\n      React.forwardRef((itemProps, ref) => (\r\n        <RouterLink to={to} ref={ref} {...itemProps} />\r\n      )),\r\n    [to]\r\n  );\r\n\r\n  return (\r\n    <li>\r\n      <ListItem button dense component={renderLink} className={className}>\r\n        {icon ? <ListItemIcon>{icon}</ListItemIcon> : null}\r\n        <ListItemText primary={primary} />\r\n      </ListItem>\r\n    </li>\r\n  );\r\n}\r\n\r\nconst reducer = (state, action) => {\r\n  if (action.type === \"LOAD_CHATS\") {\r\n    const chats = action.payload;\r\n    const newChats = [];\r\n\r\n    if (isArray(chats)) {\r\n      chats.forEach((chat) => {\r\n        const chatIndex = state.findIndex((u) => u.id === chat.id);\r\n        if (chatIndex !== -1) {\r\n          state[chatIndex] = chat;\r\n        } else {\r\n          newChats.push(chat);\r\n        }\r\n      });\r\n    }\r\n\r\n    return [...state, ...newChats];\r\n  }\r\n\r\n  if (action.type === \"UPDATE_CHATS\") {\r\n    const chat = action.payload;\r\n    const chatIndex = state.findIndex((u) => u.id === chat.id);\r\n\r\n    if (chatIndex !== -1) {\r\n      state[chatIndex] = chat;\r\n      return [...state];\r\n    } else {\r\n      return [chat, ...state];\r\n    }\r\n  }\r\n\r\n  if (action.type === \"DELETE_CHAT\") {\r\n    const chatId = action.payload;\r\n\r\n    const chatIndex = state.findIndex((u) => u.id === chatId);\r\n    if (chatIndex !== -1) {\r\n      state.splice(chatIndex, 1);\r\n    }\r\n    return [...state];\r\n  }\r\n\r\n  if (action.type === \"RESET\") {\r\n    return [];\r\n  }\r\n\r\n  if (action.type === \"CHANGE_CHAT\") {\r\n    const changedChats = state.map((chat) => {\r\n      if (chat.id === action.payload.chat.id) {\r\n        return action.payload.chat;\r\n      }\r\n      return chat;\r\n    });\r\n    return changedChats;\r\n  }\r\n};\r\n\r\nconst MainListItems = (props) => {\r\n  const classes = useStyles();\r\n  const { drawerClose, collapsed } = props;\r\n  const { whatsApps } = useContext(WhatsAppsContext);\r\n  const { user, handleLogout } = useContext(AuthContext);\r\n  const [connectionWarning, setConnectionWarning] = useState(false);\r\n  const [openCampaignSubmenu, setOpenCampaignSubmenu] = useState(false);\r\n  const [showCampaigns, setShowCampaigns] = useState(false);\r\n  const [showKanban, setShowKanban] = useState(false);\r\n  const [showOpenAi, setShowOpenAi] = useState(false);\r\n  const [showIntegrations, setShowIntegrations] = useState(false); const history = useHistory();\r\n  const [showSchedules, setShowSchedules] = useState(false);\r\n  const [showInternalChat, setShowInternalChat] = useState(false);\r\n  const [showExternalApi, setShowExternalApi] = useState(false);\r\n\r\n\r\n  const [invisible, setInvisible] = useState(true);\r\n  const [pageNumber, setPageNumber] = useState(1);\r\n  const [searchParam] = useState(\"\");\r\n  const [chats, dispatch] = useReducer(reducer, []);\r\n  const { getPlanCompany } = usePlans();\r\n \r\n\r\n  useEffect(() => {\r\n    dispatch({ type: \"RESET\" });\r\n    setPageNumber(1);\r\n  }, [searchParam]);\r\n\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      const companyId = user.companyId;\r\n      const planConfigs = await getPlanCompany(undefined, companyId);\r\n\r\n      setShowCampaigns(planConfigs.plan.useCampaigns);\r\n      setShowKanban(planConfigs.plan.useKanban);\r\n      setShowOpenAi(planConfigs.plan.useOpenAi);\r\n      setShowIntegrations(planConfigs.plan.useIntegrations);\r\n      setShowSchedules(planConfigs.plan.useSchedules);\r\n      setShowInternalChat(planConfigs.plan.useInternalChat);\r\n      setShowExternalApi(planConfigs.plan.useExternalApi);\r\n    }\r\n    fetchData();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    const delayDebounceFn = setTimeout(() => {\r\n      fetchChats();\r\n    }, 500);\r\n    return () => clearTimeout(delayDebounceFn);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [searchParam, pageNumber]);\r\n\r\n  useEffect(() => {\r\n    const companyId = localStorage.getItem(\"companyId\");\r\n    const socket = socketConnection({ companyId });\r\n\r\n    socket.on(`company-${companyId}-chat`, (data) => {\r\n      if (data.action === \"new-message\") {\r\n        dispatch({ type: \"CHANGE_CHAT\", payload: data });\r\n      }\r\n      if (data.action === \"update\") {\r\n        dispatch({ type: \"CHANGE_CHAT\", payload: data });\r\n      }\r\n    });\r\n    return () => {\r\n      socket.disconnect();\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    let unreadsCount = 0;\r\n    if (chats.length > 0) {\r\n      for (let chat of chats) {\r\n        for (let chatUser of chat.users) {\r\n          if (chatUser.userId === user.id) {\r\n            unreadsCount += chatUser.unreads;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    if (unreadsCount > 0) {\r\n      setInvisible(false);\r\n    } else {\r\n      setInvisible(true);\r\n    }\r\n  }, [chats, user.id]);\r\n\r\n  useEffect(() => {\r\n    if (localStorage.getItem(\"cshow\")) {\r\n      setShowCampaigns(true);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const delayDebounceFn = setTimeout(() => {\r\n      if (whatsApps.length > 0) {\r\n        const offlineWhats = whatsApps.filter((whats) => {\r\n          return (\r\n            whats.status === \"qrcode\" ||\r\n            whats.status === \"PAIRING\" ||\r\n            whats.status === \"DISCONNECTED\" ||\r\n            whats.status === \"TIMEOUT\" ||\r\n            whats.status === \"OPENING\"\r\n          );\r\n        });\r\n        if (offlineWhats.length > 0) {\r\n          setConnectionWarning(true);\r\n        } else {\r\n          setConnectionWarning(false);\r\n        }\r\n      }\r\n    }, 2000);\r\n    return () => clearTimeout(delayDebounceFn);\r\n  }, [whatsApps]);\r\n\r\n  const fetchChats = async () => {\r\n    try {\r\n      const { data } = await api.get(\"/chats/\", {\r\n        params: { searchParam, pageNumber },\r\n      });\r\n      dispatch({ type: \"LOAD_CHATS\", payload: data.records });\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n  };\r\n\r\n  const handleClickLogout = () => {\r\n    //handleCloseMenu();\r\n    handleLogout();\r\n  };\r\n\r\n  return (\r\n    <div onClick={drawerClose}>\r\n      <Can\r\n        role={user.profile}\r\n        perform=\"dashboard:view\"\r\n        yes={() => (\r\n          <ListItemLink\r\n            to=\"/\"\r\n            primary=\"Dashboard\"\r\n            icon={<DashboardOutlinedIcon />}\r\n          />\r\n        )}\r\n      />\r\n\r\n      <ListItemLink\r\n        to=\"/tickets\"\r\n        primary={i18n.t(\"mainDrawer.listItems.tickets\")}\r\n        icon={<WhatsAppIcon />}\r\n      />\r\n\t  \r\n\t  <ListItemLink\r\n        to=\"/kanban\"\r\n        primary={i18n.t(\"Kanban\")}\r\n        icon={<TableChartIcon />}\r\n      />\r\n\r\n      <ListItemLink\r\n        to=\"/quick-messages\"\r\n        primary={i18n.t(\"mainDrawer.listItems.quickMessages\")}\r\n        icon={<FlashOnIcon />}\r\n      />\r\n\t  \r\n\t  <ListItemLink\r\n        to=\"/todolist\"\r\n        primary={i18n.t(\"Tarefas\")}\r\n        icon={<BorderColorIcon />}\r\n      />\r\n\r\n      <ListItemLink\r\n        to=\"/contacts\"\r\n        primary={i18n.t(\"mainDrawer.listItems.contacts\")}\r\n        icon={<ContactPhoneOutlinedIcon />}\r\n      />\r\n\r\n      <ListItemLink\r\n        to=\"/schedules\"\r\n        primary={i18n.t(\"mainDrawer.listItems.schedules\")}\r\n        icon={<EventIcon />}\r\n      />\r\n\r\n      <ListItemLink\r\n        to=\"/tags\"\r\n        primary={i18n.t(\"mainDrawer.listItems.tags\")}\r\n        icon={<LocalOfferIcon />}\r\n      />\r\n\r\n      <ListItemLink\r\n        to=\"/chats\"\r\n        primary={i18n.t(\"mainDrawer.listItems.chats\")}\r\n        icon={\r\n          <Badge color=\"secondary\" variant=\"dot\" invisible={invisible}>\r\n            <ForumIcon />\r\n          </Badge>\r\n        }\r\n      />\r\n\r\n      <ListItemLink\r\n        to=\"/helps\"\r\n        primary={i18n.t(\"mainDrawer.listItems.helps\")}\r\n        icon={<HelpOutlineIcon />}\r\n      />\r\n\r\n      <Can\r\n        role={user.profile}\r\n        perform=\"drawer-admin-items:view\"\r\n        yes={() => (\r\n          <>\r\n            <Divider />\r\n            <ListSubheader\r\n              hidden={collapsed}\r\n              style={{\r\n                position: \"relative\",\r\n                fontSize: \"17px\",\r\n                textAlign: \"left\",\r\n                paddingLeft: 20\r\n              }}\r\n              inset\r\n              color=\"inherit\">\r\n              {i18n.t(\"mainDrawer.listItems.administration\")}\r\n            </ListSubheader>\r\n\t\t\t\r\n            {showCampaigns && (\r\n              <>\r\n                <ListItem\r\n                  button\r\n                  onClick={() => setOpenCampaignSubmenu((prev) => !prev)}\r\n                >\r\n                  <ListItemIcon>\r\n                    <EventAvailableIcon />\r\n                  </ListItemIcon>\r\n                  <ListItemText\r\n                    primary={i18n.t(\"mainDrawer.listItems.campaigns\")}\r\n                  />\r\n                  {openCampaignSubmenu ? (\r\n                    <ExpandLessIcon />\r\n                  ) : (\r\n                    <ExpandMoreIcon />\r\n                  )}\r\n                </ListItem>\r\n                <Collapse\r\n                  style={{ paddingLeft: 15 }}\r\n                  in={openCampaignSubmenu}\r\n                  timeout=\"auto\"\r\n                  unmountOnExit\r\n                >\r\n                  <List component=\"div\" disablePadding>\r\n                    <ListItem onClick={() => history.push(\"/campaigns\")} button>\r\n                      <ListItemIcon>\r\n                        <ListIcon />\r\n                      </ListItemIcon>\r\n                      <ListItemText primary=\"Listagem\" />\r\n                    </ListItem>\r\n                    <ListItem\r\n                      onClick={() => history.push(\"/contact-lists\")}\r\n                      button\r\n                    >\r\n                      <ListItemIcon>\r\n                        <PeopleIcon />\r\n                      </ListItemIcon>\r\n                      <ListItemText primary=\"Listas de Contatos\" />\r\n                    </ListItem>\r\n                    <ListItem\r\n                      onClick={() => history.push(\"/campaigns-config\")}\r\n                      button\r\n                    >\r\n                      <ListItemIcon>\r\n                        <SettingsOutlinedIcon />\r\n                      </ListItemIcon>\r\n                      <ListItemText primary=\"Configurações\" />\r\n                    </ListItem>\r\n                  </List>\r\n                </Collapse>\r\n              </>\r\n            )}\r\n            {user.super && (\r\n              <ListItemLink\r\n                to=\"/announcements\"\r\n                primary={i18n.t(\"mainDrawer.listItems.annoucements\")}\r\n                icon={<AnnouncementIcon />}\r\n              />\r\n            )}\r\n            {showOpenAi && (\r\n              <ListItemLink\r\n                to=\"/prompts\"\r\n                primary={i18n.t(\"mainDrawer.listItems.prompts\")}\r\n                icon={<AllInclusive />}\r\n              />\r\n            )}\r\n\r\n            {showIntegrations && (\r\n              <ListItemLink\r\n                to=\"/queue-integration\"\r\n                primary={i18n.t(\"mainDrawer.listItems.queueIntegration\")}\r\n                icon={<DeviceHubOutlined />}\r\n              />\r\n            )}\r\n            <ListItemLink\r\n              to=\"/connections\"\r\n              primary={i18n.t(\"mainDrawer.listItems.connections\")}\r\n              icon={\r\n                <Badge badgeContent={connectionWarning ? \"!\" : 0} color=\"error\">\r\n                  <SyncAltIcon />\r\n                </Badge>\r\n              }\r\n            />\r\n            <ListItemLink\r\n              to=\"/files\"\r\n              primary={i18n.t(\"mainDrawer.listItems.files\")}\r\n              icon={<AttachFile />}\r\n            />\r\n            <ListItemLink\r\n              to=\"/queues\"\r\n              primary={i18n.t(\"mainDrawer.listItems.queues\")}\r\n              icon={<AccountTreeOutlinedIcon />}\r\n            />\r\n            <ListItemLink\r\n              to=\"/users\"\r\n              primary={i18n.t(\"mainDrawer.listItems.users\")}\r\n              icon={<PeopleAltOutlinedIcon />}\r\n            />\r\n            {showExternalApi && (\r\n              <>\r\n                <ListItemLink\r\n                  to=\"/messages-api\"\r\n                  primary={i18n.t(\"mainDrawer.listItems.messagesAPI\")}\r\n                  icon={<CodeRoundedIcon />}\r\n                />\r\n              </>\r\n            )}\r\n            <ListItemLink\r\n              to=\"/financeiro\"\r\n              primary={i18n.t(\"mainDrawer.listItems.financeiro\")}\r\n              icon={<LocalAtmIcon />}\r\n            />\r\n\r\n            <ListItemLink\r\n              to=\"/settings\"\r\n              primary={i18n.t(\"mainDrawer.listItems.settings\")}\r\n              icon={<SettingsOutlinedIcon />}\r\n            />\r\n\t\t\t\r\n\t\t\t\r\n            {!collapsed && <React.Fragment>\r\n              <Divider />\r\n              {/* \r\n              // IMAGEM NO MENU\r\n              <Hidden only={['sm', 'xs']}>\r\n                <img style={{ width: \"100%\", padding: \"10px\" }} src={logo} alt=\"image\" />            \r\n              </Hidden> \r\n              */}\r\n              <Typography style={{ fontSize: \"12px\", padding: \"10px\", textAlign: \"right\", fontWeight: \"bold\" }}>\r\n                Versão: 4.0.0\r\n              </Typography>\r\n            </React.Fragment>\r\n            }\r\n\t\t\t\r\n          </>\r\n        )}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MainListItems;","import React from \"react\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { green } from \"@material-ui/core/colors\";\r\nimport { CircularProgress, Button } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tbutton: {\r\n\t\tposition: \"relative\",\r\n\t},\r\n\r\n\tbuttonProgress: {\r\n\t\tcolor: green[500],\r\n\t\tposition: \"absolute\",\r\n\t\ttop: \"50%\",\r\n\t\tleft: \"50%\",\r\n\t\tmarginTop: -12,\r\n\t\tmarginLeft: -12,\r\n\t},\r\n}));\r\n\r\nconst ButtonWithSpinner = ({ loading, children, ...rest }) => {\r\n\tconst classes = useStyles();\r\n\r\n\treturn (\r\n\t\t<Button className={classes.button} disabled={loading} {...rest}>\r\n\t\t\t{children}\r\n\t\t\t{loading && (\r\n\t\t\t\t<CircularProgress size={24} className={classes.buttonProgress} />\r\n\t\t\t)}\r\n\t\t</Button>\r\n\t);\r\n};\r\n\r\nexport default ButtonWithSpinner;\r\n","import React from \"react\";\r\nimport Markdown from \"markdown-to-jsx\";\r\n\r\nconst elements = [\r\n\t\"a\",\r\n\t\"abbr\",\r\n\t\"address\",\r\n\t\"area\",\r\n\t\"article\",\r\n\t\"aside\",\r\n\t\"audio\",\r\n\t\"b\",\r\n\t\"base\",\r\n\t\"bdi\",\r\n\t\"bdo\",\r\n\t\"big\",\r\n\t\"blockquote\",\r\n\t\"body\",\r\n\t\"br\",\r\n\t\"button\",\r\n\t\"canvas\",\r\n\t\"caption\",\r\n\t\"cite\",\r\n\t\"code\",\r\n\t\"col\",\r\n\t\"colgroup\",\r\n\t\"data\",\r\n\t\"datalist\",\r\n\t\"dd\",\r\n\t\"del\",\r\n\t\"details\",\r\n\t\"dfn\",\r\n\t\"dialog\",\r\n\t\"div\",\r\n\t\"dl\",\r\n\t\"dt\",\r\n\t\"em\",\r\n\t\"embed\",\r\n\t\"fieldset\",\r\n\t\"figcaption\",\r\n\t\"figure\",\r\n\t\"footer\",\r\n\t\"form\",\r\n\t\"h1\",\r\n\t\"h2\",\r\n\t\"h3\",\r\n\t\"h4\",\r\n\t\"h5\",\r\n\t\"h6\",\r\n\t\"head\",\r\n\t\"header\",\r\n\t\"hgroup\",\r\n\t\"hr\",\r\n\t\"html\",\r\n\t\"i\",\r\n\t\"iframe\",\r\n\t\"img\",\r\n\t\"input\",\r\n\t\"ins\",\r\n\t\"kbd\",\r\n\t\"keygen\",\r\n\t\"label\",\r\n\t\"legend\",\r\n\t\"li\",\r\n\t\"link\",\r\n\t\"main\",\r\n\t\"map\",\r\n\t\"mark\",\r\n\t\"marquee\",\r\n\t\"menu\",\r\n\t\"menuitem\",\r\n\t\"meta\",\r\n\t\"meter\",\r\n\t\"nav\",\r\n\t\"noscript\",\r\n\t\"object\",\r\n\t\"ol\",\r\n\t\"optgroup\",\r\n\t\"option\",\r\n\t\"output\",\r\n\t\"p\",\r\n\t\"param\",\r\n\t\"picture\",\r\n\t\"pre\",\r\n\t\"progress\",\r\n\t\"q\",\r\n\t\"rp\",\r\n\t\"rt\",\r\n\t\"ruby\",\r\n\t\"s\",\r\n\t\"samp\",\r\n\t\"script\",\r\n\t\"section\",\r\n\t\"select\",\r\n\t\"small\",\r\n\t\"source\",\r\n\t\"span\",\r\n\t\"strong\",\r\n\t\"style\",\r\n\t\"sub\",\r\n\t\"summary\",\r\n\t\"sup\",\r\n\t\"table\",\r\n\t\"tbody\",\r\n\t\"td\",\r\n\t\"textarea\",\r\n\t\"tfoot\",\r\n\t\"th\",\r\n\t\"thead\",\r\n\t\"time\",\r\n\t\"title\",\r\n\t\"tr\",\r\n\t\"track\",\r\n\t\"u\",\r\n\t\"ul\",\r\n\t\"var\",\r\n\t\"video\",\r\n\t\"wbr\",\r\n\r\n\t// SVG\r\n\t\"circle\",\r\n\t\"clipPath\",\r\n\t\"defs\",\r\n\t\"ellipse\",\r\n\t\"foreignObject\",\r\n\t\"g\",\r\n\t\"image\",\r\n\t\"line\",\r\n\t\"linearGradient\",\r\n\t\"marker\",\r\n\t\"mask\",\r\n\t\"path\",\r\n\t\"pattern\",\r\n\t\"polygon\",\r\n\t\"polyline\",\r\n\t\"radialGradient\",\r\n\t\"rect\",\r\n\t\"stop\",\r\n\t\"svg\",\r\n\t\"text\",\r\n\t\"tspan\",\r\n];\r\n\r\nconst allowedElements = [\"a\", \"b\", \"strong\", \"em\", \"u\", \"code\", \"del\"];\r\n\r\nconst CustomLink = ({ children, ...props }) => (\r\n\t<a {...props} target=\"_blank\" rel=\"noopener noreferrer\">\r\n\t\t{children}\r\n\t</a>\r\n);\r\n\r\nconst MarkdownWrapper = ({ children }) => {\r\n\tconst boldRegex = /\\*(.*?)\\*/g;\r\n\tconst tildaRegex = /~(.*?)~/g;\r\n\r\n\tif (children && boldRegex.test(children)) {\r\n\t\tchildren = children.replace(boldRegex, \"**$1**\");\r\n\t}\r\n\tif (children && tildaRegex.test(children)) {\r\n\t\tchildren = children.replace(tildaRegex, \"~~$1~~\");\r\n\t}\r\n\r\n\tconst options = React.useMemo(() => {\r\n\t\tconst markdownOptions = {\r\n\t\t\tdisableParsingRawHTML: true,\r\n\t\t\tforceInline: true,\r\n\t\t\toverrides: {\r\n\t\t\t\ta: { component: CustomLink },\r\n\t\t\t},\r\n\t\t};\r\n\r\n\t\telements.forEach(element => {\r\n\t\t\tif (!allowedElements.includes(element)) {\r\n\t\t\t\tmarkdownOptions.overrides[element] = el => el.children || null;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn markdownOptions;\r\n\t}, []);\r\n\r\n\tif (!children) return null;\r\n\r\n\treturn <Markdown options={options}>{children}</Markdown>;\r\n};\r\n\r\nexport default MarkdownWrapper;\r\n","import React, { useState, useEffect, createContext } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst TicketsContext = createContext();\r\n\r\nconst TicketsContextProvider = ({ children }) => {\r\n\tconst [currentTicket, setCurrentTicket] = useState({ id: null, code: null });\r\n    const history = useHistory();\r\n\r\n    useEffect(() => {\r\n        if (currentTicket.id !== null) {\r\n            history.push(`/tickets/${currentTicket.uuid}`);\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [currentTicket])\r\n\r\n\treturn (\r\n\t\t<TicketsContext.Provider\r\n\t\t\tvalue={{ currentTicket, setCurrentTicket }}\r\n\t\t>\r\n\t\t\t{children}\r\n\t\t</TicketsContext.Provider>\r\n\t);\r\n};\r\n\r\nexport { TicketsContext, TicketsContextProvider };\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nimport ModalImage from \"react-modal-image\";\r\nimport api from \"../../services/api\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tmessageMedia: {\r\n\t\tobjectFit: \"cover\",\r\n\t\twidth: 250,\r\n\t\theight: 200,\r\n\t\tborderTopLeftRadius: 8,\r\n\t\tborderTopRightRadius: 8,\r\n\t\tborderBottomLeftRadius: 8,\r\n\t\tborderBottomRightRadius: 8,\r\n\t},\r\n}));\r\n\r\nconst ModalImageCors = ({ imageUrl }) => {\r\n\tconst classes = useStyles();\r\n\tconst [fetching, setFetching] = useState(true);\r\n\tconst [blobUrl, setBlobUrl] = useState(\"\");\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!imageUrl) return;\r\n\t\tconst fetchImage = async () => {\r\n\t\t\tconst { data, headers } = await api.get(imageUrl, {\r\n\t\t\t\tresponseType: \"blob\",\r\n\t\t\t});\r\n\t\t\tconst url = window.URL.createObjectURL(\r\n\t\t\t\tnew Blob([data], { type: headers[\"content-type\"] })\r\n\t\t\t);\r\n\t\t\tsetBlobUrl(url);\r\n\t\t\tsetFetching(false);\r\n\t\t};\r\n\t\tfetchImage();\r\n\t}, [imageUrl]);\r\n\r\n\treturn (\r\n\t\t<ModalImage\r\n\t\t\tclassName={classes.messageMedia}\r\n\t\t\tsmallSrcSet={fetching ? imageUrl : blobUrl}\r\n\t\t\tmedium={fetching ? imageUrl : blobUrl}\r\n\t\t\tlarge={fetching ? imageUrl : blobUrl}\r\n\t\t\talt=\"image\"\r\n\t\t/>\r\n\t);\r\n};\r\n\r\nexport default ModalImageCors;\r\n","import React from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\n\r\nconst ConfirmationModal = ({ title, children, open, onClose, onConfirm }) => {\r\n\treturn (\r\n\t\t<Dialog\r\n\t\t\topen={open}\r\n\t\t\tonClose={() => onClose(false)}\r\n\t\t\taria-labelledby=\"confirm-dialog\"\r\n\t\t>\r\n\t\t\t<DialogTitle id=\"confirm-dialog\">{title}</DialogTitle>\r\n\t\t\t<DialogContent dividers>\r\n\t\t\t\t<Typography>{children}</Typography>\r\n\t\t\t</DialogContent>\r\n\t\t\t<DialogActions>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\tonClick={() => onClose(false)}\r\n\t\t\t\t\tcolor=\"default\"\r\n\t\t\t\t>\r\n\t\t\t\t\t{i18n.t(\"confirmationModal.buttons.cancel\")}\r\n\t\t\t\t</Button>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tonClose(false);\r\n\t\t\t\t\t\tonConfirm();\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t>\r\n\t\t\t\t\t{i18n.t(\"confirmationModal.buttons.confirm\")}\r\n\t\t\t\t</Button>\r\n\t\t\t</DialogActions>\r\n\t\t</Dialog>\r\n\t);\r\n};\r\n\r\nexport default ConfirmationModal;\r\n","import React, { useState, createContext } from \"react\";\r\n\r\nconst ReplyMessageContext = createContext();\r\n\r\nconst ReplyMessageProvider = ({ children }) => {\r\n\tconst [replyingMessage, setReplyingMessage] = useState(null);\r\n\r\n\treturn (\r\n\t\t<ReplyMessageContext.Provider\r\n\t\t\tvalue={{ replyingMessage, setReplyingMessage }}\r\n\t\t>\r\n\t\t\t{children}\r\n\t\t</ReplyMessageContext.Provider>\r\n\t);\r\n};\r\n\r\nexport { ReplyMessageContext, ReplyMessageProvider };\r\n","import React, { useState, useContext } from \"react\";\r\n\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport api from \"../../services/api\";\r\nimport ConfirmationModal from \"../ConfirmationModal\";\r\nimport { Menu } from \"@material-ui/core\";\r\nimport { ReplyMessageContext } from \"../../context/ReplyingMessage/ReplyingMessageContext\";\r\nimport toastError from \"../../errors/toastError\";\r\n\r\nconst MessageOptionsMenu = ({ message, menuOpen, handleClose, anchorEl }) => {\r\n\tconst { setReplyingMessage } = useContext(ReplyMessageContext);\r\n\tconst [confirmationOpen, setConfirmationOpen] = useState(false);\r\n\r\n\tconst handleDeleteMessage = async () => {\r\n\t\ttry {\r\n\t\t\tawait api.delete(`/messages/${message.id}`);\r\n\t\t} catch (err) {\r\n\t\t\ttoastError(err);\r\n\t\t}\r\n\t};\r\n\r\n\tconst hanldeReplyMessage = () => {\r\n\t\tsetReplyingMessage(message);\r\n\t\thandleClose();\r\n\t};\r\n\r\n\tconst handleOpenConfirmationModal = e => {\r\n\t\tsetConfirmationOpen(true);\r\n\t\thandleClose();\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<ConfirmationModal\r\n\t\t\t\ttitle={i18n.t(\"messageOptionsMenu.confirmationModal.title\")}\r\n\t\t\t\topen={confirmationOpen}\r\n\t\t\t\tonClose={setConfirmationOpen}\r\n\t\t\t\tonConfirm={handleDeleteMessage}\r\n\t\t\t>\r\n\t\t\t\t{i18n.t(\"messageOptionsMenu.confirmationModal.message\")}\r\n\t\t\t</ConfirmationModal>\r\n\t\t\t<Menu\r\n\t\t\t\tanchorEl={anchorEl}\r\n\t\t\t\tgetContentAnchorEl={null}\r\n\t\t\t\tanchorOrigin={{\r\n\t\t\t\t\tvertical: \"bottom\",\r\n\t\t\t\t\thorizontal: \"right\",\r\n\t\t\t\t}}\r\n\t\t\t\ttransformOrigin={{\r\n\t\t\t\t\tvertical: \"top\",\r\n\t\t\t\t\thorizontal: \"right\",\r\n\t\t\t\t}}\r\n\t\t\t\topen={menuOpen}\r\n\t\t\t\tonClose={handleClose}\r\n\t\t\t>\r\n\t\t\t\t{message.fromMe && (\r\n\t\t\t\t\t<MenuItem onClick={handleOpenConfirmationModal}>\r\n\t\t\t\t\t\t{i18n.t(\"messageOptionsMenu.delete\")}\r\n\t\t\t\t\t</MenuItem>\r\n\t\t\t\t)}\r\n\t\t\t\t<MenuItem onClick={hanldeReplyMessage}>\r\n\t\t\t\t\t{i18n.t(\"messageOptionsMenu.reply\")}\r\n\t\t\t\t</MenuItem>\r\n\t\t\t</Menu>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default MessageOptionsMenu;\r\n","import React, { useEffect } from 'react';\r\nimport toastError from \"../../errors/toastError\";\r\n\r\nimport { Button, Divider, Typography} from \"@material-ui/core\";\r\n\r\nconst LocationPreview = ({ image, link, description }) => {\r\n    useEffect(() => {}, [image, link, description]);\r\n\r\n    const handleLocation = async() => {\r\n        try {\r\n            window.open(link);\r\n        } catch (err) {\r\n            toastError(err);\r\n        }\r\n    }\r\n\r\n    return (\r\n\t\t<>\r\n\t\t\t<div style={{\r\n\t\t\t\tminWidth: \"250px\",\r\n\t\t\t}}>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<div style={{ float: \"left\" }}>\r\n\t\t\t\t\t\t<img src={image} alt=\"loc\" onClick={handleLocation} style={{ width: \"100px\" }} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{ description && (\r\n\t\t\t\t\t<div style={{ display: \"flex\", flexWrap: \"wrap\" }}>\r\n\t\t\t\t\t\t<Typography style={{ marginTop: \"12px\", marginLeft: \"15px\", marginRight: \"15px\", float: \"left\" }} variant=\"subtitle1\" color=\"primary\" gutterBottom>\r\n\t\t\t\t\t\t\t<div dangerouslySetInnerHTML={{ __html: description.replace('\\\\n', '<br />') }}></div>\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t<div style={{ display: \"block\", content: \"\", clear: \"both\" }}></div>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<Divider />\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\tonClick={handleLocation}\r\n\t\t\t\t\t\t\tdisabled={!link}\r\n\t\t\t\t\t\t>Visualizar</Button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n\r\n};\r\n\r\nexport default LocationPreview;","import React, { useState, useEffect, useReducer, useRef } from \"react\";\r\n\r\nimport { isSameDay, parseISO, format } from \"date-fns\";\r\nimport clsx from \"clsx\";\r\n\r\nimport { green } from \"@material-ui/core/colors\";\r\nimport {\r\n  Button,\r\n  CircularProgress,\r\n  Divider,\r\n  IconButton,\r\n  makeStyles,\r\n} from \"@material-ui/core\";\r\n\r\nimport {\r\n  AccessTime,\r\n  Block,\r\n  Done,\r\n  DoneAll,\r\n  ExpandMore,\r\n  GetApp,\r\n} from \"@material-ui/icons\";\r\n\r\nimport MarkdownWrapper from \"../MarkdownWrapper\";\r\nimport ModalImageCors from \"../ModalImageCors\";\r\nimport MessageOptionsMenu from \"../MessageOptionsMenu\";\r\nimport whatsBackground from \"../../assets/wa-background.png\";\r\nimport LocationPreview from \"../LocationPreview\";\r\n\r\nimport whatsBackgroundDark from \"../../assets/wa-background-dark.png\"; //DARK MODE PLW DESIGN//\r\n\r\nimport api from \"../../services/api\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport { socketConnection } from \"../../services/socket\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  messagesListWrapper: {\r\n    overflow: \"hidden\",\r\n    position: \"relative\",\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    flexGrow: 1,\r\n    width: \"100%\",\r\n    minWidth: 300,\r\n    minHeight: 200,\r\n  },\r\n\r\n  messagesList: {\r\n    backgroundImage: theme.mode === 'light' ? `url(${whatsBackground})` : `url(${whatsBackgroundDark})`, //DARK MODE PLW DESIGN//\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    flexGrow: 1,\r\n    padding: \"20px 20px 20px 20px\",\r\n    overflowY: \"scroll\",\r\n    ...theme.scrollbarStyles,\r\n  },\r\n\r\n  circleLoading: {\r\n    color: green[500],\r\n    position: \"absolute\",\r\n    opacity: \"70%\",\r\n    top: 0,\r\n    left: \"50%\",\r\n    marginTop: 12,\r\n  },\r\n\r\n  messageLeft: {\r\n    marginRight: 20,\r\n    marginTop: 2,\r\n    minWidth: 100,\r\n    maxWidth: 600,\r\n    height: \"auto\",\r\n    display: \"block\",\r\n    position: \"relative\",\r\n    \"&:hover #messageActionsButton\": {\r\n      display: \"flex\",\r\n      position: \"absolute\",\r\n      top: 0,\r\n      right: 0,\r\n    },\r\n\r\n    whiteSpace: \"pre-wrap\",\r\n    backgroundColor: \"#ffffff\",\r\n    color: \"#303030\",\r\n    alignSelf: \"flex-start\",\r\n    borderTopLeftRadius: 0,\r\n    borderTopRightRadius: 8,\r\n    borderBottomLeftRadius: 8,\r\n    borderBottomRightRadius: 8,\r\n    paddingLeft: 5,\r\n    paddingRight: 5,\r\n    paddingTop: 5,\r\n    paddingBottom: 0,\r\n    boxShadow: \"0 1px 1px #b3b3b3\",\r\n  },\r\n\r\n  quotedContainerLeft: {\r\n    margin: \"-3px -80px 6px -6px\",\r\n    overflow: \"hidden\",\r\n    backgroundColor: \"#f0f0f0\",\r\n    borderRadius: \"7.5px\",\r\n    display: \"flex\",\r\n    position: \"relative\",\r\n  },\r\n\r\n  quotedMsg: {\r\n    padding: 10,\r\n    maxWidth: 300,\r\n    height: \"auto\",\r\n    display: \"block\",\r\n    whiteSpace: \"pre-wrap\",\r\n    overflow: \"hidden\",\r\n  },\r\n\r\n  quotedSideColorLeft: {\r\n    flex: \"none\",\r\n    width: \"4px\",\r\n    backgroundColor: \"#6bcbef\",\r\n  },\r\n\r\n  messageRight: {\r\n    marginLeft: 20,\r\n    marginTop: 2,\r\n    minWidth: 100,\r\n    maxWidth: 600,\r\n    height: \"auto\",\r\n    display: \"block\",\r\n    position: \"relative\",\r\n    \"&:hover #messageActionsButton\": {\r\n      display: \"flex\",\r\n      position: \"absolute\",\r\n      top: 0,\r\n      right: 0,\r\n    },\r\n\r\n    whiteSpace: \"pre-wrap\",\r\n    backgroundColor: \"#dcf8c6\",\r\n    color: \"#303030\",\r\n    alignSelf: \"flex-end\",\r\n    borderTopLeftRadius: 8,\r\n    borderTopRightRadius: 8,\r\n    borderBottomLeftRadius: 8,\r\n    borderBottomRightRadius: 0,\r\n    paddingLeft: 5,\r\n    paddingRight: 5,\r\n    paddingTop: 5,\r\n    paddingBottom: 0,\r\n    boxShadow: \"0 1px 1px #b3b3b3\",\r\n  },\r\n\r\n  quotedContainerRight: {\r\n    margin: \"-3px -80px 6px -6px\",\r\n    overflowY: \"hidden\",\r\n    backgroundColor: \"#cfe9ba\",\r\n    borderRadius: \"7.5px\",\r\n    display: \"flex\",\r\n    position: \"relative\",\r\n  },\r\n\r\n  quotedMsgRight: {\r\n    padding: 10,\r\n    maxWidth: 300,\r\n    height: \"auto\",\r\n    whiteSpace: \"pre-wrap\",\r\n  },\r\n\r\n  quotedSideColorRight: {\r\n    flex: \"none\",\r\n    width: \"4px\",\r\n    backgroundColor: \"#35cd96\",\r\n  },\r\n\r\n  messageActionsButton: {\r\n    display: \"none\",\r\n    position: \"relative\",\r\n    color: \"#999\",\r\n    zIndex: 1,\r\n    backgroundColor: \"inherit\",\r\n    opacity: \"90%\",\r\n    \"&:hover, &.Mui-focusVisible\": { backgroundColor: \"inherit\" },\r\n  },\r\n\r\n  messageContactName: {\r\n    display: \"flex\",\r\n    color: \"#6bcbef\",\r\n    fontWeight: 500,\r\n  },\r\n\r\n  textContentItem: {\r\n    overflowWrap: \"break-word\",\r\n    padding: \"3px 80px 6px 6px\",\r\n  },\r\n  \r\n  textContentItemEdited: {\r\n    overflowWrap: \"break-word\",\r\n    padding: \"3px 120px 6px 6px\",\r\n  },\r\n\r\n  textContentItemDeleted: {\r\n    fontStyle: \"italic\",\r\n    color: \"rgba(0, 0, 0, 0.36)\",\r\n    overflowWrap: \"break-word\",\r\n    padding: \"3px 80px 6px 6px\",\r\n  },\r\n\r\n  messageMedia: {\r\n    objectFit: \"cover\",\r\n    width: 250,\r\n    height: 200,\r\n    borderTopLeftRadius: 8,\r\n    borderTopRightRadius: 8,\r\n    borderBottomLeftRadius: 8,\r\n    borderBottomRightRadius: 8,\r\n  },\r\n\r\n  timestamp: {\r\n    fontSize: 11,\r\n    position: \"absolute\",\r\n    bottom: 0,\r\n    right: 5,\r\n    color: \"#999\",\r\n  },\r\n\r\n  dailyTimestamp: {\r\n    alignItems: \"center\",\r\n    textAlign: \"center\",\r\n    alignSelf: \"center\",\r\n    width: \"110px\",\r\n    backgroundColor: \"#e1f3fb\",\r\n    margin: \"10px\",\r\n    borderRadius: \"10px\",\r\n    boxShadow: \"0 1px 1px #b3b3b3\",\r\n  },\r\n\r\n  dailyTimestampText: {\r\n    color: \"#808888\",\r\n    padding: 8,\r\n    alignSelf: \"center\",\r\n    marginLeft: \"0px\",\r\n  },\r\n\r\n  ackIcons: {\r\n    fontSize: 18,\r\n    verticalAlign: \"middle\",\r\n    marginLeft: 4,\r\n  },\r\n\r\n  deletedIcon: {\r\n    fontSize: 18,\r\n    verticalAlign: \"middle\",\r\n    marginRight: 4,\r\n  },\r\n\r\n  ackDoneAllIcon: {\r\n    color: green[500],\r\n    fontSize: 18,\r\n    verticalAlign: \"middle\",\r\n    marginLeft: 4,\r\n  },\r\n\r\n  downloadMedia: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    backgroundColor: \"inherit\",\r\n    padding: 10,\r\n  },\r\n}));\r\n\r\nconst reducer = (state, action) => {\r\n  if (action.type === \"LOAD_MESSAGES\") {\r\n    const messages = action.payload;\r\n    const newMessages = [];\r\n\r\n    messages.forEach((message) => {\r\n      const messageIndex = state.findIndex((m) => m.id === message.id);\r\n      if (messageIndex !== -1) {\r\n        state[messageIndex] = message;\r\n      } else {\r\n        newMessages.push(message);\r\n      }\r\n    });\r\n\r\n    return [...newMessages, ...state];\r\n  }\r\n\r\n  if (action.type === \"ADD_MESSAGE\") {\r\n    const newMessage = action.payload;\r\n    const messageIndex = state.findIndex((m) => m.id === newMessage.id);\r\n\r\n    if (messageIndex !== -1) {\r\n      state[messageIndex] = newMessage;\r\n    } else {\r\n      state.push(newMessage);\r\n    }\r\n\r\n    return [...state];\r\n  }\r\n\r\n  if (action.type === \"UPDATE_MESSAGE\") {\r\n    const messageToUpdate = action.payload;\r\n    const messageIndex = state.findIndex((m) => m.id === messageToUpdate.id);\r\n\r\n    if (messageIndex !== -1) {\r\n      state[messageIndex] = messageToUpdate;\r\n    }\r\n\r\n    return [...state];\r\n  }\r\n\r\n  if (action.type === \"RESET\") {\r\n    return [];\r\n  }\r\n};\r\n\r\nconst MessagesList = ({ ticket, ticketId, isGroup }) => {\r\n  const classes = useStyles();\r\n\r\n  const [messagesList, dispatch] = useReducer(reducer, []);\r\n  const [pageNumber, setPageNumber] = useState(1);\r\n  const [hasMore, setHasMore] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const lastMessageRef = useRef();\r\n\r\n  const [selectedMessage, setSelectedMessage] = useState({});\r\n  const [anchorEl, setAnchorEl] = useState(null);\r\n  const messageOptionsMenuOpen = Boolean(anchorEl);\r\n  const currentTicketId = useRef(ticketId);\r\n\r\n  useEffect(() => {\r\n    dispatch({ type: \"RESET\" });\r\n    setPageNumber(1);\r\n\r\n    currentTicketId.current = ticketId;\r\n  }, [ticketId]);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    const delayDebounceFn = setTimeout(() => {\r\n      const fetchMessages = async () => {\r\n        if (ticketId === undefined) return;\r\n        try {\r\n          const { data } = await api.get(\"/messages/\" + ticketId, {\r\n            params: { pageNumber },\r\n          });\r\n\r\n          if (currentTicketId.current === ticketId) {\r\n            dispatch({ type: \"LOAD_MESSAGES\", payload: data.messages });\r\n            setHasMore(data.hasMore);\r\n            setLoading(false);\r\n          }\r\n\r\n          if (pageNumber === 1 && data.messages.length > 1) {\r\n            scrollToBottom();\r\n          }\r\n        } catch (err) {\r\n          setLoading(false);\r\n          toastError(err);\r\n        }\r\n      };\r\n      fetchMessages();\r\n    }, 500);\r\n    return () => {\r\n      clearTimeout(delayDebounceFn);\r\n    };\r\n  }, [pageNumber, ticketId]);\r\n\r\n  useEffect(() => {\r\n    const companyId = localStorage.getItem(\"companyId\");\r\n    const socket = socketConnection({ companyId });\r\n\r\n    socket.on(\"connect\", () => socket.emit(\"joinChatBox\", `${ticket.id}`));\r\n\r\n    socket.on(`company-${companyId}-appMessage`, (data) => {\r\n      if (data.action === \"create\") {\r\n        dispatch({ type: \"ADD_MESSAGE\", payload: data.message });\r\n        scrollToBottom();\r\n      }\r\n\r\n      if (data.action === \"update\") {\r\n        dispatch({ type: \"UPDATE_MESSAGE\", payload: data.message });\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      socket.disconnect();\r\n    };\r\n  }, [ticketId, ticket]);\r\n\r\n  const loadMore = () => {\r\n    setPageNumber((prevPageNumber) => prevPageNumber + 1);\r\n  };\r\n\r\n  const scrollToBottom = () => {\r\n    if (lastMessageRef.current) {\r\n      lastMessageRef.current.scrollIntoView({});\r\n    }\r\n  };\r\n\r\n  const handleScroll = (e) => {\r\n    if (!hasMore) return;\r\n    const { scrollTop } = e.currentTarget;\r\n\r\n    if (scrollTop === 0) {\r\n      document.getElementById(\"messagesList\").scrollTop = 1;\r\n    }\r\n\r\n    if (loading) {\r\n      return;\r\n    }\r\n\r\n    if (scrollTop < 50) {\r\n      loadMore();\r\n    }\r\n  };\r\n\r\n  const handleOpenMessageOptionsMenu = (e, message) => {\r\n    setAnchorEl(e.currentTarget);\r\n    setSelectedMessage(message);\r\n  };\r\n\r\n  const handleCloseMessageOptionsMenu = (e) => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  const checkMessageMedia = (message) => {\r\n    if (message.mediaType === \"locationMessage\" && message.body.split('|').length >= 2) {\r\n      let locationParts = message.body.split('|')\r\n      let imageLocation = locationParts[0]\r\n      let linkLocation = locationParts[1]\r\n\r\n      let descriptionLocation = null\r\n\r\n      if (locationParts.length > 2)\r\n        descriptionLocation = message.body.split('|')[2]\r\n\r\n      return <LocationPreview image={imageLocation} link={linkLocation} description={descriptionLocation} />\r\n    }\r\n    /* else if (message.mediaType === \"vcard\") {\r\n      let array = message.body.split(\"\\n\");\r\n      let obj = [];\r\n      let contact = \"\";\r\n      for (let index = 0; index < array.length; index++) {\r\n        const v = array[index];\r\n        let values = v.split(\":\");\r\n        for (let ind = 0; ind < values.length; ind++) {\r\n          if (values[ind].indexOf(\"+\") !== -1) {\r\n            obj.push({ number: values[ind] });\r\n          }\r\n          if (values[ind].indexOf(\"FN\") !== -1) {\r\n            contact = values[ind + 1];\r\n          }\r\n        }\r\n      }\r\n      return <VcardPreview contact={contact} numbers={obj[0].number} />\r\n    } */\r\n    /*else if (message.mediaType === \"multi_vcard\") {\r\n      console.log(\"multi_vcard\")\r\n      console.log(message)\r\n    \t\r\n      if(message.body !== null && message.body !== \"\") {\r\n        let newBody = JSON.parse(message.body)\r\n        return (\r\n          <>\r\n            {\r\n            newBody.map(v => (\r\n              <VcardPreview contact={v.name} numbers={v.number} />\r\n            ))\r\n            }\r\n          </>\r\n        )\r\n      } else return (<></>)\r\n    }*/\r\n    else if (message.mediaType === \"image\") {\r\n      return <ModalImageCors imageUrl={message.mediaUrl} />;\r\n    } else if (message.mediaType === \"audio\") {\r\n      return (\r\n        <audio controls>\r\n          <source src={message.mediaUrl} type=\"audio/ogg\"></source>\r\n        </audio>\r\n      );\r\n    } else if (message.mediaType === \"video\") {\r\n      return (\r\n        <video\r\n          className={classes.messageMedia}\r\n          src={message.mediaUrl}\r\n          controls\r\n        />\r\n      );\r\n    } else {\r\n      return (\r\n        <>\r\n          <div className={classes.downloadMedia}>\r\n            <Button\r\n              startIcon={<GetApp />}\r\n              color=\"primary\"\r\n              variant=\"outlined\"\r\n              target=\"_blank\"\r\n              href={message.mediaUrl}\r\n            >\r\n              Download\r\n            </Button>\r\n          </div>\r\n          <Divider />\r\n        </>\r\n      );\r\n    }\r\n  };\r\n\r\n  const renderMessageAck = (message) => {\r\n    if (message.ack === 1) {\r\n      return <AccessTime fontSize=\"small\" className={classes.ackIcons} />;\r\n    }\r\n    if (message.ack === 2) {\r\n      return <Done fontSize=\"small\" className={classes.ackIcons} />;\r\n    }\r\n    if (message.ack === 3) {\r\n      return <DoneAll fontSize=\"small\" className={classes.ackIcons} />;\r\n    }\r\n    if (message.ack === 4 || message.ack === 5) {\r\n      return <DoneAll fontSize=\"small\" className={classes.ackDoneAllIcon} />;\r\n    }\r\n  };\r\n\r\n  const renderDailyTimestamps = (message, index) => {\r\n    if (index === 0) {\r\n      return (\r\n        <span\r\n          className={classes.dailyTimestamp}\r\n          key={`timestamp-${message.id}`}\r\n        >\r\n          <div className={classes.dailyTimestampText}>\r\n            {format(parseISO(messagesList[index].createdAt), \"dd/MM/yyyy\")}\r\n          </div>\r\n        </span>\r\n      );\r\n    }\r\n    if (index < messagesList.length - 1) {\r\n      let messageDay = parseISO(messagesList[index].createdAt);\r\n      let previousMessageDay = parseISO(messagesList[index - 1].createdAt);\r\n\r\n      if (!isSameDay(messageDay, previousMessageDay)) {\r\n        return (\r\n          <span\r\n            className={classes.dailyTimestamp}\r\n            key={`timestamp-${message.id}`}\r\n          >\r\n            <div className={classes.dailyTimestampText}>\r\n              {format(parseISO(messagesList[index].createdAt), \"dd/MM/yyyy\")}\r\n            </div>\r\n          </span>\r\n        );\r\n      }\r\n    }\r\n    if (index === messagesList.length - 1) {\r\n      return (\r\n        <div\r\n          key={`ref-${message.createdAt}`}\r\n          ref={lastMessageRef}\r\n          style={{ float: \"left\", clear: \"both\" }}\r\n        />\r\n      );\r\n    }\r\n  };\r\n\r\n  const renderNumberTicket = (message, index) => {\r\n    if (index < messagesList.length && index > 0) {\r\n\r\n      let messageTicket = message.ticketId;\r\n      let connectionName = message.ticket?.whatsapp?.name;\r\n      let previousMessageTicket = messagesList[index - 1].ticketId;\r\n\r\n      if (messageTicket !== previousMessageTicket) {\r\n        return (\r\n          <center>\r\n            <div className={classes.ticketNunberClosed}>\r\n              Conversa encerrada: {format(parseISO(messagesList[index - 1].createdAt), \"dd/MM/yyyy HH:mm:ss\")}\r\n            </div>\r\n\r\n            <div className={classes.ticketNunberOpen}>\r\n              Conversa iniciada: {format(parseISO(message.createdAt), \"dd/MM/yyyy HH:mm:ss\")}\r\n            </div>\r\n          </center>\r\n        );\r\n      }\r\n    }\r\n  };\r\n\r\n  const renderMessageDivider = (message, index) => {\r\n    if (index < messagesList.length && index > 0) {\r\n      let messageUser = messagesList[index].fromMe;\r\n      let previousMessageUser = messagesList[index - 1].fromMe;\r\n\r\n      if (messageUser !== previousMessageUser) {\r\n        return (\r\n          <span style={{ marginTop: 16 }} key={`divider-${message.id}`}></span>\r\n        );\r\n      }\r\n    }\r\n  };\r\n\r\n  const renderQuotedMessage = (message) => {\r\n    return (\r\n      <div\r\n        className={clsx(classes.quotedContainerLeft, {\r\n          [classes.quotedContainerRight]: message.fromMe,\r\n        })}\r\n      >\r\n        <span\r\n          className={clsx(classes.quotedSideColorLeft, {\r\n            [classes.quotedSideColorRight]: message.quotedMsg?.fromMe,\r\n          })}\r\n        ></span>\r\n        <div className={classes.quotedMsg}>\r\n          {!message.quotedMsg?.fromMe && (\r\n            <span className={classes.messageContactName}>\r\n              {message.quotedMsg?.contact?.name}\r\n            </span>\r\n          )}\r\n\r\n          {message.quotedMsg.mediaType === \"audio\"\r\n            && (\r\n              <div className={classes.downloadMedia}>\r\n                <audio controls>\r\n                  <source src={message.quotedMsg.mediaUrl} type=\"audio/ogg\"></source>\r\n                </audio>\r\n              </div>\r\n            )\r\n          }\r\n          {message.quotedMsg.mediaType === \"video\"\r\n            && (\r\n              <video\r\n                className={classes.messageMedia}\r\n                src={message.quotedMsg.mediaUrl}\r\n                controls\r\n              />\r\n            )\r\n          }\r\n          {message.quotedMsg.mediaType === \"application\"\r\n            && (\r\n              <div className={classes.downloadMedia}>\r\n                <Button\r\n                  startIcon={<GetApp />}\r\n                  color=\"primary\"\r\n                  variant=\"outlined\"\r\n                  target=\"_blank\"\r\n                  href={message.quotedMsg.mediaUrl}\r\n                >\r\n                  Download\r\n                </Button>\r\n              </div>\r\n            )\r\n          }\r\n\r\n          {message.quotedMsg.mediaType === \"image\"\r\n            && (\r\n              <ModalImageCors imageUrl={message.quotedMsg.mediaUrl} />)\r\n            || message.quotedMsg?.body}\r\n\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const renderMessages = () => {\r\n    if (messagesList.length > 0) {\r\n      const viewMessagesList = messagesList.map((message, index) => {\r\n\r\n        if (message.mediaType === \"call_log\") {\r\n          return (\r\n            <React.Fragment key={message.id}>\r\n              {renderDailyTimestamps(message, index)}\r\n              {renderNumberTicket(message, index)}\r\n              {renderMessageDivider(message, index)}\r\n              <div className={classes.messageCenter}>\r\n                <IconButton\r\n                  variant=\"contained\"\r\n                  size=\"small\"\r\n                  id=\"messageActionsButton\"\r\n                  disabled={message.isDeleted}\r\n                  className={classes.messageActionsButton}\r\n                  onClick={(e) => handleOpenMessageOptionsMenu(e, message)}\r\n                >\r\n                  <ExpandMore />\r\n                </IconButton>\r\n                {isGroup && (\r\n                  <span className={classes.messageContactName}>\r\n                    {message.contact?.name}\r\n                  </span>\r\n                )}\r\n                <div>\r\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 17\" width=\"20\" height=\"17\">\r\n                    <path fill=\"#df3333\" d=\"M18.2 12.1c-1.5-1.8-5-2.7-8.2-2.7s-6.7 1-8.2 2.7c-.7.8-.3 2.3.2 2.8.2.2.3.3.5.3 1.4 0 3.6-.7 3.6-.7.5-.2.8-.5.8-1v-1.3c.7-1.2 5.4-1.2 6.4-.1l.1.1v1.3c0 .2.1.4.2.6.1.2.3.3.5.4 0 0 2.2.7 3.6.7.2 0 1.4-2 .5-3.1zM5.4 3.2l4.7 4.6 5.8-5.7-.9-.8L10.1 6 6.4 2.3h2.5V1H4.1v4.8h1.3V3.2z\"></path>\r\n                  </svg> <span>Chamada de voz/vídeo perdida às {format(parseISO(message.createdAt), \"HH:mm\")}</span>\r\n                </div>\r\n              </div>\r\n            </React.Fragment>\r\n          );\r\n        }\r\n\r\n        if (!message.fromMe) {\r\n          return (\r\n            <React.Fragment key={message.id}>\r\n              {renderDailyTimestamps(message, index)}\r\n              {renderNumberTicket(message, index)}\r\n              {renderMessageDivider(message, index)}\r\n              <div className={classes.messageLeft}>\r\n                <IconButton\r\n                  variant=\"contained\"\r\n                  size=\"small\"\r\n                  id=\"messageActionsButton\"\r\n                  disabled={message.isDeleted}\r\n                  className={classes.messageActionsButton}\r\n                  onClick={(e) => handleOpenMessageOptionsMenu(e, message)}\r\n                >\r\n                  <ExpandMore />\r\n                </IconButton>\r\n                {isGroup && (\r\n                  <span className={classes.messageContactName}>\r\n                    {message.contact?.name}\r\n                  </span>\r\n                )}\r\n\r\n                {/* aviso de mensagem apagado pelo contato */}\r\n                {message.isDeleted && (\r\n                  <div>\r\n                    <span className={\"message-deleted\"}\r\n                    >Essa mensagem foi apagada pelo contato &nbsp;\r\n                      <Block\r\n                        color=\"error\"\r\n                        fontSize=\"small\"\r\n                        className={classes.deletedIcon}\r\n                      />\r\n                    </span>\r\n                  </div>\r\n                )}\r\n\r\n                {(message.mediaUrl || message.mediaType === \"locationMessage\" || message.mediaType === \"vcard\"\r\n                  //|| message.mediaType === \"multi_vcard\" \r\n                ) && checkMessageMedia(message)}\r\n                <div className={classes.textContentItem}>\r\n                  {message.quotedMsg && renderQuotedMessage(message)}\r\n                  <MarkdownWrapper>{message.mediaType === \"locationMessage\" ? null : message.body}</MarkdownWrapper>\r\n                  <span className={classes.timestamp}>\r\n\t\t\t\t    {message.isEdited && <span>Editada </span>}\r\n                    {format(parseISO(message.createdAt), \"HH:mm\")}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </React.Fragment>\r\n          );\r\n        } else {\r\n          return (\r\n            <React.Fragment key={message.id}>\r\n              {renderDailyTimestamps(message, index)}\r\n              {renderNumberTicket(message, index)}\r\n              {renderMessageDivider(message, index)}\r\n              <div className={classes.messageRight}>\r\n                <IconButton\r\n                  variant=\"contained\"\r\n                  size=\"small\"\r\n                  id=\"messageActionsButton\"\r\n                  disabled={message.isDeleted}\r\n                  className={classes.messageActionsButton}\r\n                  onClick={(e) => handleOpenMessageOptionsMenu(e, message)}\r\n                >\r\n                  <ExpandMore />\r\n                </IconButton>\r\n                {(message.mediaUrl || message.mediaType === \"locationMessage\" || message.mediaType === \"vcard\"\r\n                  //|| message.mediaType === \"multi_vcard\" \r\n                ) && checkMessageMedia(message)}\r\n                <div\r\n                  className={clsx(classes.textContentItem, {\r\n                    [classes.textContentItemDeleted]: message.isDeleted,\r\n\t\t\t\t\t[classes.textContentItemEdited]: message.isEdited,\r\n                  })}\r\n                >\r\n                  {message.isDeleted && (\r\n                    <Block\r\n                      color=\"disabled\"\r\n                      fontSize=\"small\"\r\n                      className={classes.deletedIcon}\r\n                    />\r\n                  )}\r\n                  {message.quotedMsg && renderQuotedMessage(message)}\r\n                  <MarkdownWrapper>{message.body}</MarkdownWrapper>\r\n                  <span className={classes.timestamp}>\r\n\t\t\t\t    {message.isEdited && <span>Editada </span>}\r\n                    {format(parseISO(message.createdAt), \"HH:mm\")}\r\n                    {renderMessageAck(message)}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </React.Fragment>\r\n          );\r\n        }\r\n      });\r\n      return viewMessagesList;\r\n    } else {\r\n      return <div>Diga olá para seu novo contato!</div>;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={classes.messagesListWrapper}>\r\n      <MessageOptionsMenu\r\n        message={selectedMessage}\r\n        anchorEl={anchorEl}\r\n        menuOpen={messageOptionsMenuOpen}\r\n        handleClose={handleCloseMessageOptionsMenu}\r\n      />\r\n      <div\r\n        id=\"messagesList\"\r\n        className={classes.messagesList}\r\n        onScroll={handleScroll}\r\n      >\r\n        {messagesList.length > 0 ? renderMessages() : []}\r\n      </div>\r\n      {loading && (\r\n        <div>\r\n          <CircularProgress className={classes.circleLoading} />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MessagesList;\r\n","import React from \"react\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { Avatar, Card, CardHeader } from \"@material-ui/core\";\r\nimport Skeleton from \"@material-ui/lab/Skeleton\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tticketHeader: {\r\n\t\tdisplay: \"flex\",\r\n\t\tbackgroundColor: \"#eee\",\r\n\t\tflex: \"none\",\r\n\t\tborderBottom: \"1px solid rgba(0, 0, 0, 0.12)\",\r\n\t},\r\n}));\r\n\r\nconst TicketHeaderSkeleton = () => {\r\n\tconst classes = useStyles();\r\n\r\n\treturn (\r\n\t\t<Card square className={classes.ticketHeader}>\r\n\t\t\t<CardHeader\r\n\t\t\t\ttitleTypographyProps={{ noWrap: true }}\r\n\t\t\t\tsubheaderTypographyProps={{ noWrap: true }}\r\n\t\t\t\tavatar={\r\n\t\t\t\t\t<Skeleton animation=\"wave\" variant=\"circle\">\r\n\t\t\t\t\t\t<Avatar alt=\"contact_image\" />\r\n\t\t\t\t\t</Skeleton>\r\n\t\t\t\t}\r\n\t\t\t\ttitle={<Skeleton animation=\"wave\" width={80} />}\r\n\t\t\t\tsubheader={<Skeleton animation=\"wave\" width={140} />}\r\n\t\t\t/>\r\n\t\t</Card>\r\n\t);\r\n};\r\n\r\nexport default TicketHeaderSkeleton;\r\n","import React from \"react\";\r\n\r\nimport { Card } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport TicketHeaderSkeleton from \"../TicketHeaderSkeleton\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tticketHeader: {\r\n\t\tdisplay: \"flex\",\r\n\t\tbackgroundColor: theme.palette.tabHeaderBackground,\r\n\t\tflex: \"none\",\r\n\t\tborderBottom: \"1px solid rgba(0, 0, 0, 0.12)\",\r\n\t\t[theme.breakpoints.down(\"sm\")]: {\r\n\t\t\tflexWrap: \"wrap\"\r\n\t\t}\r\n\t},\r\n}));\r\n\r\n\r\nconst TicketHeader = ({ loading, children }) => {\r\n\tconst classes = useStyles();\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{loading ? (\r\n\t\t\t\t<TicketHeaderSkeleton />\r\n\t\t\t) : (\r\n\t\t\t\t<Card square className={classes.ticketHeader}>\r\n\t\t\t\t\t{children}\r\n\t\t\t\t</Card>\r\n\t\t\t)}\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default TicketHeader;\r\n","import React, { useState, useEffect } from \"react\";\r\n\r\nimport { Avatar, CardHeader } from \"@material-ui/core\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\n\r\nconst TicketInfo = ({ contact, ticket, onClick }) => {\r\n\tconst { user } = ticket\r\n\tconst [userName, setUserName] = useState('')\r\n\tconst [contactName, setContactName] = useState('')\r\n\r\n\tuseEffect(() => {\r\n\t\tif (contact) {\r\n\t\t\tsetContactName(contact.name);\r\n\t\t\tif(document.body.offsetWidth < 600) {\r\n\t\t\t\tif (contact.name.length > 10) {\r\n\t\t\t\t\tconst truncadName = contact.name.substring(0, 10) + '...';\r\n\t\t\t\t\tsetContactName(truncadName);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (user && contact) {\r\n\t\t\tsetUserName(`${i18n.t(\"messagesList.header.assignedTo\")} ${user.name}`);\r\n\r\n\t\t\tif(document.body.offsetWidth < 600) {\r\n\t\t\t\tsetUserName(`${user.name}`);\r\n\t\t\t}\r\n\t\t}\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t}, [])\r\n\r\n\treturn (\r\n\t\t<CardHeader\r\n\t\t\tonClick={onClick}\r\n\t\t\tstyle={{ cursor: \"pointer\" }}\r\n\t\t\ttitleTypographyProps={{ noWrap: true }}\r\n\t\t\tsubheaderTypographyProps={{ noWrap: true }}\r\n\t\t\tavatar={<Avatar src={contact.profilePicUrl} alt=\"contact_image\" />}\r\n\t\t\ttitle={`${contactName} #${ticket.id}`}\r\n\t\t\tsubheader={ticket.user && `${userName}`}\r\n\t\t/>\r\n\t);\r\n};\r\n\r\nexport default TicketInfo;\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\n\r\nimport { toast } from \"react-toastify\";\r\nimport api from \"../../services/api\";\r\nimport toastError from \"../../errors/toastError\";\r\n\r\nimport {\r\n  Box,\r\n  Button,\r\n  Dialog,\r\n  DialogActions,\r\n  makeStyles,\r\n} from \"@material-ui/core\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\nimport MessagesList from \"../MessagesList\";\r\nimport { ReplyMessageProvider } from \"../../context/ReplyingMessage/ReplyingMessageContext\";\r\nimport TicketHeader from \"../TicketHeader\";\r\nimport TicketInfo from \"../TicketInfo\";\r\nimport { socketConnection } from \"../../services/socket\";\r\n\r\nconst drawerWidth = 320;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n    height: \"100%\",\r\n    position: \"relative\",\r\n    overflow: \"hidden\",\r\n  },\r\n\r\n  mainWrapper: {\r\n    flex: 1,\r\n    height: \"100%\",\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    overflow: \"hidden\",\r\n    borderTopLeftRadius: 0,\r\n    borderBottomLeftRadius: 0,\r\n    borderLeft: \"0\",\r\n    marginRight: -drawerWidth,\r\n    transition: theme.transitions.create(\"margin\", {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.leavingScreen,\r\n    }),\r\n  },\r\n\r\n  mainWrapperShift: {\r\n    borderTopRightRadius: 0,\r\n    borderBottomRightRadius: 0,\r\n    transition: theme.transitions.create(\"margin\", {\r\n      easing: theme.transitions.easing.easeOut,\r\n      duration: theme.transitions.duration.enteringScreen,\r\n    }),\r\n    marginRight: 0,\r\n  },\r\n}));\r\n\r\nexport default function TicketMessagesDialog({ open, handleClose, ticketId }) {\r\n  const history = useHistory();\r\n  const classes = useStyles();\r\n\r\n  const { user } = useContext(AuthContext);\r\n\r\n  const [, setDrawerOpen] = useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n  const [contact, setContact] = useState({});\r\n  const [ticket, setTicket] = useState({});\r\n\r\n  useEffect(() => {\r\n    let delayDebounceFn = null;\r\n    if (open) {\r\n      setLoading(true);\r\n      delayDebounceFn = setTimeout(() => {\r\n        const fetchTicket = async () => {\r\n          try {\r\n            const { data } = await api.get(\"/tickets/\" + ticketId);\r\n            const { queueId } = data;\r\n            const { queues, profile } = user;\r\n\r\n            const queueAllowed = queues.find((q) => q.id === queueId);\r\n            if (queueAllowed === undefined && profile !== \"admin\") {\r\n              toast.error(\"Acesso não permitido\");\r\n              history.push(\"/tickets\");\r\n              return;\r\n            }\r\n\r\n            setContact(data.contact);\r\n            setTicket(data);\r\n            setLoading(false);\r\n          } catch (err) {\r\n            setLoading(false);\r\n            toastError(err);\r\n          }\r\n        };\r\n        fetchTicket();\r\n      }, 500);\r\n    }\r\n    return () => {\r\n      if (delayDebounceFn !== null) {\r\n        clearTimeout(delayDebounceFn);\r\n      }\r\n    };\r\n  }, [ticketId, user, history, open]);\r\n\r\n  useEffect(() => {\r\n    const companyId = localStorage.getItem(\"companyId\");\r\n    let socket = null;\r\n\r\n    if (open) {\r\n      socket = socketConnection({ companyId });\r\n      socket.on(\"connect\", () => socket.emit(\"joinChatBox\", `${ticket.id}`));\r\n\r\n      socket.on(`company-${companyId}-ticket`, (data) => {\r\n        if (data.action === \"update\") {\r\n          setTicket(data.ticket);\r\n        }\r\n\r\n        if (data.action === \"delete\") {\r\n          toast.success(\"Ticket deleted sucessfully.\");\r\n          history.push(\"/tickets\");\r\n        }\r\n      });\r\n\r\n      socket.on(`company-${companyId}-contact`, (data) => {\r\n        if (data.action === \"update\") {\r\n          setContact((prevState) => {\r\n            if (prevState.id === data.contact?.id) {\r\n              return { ...prevState, ...data.contact };\r\n            }\r\n            return prevState;\r\n          });\r\n        }\r\n      });\r\n    }\r\n\r\n    return () => {\r\n      if (socket !== null) {\r\n        socket.disconnect();\r\n      }\r\n    };\r\n  }, [ticketId, ticket, history, open]);\r\n\r\n  const handleDrawerOpen = () => {\r\n    setDrawerOpen(true);\r\n  };\r\n\r\n  const renderTicketInfo = () => {\r\n    if (ticket.user !== undefined) {\r\n      return (\r\n        <TicketInfo\r\n          contact={contact}\r\n          ticket={ticket}\r\n          onClick={handleDrawerOpen}\r\n        />\r\n      );\r\n    }\r\n  };\r\n\r\n  const renderMessagesList = () => {\r\n    return (\r\n      <Box className={classes.root}>\r\n        <MessagesList\r\n          ticket={ticket}\r\n          ticketId={ticket.id}\r\n          isGroup={ticket.isGroup}\r\n        ></MessagesList>\r\n      </Box>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Dialog maxWidth=\"md\" onClose={handleClose} open={open}>\r\n      <TicketHeader loading={loading}>{renderTicketInfo()}</TicketHeader>\r\n      <ReplyMessageProvider>{renderMessagesList()}</ReplyMessageProvider>\r\n      <DialogActions>\r\n        <Button onClick={handleClose} color=\"primary\">\r\n          Fechar\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n}\r\n","function getRGB(c) {\r\n  return parseInt(c, 16) || c\r\n}\r\n\r\nfunction getsRGB(c) {\r\n  return getRGB(c) / 255 <= 0.03928\r\n    ? getRGB(c) / 255 / 12.92\r\n    : Math.pow((getRGB(c) / 255 + 0.055) / 1.055, 2.4)\r\n}\r\n\r\nfunction getLuminance(hexColor) {\r\n  return (\r\n    0.2126 * getsRGB(hexColor.substr(1, 2)) +\r\n    0.7152 * getsRGB(hexColor.substr(3, 2)) +\r\n    0.0722 * getsRGB(hexColor.substr(-2))\r\n  )\r\n}\r\n\r\nfunction getContrast(f, b) {\r\n  const L1 = getLuminance(f)\r\n  const L2 = getLuminance(b)\r\n  return (Math.max(L1, L2) + 0.05) / (Math.min(L1, L2) + 0.05)\r\n}\r\n\r\nfunction getTextColor(bgColor) {\r\n  const whiteContrast = getContrast(bgColor, '#ffffff')\r\n  const blackContrast = getContrast(bgColor, '#000000')\r\n\r\n  return whiteContrast > blackContrast ? '#ffffff' : '#000000'\r\n}\r\n\r\nconst contrastColor = (color) => {\r\n    return getTextColor(color);\r\n}\r\n\r\nexport default contrastColor;","import { makeStyles } from \"@material-ui/styles\";\r\nimport React from \"react\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    tag: {\r\n        padding: \"1px 5px\",\r\n        borderRadius: \"3px\",\r\n        fontSize: \"0.8em\",\r\n        fontWeight: \"bold\",\r\n        color: \"#FFF\",\r\n        marginRight: \"5px\",\r\n        whiteSpace: \"nowrap\"\r\n    }\r\n}));\r\n\r\nconst ContactTag = ({ tag }) => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <div className={classes.tag} style={{ backgroundColor: tag.color, marginTop: \"2px\" }}>\r\n            {tag.name.toUpperCase()}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ContactTag;","import React, { useState, useEffect, useRef, useContext } from \"react\";\r\n\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\nimport { parseISO, format, isSameDay } from \"date-fns\";\r\nimport clsx from \"clsx\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { green, grey, red, blue } from \"@material-ui/core/colors\";\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport ListItemAvatar from \"@material-ui/core/ListItemAvatar\";\r\nimport ListItemSecondaryAction from \"@material-ui/core/ListItemSecondaryAction\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport Badge from \"@material-ui/core/Badge\";\r\nimport Box from \"@material-ui/core/Box\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\n\r\nimport api from \"../../services/api\";\r\nimport ButtonWithSpinner from \"../ButtonWithSpinner\";\r\nimport MarkdownWrapper from \"../MarkdownWrapper\";\r\nimport { Tooltip } from \"@material-ui/core\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\nimport { TicketsContext } from \"../../context/Tickets/TicketsContext\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\n\r\nimport RoomIcon from '@material-ui/icons/Room';\r\nimport WhatsAppIcon from \"@material-ui/icons/WhatsApp\";\r\nimport AndroidIcon from \"@material-ui/icons/Android\";\r\nimport VisibilityIcon from \"@material-ui/icons/Visibility\";\r\nimport TicketMessagesDialog from \"../TicketMessagesDialog\";\r\nimport DoneIcon from '@material-ui/icons/Done';\r\nimport ClearOutlinedIcon from '@material-ui/icons/ClearOutlined';\r\nimport contrastColor from \"../../helpers/contrastColor\";\r\nimport ContactTag from \"../ContactTag\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  ticket: {\r\n    position: \"relative\",\r\n  },\r\n\r\n  pendingTicket: {\r\n    cursor: \"unset\",\r\n  },\r\n  queueTag: {\r\n    background: \"#FCFCFC\",\r\n    color: \"#000\",\r\n    marginRight: 1,\r\n    padding: 1,\r\n    fontWeight: 'bold',\r\n    paddingLeft: 5,\r\n    paddingRight: 5,\r\n    borderRadius: 3,\r\n    fontSize: \"0.8em\",\r\n    whiteSpace: \"nowrap\"\r\n  },\r\n  noTicketsDiv: {\r\n    display: \"flex\",\r\n    height: \"100px\",\r\n    margin: 40,\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n  },\r\n  newMessagesCount: {\r\n    position: \"absolute\",\r\n    alignSelf: \"center\",\r\n    marginRight: 8,\r\n    marginLeft: \"auto\",\r\n    top: \"10px\",\r\n    left: \"20px\",\r\n    borderRadius: 0,\r\n  },\r\n  noTicketsText: {\r\n    textAlign: \"center\",\r\n    color: \"rgb(104, 121, 146)\",\r\n    fontSize: \"14px\",\r\n    lineHeight: \"1.4\",\r\n  },\r\n  connectionTag: {\r\n    background: \"green\",\r\n    color: \"#FFF\",\r\n    marginRight: 1,\r\n    padding: 1,\r\n    fontWeight: 'bold',\r\n    paddingLeft: 5,\r\n    paddingRight: 5,\r\n    borderRadius: 3,\r\n    fontSize: \"0.8em\",\r\n    whiteSpace: \"nowrap\"\r\n  },\r\n  noTicketsTitle: {\r\n    textAlign: \"center\",\r\n    fontSize: \"16px\",\r\n    fontWeight: \"600\",\r\n    margin: \"0px\",\r\n  },\r\n\r\n  contactNameWrapper: {\r\n    display: \"flex\",\r\n    justifyContent: \"space-between\",\r\n    marginLeft: \"5px\",\r\n  },\r\n\r\n  lastMessageTime: {\r\n    justifySelf: \"flex-end\",\r\n    textAlign: \"right\",\r\n    position: \"relative\",\r\n    top: -21\r\n  },\r\n\r\n  closedBadge: {\r\n    alignSelf: \"center\",\r\n    justifySelf: \"flex-end\",\r\n    marginRight: 32,\r\n    marginLeft: \"auto\",\r\n  },\r\n\r\n  contactLastMessage: {\r\n    paddingRight: \"0%\",\r\n    marginLeft: \"5px\",\r\n  },\r\n\r\n\r\n  badgeStyle: {\r\n    color: \"white\",\r\n    backgroundColor: green[500],\r\n  },\r\n\r\n  acceptButton: {\r\n    position: \"absolute\",\r\n    right: \"108px\",\r\n  },\r\n\r\n\r\n  acceptButton: {\r\n    position: \"absolute\",\r\n    left: \"50%\",\r\n  },\r\n\r\n\r\n  ticketQueueColor: {\r\n    flex: \"none\",\r\n    width: \"8px\",\r\n    height: \"100%\",\r\n    position: \"absolute\",\r\n    top: \"0%\",\r\n    left: \"0%\",\r\n  },\r\n\r\n  ticketInfo: {\r\n    position: \"relative\",\r\n    top: -13\r\n  },\r\n  secondaryContentSecond: {\r\n    display: 'flex',\r\n    // marginTop: 5,\r\n    //marginLeft: \"5px\",\r\n    alignItems: \"flex-start\",\r\n    flexWrap: \"wrap\",\r\n    flexDirection: \"row\",\r\n    alignContent: \"flex-start\",\r\n  },\r\n  ticketInfo1: {\r\n    position: \"relative\",\r\n    top: 13,\r\n    right: 0\r\n  },\r\n  Radiusdot: {\r\n    \"& .MuiBadge-badge\": {\r\n      borderRadius: 2,\r\n      position: \"inherit\",\r\n      height: 16,\r\n      margin: 2,\r\n      padding: 3\r\n    },\r\n    \"& .MuiBadge-anchorOriginTopRightRectangle\": {\r\n      transform: \"scale(1) translate(0%, -40%)\",\r\n    },\r\n\r\n  }\r\n}));\r\n  {/*PLW DESIGN INSERIDO O dentro do const handleChangeTab*/}\r\n  const TicketListItemCustom = ({ ticket }) => {\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n  const [loading, setLoading] = useState(false);\r\n  const [ticketUser, setTicketUser] = useState(null);\r\n  const [ticketQueueName, setTicketQueueName] = useState(null);\r\n  const [ticketQueueColor, setTicketQueueColor] = useState(null);\r\n  const [tag, setTag] = useState([]);\r\n  const [whatsAppName, setWhatsAppName] = useState(null);\r\n\r\n  const [openTicketMessageDialog, setOpenTicketMessageDialog] = useState(false);\r\n  const { ticketId } = useParams();\r\n  const isMounted = useRef(true);\r\n  const { setCurrentTicket } = useContext(TicketsContext);\r\n  const { user } = useContext(AuthContext);\r\n  const { profile } = user;\r\n\r\n  useEffect(() => {\r\n    if (ticket.userId && ticket.user) {\r\n      setTicketUser(ticket.user?.name?.toUpperCase());\r\n    }\r\n    setTicketQueueName(ticket.queue?.name?.toUpperCase());\r\n    setTicketQueueColor(ticket.queue?.color);\r\n\r\n    if (ticket.whatsappId && ticket.whatsapp) {\r\n      setWhatsAppName(ticket.whatsapp.name?.toUpperCase());\r\n    }\r\n\r\n    setTag(ticket?.tags);\r\n\r\n    return () => {\r\n      isMounted.current = false;\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  {/*CÓDIGO NOVO SAUDAÇÃO*/}\r\n  const handleCloseTicket = async (id) => {\r\n    setTag(ticket?.tags);\r\n    setLoading(true);\r\n    try {\r\n      await api.put(`/tickets/${id}`, {\r\n        status: \"closed\",\r\n        userId: user?.id,\r\n        queueId: ticket?.queue?.id,\r\n        useIntegration: false,\r\n        promptId: null,\r\n        integrationId: null\r\n      });\r\n    } catch (err) {\r\n      setLoading(false);\r\n      toastError(err);\r\n    }\r\n    if (isMounted.current) {\r\n      setLoading(false);\r\n    }\r\n    history.push(`/tickets/`);\r\n  };\r\n\r\n  const handleReopenTicket = async (id) => {\r\n    setLoading(true);\r\n    try {\r\n      await api.put(`/tickets/${id}`, {\r\n        status: \"open\",\r\n        userId: user?.id,\r\n        queueId: ticket?.queue?.id\r\n      });\r\n    } catch (err) {\r\n      setLoading(false);\r\n      toastError(err);\r\n    }\r\n    if (isMounted.current) {\r\n      setLoading(false);\r\n    }\r\n    history.push(`/tickets/${ticket.uuid}`);\r\n  };\r\n\r\n    const handleAcepptTicket = async (id) => {\r\n        setLoading(true);\r\n        try {\r\n            await api.put(`/tickets/${id}`, {\r\n                status: \"open\",\r\n                userId: user?.id,\r\n            });\r\n            \r\n            let settingIndex;\r\n\r\n            try {\r\n                const { data } = await api.get(\"/settings/\");\r\n                \r\n                settingIndex = data.filter((s) => s.key === \"sendGreetingAccepted\");\r\n                \r\n            } catch (err) {\r\n                toastError(err);\r\n                   \r\n            }\r\n            \r\n            if (settingIndex[0].value === \"enabled\" && !ticket.isGroup) {\r\n                handleSendMessage(ticket.id);\r\n                \r\n            }\r\n\r\n        } catch (err) {\r\n            setLoading(false);\r\n            \r\n            toastError(err);\r\n        }\r\n        if (isMounted.current) {\r\n            setLoading(false);\r\n        }\r\n\r\n        // handleChangeTab(null, \"tickets\");\r\n        // handleChangeTab(null, \"open\");\r\n        history.push(`/tickets/${ticket.uuid}`);\r\n    };\r\n\t\r\n\t    const handleSendMessage = async (id) => {\r\n        \r\n        const msg = `{{ms}} *{{name}}*, meu nome é *${user?.name}* e agora vou prosseguir com seu atendimento!`;\r\n        const message = {\r\n            read: 1,\r\n            fromMe: true,\r\n            mediaUrl: \"\",\r\n            body: `*Mensagem Automática:*\\n${msg.trim()}`,\r\n        };\r\n        try {\r\n            await api.post(`/messages/${id}`, message);\r\n        } catch (err) {\r\n            toastError(err);\r\n            \r\n        }\r\n    };\r\n\t{/*CÓDIGO NOVO SAUDAÇÃO*/}\r\n\r\n  const handleSelectTicket = (ticket) => {\r\n    const code = uuidv4();\r\n    const { id, uuid } = ticket;\r\n    setCurrentTicket({ id, uuid, code });\r\n  };\r\n\r\n\r\n  const renderTicketInfo = () => {\r\n    if (ticketUser) {\r\n\r\n      return (\r\n        <>\r\n          {ticket.chatbot && (\r\n            <Tooltip title=\"Chatbot\">\r\n              <AndroidIcon\r\n                fontSize=\"small\"\r\n                style={{ color: grey[700], marginRight: 5 }}\r\n              />\r\n            </Tooltip>\r\n          )}\r\n\r\n          {/* </span> */}\r\n        </>\r\n      );\r\n    } else {\r\n      return (\r\n        <>\r\n          {ticket.chatbot && (\r\n            <Tooltip title=\"Chatbot\">\r\n              <AndroidIcon\r\n                fontSize=\"small\"\r\n                style={{ color: grey[700], marginRight: 5 }}\r\n              />\r\n            </Tooltip>\r\n          )}\r\n        </>\r\n      );\r\n    }\r\n  };\r\n\r\n  return (\r\n    <React.Fragment key={ticket.id}>\r\n      <TicketMessagesDialog\r\n        open={openTicketMessageDialog}\r\n\r\n        handleClose={() => setOpenTicketMessageDialog(false)}\r\n        ticketId={ticket.id}\r\n      ></TicketMessagesDialog>\r\n      <ListItem dense button\r\n        onClick={(e) => {\r\n          if (ticket.status === \"pending\") return;\r\n          handleSelectTicket(ticket);\r\n        }}\r\n        selected={ticketId && +ticketId === ticket.id}\r\n        className={clsx(classes.ticket, {\r\n          [classes.pendingTicket]: ticket.status === \"pending\",\r\n        })}\r\n      >\r\n        <Tooltip arrow placement=\"right\" title={ticket.queue?.name?.toUpperCase() || \"SEM FILA\"} >\r\n          <span style={{ backgroundColor: ticket.queue?.color || \"#7C7C7C\" }} className={classes.ticketQueueColor}></span>\r\n        </Tooltip>\r\n        <ListItemAvatar>\r\n          {ticket.status !== \"pending\" ?\r\n            <Avatar\r\n              style={{\r\n                marginTop: \"-20px\",\r\n                marginLeft: \"-3px\",\r\n                width: \"55px\",\r\n                height: \"55px\",\r\n                borderRadius: \"10%\",\r\n              }}\r\n              src={ticket?.contact?.profilePicUrl}\r\n            />\r\n            :\r\n            <Avatar\r\n              style={{\r\n                marginTop: \"-30px\",\r\n                marginLeft: \"0px\",\r\n                width: \"50px\",\r\n                height: \"50px\",\r\n                borderRadius: \"10%\",\r\n              }}\r\n              src={ticket?.contact?.profilePicUrl}\r\n            />\r\n          }\r\n        </ListItemAvatar>\r\n        <ListItemText\r\n          disableTypography\r\n\r\n          primary={\r\n            <span className={classes.contactNameWrapper}>\r\n              <Typography\r\n                noWrap\r\n                component=\"span\"\r\n                variant=\"body2\"\r\n                color=\"textPrimary\"\r\n              >\r\n                {ticket.contact.name}\r\n                {profile === \"admin\" && (\r\n                  <Tooltip title=\"Espiar Conversa\">\r\n                    <VisibilityIcon\r\n                      onClick={() => setOpenTicketMessageDialog(true)}\r\n                      fontSize=\"small\"\r\n                      style={{\r\n                        color: blue[700],\r\n                        cursor: \"pointer\",\r\n                        marginLeft: 10,\r\n                        verticalAlign: \"middle\"\r\n                      }}\r\n                    />\r\n                  </Tooltip>\r\n                )}\r\n              </Typography>\r\n              <ListItemSecondaryAction>\r\n                <Box className={classes.ticketInfo1}>{renderTicketInfo()}</Box>\r\n              </ListItemSecondaryAction>\r\n            </span>\r\n\r\n          }\r\n          secondary={\r\n            <span className={classes.contactNameWrapper}>\r\n\r\n              <Typography\r\n                className={classes.contactLastMessage}\r\n                noWrap\r\n                component=\"span\"\r\n                variant=\"body2\"\r\n                color=\"textSecondary\"\r\n              > {ticket.lastMessage.includes('data:image/png;base64') ? <MarkdownWrapper> Localização</MarkdownWrapper> : <MarkdownWrapper>{ticket.lastMessage}</MarkdownWrapper>}\r\n                <span className={classes.secondaryContentSecond} >\r\n                  {ticket?.whatsapp?.name ? <Badge className={classes.connectionTag}>{ticket?.whatsapp?.name?.toUpperCase()}</Badge> : <br></br>}\r\n                  {ticketUser ? <Badge style={{ backgroundColor: \"#000000\" }} className={classes.connectionTag}>{ticketUser}</Badge> : <br></br>}\r\n                  <Badge style={{ backgroundColor: ticket.queue?.color || \"#7c7c7c\" }} className={classes.connectionTag}>{ticket.queue?.name?.toUpperCase() || \"SEM FILA\"}</Badge>\r\n                </span>\r\n                <span style={{ paddingTop: \"2px\" }} className={classes.secondaryContentSecond} >\r\n                  {tag?.map((tag) => {\r\n                    return (\r\n                      <ContactTag tag={tag} key={`ticket-contact-tag-${ticket.id}-${tag.id}`} />\r\n                    );\r\n                  })}\r\n                </span>\r\n              </Typography>\r\n\r\n              <Badge\r\n                className={classes.newMessagesCount}\r\n                badgeContent={ticket.unreadMessages}\r\n                classes={{\r\n                  badge: classes.badgeStyle,\r\n                }}\r\n              />\r\n            </span>\r\n          }\r\n\r\n        />\r\n        <ListItemSecondaryAction>\r\n          {ticket.lastMessage && (\r\n            <>\r\n\r\n              <Typography\r\n                className={classes.lastMessageTime}\r\n                component=\"span\"\r\n                variant=\"body2\"\r\n                color=\"textSecondary\"\r\n              >\r\n\r\n                {isSameDay(parseISO(ticket.updatedAt), new Date()) ? (\r\n                  <>{format(parseISO(ticket.updatedAt), \"HH:mm\")}</>\r\n                ) : (\r\n                  <>{format(parseISO(ticket.updatedAt), \"dd/MM/yyyy\")}</>\r\n                )}\r\n              </Typography>\r\n\r\n              <br />\r\n\r\n            </>\r\n          )}\r\n\r\n        </ListItemSecondaryAction>\r\n        <span className={classes.secondaryContentSecond} >\r\n          {ticket.status === \"pending\" && (\r\n            <ButtonWithSpinner\r\n              //color=\"primary\"\r\n              style={{ backgroundColor: 'green', color: 'white', padding: '0px', bottom: '17px', borderRadius: '0px', left: '8px', fontSize: '0.6rem' }}\r\n              variant=\"contained\"\r\n              className={classes.acceptButton}\r\n              size=\"small\"\r\n              loading={loading}\r\n\t\t\t  //PLW DESIGN INSERIDO O handleChangeTab\r\n              onClick={e => handleAcepptTicket(ticket.id)}\r\n            >\r\n              {i18n.t(\"ticketsList.buttons.accept\")}\r\n            </ButtonWithSpinner>\r\n\r\n          )}\r\n          {(ticket.status !== \"closed\") && (\r\n            <ButtonWithSpinner\r\n              //color=\"primary\"\r\n              style={{ backgroundColor: 'red', color: 'white', padding: '0px', bottom: '0px', borderRadius: '0px', left: '8px', fontSize: '0.6rem' }}\r\n              variant=\"contained\"\r\n              className={classes.acceptButton}\r\n              size=\"small\"\r\n              loading={loading}\r\n              onClick={e => handleCloseTicket(ticket.id)}\r\n            >\r\n              {i18n.t(\"ticketsList.buttons.closed\")}\r\n            </ButtonWithSpinner>\r\n\r\n          )}\r\n          {(ticket.status === \"closed\") && (\r\n            <ButtonWithSpinner\r\n              //color=\"primary\"\r\n              style={{ backgroundColor: 'red', color: 'white', padding: '0px', bottom: '0px', borderRadius: '0px', left: '8px', fontSize: '0.6rem' }}\r\n              variant=\"contained\"\r\n              className={classes.acceptButton}\r\n              size=\"small\"\r\n              loading={loading}\r\n              onClick={e => handleReopenTicket(ticket.id)}\r\n            >\r\n              {i18n.t(\"ticketsList.buttons.reopen\")}\r\n            </ButtonWithSpinner>\r\n\r\n          )}\r\n        </span>\r\n      </ListItem>\r\n\r\n      <Divider variant=\"inset\" component=\"li\" />\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nexport default TicketListItemCustom;","import { useState, useEffect } from \"react\";\r\nimport toastError from \"../../errors/toastError\";\r\n\r\nimport api from \"../../services/api\";\r\n\r\nconst useTickets = ({\r\n  searchParam,\r\n  tags,\r\n  users,\r\n  pageNumber,\r\n  status,\r\n  date,\r\n  updatedAt,\r\n  showAll,\r\n  queueIds,\r\n  withUnreadMessages,\r\n}) => {\r\n  const [loading, setLoading] = useState(true);\r\n  const [hasMore, setHasMore] = useState(false);\r\n  const [tickets, setTickets] = useState([]);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    const delayDebounceFn = setTimeout(() => {\r\n      const fetchTickets = async () => {\r\n        try {\r\n          const { data } = await api.get(\"/tickets\", {\r\n            params: {\r\n              searchParam,\r\n              pageNumber,\r\n              tags,\r\n              users,\r\n              status,\r\n              date,\r\n              updatedAt,\r\n              showAll,\r\n              queueIds,\r\n              withUnreadMessages,\r\n            },\r\n          });\r\n          setTickets(data.tickets);\r\n          setHasMore(data.hasMore);\r\n          setLoading(false);\r\n        } catch (err) {\r\n          setLoading(false);\r\n          toastError(err);\r\n        }\r\n      };\r\n      fetchTickets();\r\n    }, 500);\r\n    return () => clearTimeout(delayDebounceFn);\r\n  }, [\r\n    searchParam,\r\n    tags,\r\n    users,\r\n    pageNumber,\r\n    status,\r\n    date,\r\n    updatedAt,\r\n    showAll,\r\n    queueIds,\r\n    withUnreadMessages,\r\n  ]);\r\n\r\n  return { tickets, loading, hasMore };\r\n};\r\n\r\nexport default useTickets;\r\n","import React, { useState, useRef, useEffect, useContext } from \"react\";\r\n\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { format } from \"date-fns\";\r\nimport { socketConnection } from \"../../services/socket\";\r\n\r\nimport useSound from \"use-sound\";\r\n\r\nimport Popover from \"@material-ui/core/Popover\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport List from \"@material-ui/core/List\";\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Badge from \"@material-ui/core/Badge\";\r\nimport ChatIcon from \"@material-ui/icons/Chat\";\r\n\r\nimport TicketListItem from \"../TicketListItemCustom\";\r\nimport useTickets from \"../../hooks/useTickets\";\r\nimport alertSound from \"../../assets/sound.mp3\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport toastError from \"../../errors/toastError\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\ttabContainer: {\r\n\t\toverflowY: \"auto\",\r\n\t\tmaxHeight: 350,\r\n\t\t...theme.scrollbarStyles,\r\n\t},\r\n\tpopoverPaper: {\r\n\t\twidth: \"100%\",\r\n\t\tmaxWidth: 350,\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tmarginRight: theme.spacing(1),\r\n\t\t[theme.breakpoints.down(\"sm\")]: {\r\n\t\t\tmaxWidth: 270,\r\n\t\t},\r\n\t},\r\n\tnoShadow: {\r\n\t\tboxShadow: \"none !important\",\r\n\t},\r\n}));\r\n\r\nconst NotificationsPopOver = (volume) => {\r\n\tconst classes = useStyles();\r\n\r\n\tconst history = useHistory();\r\n\tconst { user } = useContext(AuthContext);\r\n\tconst ticketIdUrl = +history.location.pathname.split(\"/\")[2];\r\n\tconst ticketIdRef = useRef(ticketIdUrl);\r\n\tconst anchorEl = useRef();\r\n\tconst [isOpen, setIsOpen] = useState(false);\r\n\tconst [notifications, setNotifications] = useState([]);\r\n\r\n\tconst [showPendingTickets, setShowPendingTickets] = useState(false);\r\n\r\n\tconst [, setDesktopNotifications] = useState([]);\r\n\r\n\tconst { tickets } = useTickets({ withUnreadMessages: \"true\" });\r\n\r\n\tconst [play] = useSound(alertSound, volume);\r\n\tconst soundAlertRef = useRef();\r\n\r\n\tconst historyRef = useRef(history);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst fetchSettings = async () => {\r\n\t\t\ttry {\r\n\r\n\t\t\t\tif (user.allTicket === \"enable\") {\r\n\t\t\t\t\tsetShowPendingTickets(true);\r\n\t\t\t\t}\r\n\t\t\t} catch (err) {\r\n\t\t\t  \ttoastError(err);\r\n\t\t\t}\r\n\t\t}\r\n\t  \r\n\t\tfetchSettings();\r\n\t}, []);\r\n\r\n\tuseEffect(() => {\r\n\t\tsoundAlertRef.current = play;\r\n\r\n\t\tif (!(\"Notification\" in window)) {\r\n\t\t\tconsole.log(\"This browser doesn't support notifications\");\r\n\t\t} else {\r\n\t\t\tNotification.requestPermission();\r\n\t\t}\r\n\t}, [play]);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst processNotifications = () => {\r\n\t\t\tif (showPendingTickets) {\r\n\t\t\t\tsetNotifications(tickets);\r\n\t\t\t} else {\r\n\t\t\t\tconst newNotifications = tickets.filter(ticket => ticket.status !== \"pending\");\r\n\r\n\t\t\t\tsetNotifications(newNotifications);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tprocessNotifications();\r\n\t}, [tickets]);\r\n\r\n\tuseEffect(() => {\r\n\t\tticketIdRef.current = ticketIdUrl;\r\n\t}, [ticketIdUrl]);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst socket = socketConnection({companyId: user.companyId, userId: user.id});\r\n\t\tsocket.on(\"connect\", () => socket.emit(\"joinNotification\"));\r\n\r\n\t\tsocket.on(`company-${user.companyId}-ticket`, data => {\r\n\t\t\tif (data.action === \"updateUnread\" || data.action === \"delete\") {\r\n\t\t\t\tsetNotifications(prevState => {\r\n\t\t\t\t\tconst ticketIndex = prevState.findIndex(t => t.id === data.ticketId);\r\n\t\t\t\t\tif (ticketIndex !== -1) {\r\n\t\t\t\t\t\tprevState.splice(ticketIndex, 1);\r\n\t\t\t\t\t\treturn [...prevState];\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn prevState;\r\n\t\t\t\t});\r\n\r\n\t\t\t\tsetDesktopNotifications(prevState => {\r\n\t\t\t\t\tconst notfiticationIndex = prevState.findIndex(\r\n\t\t\t\t\t\tn => n.tag === String(data.ticketId)\r\n\t\t\t\t\t);\r\n\t\t\t\t\tif (notfiticationIndex !== -1) {\r\n\t\t\t\t\t\tprevState[notfiticationIndex].close();\r\n\t\t\t\t\t\tprevState.splice(notfiticationIndex, 1);\r\n\t\t\t\t\t\treturn [...prevState];\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn prevState;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tsocket.on(`company-${user.companyId}-appMessage`, data => {\r\n\t\t\tif (\r\n\t\t\t\tdata.action === \"create\" && !data.message.fromMe && \r\n\t\t\t\t(data.ticket.status !== \"pending\" ) &&\r\n\t\t\t\t(!data.message.read || data.ticket.status === \"pending\") &&\r\n\t\t\t\t(data.ticket.userId === user?.id || !data.ticket.userId) &&\r\n\t\t\t\t(user?.queues?.some(queue => (queue.id === data.ticket.queueId)) || !data.ticket.queueId)\r\n\t\t\t) {\r\n\t\t\t\tsetNotifications(prevState => {\r\n\t\t\t\t\tconst ticketIndex = prevState.findIndex(t => t.id === data.ticket.id);\r\n\t\t\t\t\tif (ticketIndex !== -1) {\r\n\t\t\t\t\t\tprevState[ticketIndex] = data.ticket;\r\n\t\t\t\t\t\treturn [...prevState];\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn [data.ticket, ...prevState];\r\n\t\t\t\t});\r\n\r\n\t\t\t\tconst shouldNotNotificate =\r\n\t\t\t\t\t(data.message.ticketId === ticketIdRef.current &&\r\n\t\t\t\t\t\tdocument.visibilityState === \"visible\") ||\r\n\t\t\t\t\t(data.ticket.userId && data.ticket.userId !== user?.id) ||\r\n\t\t\t\t\tdata.ticket.isGroup;\r\n\r\n\t\t\t\tif (shouldNotNotificate) return;\r\n\r\n\t\t\t\thandleNotifications(data);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn () => {\r\n\t\t\tsocket.disconnect();\r\n\t\t};\r\n\t}, [user, showPendingTickets]);\r\n\r\n\tconst handleNotifications = data => {\r\n\t\tconst { message, contact, ticket } = data;\r\n\r\n\t\tconst options = {\r\n\t\t\tbody: `${message.body} - ${format(new Date(), \"HH:mm\")}`,\r\n\t\t\ticon: contact.urlPicture,\r\n\t\t\ttag: ticket.id,\r\n\t\t\trenotify: true,\r\n\t\t};\r\n\r\n\t\tconst notification = new Notification(\r\n\t\t\t`${i18n.t(\"tickets.notification.message\")} ${contact.name}`,\r\n\t\t\toptions\r\n\t\t);\r\n\r\n\t\tnotification.onclick = e => {\r\n\t\t\te.preventDefault();\r\n\t\t\twindow.focus();\r\n\t\t\thistoryRef.current.push(`/tickets/${ticket.uuid}`);\r\n\t\t\t// handleChangeTab(null, ticket.isGroup? \"group\" : \"open\");\r\n\t\t};\r\n\r\n\t\tsetDesktopNotifications(prevState => {\r\n\t\t\tconst notfiticationIndex = prevState.findIndex(\r\n\t\t\t\tn => n.tag === notification.tag\r\n\t\t\t);\r\n\t\t\tif (notfiticationIndex !== -1) {\r\n\t\t\t\tprevState[notfiticationIndex] = notification;\r\n\t\t\t\treturn [...prevState];\r\n\t\t\t}\r\n\t\t\treturn [notification, ...prevState];\r\n\t\t});\r\n\r\n\t\tsoundAlertRef.current();\r\n\t};\r\n\r\n\tconst handleClick = () => {\r\n\t\tsetIsOpen(prevState => !prevState);\r\n\t};\r\n\r\n\tconst handleClickAway = () => {\r\n\t\tsetIsOpen(false);\r\n\t};\r\n\r\n\tconst NotificationTicket = ({ children }) => {\r\n\t\treturn <div onClick={handleClickAway}>{children}</div>;\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<IconButton\r\n\t\t\t\tonClick={handleClick}\r\n\t\t\t\tref={anchorEl}\r\n\t\t\t\taria-label=\"Open Notifications\"\r\n\t\t\t\tcolor=\"inherit\"\r\n\t\t\t\tstyle={{color:\"white\"}}\r\n\t\t\t>\r\n\t\t\t\t<Badge overlap=\"rectangular\" badgeContent={notifications.length} color=\"secondary\">\r\n\t\t\t\t\t<ChatIcon />\r\n\t\t\t\t</Badge>\r\n\t\t\t</IconButton>\r\n\t\t\t<Popover\r\n\t\t\t\tdisableScrollLock\r\n\t\t\t\topen={isOpen}\r\n\t\t\t\tanchorEl={anchorEl.current}\r\n\t\t\t\tanchorOrigin={{\r\n\t\t\t\t\tvertical: \"bottom\",\r\n\t\t\t\t\thorizontal: \"right\",\r\n\t\t\t\t}}\r\n\t\t\t\ttransformOrigin={{\r\n\t\t\t\t\tvertical: \"top\",\r\n\t\t\t\t\thorizontal: \"right\",\r\n\t\t\t\t}}\r\n\t\t\t\tclasses={{ paper: classes.popoverPaper }}\r\n\t\t\t\tonClose={handleClickAway}\r\n\t\t\t>\r\n\t\t\t\t<List dense className={classes.tabContainer}>\r\n\t\t\t\t\t{notifications.length === 0 ? (\r\n\t\t\t\t\t\t<ListItem>\r\n\t\t\t\t\t\t\t<ListItemText>{i18n.t(\"notifications.noTickets\")}</ListItemText>\r\n\t\t\t\t\t\t</ListItem>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\tnotifications.map(ticket => (\r\n\t\t\t\t\t\t\t<NotificationTicket key={ticket.id}>\r\n\t\t\t\t\t\t\t\t<TicketListItem ticket={ticket} />\r\n\t\t\t\t\t\t\t</NotificationTicket>\r\n\t\t\t\t\t\t))\r\n\t\t\t\t\t)}\r\n\t\t\t\t</List>\r\n\t\t\t</Popover>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default NotificationsPopOver;","import React, { useState, useRef } from \"react\";\r\n\r\nimport Popover from \"@material-ui/core/Popover\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport List from \"@material-ui/core/List\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport VolumeUpIcon from \"@material-ui/icons/VolumeUp\";\r\nimport VolumeDownIcon from \"@material-ui/icons/VolumeDown\";\r\n\r\nimport { Grid, Slider } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    tabContainer: {\r\n        padding: theme.spacing(2),\r\n    },\r\n    popoverPaper: {\r\n        width: \"100%\",\r\n        maxWidth: 350,\r\n        marginLeft: theme.spacing(2),\r\n        marginRight: theme.spacing(1),\r\n        [theme.breakpoints.down(\"sm\")]: {\r\n            maxWidth: 270,\r\n        },\r\n    },\r\n    noShadow: {\r\n        boxShadow: \"none !important\",\r\n    },\r\n    icons: {\r\n        color: \"#fff\",\r\n    },\r\n    customBadge: {\r\n        backgroundColor: \"#f44336\",\r\n        color: \"#fff\",\r\n    },\r\n}));\r\n\r\nconst NotificationsVolume = ({ volume, setVolume }) => {\r\n    const classes = useStyles();\r\n\r\n    const anchorEl = useRef();\r\n    const [isOpen, setIsOpen] = useState(false);\r\n\r\n    const handleClick = () => {\r\n        setIsOpen((prevState) => !prevState);\r\n    };\r\n\r\n    const handleClickAway = () => {\r\n        setIsOpen(false);\r\n    };\r\n\r\n    const handleVolumeChange = (value) => {\r\n        setVolume(value);\r\n        localStorage.setItem(\"volume\", value);\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <IconButton\r\n                className={classes.icons}\r\n                onClick={handleClick}\r\n                ref={anchorEl}\r\n                aria-label=\"Open Notifications\"\r\n                // color=\"inherit\"\r\n                // color=\"secondary\"\r\n            >\r\n                <VolumeUpIcon color=\"inherit\" />\r\n            </IconButton>\r\n            <Popover\r\n                disableScrollLock\r\n                open={isOpen}\r\n                anchorEl={anchorEl.current}\r\n                anchorOrigin={{\r\n                    vertical: \"bottom\",\r\n                    horizontal: \"right\",\r\n                }}\r\n                transformOrigin={{\r\n                    vertical: \"top\",\r\n                    horizontal: \"right\",\r\n                }}\r\n                classes={{ paper: classes.popoverPaper }}\r\n                onClose={handleClickAway}\r\n            >\r\n                <List dense className={classes.tabContainer}>\r\n                    <Grid container spacing={2}>\r\n                        <Grid item>\r\n                            <VolumeDownIcon />\r\n                        </Grid>\r\n                        <Grid item xs>\r\n                            <Slider\r\n                                value={volume}\r\n                                aria-labelledby=\"continuous-slider\"\r\n                                step={0.1}\r\n                                min={0}\r\n                                max={1}\r\n                                onChange={(e, value) =>\r\n                                    handleVolumeChange(value)\r\n                                }\r\n                            />\r\n                        </Grid>\r\n                        <Grid item>\r\n                            <VolumeUpIcon />\r\n                        </Grid>\r\n                    </Grid>\r\n                </List>\r\n            </Popover>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default NotificationsVolume;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport Chip from \"@material-ui/core/Chip\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport api from \"../../services/api\";\r\nimport { i18n } from \"../../translate/i18n\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tchips: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexWrap: \"wrap\",\r\n\t},\r\n\tchip: {\r\n\t\tmargin: 2,\r\n\t},\r\n}));\r\n\r\nconst QueueSelect = ({ selectedQueueIds, onChange, multiple = true, title = i18n.t(\"queueSelect.inputLabel\") }) => {\r\n\tconst classes = useStyles();\r\n\tconst [queues, setQueues] = useState([]);\r\n\r\n\tuseEffect(() => {\r\n\r\n\t\tfetchQueues();\r\n\r\n\t}, []);\r\n\r\n\tconst fetchQueues = async () => {\r\n\t\ttry {\r\n\t\t\tconst { data } = await api.get(\"/queue\");\r\n\t\t\tsetQueues(data);\r\n\t\t} catch (err) {\r\n\t\t\ttoastError(err);\r\n\t\t}\r\n\t}\r\n\r\n\tconst handleChange = e => {\r\n\t\tonChange(e.target.value);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div >\r\n\t\t\t<FormControl fullWidth margin=\"dense\" variant=\"outlined\">\r\n\t\t\t\t<InputLabel shrink={selectedQueueIds ? true : false} >{title}</InputLabel>\r\n\t\t\t\t<Select\r\n\t\t\t\t\tlabel={title}\r\n\t\t\t\t\tmultiple={multiple}\r\n\t\t\t\t\tlabelWidth={60}\r\n\t\t\t\t\tvalue={selectedQueueIds}\r\n\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\tMenuProps={{\r\n\t\t\t\t\t\tanchorOrigin: {\r\n\t\t\t\t\t\t\tvertical: \"bottom\",\r\n\t\t\t\t\t\t\thorizontal: \"left\",\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\ttransformOrigin: {\r\n\t\t\t\t\t\t\tvertical: \"top\",\r\n\t\t\t\t\t\t\thorizontal: \"left\",\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tgetContentAnchorEl: null,\r\n\t\t\t\t\t}}\r\n\r\n\t\t\t\t\trenderValue={selected => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<div className={classes.chips}>\r\n\t\t\t\t\t\t\t\t{selected?.length > 0 && multiple ? (\r\n\t\t\t\t\t\t\t\t\tselected.map(id => {\r\n\t\t\t\t\t\t\t\t\t\tconst queue = queues.find(q => q.id === id);\r\n\t\t\t\t\t\t\t\t\t\treturn queue ? (\r\n\t\t\t\t\t\t\t\t\t\t\t<Chip\r\n\t\t\t\t\t\t\t\t\t\t\t\tkey={id}\r\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ backgroundColor: queue.color }}\r\n\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tlabel={queue.name}\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.chip}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t) : null;\r\n\t\t\t\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\t\t\t) :\r\n\t\t\t\t\t\t\t\t\t(\r\n\t\t\t\t\t\t\t\t\t\t<Chip\r\n\t\t\t\t\t\t\t\t\t\t\tkey={selected}\r\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={{ backgroundColor: queues.find(q => q.id === selected)?.color }}\r\n\t\t\t\t\t\t\t\t\t\t\tlabel={queues.find(q => q.id === selected)?.name}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName={classes.chip}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{!multiple && <MenuItem value={null}>Nenhum</MenuItem>}\r\n\t\t\t\t\t{queues.map(queue => (\r\n\t\t\t\t\t\t<MenuItem key={queue.id} value={queue.id}>\r\n\t\t\t\t\t\t\t{queue.name}\r\n\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</Select>\r\n\t\t\t</FormControl>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default QueueSelect;\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\n\r\nimport * as Yup from \"yup\";\r\nimport { Formik, Form, Field } from \"formik\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { green } from \"@material-ui/core/colors\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\n\r\nimport api from \"../../services/api\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport QueueSelect from \"../QueueSelect\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\nimport { Can } from \"../Can\";\r\nimport useWhatsApps from \"../../hooks/useWhatsApps\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\troot: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexWrap: \"wrap\",\r\n\t},\r\n\tmultFieldLine: {\r\n\t\tdisplay: \"flex\",\r\n\t\t\"& > *:not(:last-child)\": {\r\n\t\t\tmarginRight: theme.spacing(1),\r\n\t\t},\r\n\t},\r\n\r\n\tbtnWrapper: {\r\n\t\tposition: \"relative\",\r\n\t},\r\n\r\n\tbuttonProgress: {\r\n\t\tcolor: green[500],\r\n\t\tposition: \"absolute\",\r\n\t\ttop: \"50%\",\r\n\t\tleft: \"50%\",\r\n\t\tmarginTop: -12,\r\n\t\tmarginLeft: -12,\r\n\t},\r\n\tformControl: {\r\n\t\tmargin: theme.spacing(1),\r\n\t\tminWidth: 120,\r\n\t},\r\n}));\r\n\r\nconst UserSchema = Yup.object().shape({\r\n\tname: Yup.string()\r\n\t\t.min(2, \"Too Short!\")\r\n\t\t.max(50, \"Too Long!\")\r\n\t\t.required(\"Required\"),\r\n\tpassword: Yup.string().min(5, \"Too Short!\").max(50, \"Too Long!\"),\r\n\temail: Yup.string().email(\"Invalid email\").required(\"Required\"),\r\n});\r\n\r\nconst UserModal = ({ open, onClose, userId }) => {\r\n\tconst classes = useStyles();\r\n\r\n\tconst initialState = {\r\n\t\tname: \"\",\r\n\t\temail: \"\",\r\n\t\tpassword: \"\",\r\n\t\tprofile: \"user\",\r\n\t};\r\n\r\n\tconst { user: loggedInUser } = useContext(AuthContext);\r\n\r\n\tconst [user, setUser] = useState(initialState);\r\n\tconst [selectedQueueIds, setSelectedQueueIds] = useState([]);\r\n\tconst [whatsappId, setWhatsappId] = useState(false);\r\n\tconst { loading, whatsApps } = useWhatsApps();\r\n\r\n\tuseEffect(() => {\r\n\t\tconst fetchUser = async () => {\r\n\t\t\tif (!userId) return;\r\n\t\t\ttry {\r\n\t\t\t\tconst { data } = await api.get(`/users/${userId}`);\r\n\t\t\t\tsetUser(prevState => {\r\n\t\t\t\t\treturn { ...prevState, ...data };\r\n\t\t\t\t});\r\n\t\t\t\tconst userQueueIds = data.queues?.map(queue => queue.id);\r\n\t\t\t\tsetSelectedQueueIds(userQueueIds);\r\n\t\t\t\tsetWhatsappId(data.whatsappId ? data.whatsappId : '');\r\n\t\t\t} catch (err) {\r\n\t\t\t\ttoastError(err);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tfetchUser();\r\n\t}, [userId, open]);\r\n\r\n\tconst handleClose = () => {\r\n\t\tonClose();\r\n\t\tsetUser(initialState);\r\n\t};\r\n\r\n\tconst handleSaveUser = async values => {\r\n\t\tconst userData = { ...values, whatsappId, queueIds: selectedQueueIds };\r\n\t\ttry {\r\n\t\t\tif (userId) {\r\n\t\t\t\tawait api.put(`/users/${userId}`, userData);\r\n\t\t\t} else {\r\n\t\t\t\tawait api.post(\"/users\", userData);\r\n\t\t\t}\r\n\t\t\ttoast.success(i18n.t(\"userModal.success\"));\r\n\t\t} catch (err) {\r\n\t\t\ttoastError(err);\r\n\t\t}\r\n\t\thandleClose();\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<Dialog\r\n\t\t\t\topen={open}\r\n\t\t\t\tonClose={handleClose}\r\n\t\t\t\tmaxWidth=\"xs\"\r\n\t\t\t\tfullWidth\r\n\t\t\t\tscroll=\"paper\"\r\n\t\t\t>\r\n\t\t\t\t<DialogTitle id=\"form-dialog-title\">\r\n\t\t\t\t\t{userId\r\n\t\t\t\t\t\t? `${i18n.t(\"userModal.title.edit\")}`\r\n\t\t\t\t\t\t: `${i18n.t(\"userModal.title.add\")}`}\r\n\t\t\t\t</DialogTitle>\r\n\t\t\t\t<Formik\r\n\t\t\t\t\tinitialValues={user}\r\n\t\t\t\t\tenableReinitialize={true}\r\n\t\t\t\t\tvalidationSchema={UserSchema}\r\n\t\t\t\t\tonSubmit={(values, actions) => {\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\thandleSaveUser(values);\r\n\t\t\t\t\t\t\tactions.setSubmitting(false);\r\n\t\t\t\t\t\t}, 400);\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{({ touched, errors, isSubmitting }) => (\r\n\t\t\t\t\t\t<Form>\r\n\t\t\t\t\t\t\t<DialogContent dividers>\r\n\t\t\t\t\t\t\t\t<div className={classes.multFieldLine}>\r\n\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\tas={TextField}\r\n\t\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"userModal.form.name\")}\r\n\t\t\t\t\t\t\t\t\t\tautoFocus\r\n\t\t\t\t\t\t\t\t\t\tname=\"name\"\r\n\t\t\t\t\t\t\t\t\t\terror={touched.name && Boolean(errors.name)}\r\n\t\t\t\t\t\t\t\t\t\thelperText={touched.name && errors.name}\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t\tmargin=\"dense\"\r\n\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\tas={TextField}\r\n\t\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"userModal.form.password\")}\r\n\t\t\t\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\t\t\t\t\terror={touched.password && Boolean(errors.password)}\r\n\t\t\t\t\t\t\t\t\t\thelperText={touched.password && errors.password}\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t\tmargin=\"dense\"\r\n\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className={classes.multFieldLine}>\r\n\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\tas={TextField}\r\n\t\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"userModal.form.email\")}\r\n\t\t\t\t\t\t\t\t\t\tname=\"email\"\r\n\t\t\t\t\t\t\t\t\t\terror={touched.email && Boolean(errors.email)}\r\n\t\t\t\t\t\t\t\t\t\thelperText={touched.email && errors.email}\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t\tmargin=\"dense\"\r\n\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<FormControl\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t\tclassName={classes.formControl}\r\n\t\t\t\t\t\t\t\t\t\tmargin=\"dense\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<Can\r\n\t\t\t\t\t\t\t\t\t\t\trole={loggedInUser.profile}\r\n\t\t\t\t\t\t\t\t\t\t\tperform=\"user-modal:editProfile\"\r\n\t\t\t\t\t\t\t\t\t\t\tyes={() => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<InputLabel id=\"profile-selection-input-label\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{i18n.t(\"userModal.form.profile\")}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</InputLabel>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tas={Select}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"userModal.form.profile\")}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"profile\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabelId=\"profile-selection-label\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tid=\"profile-selection\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<MenuItem value=\"admin\">Admin</MenuItem>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<MenuItem value=\"user\">User</MenuItem>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Field>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<Can\r\n\t\t\t\t\t\t\t\t\trole={loggedInUser.profile}\r\n\t\t\t\t\t\t\t\t\tperform=\"user-modal:editQueues\"\r\n\t\t\t\t\t\t\t\t\tyes={() => (\r\n\t\t\t\t\t\t\t\t\t\t<QueueSelect\r\n\t\t\t\t\t\t\t\t\t\t\tselectedQueueIds={selectedQueueIds}\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={values => setSelectedQueueIds(values)}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<Can\r\n\t\t\t\t\t\t\t\t\trole={loggedInUser.profile}\r\n\t\t\t\t\t\t\t\t\tperform=\"user-modal:editProfile\"\r\n\t\t\t\t\t\t\t\t\tyes={() => (\r\n\t\t\t\t\t\t\t\t\t\t<FormControl variant=\"outlined\" margin=\"dense\" className={classes.maxWidth} fullWidth>\r\n\t\t\t\t\t\t\t\t\t\t\t<InputLabel>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{i18n.t(\"userModal.form.whatsapp\")}\r\n\t\t\t\t\t\t\t\t\t\t\t</InputLabel>\r\n\t\t\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\t\t\tas={Select}\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={whatsappId}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => setWhatsappId(e.target.value)}\r\n\t\t\t\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"userModal.form.whatsapp\")}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<MenuItem value={''}>&nbsp;</MenuItem>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{whatsApps.map((whatsapp) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<MenuItem key={whatsapp.id} value={whatsapp.id}>{whatsapp.name}</MenuItem>\r\n\t\t\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t\t\t</Field>\r\n\t\t\t\t\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</DialogContent>\r\n\t\t\t\t\t\t\t<DialogActions>\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\tonClick={handleClose}\r\n\t\t\t\t\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\t\t\t\t\tdisabled={isSubmitting}\r\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{i18n.t(\"userModal.buttons.cancel\")}\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\t\tdisabled={isSubmitting}\r\n\t\t\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\t\t\tclassName={classes.btnWrapper}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{userId\r\n\t\t\t\t\t\t\t\t\t\t? `${i18n.t(\"userModal.buttons.okEdit\")}`\r\n\t\t\t\t\t\t\t\t\t\t: `${i18n.t(\"userModal.buttons.okAdd\")}`}\r\n\t\t\t\t\t\t\t\t\t{isSubmitting && (\r\n\t\t\t\t\t\t\t\t\t\t<CircularProgress\r\n\t\t\t\t\t\t\t\t\t\t\tsize={24}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName={classes.buttonProgress}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</DialogActions>\r\n\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Formik>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default UserModal;\r\n","import React from \"react\";\r\n\r\nimport Backdrop from \"@material-ui/core/Backdrop\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tbackdrop: {\r\n\t\tzIndex: theme.zIndex.drawer + 1,\r\n\t\tcolor: \"#fff\",\r\n\t},\r\n}));\r\n\r\nconst BackdropLoading = () => {\r\n\tconst classes = useStyles();\r\n\treturn (\r\n\t\t<Backdrop className={classes.backdrop} open={true}>\r\n\t\t\t<CircularProgress color=\"inherit\" />\r\n\t\t</Backdrop>\r\n\t);\r\n};\r\n\r\nexport default BackdropLoading;\r\n","import React, { useState } from \"react\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { CssBaseline, IconButton } from \"@material-ui/core\";\r\nimport Brightness4Icon from \"@material-ui/icons/Brightness4\";\r\nimport Brightness7Icon from \"@material-ui/icons/Brightness7\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    icons: {\r\n        color: \"#fff\",\r\n    },\r\n    switch: {\r\n        color: \"#fff\",\r\n    },\r\n    visible: {\r\n        display: \"none\",\r\n    },\r\n    btnHeader: {\r\n        color: \"#fff\",\r\n    },\r\n}));\r\n\r\nconst DarkMode = (props) => {\r\n    const classes = useStyles();\r\n\r\n    const [theme, setTheme] = useState(\"light\");\r\n\r\n    const themeToggle = () => {\r\n        theme === \"light\" ? setTheme(\"dark\") : setTheme(\"light\");\r\n    };\r\n\r\n    const handleClick = () => {\r\n        props.themeToggle();\r\n        themeToggle();\r\n    };\r\n\r\n    return (\r\n        <>\r\n            {theme === \"light\" ? (\r\n                <>\r\n                    <CssBaseline />\r\n                    <IconButton\r\n                        className={classes.icons}\r\n                        onClick={handleClick}\r\n                        // ref={anchorEl}\r\n                        aria-label=\"Dark Mode\"\r\n                        color=\"inherit\"\r\n                    >\r\n                        <Brightness4Icon />\r\n                    </IconButton>\r\n                </>\r\n            ) : (\r\n                <>\r\n                    <CssBaseline />\r\n                    <IconButton\r\n                        className={classes.icons}\r\n                        onClick={handleClick}\r\n                        // ref={anchorEl}\r\n                        aria-label=\"Dark Mode\"\r\n                        color=\"inherit\"\r\n                    >\r\n                        <Brightness7Icon />\r\n                    </IconButton>\r\n                </>\r\n            )}\r\n        </>\r\n    );\r\n};\r\n\r\nexport default DarkMode;\r\n","import React, { useEffect, useReducer, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport Popover from \"@material-ui/core/Popover\";\r\nimport AnnouncementIcon from \"@material-ui/icons/Announcement\";\r\nimport Notifications from \"@material-ui/icons/Notifications\"\r\n\r\nimport {\r\n  Avatar,\r\n  Badge,\r\n  IconButton,\r\n  List,\r\n  ListItem,\r\n  ListItemAvatar,\r\n  ListItemText,\r\n  Dialog,\r\n  Paper,\r\n  Typography,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  Button,\r\n  DialogContentText,\r\n} from \"@material-ui/core\";\r\nimport api from \"../../services/api\";\r\nimport { isArray } from \"lodash\";\r\nimport moment from \"moment\";\r\nimport { socketConnection } from \"../../services/socket\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  mainPaper: {\r\n    flex: 1,\r\n    maxHeight: 3000,\r\n    maxWidth: 5000,\r\n    padding: theme.spacing(1),\r\n    overflowY: \"scroll\",\r\n    ...theme.scrollbarStyles,\r\n  },\r\n}));\r\n\r\nfunction AnnouncementDialog({ announcement, open, handleClose }) {\r\n  const getMediaPath = (filename) => {\r\n    return `${process.env.REACT_APP_BACKEND_URL}/public/${filename}`;\r\n  };\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      onClose={() => handleClose()}\r\n      aria-labelledby=\"alert-dialog-title\"\r\n      aria-describedby=\"alert-dialog-description\"\r\n    >\r\n      <DialogTitle id=\"alert-dialog-title\">{announcement.title}</DialogTitle>\r\n      <DialogContent>\r\n        {announcement.mediaPath && (\r\n          <div\r\n            style={{\r\n              border: \"1px solid #f1f1f1\",\r\n              margin: \"0 auto 20px\",\r\n              textAlign: \"center\",\r\n              width: \"400px\",\r\n              height: 300,\r\n              backgroundImage: `url(${getMediaPath(announcement.mediaPath)})`,\r\n              backgroundRepeat: \"no-repeat\",\r\n              backgroundSize: \"contain\",\r\n              backgroundPosition: \"center\",\r\n            }}\r\n          ></div>\r\n        )}\r\n        <DialogContentText id=\"alert-dialog-description\">\r\n          {announcement.text}\r\n        </DialogContentText>\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={() => handleClose()} color=\"primary\" autoFocus>\r\n          Fechar\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nconst reducer = (state, action) => {\r\n  if (action.type === \"LOAD_ANNOUNCEMENTS\") {\r\n    const announcements = action.payload;\r\n    const newAnnouncements = [];\r\n\r\n    if (isArray(announcements)) {\r\n      announcements.forEach((announcement) => {\r\n        const announcementIndex = state.findIndex(\r\n          (u) => u.id === announcement.id\r\n        );\r\n        if (announcementIndex !== -1) {\r\n          state[announcementIndex] = announcement;\r\n        } else {\r\n          newAnnouncements.push(announcement);\r\n        }\r\n      });\r\n    }\r\n\r\n    return [...state, ...newAnnouncements];\r\n  }\r\n\r\n  if (action.type === \"UPDATE_ANNOUNCEMENTS\") {\r\n    const announcement = action.payload;\r\n    const announcementIndex = state.findIndex((u) => u.id === announcement.id);\r\n\r\n    if (announcementIndex !== -1) {\r\n      state[announcementIndex] = announcement;\r\n      return [...state];\r\n    } else {\r\n      return [announcement, ...state];\r\n    }\r\n  }\r\n\r\n  if (action.type === \"DELETE_ANNOUNCEMENT\") {\r\n    const announcementId = action.payload;\r\n\r\n    const announcementIndex = state.findIndex((u) => u.id === announcementId);\r\n    if (announcementIndex !== -1) {\r\n      state.splice(announcementIndex, 1);\r\n    }\r\n    return [...state];\r\n  }\r\n\r\n  if (action.type === \"RESET\") {\r\n    return [];\r\n  }\r\n};\r\n\r\nexport default function AnnouncementsPopover() {\r\n  const classes = useStyles();\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [anchorEl, setAnchorEl] = useState(null);\r\n  const [pageNumber, setPageNumber] = useState(1);\r\n  const [hasMore, setHasMore] = useState(false);\r\n  const [searchParam] = useState(\"\");\r\n  const [announcements, dispatch] = useReducer(reducer, []);\r\n  const [invisible, setInvisible] = useState(false);\r\n  const [announcement, setAnnouncement] = useState({});\r\n  const [showAnnouncementDialog, setShowAnnouncementDialog] = useState(false);\r\n\r\n  useEffect(() => {\r\n    dispatch({ type: \"RESET\" });\r\n    setPageNumber(1);\r\n  }, [searchParam]);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    const delayDebounceFn = setTimeout(() => {\r\n      fetchAnnouncements();\r\n    }, 500);\r\n    return () => clearTimeout(delayDebounceFn);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [searchParam, pageNumber]);\r\n\r\n  useEffect(() => {\r\n    const companyId = localStorage.getItem(\"companyId\");\r\n    const socket = socketConnection({ companyId });\r\n\r\n    socket.on(`company-announcement`, (data) => {\r\n      if (data.action === \"update\" || data.action === \"create\") {\r\n        dispatch({ type: \"UPDATE_ANNOUNCEMENTS\", payload: data.record });\r\n        setInvisible(false);\r\n      }\r\n      if (data.action === \"delete\") {\r\n        dispatch({ type: \"DELETE_ANNOUNCEMENT\", payload: +data.id });\r\n      }\r\n    });\r\n    return () => {\r\n      socket.disconnect();\r\n    };\r\n  }, []);\r\n\r\n  const fetchAnnouncements = async () => {\r\n    try {\r\n      const { data } = await api.get(\"/announcements/\", {\r\n        params: { searchParam, pageNumber },\r\n      });\r\n      dispatch({ type: \"LOAD_ANNOUNCEMENTS\", payload: data.records });\r\n      setHasMore(data.hasMore);\r\n      setLoading(false);\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n  };\r\n\r\n  const loadMore = () => {\r\n    setPageNumber((prevState) => prevState + 1);\r\n  };\r\n\r\n  const handleScroll = (e) => {\r\n    if (!hasMore || loading) return;\r\n    const { scrollTop, scrollHeight, clientHeight } = e.currentTarget;\r\n    if (scrollHeight - (scrollTop + 100) < clientHeight) {\r\n      loadMore();\r\n    }\r\n  };\r\n\r\n  const handleClick = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n    setInvisible(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  const borderPriority = (priority) => {\r\n    if (priority === 1) {\r\n      return \"4px solid #b81111\";\r\n    }\r\n    if (priority === 2) {\r\n      return \"4px solid orange\";\r\n    }\r\n    if (priority === 3) {\r\n      return \"4px solid grey\";\r\n    }\r\n  };\r\n\r\n  const getMediaPath = (filename) => {\r\n    return `${process.env.REACT_APP_BACKEND_URL}/public/${filename}`;\r\n  };\r\n\r\n  const handleShowAnnouncementDialog = (record) => {\r\n    setAnnouncement(record);\r\n    setShowAnnouncementDialog(true);\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  const open = Boolean(anchorEl);\r\n  const id = open ? \"simple-popover\" : undefined;\r\n\r\n  return (\r\n    <div>\r\n      <AnnouncementDialog\r\n        announcement={announcement}\r\n        open={showAnnouncementDialog}\r\n        handleClose={() => setShowAnnouncementDialog(false)}\r\n      />\r\n      <IconButton\r\n        variant=\"contained\"\r\n        aria-describedby={id}\r\n        onClick={handleClick}\r\n        style={{ color: \"white\" }}\r\n      >\r\n        <Badge\r\n          color=\"secondary\"\r\n          variant=\"dot\"\r\n          invisible={invisible || announcements.length < 1}\r\n        >\r\n          <Notifications />\r\n        </Badge>\r\n      </IconButton>\r\n      <Popover\r\n        id={id}\r\n        open={open}\r\n        anchorEl={anchorEl}\r\n        onClose={handleClose}\r\n        anchorOrigin={{\r\n          vertical: \"bottom\",\r\n          horizontal: \"center\",\r\n        }}\r\n        transformOrigin={{\r\n          vertical: \"top\",\r\n          horizontal: \"center\",\r\n        }}\r\n      >\r\n        <Paper\r\n          variant=\"outlined\"\r\n          onScroll={handleScroll}\r\n          className={classes.mainPaper}\r\n        >\r\n          <List\r\n            component=\"nav\"\r\n            aria-label=\"main mailbox folders\"\r\n            style={{ minWidth: 300 }}\r\n          >\r\n            {isArray(announcements) &&\r\n              announcements.map((item, key) => (\r\n                <ListItem\r\n                  key={key}\r\n                  style={{\r\n                    //background: key % 2 === 0 ? \"#ededed\" : \"white\",\r\n                    border: \"1px solid #eee\",\r\n                    borderLeft: borderPriority(item.priority),\r\n                    cursor: \"pointer\",\r\n                  }}\r\n                  onClick={() => handleShowAnnouncementDialog(item)}\r\n                >\r\n                  {item.mediaPath && (\r\n                    <ListItemAvatar>\r\n                      <Avatar\r\n                        alt={item.mediaName}\r\n                        src={getMediaPath(item.mediaPath)}\r\n                      />\r\n                    </ListItemAvatar>\r\n                  )}\r\n                  <ListItemText\r\n                    primary={item.title}\r\n                    secondary={\r\n                      <>\r\n                        <Typography component=\"span\" style={{ fontSize: 12 }}>\r\n                          {moment(item.createdAt).format(\"DD/MM/YYYY\")}\r\n                        </Typography>\r\n                        <span style={{ marginTop: 5, display: \"block\" }}></span>\r\n                        <Typography component=\"span\" variant=\"body2\">\r\n                          {item.text}\r\n                        </Typography>\r\n                      </>\r\n                    }\r\n                  />\r\n                </ListItem>\r\n              ))}\r\n            {isArray(announcements) && announcements.length === 0 && (\r\n              <ListItemText primary=\"Nenhum registro\" />\r\n            )}\r\n          </List>\r\n        </Paper>\r\n      </Popover>\r\n    </div>\r\n  );\r\n}\r\n","import moment from \"moment\";\r\n\r\nexport function useDate() {\r\n  function dateToClient(strDate) {\r\n    if (moment(strDate).isValid()) {\r\n      return moment(strDate).format(\"DD/MM/YYYY\");\r\n    }\r\n    return strDate;\r\n  }\r\n\r\n  function datetimeToClient(strDate) {\r\n    if (moment(strDate).isValid()) {\r\n      return moment(strDate).format(\"DD/MM/YYYY HH:mm\");\r\n    }\r\n    return strDate;\r\n  }\r\n\r\n  function dateToDatabase(strDate) {\r\n    if (moment(strDate, \"DD/MM/YYYY\").isValid()) {\r\n      return moment(strDate).format(\"YYYY-MM-DD HH:mm:ss\");\r\n    }\r\n    return strDate;\r\n  }\r\n\r\n  return {\r\n    dateToClient,\r\n    datetimeToClient,\r\n    dateToDatabase,\r\n  };\r\n}\r\n","import React, {\r\n  useContext,\r\n  useEffect,\r\n  useReducer,\r\n  useRef,\r\n  useState,\r\n} from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport Popover from \"@material-ui/core/Popover\";\r\nimport ForumIcon from \"@material-ui/icons/Forum\";\r\nimport {\r\n  Badge,\r\n  IconButton,\r\n  List,\r\n  ListItem,\r\n  ListItemText,\r\n  Paper,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport api from \"../../services/api\";\r\nimport { isArray } from \"lodash\";\r\nimport { socketConnection } from \"../../services/socket\";\r\nimport { useDate } from \"../../hooks/useDate\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\n\r\nimport notifySound from \"../../assets/chat_notify.mp3\";\r\nimport useSound from \"use-sound\";\r\nimport { i18n } from \"../../translate/i18n\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  mainPaper: {\r\n    flex: 1,\r\n    maxHeight: 300,\r\n    maxWidth: 500,\r\n    padding: theme.spacing(1),\r\n    overflowY: \"scroll\",\r\n    ...theme.scrollbarStyles,\r\n  },\r\n}));\r\n\r\nconst reducer = (state, action) => {\r\n  if (action.type === \"LOAD_CHATS\") {\r\n    const chats = action.payload;\r\n    const newChats = [];\r\n\r\n    if (isArray(chats)) {\r\n      chats.forEach((chat) => {\r\n        const chatIndex = state.findIndex((u) => u.id === chat.id);\r\n        if (chatIndex !== -1) {\r\n          state[chatIndex] = chat;\r\n        } else {\r\n          newChats.push(chat);\r\n        }\r\n      });\r\n    }\r\n\r\n    return [...state, ...newChats];\r\n  }\r\n\r\n  if (action.type === \"UPDATE_CHATS\") {\r\n    const chat = action.payload;\r\n    const chatIndex = state.findIndex((u) => u.id === chat.id);\r\n\r\n    if (chatIndex !== -1) {\r\n      state[chatIndex] = chat;\r\n      return [...state];\r\n    } else {\r\n      return [chat, ...state];\r\n    }\r\n  }\r\n\r\n  if (action.type === \"DELETE_CHAT\") {\r\n    const chatId = action.payload;\r\n\r\n    const chatIndex = state.findIndex((u) => u.id === chatId);\r\n    if (chatIndex !== -1) {\r\n      state.splice(chatIndex, 1);\r\n    }\r\n    return [...state];\r\n  }\r\n\r\n  if (action.type === \"RESET\") {\r\n    return [];\r\n  }\r\n\r\n  if (action.type === \"CHANGE_CHAT\") {\r\n    const changedChats = state.map((chat) => {\r\n      if (chat.id === action.payload.chat.id) {\r\n        return action.payload.chat;\r\n      }\r\n      return chat;\r\n    });\r\n    return changedChats;\r\n  }\r\n};\r\n\r\nexport default function ChatPopover() {\r\n  const classes = useStyles();\r\n\r\n  const { user } = useContext(AuthContext);\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [anchorEl, setAnchorEl] = useState(null);\r\n  const [pageNumber, setPageNumber] = useState(1);\r\n  const [hasMore, setHasMore] = useState(false);\r\n  const [searchParam] = useState(\"\");\r\n  const [chats, dispatch] = useReducer(reducer, []);\r\n  const [invisible, setInvisible] = useState(true);\r\n  const { datetimeToClient } = useDate();\r\n  const [play] = useSound(notifySound);\r\n  const soundAlertRef = useRef();\r\n\r\n  useEffect(() => {\r\n    soundAlertRef.current = play;\r\n\r\n    if (!(\"Notification\" in window)) {\r\n      console.log(\"This browser doesn't support notifications\");\r\n    } else {\r\n      Notification.requestPermission();\r\n    }\r\n  }, [play]);\r\n\r\n  useEffect(() => {\r\n    dispatch({ type: \"RESET\" });\r\n    setPageNumber(1);\r\n  }, [searchParam]);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    const delayDebounceFn = setTimeout(() => {\r\n      fetchChats();\r\n    }, 500);\r\n    return () => clearTimeout(delayDebounceFn);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [searchParam, pageNumber]);\r\n\r\n  useEffect(() => {\r\n    const companyId = localStorage.getItem(\"companyId\");\r\n    const socket = socketConnection({ companyId });\r\n    \r\n    socket.on(`company-${companyId}-chat`, (data) => {\r\n      if (data.action === \"new-message\") {\r\n        dispatch({ type: \"CHANGE_CHAT\", payload: data });\r\n        const userIds = data.newMessage.chat.users.map(userObj => userObj.userId);\r\n\r\n        if (userIds.includes(user.id) && data.newMessage.senderId !== user.id) {\r\n          soundAlertRef.current();\r\n        }\r\n      }\r\n      if (data.action === \"update\") {\r\n        dispatch({ type: \"CHANGE_CHAT\", payload: data });\r\n      }\r\n    });\r\n    return () => {\r\n      socket.disconnect();\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    let unreadsCount = 0;\r\n    if (chats.length > 0) {\r\n      for (let chat of chats) {\r\n        for (let chatUser of chat.users) {\r\n          if (chatUser.userId === user.id) {\r\n            unreadsCount += chatUser.unreads;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    if (unreadsCount > 0) {\r\n      setInvisible(false);\r\n    } else {\r\n      setInvisible(true);\r\n    }\r\n  }, [chats, user.id]);\r\n\r\n  const fetchChats = async () => {\r\n    try {\r\n      const { data } = await api.get(\"/chats/\", {\r\n        params: { searchParam, pageNumber },\r\n      });\r\n      dispatch({ type: \"LOAD_CHATS\", payload: data.records });\r\n      setHasMore(data.hasMore);\r\n      setLoading(false);\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n  };\r\n\r\n  const loadMore = () => {\r\n    setPageNumber((prevState) => prevState + 1);\r\n  };\r\n\r\n  const handleScroll = (e) => {\r\n    if (!hasMore || loading) return;\r\n    const { scrollTop, scrollHeight, clientHeight } = e.currentTarget;\r\n    if (scrollHeight - (scrollTop + 100) < clientHeight) {\r\n      loadMore();\r\n    }\r\n  };\r\n\r\n  const handleClick = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n    setInvisible(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  const goToMessages = (chat) => {\r\n    window.location.href = `/chats/${chat.uuid}`;\r\n  };\r\n\r\n  const open = Boolean(anchorEl);\r\n  const id = open ? \"simple-popover\" : undefined;\r\n\r\n  return (\r\n    <div>\r\n      <IconButton\r\n        aria-describedby={id}\r\n        variant=\"contained\"\r\n        color={invisible ? \"default\" : \"inherit\"}\r\n        onClick={handleClick}\r\n        style={{ color: \"white\" }}\r\n      >\r\n        <Badge color=\"secondary\" variant=\"dot\" invisible={invisible}>\r\n          <ForumIcon />\r\n        </Badge>\r\n      </IconButton>\r\n      <Popover\r\n        id={id}\r\n        open={open}\r\n        anchorEl={anchorEl}\r\n        onClose={handleClose}\r\n        anchorOrigin={{\r\n          vertical: \"bottom\",\r\n          horizontal: \"center\",\r\n        }}\r\n        transformOrigin={{\r\n          vertical: \"top\",\r\n          horizontal: \"center\",\r\n        }}\r\n      >\r\n        <Paper\r\n          variant=\"outlined\"\r\n          onScroll={handleScroll}\r\n          className={classes.mainPaper}\r\n        >\r\n          <List\r\n            component=\"nav\"\r\n            aria-label=\"main mailbox folders\"\r\n            style={{ minWidth: 300 }}\r\n          >\r\n            {isArray(chats) &&\r\n              chats.map((item, key) => (\r\n                <ListItem\r\n                  key={key}\r\n                  style={{\r\n                    background: key % 2 === 0 ? \"#ededed\" : \"white\",\r\n                    border: \"1px solid #eee\",\r\n                    cursor: \"pointer\",\r\n                  }}\r\n                  onClick={() => goToMessages(item)}\r\n                  button\r\n                >\r\n                  <ListItemText\r\n                    primary={item.lastMessage}\r\n                    secondary={\r\n                      <>\r\n                        <Typography component=\"span\" style={{ fontSize: 12 }}>\r\n                          {datetimeToClient(item.updatedAt)}\r\n                        </Typography>\r\n                        <span style={{ marginTop: 5, display: \"block\" }}></span>\r\n                      </>\r\n                    }\r\n                  />\r\n                </ListItem>\r\n              ))}\r\n            {isArray(chats) && chats.length === 0 && (\r\n              <ListItemText primary={i18n.t(\"mainDrawer.appBar.notRegister\")} />\r\n            )}\r\n          </List>\r\n        </Paper>\r\n      </Popover>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useContext, useEffect } from \"react\";\r\nimport clsx from \"clsx\";\r\nimport moment from \"moment\";\r\nimport {\r\n  makeStyles,\r\n  Drawer,\r\n  AppBar,\r\n  Toolbar,\r\n  List,\r\n  Typography,\r\n  Divider,\r\n  MenuItem,\r\n  IconButton,\r\n  Menu,\r\n  useTheme,\r\n  useMediaQuery,\r\n} from \"@material-ui/core\";\r\n\r\nimport MenuIcon from \"@material-ui/icons/Menu\";\r\nimport ChevronLeftIcon from \"@material-ui/icons/ChevronLeft\";\r\nimport AccountCircle from \"@material-ui/icons/AccountCircle\";\r\nimport CachedIcon from \"@material-ui/icons/Cached\";\r\n\r\nimport MainListItems from \"./MainListItems\";\r\nimport NotificationsPopOver from \"../components/NotificationsPopOver\";\r\nimport NotificationsVolume from \"../components/NotificationsVolume\";\r\nimport UserModal from \"../components/UserModal\";\r\nimport { AuthContext } from \"../context/Auth/AuthContext\";\r\nimport BackdropLoading from \"../components/BackdropLoading\";\r\nimport DarkMode from \"../components/DarkMode\";\r\nimport { i18n } from \"../translate/i18n\";\r\nimport toastError from \"../errors/toastError\";\r\nimport AnnouncementsPopover from \"../components/AnnouncementsPopover\";\r\n\r\nimport logo from \"../assets/logo.png\";\r\nimport { socketConnection } from \"../services/socket\";\r\nimport ChatPopover from \"../pages/Chat/ChatPopover\";\r\n\r\nimport { useDate } from \"../hooks/useDate\";\r\n\r\nimport ColorModeContext from \"../layout/themeContext\";\r\nimport Brightness4Icon from '@material-ui/icons/Brightness4';\r\nimport Brightness7Icon from '@material-ui/icons/Brightness7';\r\n\r\nconst drawerWidth = 240;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n    height: \"100vh\",\r\n    [theme.breakpoints.down(\"sm\")]: {\r\n      height: \"calc(100vh - 56px)\",\r\n    },\r\n    backgroundColor: theme.palette.fancyBackground,\r\n    '& .MuiButton-outlinedPrimary': {\r\n      color: theme.mode === 'light' ? '#FFF' : '#FFF',\r\n\t  backgroundColor: theme.mode === 'light' ? '#08A46E' : '#1c1c1c',\r\n      //border: theme.mode === 'light' ? '1px solid rgba(0 124 102)' : '1px solid rgba(255, 255, 255, 0.5)',\r\n    },\r\n    '& .MuiTab-textColorPrimary.Mui-selected': {\r\n      color: theme.mode === 'light' ? '#08A46E' : '#FFF',\r\n    }\r\n  },\r\n  avatar: {\r\n    width: \"100%\",\r\n  },\r\n  toolbar: {\r\n    paddingRight: 24, // keep right padding when drawer closed\r\n    color: theme.palette.dark.main,\r\n    background: theme.palette.barraSuperior,\r\n  },\r\n  toolbarIcon: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"space-between\",\r\n    padding: \"0 8px\",\r\n    minHeight: \"48px\",\r\n    [theme.breakpoints.down(\"sm\")]: {\r\n      height: \"48px\"\r\n    }\r\n  },\r\n  appBar: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    transition: theme.transitions.create([\"width\", \"margin\"], {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.leavingScreen,\r\n    }),\r\n  },\r\n  appBarShift: {\r\n    marginLeft: drawerWidth,\r\n    width: `calc(100% - ${drawerWidth}px)`,\r\n    transition: theme.transitions.create([\"width\", \"margin\"], {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.enteringScreen,\r\n    }),\r\n    [theme.breakpoints.down(\"sm\")]: {\r\n      display: \"none\"\r\n    }\r\n  },\r\n  menuButton: {\r\n    marginRight: 36,\r\n  },\r\n  menuButtonHidden: {\r\n    display: \"none\",\r\n  },\r\n  title: {\r\n    flexGrow: 1,\r\n    fontSize: 14,\r\n    color: \"white\",\r\n  },\r\n  drawerPaper: {\r\n    position: \"relative\",\r\n    whiteSpace: \"nowrap\",\r\n    width: drawerWidth,\r\n    transition: theme.transitions.create(\"width\", {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.enteringScreen,\r\n    }),\r\n    [theme.breakpoints.down(\"sm\")]: {\r\n      width: \"100%\"\r\n    },\r\n    ...theme.scrollbarStylesSoft\r\n  },\r\n  drawerPaperClose: {\r\n    overflowX: \"hidden\",\r\n    transition: theme.transitions.create(\"width\", {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.leavingScreen,\r\n    }),\r\n    width: theme.spacing(7),\r\n    [theme.breakpoints.up(\"sm\")]: {\r\n      width: theme.spacing(9),\r\n    },\r\n    [theme.breakpoints.down(\"sm\")]: {\r\n      width: \"100%\"\r\n    }\r\n  },\r\n  appBarSpacer: {\r\n    minHeight: \"48px\",\r\n  },\r\n  content: {\r\n    flex: 1,\r\n    overflow: \"auto\",\r\n\r\n  },\r\n  container: {\r\n    paddingTop: theme.spacing(4),\r\n    paddingBottom: theme.spacing(4),\r\n  },\r\n  paper: {\r\n    padding: theme.spacing(2),\r\n    display: \"flex\",\r\n    overflow: \"auto\",\r\n    flexDirection: \"column\"\r\n  },\r\n  containerWithScroll: {\r\n    flex: 1,\r\n    padding: theme.spacing(1),\r\n    overflowY: \"scroll\",\r\n    ...theme.scrollbarStyles,\r\n  },\r\n  NotificationsPopOver: {\r\n    // color: theme.barraSuperior.secondary.main,\r\n  },\r\n  logo: {\r\n    width: \"80%\",\r\n    height: \"auto\",\r\n    maxWidth: 180,\r\n    [theme.breakpoints.down(\"sm\")]: {\r\n      width: \"auto\",\r\n      height: \"80%\",\r\n      maxWidth: 180,\r\n    },\r\n    logo: theme.logo\r\n  },\r\n}));\r\n\r\nconst LoggedInLayout = ({ children, themeToggle }) => {\r\n  const classes = useStyles();\r\n  const [userModalOpen, setUserModalOpen] = useState(false);\r\n  const [anchorEl, setAnchorEl] = useState(null);\r\n  const [menuOpen, setMenuOpen] = useState(false);\r\n  const { handleLogout, loading } = useContext(AuthContext);\r\n  const [drawerOpen, setDrawerOpen] = useState(false);\r\n  const [drawerVariant, setDrawerVariant] = useState(\"permanent\");\r\n  // const [dueDate, setDueDate] = useState(\"\");\r\n  const { user } = useContext(AuthContext);\r\n\r\n  const theme = useTheme();\r\n  const { colorMode } = useContext(ColorModeContext);\r\n  const greaterThenSm = useMediaQuery(theme.breakpoints.up(\"sm\"));\r\n\r\n  const [volume, setVolume] = useState(localStorage.getItem(\"volume\") || 1);\r\n\r\n  const { dateToClient } = useDate();\r\n\r\n\r\n  //################### CODIGOS DE TESTE #########################################\r\n  // useEffect(() => {\r\n  //   navigator.getBattery().then((battery) => {\r\n  //     console.log(`Battery Charging: ${battery.charging}`);\r\n  //     console.log(`Battery Level: ${battery.level * 100}%`);\r\n  //     console.log(`Charging Time: ${battery.chargingTime}`);\r\n  //     console.log(`Discharging Time: ${battery.dischargingTime}`);\r\n  //   })\r\n  // }, []);\r\n\r\n  // useEffect(() => {\r\n  //   const geoLocation = navigator.geolocation\r\n\r\n  //   geoLocation.getCurrentPosition((position) => {\r\n  //     let lat = position.coords.latitude;\r\n  //     let long = position.coords.longitude;\r\n\r\n  //     console.log('latitude: ', lat)\r\n  //     console.log('longitude: ', long)\r\n  //   })\r\n  // }, []);\r\n\r\n  // useEffect(() => {\r\n  //   const nucleos = window.navigator.hardwareConcurrency;\r\n\r\n  //   console.log('Nucleos: ', nucleos)\r\n  // }, []);\r\n\r\n  // useEffect(() => {\r\n  //   console.log('userAgent', navigator.userAgent)\r\n  //   if (\r\n  //     navigator.userAgent.match(/Android/i)\r\n  //     || navigator.userAgent.match(/webOS/i)\r\n  //     || navigator.userAgent.match(/iPhone/i)\r\n  //     || navigator.userAgent.match(/iPad/i)\r\n  //     || navigator.userAgent.match(/iPod/i)\r\n  //     || navigator.userAgent.match(/BlackBerry/i)\r\n  //     || navigator.userAgent.match(/Windows Phone/i)\r\n  //   ) {\r\n  //     console.log('é mobile ', true) //celular\r\n  //   }\r\n  //   else {\r\n  //     console.log('não é mobile: ', false) //nao é celular\r\n  //   }\r\n  // }, []);\r\n  //##############################################################################\r\n\r\n  useEffect(() => {\r\n    if (document.body.offsetWidth > 600) {\r\n      setDrawerOpen(true);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (document.body.offsetWidth < 600) {\r\n      setDrawerVariant(\"temporary\");\r\n    } else {\r\n      setDrawerVariant(\"permanent\");\r\n    }\r\n  }, [drawerOpen]);\r\n\r\n  useEffect(() => {\r\n    const companyId = localStorage.getItem(\"companyId\");\r\n    const userId = localStorage.getItem(\"userId\");\r\n\r\n    const socket = socketConnection({ companyId });\r\n\r\n    socket.on(`company-${companyId}-auth`, (data) => {\r\n      if (data.user.id === +userId) {\r\n        toastError(\"Sua conta foi acessada em outro computador.\");\r\n        setTimeout(() => {\r\n          localStorage.clear();\r\n          window.location.reload();\r\n        }, 1000);\r\n      }\r\n    });\r\n\r\n    socket.emit(\"userStatus\");\r\n    const interval = setInterval(() => {\r\n      socket.emit(\"userStatus\");\r\n    }, 1000 * 60 * 5);\r\n\r\n    return () => {\r\n      socket.disconnect();\r\n      clearInterval(interval);\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  const handleMenu = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n    setMenuOpen(true);\r\n  };\r\n\r\n  const handleCloseMenu = () => {\r\n    setAnchorEl(null);\r\n    setMenuOpen(false);\r\n  };\r\n\r\n  const handleOpenUserModal = () => {\r\n    setUserModalOpen(true);\r\n    handleCloseMenu();\r\n  };\r\n\r\n  const handleClickLogout = () => {\r\n    handleCloseMenu();\r\n    handleLogout();\r\n  };\r\n\r\n  const drawerClose = () => {\r\n    if (document.body.offsetWidth < 600) {\r\n      setDrawerOpen(false);\r\n    }\r\n  };\r\n\r\n  const handleRefreshPage = () => {\r\n    window.location.reload(false);\r\n  }\r\n\r\n  const handleMenuItemClick = () => {\r\n    const { innerWidth: width } = window;\r\n    if (width <= 600) {\r\n      setDrawerOpen(false);\r\n    }\r\n  };\r\n\r\n  const toggleColorMode = () => {\r\n    colorMode.toggleColorMode();\r\n  }\r\n\r\n  if (loading) {\r\n    return <BackdropLoading />;\r\n  }\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Drawer\r\n        variant={drawerVariant}\r\n        className={drawerOpen ? classes.drawerPaper : classes.drawerPaperClose}\r\n        classes={{\r\n          paper: clsx(\r\n            classes.drawerPaper,\r\n            !drawerOpen && classes.drawerPaperClose\r\n          ),\r\n        }}\r\n        open={drawerOpen}\r\n      >\r\n        <div className={classes.toolbarIcon}>\r\n          <img src={logo} className={classes.logo} alt=\"logo\" />\r\n          <IconButton onClick={() => setDrawerOpen(!drawerOpen)}>\r\n            <ChevronLeftIcon />\r\n          </IconButton>\r\n        </div>\r\n        <Divider />\r\n        <List className={classes.containerWithScroll}>\r\n          <MainListItems drawerClose={drawerClose} collapsed={!drawerOpen} />\r\n        </List>\r\n        <Divider />\r\n      </Drawer>\r\n      <UserModal\r\n        open={userModalOpen}\r\n        onClose={() => setUserModalOpen(false)}\r\n        userId={user?.id}\r\n      />\r\n      <AppBar\r\n        position=\"absolute\"\r\n        className={clsx(classes.appBar, drawerOpen && classes.appBarShift)}\r\n        color=\"primary\"\r\n      >\r\n        <Toolbar variant=\"dense\" className={classes.toolbar}>\r\n          <IconButton\r\n            edge=\"start\"\r\n            variant=\"contained\"\r\n            aria-label=\"open drawer\"\r\n            onClick={() => setDrawerOpen(!drawerOpen)}\r\n            className={clsx(\r\n              classes.menuButton,\r\n              drawerOpen && classes.menuButtonHidden\r\n            )}\r\n          >\r\n            <MenuIcon />\r\n          </IconButton>\r\n\r\n          <Typography\r\n            component=\"h2\"\r\n            variant=\"h6\"\r\n            color=\"inherit\"\r\n            noWrap\r\n            className={classes.title}\r\n          >\r\n            {/* {greaterThenSm && user?.profile === \"admin\" && getDateAndDifDays(user?.company?.dueDate).difData < 7 ? ( */}\r\n            {greaterThenSm && user?.profile === \"admin\" && user?.company?.dueDate ? (\r\n              <>\r\n                Olá <b>{user.name}</b>, Bem vindo a <b>{user?.company?.name}</b>! (Ativo até {dateToClient(user?.company?.dueDate)})\r\n              </>\r\n            ) : (\r\n              <>\r\n                Olá  <b>{user.name}</b>, Bem vindo a <b>{user?.company?.name}</b>!\r\n              </>\r\n            )}\r\n          </Typography>\r\n\r\n          <IconButton edge=\"start\" onClick={toggleColorMode}>\r\n            {theme.mode === 'dark' ? <Brightness7Icon style={{ color: \"white\" }} /> : <Brightness4Icon style={{ color: \"white\" }} />}\r\n          </IconButton>\r\n\r\n          <NotificationsVolume\r\n            setVolume={setVolume}\r\n            volume={volume}\r\n          />\r\n\r\n          <IconButton\r\n            onClick={handleRefreshPage}\r\n            aria-label={i18n.t(\"mainDrawer.appBar.refresh\")}\r\n            color=\"inherit\"\r\n          >\r\n            <CachedIcon style={{ color: \"white\" }} />\r\n          </IconButton>\r\n\r\n          {user.id && <NotificationsPopOver volume={volume} />}\r\n\r\n          <AnnouncementsPopover />\r\n\r\n          <ChatPopover />\r\n\r\n          <div>\r\n            <IconButton\r\n              aria-label=\"account of current user\"\r\n              aria-controls=\"menu-appbar\"\r\n              aria-haspopup=\"true\"\r\n              onClick={handleMenu}\r\n              variant=\"contained\"\r\n              style={{ color: \"white\" }}\r\n            >\r\n              <AccountCircle />\r\n            </IconButton>\r\n            <Menu\r\n              id=\"menu-appbar\"\r\n              anchorEl={anchorEl}\r\n              getContentAnchorEl={null}\r\n              anchorOrigin={{\r\n                vertical: \"bottom\",\r\n                horizontal: \"right\",\r\n              }}\r\n              transformOrigin={{\r\n                vertical: \"top\",\r\n                horizontal: \"right\",\r\n              }}\r\n              open={menuOpen}\r\n              onClose={handleCloseMenu}\r\n            >\r\n              <MenuItem onClick={handleOpenUserModal}>\r\n                {i18n.t(\"mainDrawer.appBar.user.profile\")}\r\n              </MenuItem>\r\n              <MenuItem onClick={handleClickLogout}>\r\n                {i18n.t(\"mainDrawer.appBar.user.logout\")}\r\n              </MenuItem>\r\n            </Menu>\r\n          </div>\r\n        </Toolbar>\r\n      </AppBar>\r\n      <main className={classes.content}>\r\n        <div className={classes.appBarSpacer} />\r\n\r\n        {children ? children : null}\r\n      </main>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoggedInLayout;","import React from \"react\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\n\r\nconst Title = props => {\r\n\treturn (\r\n\t\t<Typography component=\"h2\" variant=\"h6\" color=\"primary\" gutterBottom>\r\n\t\t\t{props.children}\r\n\t\t</Typography>\r\n\t);\r\n};\r\n\r\nexport default Title;\r\n","import React, { useState, useEffect, useRef } from \"react\";\r\nimport { useTheme } from \"@material-ui/core/styles\";\r\nimport {\r\n\tBarChart,\r\n\tCartesianGrid,\r\n\tBar,\r\n\tXAxis,\r\n\tYAxis,\r\n\tLabel,\r\n\tResponsiveContainer,\r\n} from \"recharts\";\r\nimport { startOfHour, parseISO, format } from \"date-fns\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\n\r\nimport Title from \"./Title\";\r\nimport useTickets from \"../../hooks/useTickets\";\r\n\r\nconst Chart = () => {\r\n\tconst theme = useTheme();\r\n\r\n\tconst date = useRef(new Date().toISOString());\r\n\tconst { tickets } = useTickets({ date: date.current });\r\n\r\n\tconst [chartData, setChartData] = useState([\r\n\t\t{ time: \"01:00\", amount: 0 },\r\n\t\t{ time: \"02:00\", amount: 0 },\r\n\t\t{ time: \"03:00\", amount: 0 },\r\n\t\t{ time: \"04:00\", amount: 0 },\r\n\t\t{ time: \"05:00\", amount: 0 },\r\n\t\t{ time: \"06:00\", amount: 0 },\r\n\t\t{ time: \"07:00\", amount: 0 },\r\n\t\t{ time: \"08:00\", amount: 0 },\r\n\t\t{ time: \"09:00\", amount: 0 },\r\n\t\t{ time: \"10:00\", amount: 0 },\r\n\t\t{ time: \"11:00\", amount: 0 },\r\n\t\t{ time: \"12:00\", amount: 0 },\r\n\t\t{ time: \"13:00\", amount: 0 },\r\n\t\t{ time: \"14:00\", amount: 0 },\r\n\t\t{ time: \"15:00\", amount: 0 },\r\n\t\t{ time: \"16:00\", amount: 0 },\r\n\t\t{ time: \"17:00\", amount: 0 },\r\n\t\t{ time: \"18:00\", amount: 0 },\r\n\t\t{ time: \"19:00\", amount: 0 },\r\n\t\t{ time: \"20:00\", amount: 0 },\r\n\t\t{ time: \"21:00\", amount: 0 },\r\n\t\t{ time: \"22:00\", amount: 0 },\r\n\t\t{ time: \"23:00\", amount: 0 },\r\n\t\t{ time: \"00:00\", amount: 0 },\r\n\t]);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetChartData(prevState => {\r\n\t\t\tlet aux = [...prevState];\r\n\r\n\t\t\taux.forEach(a => {\r\n\t\t\t\ttickets.forEach(ticket => {\r\n\t\t\t\t\tformat(startOfHour(parseISO(ticket.createdAt)), \"HH:mm\") === a.time &&\r\n\t\t\t\t\t\ta.amount++;\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t\treturn aux;\r\n\t\t});\r\n\t}, [tickets]);\r\n\r\n\treturn (\r\n\t\t<React.Fragment>\r\n\t\t\t<Title>{`${i18n.t(\"dashboard.charts.perDay.title\")}${\r\n\t\t\t\ttickets.length\r\n\t\t\t}`}</Title>\r\n\t\t\t<ResponsiveContainer>\r\n\t\t\t\t<BarChart\r\n\t\t\t\t\tdata={chartData}\r\n\t\t\t\t\tbarSize={40}\r\n\t\t\t\t\twidth={730}\r\n\t\t\t\t\theight={250}\r\n\t\t\t\t\tmargin={{\r\n\t\t\t\t\t\ttop: 16,\r\n\t\t\t\t\t\tright: 16,\r\n\t\t\t\t\t\tbottom: 0,\r\n\t\t\t\t\t\tleft: 24,\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<CartesianGrid strokeDasharray=\"3 3\" />\r\n\t\t\t\t\t<XAxis dataKey=\"time\" stroke={theme.palette.text.secondary} />\r\n\t\t\t\t\t<YAxis\r\n\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\tallowDecimals={false}\r\n\t\t\t\t\t\tstroke={theme.palette.text.secondary}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Label\r\n\t\t\t\t\t\t\tangle={270}\r\n\t\t\t\t\t\t\tposition=\"left\"\r\n\t\t\t\t\t\t\tstyle={{ textAnchor: \"middle\", fill: theme.palette.text.primary }}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tTickets\r\n\t\t\t\t\t\t</Label>\r\n\t\t\t\t\t</YAxis>\r\n\t\t\t\t\t<Bar dataKey=\"amount\" fill={theme.palette.primary.main} />\r\n\t\t\t\t</BarChart>\r\n\t\t\t</ResponsiveContainer>\r\n\t\t</React.Fragment>\r\n\t);\r\n};\r\n\r\nexport default Chart;\r\n","import React from \"react\";\r\n\r\nimport { Avatar, Card, CardHeader, Typography } from \"@material-ui/core\";\r\nimport Skeleton from \"@material-ui/lab/Skeleton\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { grey } from '@material-ui/core/colors';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tcardAvatar: {\r\n\t\tfontSize: '55px',\r\n\t\tcolor: grey[500],\r\n\t\tbackgroundColor: '#ffffff',\r\n\t\twidth: theme.spacing(7),\r\n\t\theight: theme.spacing(7)\r\n\t},\r\n\tcardTitle: {\r\n\t\tfontSize: '18px',\r\n\t\tcolor: theme.palette.text.primary\r\n\t},\r\n\tcardSubtitle: {\r\n\t\tcolor: grey[600],\r\n\t\tfontSize: '14px'\r\n\t}\r\n}));\r\n\r\nexport default function CardCounter(props) {\r\n    const { icon, title, value, loading } = props\r\n\tconst classes = useStyles();\r\n    return ( !loading ? \r\n        <Card>\r\n            <CardHeader\r\n                avatar={\r\n                    <Avatar className={classes.cardAvatar}>\r\n                        {icon}\r\n                    </Avatar>\r\n                }\r\n                title={\r\n                    <Typography variant=\"h6\" component=\"h2\" className={classes.cardTitle}>\r\n                        { title }\r\n                    </Typography>\r\n                }\r\n                subheader={\r\n                    <Typography variant=\"subtitle1\" component=\"p\" className={classes.cardSubtitle}>\r\n                        { value }\r\n                    </Typography>\r\n                }\r\n            />\r\n        </Card>\r\n        : <Skeleton variant=\"rect\" height={80} />\r\n    )\r\n    \r\n}","import React from \"react\";\r\n\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Skeleton from \"@material-ui/lab/Skeleton\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { green, red } from '@material-ui/core/colors';\r\n\r\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\r\nimport ErrorIcon from '@material-ui/icons/Error';\r\nimport moment from 'moment';\r\n\r\nimport Rating from '@material-ui/lab/Rating';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\ton: {\r\n\t\tcolor: green[600],\r\n\t\tfontSize: '20px'\r\n\t},\r\n\toff: {\r\n\t\tcolor: red[600],\r\n\t\tfontSize: '20px'\r\n\t},\r\n    pointer: {\r\n        cursor: \"pointer\"\r\n    }\r\n}));\r\n\r\nexport function RatingBox ({ rating }) {\r\n    const ratingTrunc = rating === null ? 0 : Math.trunc(rating);\r\n    return <Rating\r\n        defaultValue={ratingTrunc}\r\n        max={3}\r\n        readOnly\r\n    />\r\n}\r\n\r\nexport default function TableAttendantsStatus(props) {\r\n    const { loading, attendants } = props\r\n\tconst classes = useStyles();\r\n\r\n    function renderList () {\r\n        return attendants.map((a, k) => (\r\n            <TableRow key={k}>\r\n                <TableCell>{a.name}</TableCell>\r\n                <TableCell align=\"center\" title=\"1 - Insatisfeito, 2 - Satisfeito, 3 - Muito Satisfeito\" className={classes.pointer}>\r\n                    <RatingBox rating={a.rating} />\r\n                </TableCell>\r\n                <TableCell align=\"center\">{formatTime(a.avgSupportTime, 2)}</TableCell>\r\n                <TableCell align=\"center\">\r\n                    { a.online ?\r\n                        <CheckCircleIcon className={classes.on} />\r\n                        : <ErrorIcon className={classes.off} />\r\n                    }\r\n                </TableCell>\r\n            </TableRow>\r\n        ))\r\n    }\r\n\r\n\tfunction formatTime(minutes){\r\n\t\treturn moment().startOf('day').add(minutes, 'minutes').format('HH[h] mm[m]');\r\n\t}\r\n\r\n    return ( !loading ?\r\n        <TableContainer component={Paper}>\r\n            <Table>\r\n                <TableHead>\r\n                    <TableRow>\r\n                        <TableCell>Nome</TableCell>\r\n                        <TableCell align=\"center\">Avaliações</TableCell>\r\n                        <TableCell align=\"center\">T.M. de Atendimento</TableCell>\r\n                        <TableCell align=\"center\">Status (Atual)</TableCell>\r\n                    </TableRow>\r\n                </TableHead>\r\n                <TableBody>\r\n                    { renderList() }\r\n                    {/* <TableRow>\r\n                        <TableCell>Nome 4</TableCell>\r\n                        <TableCell align=\"center\">10</TableCell>\r\n                        <TableCell align=\"center\">10 minutos</TableCell>\r\n                        <TableCell align=\"center\">\r\n                            <CheckCircleIcon className={classes.off} />\r\n                        </TableCell>\r\n                    </TableRow>\r\n                    <TableRow>\r\n                        <TableCell>Nome 5</TableCell>\r\n                        <TableCell align=\"center\">10</TableCell>\r\n                        <TableCell align=\"center\">10 minutos</TableCell>\r\n                        <TableCell align=\"center\">\r\n                            <CheckCircleIcon className={classes.on} />\r\n                        </TableCell>\r\n                    </TableRow> */}\r\n                </TableBody>\r\n            </Table>\r\n        </TableContainer>\r\n        : <Skeleton variant=\"rect\" height={150} />\r\n    )\r\n}","import api from \"../../services/api\";\r\n\r\nconst useDashboard = () => {\r\n\r\n    const find = async (params) => {\r\n        const { data } = await api.request({\r\n            url: `/dashboard`,\r\n            method: 'GET',\r\n            params\r\n        });\r\n        return data;\r\n    }\r\n\r\n    return {\r\n        find\r\n    }\r\n}\r\n\r\nexport default useDashboard;","import api from \"../../services/api\";\r\n\r\nconst useCompanies = () => {\r\n\r\n    const save = async (data) => {\r\n        const { data: responseData } = await api.request({\r\n            url: '/companies',\r\n            method: 'POST',\r\n            data\r\n        });\r\n        return responseData;\r\n    }\r\n\r\n    const findAll = async (id) => {\r\n        const { data } = await api.request({\r\n            url: `/companies`,\r\n            method: 'GET'\r\n        });\r\n        return data;\r\n    }\r\n\r\n    const list = async (id) => {\r\n        const { data } = await api.request({\r\n            url: `/companies/list`,\r\n            method: 'GET'\r\n        });\r\n        return data;\r\n    }\r\n\r\n    const find = async (id) => {\r\n        const { data } = await api.request({\r\n            url: `/companies/${id}`,\r\n            method: 'GET'\r\n        });\r\n        return data;\r\n    }\r\n\r\n    const finding = async (id) => {\r\n        const { data } = await api.request({\r\n            url: `/companies/${id}`,\r\n            method: 'GET'\r\n        });\r\n        return data;\r\n    }\r\n\r\n\r\n    const update = async (data) => {\r\n        const { data: responseData } = await api.request({\r\n            url: `/companies/${data.id}`,\r\n            method: 'PUT',\r\n            data\r\n        });\r\n        return responseData;\r\n    }\r\n\r\n    const remove = async (id) => {\r\n        const { data } = await api.request({\r\n            url: `/companies/${id}`,\r\n            method: 'DELETE'\r\n        });\r\n        return data;\r\n    }\r\n\r\n    const updateSchedules = async (data) => {\r\n        const { data: responseData } = await api.request({\r\n            url: `/companies/${data.id}/schedules`,\r\n            method: 'PUT',\r\n            data\r\n        });\r\n        return responseData;\r\n    }\r\n\r\n    return {\r\n        save,\r\n        update,\r\n        remove,\r\n        list,\r\n        find,\r\n        finding,\r\n        findAll,\r\n        updateSchedules\r\n    }\r\n}\r\n\r\nexport default useCompanies;","import React, { useState, useEffect } from \"react\";\r\n\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport FormHelperText from \"@material-ui/core/FormHelperText\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\n\r\n// ICONS\r\nimport SpeedIcon from \"@material-ui/icons/Speed\";\r\nimport Icon from \"@material-ui/icons/\";\r\nimport AssignmentIcon from \"@material-ui/icons/Assignment\";\r\nimport PersonIcon from \"@material-ui/icons/Person\";\r\nimport TodayIcon from '@material-ui/icons/Today';\r\nimport CallIcon from \"@material-ui/icons/Call\";\r\nimport RecordVoiceOverIcon from \"@material-ui/icons/RecordVoiceOver\";\r\nimport AddIcon from \"@material-ui/icons/Add\";\r\nimport HourglassEmptyIcon from \"@material-ui/icons/HourglassEmpty\";\r\nimport CheckCircleIcon from \"@material-ui/icons/CheckCircle\";\r\nimport ForumIcon from \"@material-ui/icons/Forum\";\r\nimport FilterListIcon from \"@material-ui/icons/FilterList\";\r\nimport ClearIcon from \"@material-ui/icons/Clear\";\r\nimport SendIcon from '@material-ui/icons/Send';\r\nimport MessageIcon from '@material-ui/icons/Message';\r\nimport AccessAlarmIcon from '@material-ui/icons/AccessAlarm';\r\nimport TimerIcon from '@material-ui/icons/Timer';\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { grey, blue } from \"@material-ui/core/colors\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport Chart from \"./Chart\";\r\nimport ButtonWithSpinner from \"../../components/ButtonWithSpinner\";\r\n\r\nimport CardCounter from \"../../components/Dashboard/CardCounter\";\r\nimport TableAttendantsStatus from \"../../components/Dashboard/TableAttendantsStatus\";\r\nimport { isArray } from \"lodash\";\r\n\r\nimport useDashboard from \"../../hooks/useDashboard\";\r\nimport useCompanies from \"../../hooks/useCompanies\";\r\n\r\nimport { isEmpty } from \"lodash\";\r\nimport moment from \"moment\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  container: {\r\n    paddingTop: theme.spacing(4),\r\n    paddingBottom: theme.spacing(4),\r\n  },\r\n  fixedHeightPaper: {\r\n    padding: theme.spacing(2),\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    height: 240,\r\n    overflowY: \"auto\",\r\n    ...theme.scrollbarStyles,\r\n  },\r\n  cardAvatar: {\r\n    fontSize: \"55px\",\r\n    color: grey[500],\r\n    backgroundColor: \"#ffffff\",\r\n    width: theme.spacing(7),\r\n    height: theme.spacing(7),\r\n  },\r\n  cardTitle: {\r\n    fontSize: \"18px\",\r\n    color: blue[700],\r\n  },\r\n  cardSubtitle: {\r\n    color: grey[600],\r\n    fontSize: \"14px\",\r\n  },\r\n  alignRight: {\r\n    textAlign: \"right\",\r\n  },\r\n  fullWidth: {\r\n    width: \"100%\",\r\n  },\r\n  selectContainer: {\r\n    width: \"100%\",\r\n    textAlign: \"left\",\r\n  },\r\n  card1: {\r\n    padding: theme.spacing(2),\r\n    display: \"flex\",\r\n    overflow: \"auto\",\r\n    flexDirection: \"column\",\r\n    height: \"100%\",\r\n    backgroundColor: \"#08A46E\",\r\n    color: \"#eee\",\r\n  },\r\n  card2: {\r\n    padding: theme.spacing(2),\r\n    display: \"flex\",\r\n    overflow: \"auto\",\r\n    flexDirection: \"column\",\r\n    height: \"100%\",\r\n    backgroundColor: \"#08A46E\",\r\n    color: \"#eee\",\r\n  },\r\n  card3: {\r\n    padding: theme.spacing(2),\r\n    display: \"flex\",\r\n    overflow: \"auto\",\r\n    flexDirection: \"column\",\r\n    height: \"100%\",\r\n    backgroundColor: \"#08A46E\",\r\n    color: \"#eee\",\r\n  },\r\n  card4: {\r\n    padding: theme.spacing(2),\r\n    display: \"flex\",\r\n    overflow: \"auto\",\r\n    flexDirection: \"column\",\r\n    height: \"100%\",\r\n    backgroundColor: \"#08A46E\",\r\n    color: \"#eee\",\r\n  },\r\n  card5: {\r\n    padding: theme.spacing(2),\r\n    display: \"flex\",\r\n    overflow: \"auto\",\r\n    flexDirection: \"column\",\r\n    height: \"100%\",\r\n    backgroundColor: \"#08A46E\",\r\n    color: \"#eee\",\r\n  },\r\n  card6: {\r\n    padding: theme.spacing(2),\r\n    display: \"flex\",\r\n    overflow: \"auto\",\r\n    flexDirection: \"column\",\r\n    height: \"100%\",\r\n    backgroundColor: \"#08A46E\",\r\n    color: \"#eee\",\r\n  },\r\n  card7: {\r\n    padding: theme.spacing(2),\r\n    display: \"flex\",\r\n    overflow: \"auto\",\r\n    flexDirection: \"column\",\r\n    height: \"100%\",\r\n    backgroundColor: \"#08A46E\",\r\n    color: \"#eee\",\r\n  },\r\n  card8: {\r\n    padding: theme.spacing(2),\r\n    display: \"flex\",\r\n    overflow: \"auto\",\r\n    flexDirection: \"column\",\r\n    height: \"100%\",\r\n    backgroundColor: \"#08A46E\",\r\n    color: \"#eee\",\r\n  },\r\n  card9: {\r\n    padding: theme.spacing(2),\r\n    display: \"flex\",\r\n    overflow: \"auto\",\r\n    flexDirection: \"column\",\r\n    height: \"100%\",\r\n    backgroundColor: \"#08A46E\",\r\n    color: \"#eee\",\r\n  },\r\n}));\r\n\r\nconst Dashboard = () => {\r\n  const classes = useStyles();\r\n  const [counters, setCounters] = useState({});\r\n  const [attendants, setAttendants] = useState([]);\r\n  const [filterType, setFilterType] = useState(1);\r\n  const [period, setPeriod] = useState(0);\r\n  const [companyDueDate, setCompanyDueDate] = useState();\r\n  const [dateFrom, setDateFrom] = useState(\r\n    moment(\"1\", \"D\").format(\"YYYY-MM-DD\")\r\n  );\r\n  const [dateTo, setDateTo] = useState(moment().format(\"YYYY-MM-DD\"));\r\n  const [loading, setLoading] = useState(false);\r\n  const { find } = useDashboard();\r\n  const { finding } = useCompanies();\r\n  useEffect(() => {\r\n    async function firstLoad() {\r\n      await fetchData();\r\n    }\r\n    setTimeout(() => {\r\n      firstLoad();\r\n    }, 1000);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  async function handleChangePeriod(value) {\r\n    setPeriod(value);\r\n  }\r\n\r\n  async function handleChangeFilterType(value) {\r\n    setFilterType(value);\r\n    if (value === 1) {\r\n      setPeriod(0);\r\n    } else {\r\n      setDateFrom(\"\");\r\n      setDateTo(\"\");\r\n    }\r\n  }\r\n\r\n  async function fetchData() {\r\n    setLoading(true);\r\n\r\n    let params = {};\r\n\r\n    if (period > 0) {\r\n      params = {\r\n        days: period,\r\n      };\r\n    }\r\n\r\n    if (!isEmpty(dateFrom) && moment(dateFrom).isValid()) {\r\n      params = {\r\n        ...params,\r\n        date_from: moment(dateFrom).format(\"YYYY-MM-DD\"),\r\n      };\r\n    }\r\n\r\n    if (!isEmpty(dateTo) && moment(dateTo).isValid()) {\r\n      params = {\r\n        ...params,\r\n        date_to: moment(dateTo).format(\"YYYY-MM-DD\"),\r\n      };\r\n    }\r\n\r\n    if (Object.keys(params).length === 0) {\r\n      toast.error(\"Parametrize o filtro\");\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    const data = await find(params);\r\n\r\n\r\n\r\n    setCounters(data.counters);\r\n    if (isArray(data.attendants)) {\r\n      setAttendants(data.attendants);\r\n    } else {\r\n      setAttendants([]);\r\n    }\r\n\r\n    setLoading(false);\r\n  }\r\n\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      await loadCompanies();\r\n    }\r\n    fetchData();\r\n  }, [])\r\n  //let companyDueDate = localStorage.getItem(\"companyDueDate\");\r\n  //const companyDueDate = localStorage.getItem(\"companyDueDate\").toString();\r\n  const companyId = localStorage.getItem(\"companyId\");\r\n  const loadCompanies = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const companiesList = await finding(companyId);\r\n      setCompanyDueDate(moment(companiesList.dueDate).format(\"DD/MM/yyyy\"));\r\n    } catch (e) {\r\n      console.log(\"🚀 Console Log : e\", e);\r\n      // toast.error(\"Não foi possível carregar a lista de registros\");\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  function formatTime(minutes) {\r\n    return moment()\r\n      .startOf(\"day\")\r\n      .add(minutes, \"minutes\")\r\n      .format(\"HH[h] mm[m]\");\r\n  }\r\n\r\n  function renderFilters() {\r\n    if (filterType === 1) {\r\n      return (\r\n        <>\r\n          <Grid item xs={12} sm={6} md={4}>\r\n            <TextField\r\n              label=\"Data Inicial\"\r\n              type=\"date\"\r\n              value={dateFrom}\r\n              onChange={(e) => setDateFrom(e.target.value)}\r\n              className={classes.fullWidth}\r\n              InputLabelProps={{\r\n                shrink: true,\r\n              }}\r\n            />\r\n          </Grid>\r\n          <Grid item xs={12} sm={6} md={4}>\r\n            <TextField\r\n              label=\"Data Final\"\r\n              type=\"date\"\r\n              value={dateTo}\r\n              onChange={(e) => setDateTo(e.target.value)}\r\n              className={classes.fullWidth}\r\n              InputLabelProps={{\r\n                shrink: true,\r\n              }}\r\n            />\r\n          </Grid>\r\n        </>\r\n      );\r\n    } else {\r\n      return (\r\n        <Grid item xs={12} sm={6} md={4}>\r\n          <FormControl className={classes.selectContainer}>\r\n            <InputLabel id=\"period-selector-label\">Período</InputLabel>\r\n            <Select\r\n              labelId=\"period-selector-label\"\r\n              id=\"period-selector\"\r\n              value={period}\r\n              onChange={(e) => handleChangePeriod(e.target.value)}\r\n            >\r\n              <MenuItem value={0}>Nenhum selecionado</MenuItem>\r\n              <MenuItem value={3}>Últimos 3 dias</MenuItem>\r\n              <MenuItem value={7}>Últimos 7 dias</MenuItem>\r\n              <MenuItem value={15}>Últimos 15 dias</MenuItem>\r\n              <MenuItem value={30}>Últimos 30 dias</MenuItem>\r\n              <MenuItem value={60}>Últimos 60 dias</MenuItem>\r\n              <MenuItem value={90}>Últimos 90 dias</MenuItem>\r\n            </Select>\r\n            <FormHelperText>Selecione o período desejado</FormHelperText>\r\n          </FormControl>\r\n        </Grid>\r\n      );\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Container maxWidth=\"lg\" className={classes.container}>\r\n        <Grid container spacing={3} justifyContent=\"flex-end\">\r\n          \r\n          {/* GRID DO VENCIMENTO */}\r\n          {/* <Grid item xs={12} sm={6} md={3}>\r\n            <CardCounter\r\n              icon={<TodayIcon fontSize=\"inherit\" />}\r\n              title=\"Data Vencimento\"\r\n              value={companyDueDate}\r\n              loading={loading}\r\n            />\r\n          </Grid> */}\r\n\r\n\r\n\r\n          {/* ATENDIMENTOS PENDENTES */}\r\n          <Grid item xs={12} sm={6} md={4}>\r\n            <Paper\r\n              className={classes.card1}\r\n              style={{ overflow: \"hidden\" }}\r\n              elevation={4}\r\n            >\r\n              <Grid container spacing={3}>\r\n                <Grid item xs={8}>\r\n                  <Typography\r\n                    component=\"h3\"\r\n                    variant=\"h6\"\r\n                    paragraph\r\n                  >\r\n                    Atd. Pendentes\r\n                  </Typography>\r\n                  <Grid item>\r\n                    <Typography\r\n                      component=\"h1\"\r\n                      variant=\"h4\"\r\n                    >\r\n                      {counters.supportPending}\r\n                    </Typography>\r\n                  </Grid>\r\n                </Grid>\r\n                <Grid item xs={2}>\r\n                  <CallIcon\r\n                    style={{\r\n                      fontSize: 100,\r\n                      color: \"#FFFFFF\",\r\n                    }}\r\n                  />\r\n                </Grid>\r\n              </Grid>\r\n            </Paper>\r\n          </Grid>\r\n\r\n          {/* ATENDIMENTOS ACONTECENDO */}\r\n          <Grid item xs={12} sm={6} md={4}>\r\n            <Paper\r\n              className={classes.card2}\r\n              style={{ overflow: \"hidden\" }}\r\n              elevation={6}\r\n            >\r\n              <Grid container spacing={3}>\r\n                <Grid item xs={8}>\r\n                  <Typography\r\n                    component=\"h3\"\r\n                    variant=\"h6\"\r\n                    paragraph\r\n                  >\r\n                    Atd. Acontecendo\r\n                  </Typography>\r\n                  <Grid item>\r\n                    <Typography\r\n                      component=\"h1\"\r\n                      variant=\"h4\"\r\n                    >\r\n                      {counters.supportHappening}\r\n                    </Typography>\r\n                  </Grid>\r\n                </Grid>\r\n                <Grid item xs={4}>\r\n                  <HourglassEmptyIcon\r\n                    style={{\r\n                      fontSize: 100,\r\n                      color: \"#FFFFFF\",\r\n                    }}\r\n                  />\r\n                </Grid>\r\n              </Grid>\r\n            </Paper>\r\n          </Grid>\r\n\r\n          {/* ATENDIMENTOS REALIZADOS */}\r\n          <Grid item xs={12} sm={6} md={4}>\r\n            <Paper\r\n              className={classes.card3}\r\n              style={{ overflow: \"hidden\" }}\r\n              elevation={6}\r\n            >\r\n              <Grid container spacing={3}>\r\n                <Grid item xs={8}>\r\n                  <Typography\r\n                    component=\"h3\"\r\n                    variant=\"h6\"\r\n                    paragraph\r\n                  >\r\n                    Finalizados\r\n                  </Typography>\r\n                  <Grid item>\r\n                    <Typography\r\n                      component=\"h1\"\r\n                      variant=\"h4\"\r\n                    >\r\n                      {counters.supportFinished}\r\n                    </Typography>\r\n                  </Grid>\r\n                </Grid>\r\n                <Grid item xs={4}>\r\n                  <CheckCircleIcon\r\n                    style={{\r\n                      fontSize: 100,\r\n                      color: \"#FFFFFF\",\r\n                    }}\r\n                  />\r\n                </Grid>\r\n              </Grid>\r\n            </Paper>\r\n          </Grid>\r\n\r\n          {/* NOVOS CONTATOS */}\r\n          <Grid item xs={12} sm={6} md={4}>\r\n            <Paper\r\n              className={classes.card4}\r\n              style={{ overflow: \"hidden\" }}\r\n              elevation={6}\r\n            >\r\n              <Grid container spacing={3}>\r\n                <Grid item xs={8}>\r\n                  <Typography\r\n                    component=\"h3\"\r\n                    variant=\"h6\"\r\n                    paragraph\r\n                  >\r\n                    Novos Contatos\r\n                  </Typography>\r\n                  <Grid item>\r\n                    <Typography\r\n                      component=\"h1\"\r\n                      variant=\"h4\"\r\n                    >\r\n                      {counters.leads}\r\n                    </Typography>\r\n                  </Grid>\r\n                </Grid>\r\n                <Grid item xs={4}>\r\n                  <AddIcon\r\n                    style={{\r\n                      fontSize: 100,\r\n                      color: \"#FFFFFF\",\r\n                    }}\r\n                  />\r\n                </Grid>\r\n              </Grid>\r\n            </Paper>\r\n          </Grid>\r\n\r\n          {/* T.M. DE ATENDIMENTO */}\r\n          <Grid item xs={12} sm={6} md={4}>\r\n            <Paper\r\n              className={classes.card8}\r\n              style={{ overflow: \"hidden\" }}\r\n              elevation={6}\r\n            >\r\n              <Grid container spacing={3}>\r\n                <Grid item xs={8}>\r\n                  <Typography\r\n                    component=\"h3\"\r\n                    variant=\"h6\"\r\n                    paragraph\r\n                  >\r\n                    T.M. de Atendimento\r\n                  </Typography>\r\n                  <Grid item>\r\n                    <Typography\r\n                      component=\"h1\"\r\n                      variant=\"h4\"\r\n                    >\r\n                      {formatTime(counters.avgSupportTime)}\r\n                    </Typography>\r\n                  </Grid>\r\n                </Grid>\r\n                <Grid item xs={4}>\r\n                  <AccessAlarmIcon\r\n                    style={{\r\n                      fontSize: 100,\r\n                      color: \"#FFFFFF\",\r\n                    }}\r\n                  />\r\n                </Grid>\r\n              </Grid>\r\n            </Paper>\r\n          </Grid>\r\n\r\n          {/* T.M. DE ESPERA */}\r\n          <Grid item xs={12} sm={6} md={4}>\r\n            <Paper\r\n              className={classes.card9}\r\n              style={{ overflow: \"hidden\" }}\r\n              elevation={6}\r\n            >\r\n              <Grid container spacing={3}>\r\n                <Grid item xs={8}>\r\n                  <Typography\r\n                    component=\"h3\"\r\n                    variant=\"h6\"\r\n                    paragraph\r\n                  >\r\n                    T.M. de Espera\r\n                  </Typography>\r\n                  <Grid item>\r\n                    <Typography\r\n                      component=\"h1\"\r\n                      variant=\"h4\"\r\n                    >\r\n                      {formatTime(counters.avgWaitTime)}\r\n                    </Typography>\r\n                  </Grid>\r\n                </Grid>\r\n                <Grid item xs={4}>\r\n                  <TimerIcon\r\n                    style={{\r\n                      fontSize: 100,\r\n                      color: \"#FFFFFF\",\r\n                    }}\r\n                  />\r\n                </Grid>\r\n              </Grid>\r\n            </Paper>\r\n          </Grid>\r\n\r\n          {/* FILTROS */}\r\n          <Grid item xs={12} sm={6} md={4}>\r\n            <FormControl className={classes.selectContainer}>\r\n              <InputLabel id=\"period-selector-label\">Tipo de Filtro</InputLabel>\r\n              <Select\r\n                labelId=\"period-selector-label\"\r\n                value={filterType}\r\n                onChange={(e) => handleChangeFilterType(e.target.value)}\r\n              >\r\n                <MenuItem value={1}>Filtro por Data</MenuItem>\r\n                <MenuItem value={2}>Filtro por Período</MenuItem>\r\n              </Select>\r\n              <FormHelperText>Selecione o período desejado</FormHelperText>\r\n            </FormControl>\r\n          </Grid>\r\n\r\n          {renderFilters()}\r\n\r\n          {/* BOTAO FILTRAR */}\r\n          <Grid item xs={12} className={classes.alignRight}>\r\n            <ButtonWithSpinner\r\n              loading={loading}\r\n              onClick={() => fetchData()}\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n            >\r\n              Filtrar\r\n            </ButtonWithSpinner>\r\n          </Grid>\r\n\r\n          {/* DASHBOARD ATENDIMENTOS HOJE */}\r\n          <Grid item xs={12}>\r\n            <Paper className={classes.fixedHeightPaper}>\r\n              <Chart />\r\n            </Paper>\r\n          </Grid>\r\n\r\n          {/* USUARIOS ONLINE */}\r\n          <Grid item xs={12}>\r\n            {attendants.length ? (\r\n              <TableAttendantsStatus\r\n                attendants={attendants}\r\n                loading={loading}\r\n              />\r\n            ) : null}\r\n          </Grid>\r\n\r\n        </Grid>\r\n      </Container>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Dashboard;\r\n","import React, { useState, useEffect, useRef } from \"react\";\r\n\r\nimport * as Yup from \"yup\";\r\nimport { Formik, FieldArray, Form, Field } from \"formik\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { green } from \"@material-ui/core/colors\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\n\r\nimport api from \"../../services/api\";\r\nimport toastError from \"../../errors/toastError\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\troot: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexWrap: \"wrap\",\r\n\t},\r\n\ttextField: {\r\n\t\tmarginRight: theme.spacing(1),\r\n\t\tflex: 1,\r\n\t},\r\n\r\n\textraAttr: {\r\n\t\tdisplay: \"flex\",\r\n\t\tjustifyContent: \"center\",\r\n\t\talignItems: \"center\",\r\n\t},\r\n\r\n\tbtnWrapper: {\r\n\t\tposition: \"relative\",\r\n\t},\r\n\r\n\tbuttonProgress: {\r\n\t\tcolor: green[500],\r\n\t\tposition: \"absolute\",\r\n\t\ttop: \"50%\",\r\n\t\tleft: \"50%\",\r\n\t\tmarginTop: -12,\r\n\t\tmarginLeft: -12,\r\n\t},\r\n}));\r\n\r\nconst ContactSchema = Yup.object().shape({\r\n\tname: Yup.string()\r\n\t\t.min(2, \"Too Short!\")\r\n\t\t.max(50, \"Too Long!\")\r\n\t\t.required(\"Required\"),\r\n\tnumber: Yup.string().min(8, \"Too Short!\").max(50, \"Too Long!\"),\r\n\temail: Yup.string().email(\"Invalid email\"),\r\n});\r\n\r\nconst ContactModal = ({ open, onClose, contactId, initialValues, onSave }) => {\r\n\tconst classes = useStyles();\r\n\tconst isMounted = useRef(true);\r\n\r\n\tconst initialState = {\r\n\t\tname: \"\",\r\n\t\tnumber: \"\",\r\n\t\temail: \"\",\r\n\t};\r\n\r\n\tconst [contact, setContact] = useState(initialState);\r\n\r\n\tuseEffect(() => {\r\n\t\treturn () => {\r\n\t\t\tisMounted.current = false;\r\n\t\t};\r\n\t}, []);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst fetchContact = async () => {\r\n\t\t\tif (initialValues) {\r\n\t\t\t\tsetContact(prevState => {\r\n\t\t\t\t\treturn { ...prevState, ...initialValues };\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tif (!contactId) return;\r\n\r\n\t\t\ttry {\r\n\t\t\t\tconst { data } = await api.get(`/contacts/${contactId}`);\r\n\t\t\t\tif (isMounted.current) {\r\n\t\t\t\t\tconsole.log(data)\r\n\t\t\t\t\tsetContact(data);\r\n\t\t\t\t}\r\n\t\t\t} catch (err) {\r\n\t\t\t\ttoastError(err);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tfetchContact();\r\n\t}, [contactId, open, initialValues]);\r\n\r\n\tconst handleClose = () => {\r\n\t\tonClose();\r\n\t\tsetContact(initialState);\r\n\t};\r\n\r\n\tconst handleSaveContact = async values => {\r\n\t\ttry {\r\n\t\t\tif (contactId) {\r\n\t\t\t\tawait api.put(`/contacts/${contactId}`, values);\r\n\t\t\t\thandleClose();\r\n\t\t\t} else {\r\n\t\t\t\tconst { data } = await api.post(\"/contacts\", values);\r\n\t\t\t\tif (onSave) {\r\n\t\t\t\t\tonSave(data);\r\n\t\t\t\t}\r\n\t\t\t\thandleClose();\r\n\t\t\t}\r\n\t\t\ttoast.success(i18n.t(\"contactModal.success\"));\r\n\t\t} catch (err) {\r\n\t\t\ttoastError(err);\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<Dialog open={open} onClose={handleClose} maxWidth=\"lg\" scroll=\"paper\">\r\n\t\t\t\t<DialogTitle id=\"form-dialog-title\">\r\n\t\t\t\t\t{contactId\r\n\t\t\t\t\t\t? `${i18n.t(\"contactModal.title.edit\")}`\r\n\t\t\t\t\t\t: `${i18n.t(\"contactModal.title.add\")}`}\r\n\t\t\t\t</DialogTitle>\r\n\t\t\t\t<Formik\r\n\t\t\t\t\tinitialValues={contact}\r\n\t\t\t\t\tenableReinitialize={true}\r\n\t\t\t\t\tvalidationSchema={ContactSchema}\r\n\t\t\t\t\tonSubmit={(values, actions) => {\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\thandleSaveContact(values);\r\n\t\t\t\t\t\t\tactions.setSubmitting(false);\r\n\t\t\t\t\t\t}, 400);\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{({ values, errors, touched, isSubmitting }) => (\r\n\t\t\t\t\t\t<Form>\r\n\t\t\t\t\t\t\t<DialogContent dividers>\r\n\t\t\t\t\t\t\t\t<Typography variant=\"subtitle1\" gutterBottom>\r\n\t\t\t\t\t\t\t\t\t{i18n.t(\"contactModal.form.mainInfo\")}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\tas={TextField}\r\n\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"contactModal.form.name\")}\r\n\t\t\t\t\t\t\t\t\tname=\"name\"\r\n\t\t\t\t\t\t\t\t\tautoFocus\r\n\t\t\t\t\t\t\t\t\terror={touched.name && Boolean(errors.name)}\r\n\t\t\t\t\t\t\t\t\thelperText={touched.name && errors.name}\r\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\tmargin=\"dense\"\r\n\t\t\t\t\t\t\t\t\tclassName={classes.textField}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\tas={TextField}\r\n\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"contactModal.form.number\")}\r\n\t\t\t\t\t\t\t\t\tname=\"number\"\r\n\t\t\t\t\t\t\t\t\terror={touched.number && Boolean(errors.number)}\r\n\t\t\t\t\t\t\t\t\thelperText={touched.number && errors.number}\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"5513912344321\"\r\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\tmargin=\"dense\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\tas={TextField}\r\n\t\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"contactModal.form.email\")}\r\n\t\t\t\t\t\t\t\t\t\tname=\"email\"\r\n\t\t\t\t\t\t\t\t\t\terror={touched.email && Boolean(errors.email)}\r\n\t\t\t\t\t\t\t\t\t\thelperText={touched.email && errors.email}\r\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Email address\"\r\n\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t\tmargin=\"dense\"\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<Typography\r\n\t\t\t\t\t\t\t\t\tstyle={{ marginBottom: 8, marginTop: 12 }}\r\n\t\t\t\t\t\t\t\t\tvariant=\"subtitle1\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{i18n.t(\"contactModal.form.whatsapp\")} {contact?.whatsapp ? contact?.whatsapp.name : \"\"}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t<Typography\r\n\t\t\t\t\t\t\t\t\tstyle={{ marginBottom: 8, marginTop: 12 }}\r\n\t\t\t\t\t\t\t\t\tvariant=\"subtitle1\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{i18n.t(\"contactModal.form.extraInfo\")}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\r\n\t\t\t\t\t\t\t\t<FieldArray name=\"extraInfo\">\r\n\t\t\t\t\t\t\t\t\t{({ push, remove }) => (\r\n\t\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t\t{values.extraInfo &&\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalues.extraInfo.length > 0 &&\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalues.extraInfo.map((info, index) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.extraAttr}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={`${index}-info`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tas={TextField}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"contactModal.form.extraName\")}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname={`extraInfo[${index}].name`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmargin=\"dense\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.textField}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tas={TextField}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"contactModal.form.extraValue\")}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname={`extraInfo[${index}].value`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmargin=\"dense\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.textField}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => remove(index)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<DeleteOutlineIcon />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t\t\t<div className={classes.extraAttr}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ flex: 1, marginTop: 8 }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => push({ name: \"\", value: \"\" })}\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{`+ ${i18n.t(\"contactModal.buttons.addExtraInfo\")}`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</FieldArray>\r\n\t\t\t\t\t\t\t</DialogContent>\r\n\t\t\t\t\t\t\t<DialogActions>\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\tonClick={handleClose}\r\n\t\t\t\t\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\t\t\t\t\tdisabled={isSubmitting}\r\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{i18n.t(\"contactModal.buttons.cancel\")}\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\t\tdisabled={isSubmitting}\r\n\t\t\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\t\t\tclassName={classes.btnWrapper}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{contactId\r\n\t\t\t\t\t\t\t\t\t\t? `${i18n.t(\"contactModal.buttons.okEdit\")}`\r\n\t\t\t\t\t\t\t\t\t\t: `${i18n.t(\"contactModal.buttons.okAdd\")}`}\r\n\t\t\t\t\t\t\t\t\t{isSubmitting && (\r\n\t\t\t\t\t\t\t\t\t\t<CircularProgress\r\n\t\t\t\t\t\t\t\t\t\t\tsize={24}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName={classes.buttonProgress}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</DialogActions>\r\n\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Formik>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default ContactModal;\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\n\r\nimport Button from \"@material-ui/core/Button\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\n\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Autocomplete, {\r\n\tcreateFilterOptions,\r\n} from \"@material-ui/lab/Autocomplete\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport api from \"../../services/api\";\r\nimport ButtonWithSpinner from \"../ButtonWithSpinner\";\r\nimport ContactModal from \"../ContactModal\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\nimport {  WhatsApp } from \"@material-ui/icons\";\r\nimport { Grid, ListItemText, MenuItem, Select } from \"@material-ui/core\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { toast } from \"react-toastify\";\r\n//import ShowTicketOpen from \"../ShowTicketOpenModal\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  online: {\r\n    fontSize: 11,\r\n    color: \"#25d366\"\r\n  },\r\n  offline: {\r\n    fontSize: 11,\r\n    color: \"#e1306c\"\r\n  }\r\n}));\r\n\r\nconst filter = createFilterOptions({\r\n  trim: true,\r\n});\r\n\r\nconst NewTicketModal = ({ modalOpen, onClose, initialContact }) => {\r\n  const classes = useStyles();\r\n  const [options, setOptions] = useState([]);\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [searchParam, setSearchParam] = useState(\"\");\r\n  const [selectedContact, setSelectedContact] = useState(null);\r\n  const [selectedQueue, setSelectedQueue] = useState(\"\");\r\n  const [selectedWhatsapp, setSelectedWhatsapp] = useState(\"\");\r\n  const [newContact, setNewContact] = useState({});\r\n  const [whatsapps, setWhatsapps] = useState([]);\r\n  const [contactModalOpen, setContactModalOpen] = useState(false);\r\n  const { user } = useContext(AuthContext);\r\n  const { companyId, whatsappId } = user;\r\n\r\n  const [ openAlert, setOpenAlert ] = useState(false);\r\n\tconst [ userTicketOpen, setUserTicketOpen] = useState(\"\");\r\n\tconst [ queueTicketOpen, setQueueTicketOpen] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    if (initialContact?.id !== undefined) {\r\n      setOptions([initialContact]);\r\n      setSelectedContact(initialContact);\r\n    }\r\n  }, [initialContact]);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    const delayDebounceFn = setTimeout(() => {\r\n      const fetchContacts = async () => {\r\n        api\r\n          .get(`/whatsapp`, { params: { companyId, session: 0 } })\r\n          .then(({ data }) => setWhatsapps(data));\r\n      };\r\n\r\n      if (whatsappId !== null && whatsappId!== undefined) {\r\n        setSelectedWhatsapp(whatsappId)\r\n      }\r\n\r\n      if (user.queues.length === 1) {\r\n        setSelectedQueue(user.queues[0].id)\r\n      }\r\n      fetchContacts();\r\n      setLoading(false);\r\n    }, 500);\r\n    return () => clearTimeout(delayDebounceFn);\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    if (!modalOpen || searchParam.length < 3) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n    setLoading(true);\r\n    const delayDebounceFn = setTimeout(() => {\r\n      const fetchContacts = async () => {\r\n        try {\r\n          const { data } = await api.get(\"contacts\", {\r\n            params: { searchParam },\r\n          });\r\n          setOptions(data.contacts);\r\n          setLoading(false);\r\n        } catch (err) {\r\n          setLoading(false);\r\n          toastError(err);\r\n        }\r\n      };\r\n      fetchContacts();\r\n    }, 500);\r\n    return () => clearTimeout(delayDebounceFn);\r\n  }, [searchParam, modalOpen]);\r\n\r\n  // const IconChannel = (channel) => {\r\n  //   switch (channel) {\r\n  //     case \"facebook\":\r\n  //       return <Facebook style={{ color: \"#3b5998\", verticalAlign: \"middle\" }} />;\r\n  //     case \"instagram\":\r\n  //       return <Instagram style={{ color: \"#e1306c\", verticalAlign: \"middle\" }} />;\r\n  //     case \"whatsapp\":\r\n  //       return <WhatsApp style={{ color: \"#25d366\", verticalAlign: \"middle\" }} />\r\n  //     default:\r\n  //       return \"error\";\r\n  //   }\r\n  // };\r\n\r\n  const handleClose = () => {\r\n    onClose();\r\n    setSearchParam(\"\");\r\n    setOpenAlert(false);\r\n    setUserTicketOpen(\"\");\r\n    setQueueTicketOpen(\"\");\r\n    setSelectedContact(null);\r\n  };\r\n\r\n  const handleCloseAlert = () => {\r\n    setOpenAlert(false);\r\n    setLoading(false);\r\n    setOpenAlert(false);\r\n    setUserTicketOpen(\"\");\r\n    setQueueTicketOpen(\"\");\r\n  };\r\n\r\n  const handleSaveTicket = async contactId => {\r\n    if (!contactId) return;\r\n    if (selectedQueue === \"\" && user.profile !== 'admin') {\r\n      toast.error(\"Selecione uma fila\");\r\n      return;\r\n    }\r\n    \r\n    setLoading(true);\r\n    try {\r\n      const queueId = selectedQueue !== \"\" ? selectedQueue : null;\r\n      const whatsappId = selectedWhatsapp !== \"\" ? selectedWhatsapp : null;\r\n      const { data: ticket } = await api.post(\"/tickets\", {\r\n        contactId: contactId,\r\n        queueId,\r\n        whatsappId,\r\n        userId: user.id,\r\n        status: \"open\",\r\n      });      \r\n\r\n      onClose(ticket);\r\n    } catch (err) {\r\n      \r\n      const ticket  = JSON.parse(err.response.data.error);\r\n\r\n      if (ticket.userId !== user?.id) {\r\n        setOpenAlert(true);\r\n        setUserTicketOpen(ticket.user.name);\r\n        setQueueTicketOpen(ticket.queue.name);\r\n      } else {\r\n        setOpenAlert(false);\r\n        setUserTicketOpen(\"\");\r\n        setQueueTicketOpen(\"\");\r\n        setLoading(false);\r\n        onClose(ticket);\r\n      }\r\n    }  \r\n    setLoading(false);\r\n  };\r\n\r\n  const handleSelectOption = (e, newValue) => {\r\n    if (newValue?.number) {\r\n      setSelectedContact(newValue);\r\n    } else if (newValue?.name) {\r\n      setNewContact({ name: newValue.name });\r\n      setContactModalOpen(true);\r\n    }\r\n  };\r\n\r\n  const handleCloseContactModal = () => {\r\n    setContactModalOpen(false);    \r\n  };\r\n\r\n  const handleAddNewContactTicket = contact => {\r\n    handleSaveTicket(contact.id);\r\n  };\r\n\r\n  const createAddContactOption = (filterOptions, params) => {\r\n    const filtered = filter(filterOptions, params);\r\n    if (params.inputValue !== \"\" && !loading && searchParam.length >= 3) {\r\n      filtered.push({\r\n        name: `${params.inputValue}`,\r\n      });\r\n    }\r\n    return filtered;\r\n  };\r\n\r\n  const renderOption = option => {\r\n    if (option.number) {\r\n      return <>\r\n        {/* {IconChannel(option.channel)} */}\r\n        <Typography component=\"span\" style={{ fontSize: 14, marginLeft: \"10px\", display: \"inline-flex\", alignItems: \"center\", lineHeight: \"2\" }}>\r\n          {option.name} - {option.number}\r\n        </Typography>\r\n      </>\r\n    } else {\r\n      return `${i18n.t(\"newTicketModal.add\")} ${option.name}`;\r\n    }\r\n  };\r\n\r\n  const renderOptionLabel = option => {\r\n    if (option.number) {\r\n      return `${option.name} - ${option.number}`;\r\n    } else {\r\n      return `${option.name}`;\r\n    }\r\n  };\r\n\r\n  const renderContactAutocomplete = () => {\r\n    if (initialContact === undefined || initialContact.id === undefined) {\r\n      return (\r\n        <Grid xs={12} item>\r\n          <Autocomplete\r\n            fullWidth\r\n            options={options}\r\n            loading={loading}\r\n            clearOnBlur\r\n            autoHighlight\r\n            freeSolo\r\n            clearOnEscape\r\n            getOptionLabel={renderOptionLabel}\r\n            renderOption={renderOption}\r\n            filterOptions={createAddContactOption}\r\n            onChange={(e, newValue) => handleSelectOption(e, newValue)}\r\n            renderInput={params => (\r\n              <TextField\r\n                {...params}\r\n                label={i18n.t(\"newTicketModal.fieldLabel\")}\r\n                variant=\"outlined\"\r\n                autoFocus\r\n                onChange={e => setSearchParam(e.target.value)}\r\n                onKeyPress={e => {\r\n                  if (loading || !selectedContact) return;\r\n                  else if (e.key === \"Enter\") {\r\n                    handleSaveTicket(selectedContact.id);\r\n                  }\r\n                }}\r\n                InputProps={{\r\n                  ...params.InputProps,\r\n                  endAdornment: (\r\n                    <React.Fragment>\r\n                      {loading ? (\r\n                        <CircularProgress color=\"inherit\" size={20} />\r\n                      ) : null}\r\n                      {params.InputProps.endAdornment}\r\n                    </React.Fragment>\r\n                  ),\r\n                }}\r\n              />\r\n            )}\r\n          />\r\n        </Grid>\r\n      )\r\n    }\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <ContactModal\r\n        open={contactModalOpen}\r\n        initialValues={newContact}\r\n        onClose={handleCloseContactModal}\r\n        onSave={handleAddNewContactTicket}\r\n      ></ContactModal>\r\n      <Dialog open={modalOpen} onClose={handleClose}>\r\n        <DialogTitle id=\"form-dialog-title\">\r\n          {i18n.t(\"newTicketModal.title\")}\r\n        </DialogTitle>\r\n        <DialogContent dividers>\r\n          <Grid style={{ width: 300 }} container spacing={2}>\r\n            {/* CONTATO */}\r\n            {renderContactAutocomplete()}\r\n            {/* FILA */}\r\n            <Grid xs={12} item>\r\n              <Select\r\n                required\r\n                fullWidth\r\n                displayEmpty\r\n                variant=\"outlined\"\r\n                value={selectedQueue}\r\n                onChange={(e) => {\r\n                  setSelectedQueue(e.target.value)\r\n                }}\r\n                MenuProps={{\r\n                  anchorOrigin: {\r\n                    vertical: \"bottom\",\r\n                    horizontal: \"left\",\r\n                  },\r\n                  transformOrigin: {\r\n                    vertical: \"top\",\r\n                    horizontal: \"left\",\r\n                  },\r\n                  getContentAnchorEl: null,\r\n                }}\r\n                renderValue={() => {\r\n                  if (selectedQueue === \"\") {\r\n                    return \"Selecione uma fila\"\r\n                  }\r\n                  const queue = user.queues.find(q => q.id === selectedQueue)\r\n                  return queue.name\r\n                }}\r\n              >\r\n                {user.queues?.length > 0 &&\r\n                  user.queues.map((queue, key) => (\r\n                    <MenuItem dense key={key} value={queue.id}>\r\n                      <ListItemText primary={queue.name} />\r\n                    </MenuItem>\r\n                  ))\r\n                }\r\n              </Select>\r\n            </Grid>\r\n            {/* CONEXAO */}\r\n            <Grid xs={12} item>\r\n              <Select\r\n                required\r\n                fullWidth\r\n                displayEmpty\r\n                variant=\"outlined\"\r\n                value={selectedWhatsapp}\r\n                onChange={(e) => {\r\n                  setSelectedWhatsapp(e.target.value)\r\n                }}\r\n                MenuProps={{\r\n                  anchorOrigin: {\r\n                    vertical: \"bottom\",\r\n                    horizontal: \"left\",\r\n                  },\r\n                  transformOrigin: {\r\n                    vertical: \"top\",\r\n                    horizontal: \"left\",\r\n                  },\r\n                  getContentAnchorEl: null,\r\n                }}\r\n                renderValue={() => {\r\n                  if (selectedWhatsapp === \"\") {\r\n                    return \"Selecione uma Conexão\"\r\n                  }\r\n                  const whatsapp = whatsapps.find(w => w.id === selectedWhatsapp)\r\n                  return whatsapp.name\r\n                }}\r\n              >\r\n                {whatsapps?.length > 0 &&\r\n                  whatsapps.map((whatsapp, key) => (\r\n                    <MenuItem dense key={key} value={whatsapp.id}>\r\n                      <ListItemText\r\n                        primary={\r\n                          <>\r\n                            {/* {IconChannel(whatsapp.channel)} */}\r\n                            <Typography component=\"span\" style={{ fontSize: 14, marginLeft: \"10px\", display: \"inline-flex\", alignItems: \"center\", lineHeight: \"2\" }}>\r\n                              {whatsapp.name} &nbsp; <p className={(whatsapp.status) === 'CONNECTED' ? classes.online : classes.offline} >({whatsapp.status})</p>\r\n                            </Typography>\r\n                          </>\r\n                        }\r\n                      />\r\n                    </MenuItem>\r\n                  ))}\r\n              </Select>\r\n            </Grid>\r\n          </Grid>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            onClick={handleClose}\r\n            color=\"secondary\"\r\n            disabled={loading}\r\n            variant=\"outlined\"\r\n          >\r\n            {i18n.t(\"newTicketModal.buttons.cancel\")}\r\n          </Button>\r\n          <ButtonWithSpinner\r\n            variant=\"contained\"\r\n            type=\"button\"\r\n            disabled={!selectedContact}\r\n            onClick={() => handleSaveTicket(selectedContact.id)}\r\n            color=\"primary\"\r\n            loading={loading}\r\n          >\r\n            {i18n.t(\"newTicketModal.buttons.ok\")}\r\n          </ButtonWithSpinner>\r\n        </DialogActions>\r\n        {/* <ShowTicketOpen\r\n          isOpen={openAlert}\r\n          handleClose={handleCloseAlert}\r\n          user={userTicketOpen}\r\n          queue={queueTicketOpen}\r\n\t\t\t  /> */}\r\n      </Dialog >\r\n    </>\r\n  );\r\n};\r\nexport default NewTicketModal;","import React from \"react\";\r\n\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport ListItemAvatar from \"@material-ui/core/ListItemAvatar\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport Skeleton from \"@material-ui/lab/Skeleton\";\r\n\r\nconst TicketsSkeleton = () => {\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<ListItem dense>\r\n\t\t\t\t<ListItemAvatar>\r\n\t\t\t\t\t<Skeleton animation=\"wave\" variant=\"circle\" width={40} height={40} />\r\n\t\t\t\t</ListItemAvatar>\r\n\t\t\t\t<ListItemText\r\n\t\t\t\t\tprimary={<Skeleton animation=\"wave\" height={20} width={60} />}\r\n\t\t\t\t\tsecondary={<Skeleton animation=\"wave\" height={20} width={90} />}\r\n\t\t\t\t/>\r\n\t\t\t</ListItem>\r\n\t\t\t<Divider variant=\"inset\" />\r\n\t\t\t<ListItem dense>\r\n\t\t\t\t<ListItemAvatar>\r\n\t\t\t\t\t<Skeleton animation=\"wave\" variant=\"circle\" width={40} height={40} />\r\n\t\t\t\t</ListItemAvatar>\r\n\t\t\t\t<ListItemText\r\n\t\t\t\t\tprimary={<Skeleton animation=\"wave\" height={20} width={70} />}\r\n\t\t\t\t\tsecondary={<Skeleton animation=\"wave\" height={20} width={120} />}\r\n\t\t\t\t/>\r\n\t\t\t</ListItem>\r\n\t\t\t<Divider variant=\"inset\" />\r\n\t\t\t<ListItem dense>\r\n\t\t\t\t<ListItemAvatar>\r\n\t\t\t\t\t<Skeleton animation=\"wave\" variant=\"circle\" width={40} height={40} />\r\n\t\t\t\t</ListItemAvatar>\r\n\t\t\t\t<ListItemText\r\n\t\t\t\t\tprimary={<Skeleton animation=\"wave\" height={20} width={60} />}\r\n\t\t\t\t\tsecondary={<Skeleton animation=\"wave\" height={20} width={90} />}\r\n\t\t\t\t/>\r\n\t\t\t</ListItem>\r\n\t\t\t<Divider variant=\"inset\" />\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default TicketsSkeleton;\r\n","import React, { useState, useEffect, useReducer, useContext } from \"react\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport List from \"@material-ui/core/List\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\n\r\nimport TicketListItem from \"../TicketListItemCustom\";\r\nimport TicketsListSkeleton from \"../TicketsListSkeleton\";\r\n\r\nimport useTickets from \"../../hooks/useTickets\";\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\nimport { socketConnection } from \"../../services/socket\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  ticketsListWrapper: {\r\n    position: \"relative\",\r\n    display: \"flex\",\r\n    height: \"100%\",\r\n    flexDirection: \"column\",\r\n    overflow: \"hidden\",\r\n    borderTopRightRadius: 0,\r\n    borderBottomRightRadius: 0,\r\n  },\r\n\r\n  ticketsList: {\r\n    flex: 1,\r\n    maxHeight: \"100%\",\r\n    overflowY: \"scroll\",\r\n    ...theme.scrollbarStyles,\r\n    borderTop: \"2px solid rgba(0, 0, 0, 0.12)\",\r\n  },\r\n\r\n  ticketsListHeader: {\r\n    color: \"rgb(67, 83, 105)\",\r\n    zIndex: 2,\r\n    backgroundColor: \"white\",\r\n    borderBottom: \"1px solid rgba(0, 0, 0, 0.12)\",\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"space-between\",\r\n  },\r\n\r\n  ticketsCount: {\r\n    fontWeight: \"normal\",\r\n    color: \"rgb(104, 121, 146)\",\r\n    marginLeft: \"8px\",\r\n    fontSize: \"14px\",\r\n  },\r\n\r\n  noTicketsText: {\r\n    textAlign: \"center\",\r\n    color: \"rgb(104, 121, 146)\",\r\n    fontSize: \"14px\",\r\n    lineHeight: \"1.4\",\r\n  },\r\n\r\n  noTicketsTitle: {\r\n    textAlign: \"center\",\r\n    fontSize: \"16px\",\r\n    fontWeight: \"600\",\r\n    margin: \"0px\",\r\n  },\r\n\r\n  noTicketsDiv: {\r\n    display: \"flex\",\r\n    height: \"100px\",\r\n    margin: 40,\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n  },\r\n}));\r\n\r\nconst reducer = (state, action) => {\r\n  if (action.type === \"LOAD_TICKETS\") {\r\n    const newTickets = action.payload;\r\n\r\n    newTickets.forEach((ticket) => {\r\n      const ticketIndex = state.findIndex((t) => t.id === ticket.id);\r\n      if (ticketIndex !== -1) {\r\n        state[ticketIndex] = ticket;\r\n        if (ticket.unreadMessages > 0) {\r\n          state.unshift(state.splice(ticketIndex, 1)[0]);\r\n        }\r\n      } else {\r\n        state.push(ticket);\r\n      }\r\n    });\r\n\r\n    return [...state];\r\n  }\r\n\r\n  if (action.type === \"RESET_UNREAD\") {\r\n    const ticketId = action.payload;\r\n\r\n    const ticketIndex = state.findIndex((t) => t.id === ticketId);\r\n    if (ticketIndex !== -1) {\r\n      state[ticketIndex].unreadMessages = 0;\r\n    }\r\n\r\n    return [...state];\r\n  }\r\n\r\n  if (action.type === \"UPDATE_TICKET\") {\r\n    const ticket = action.payload;\r\n\r\n    const ticketIndex = state.findIndex((t) => t.id === ticket.id);\r\n    if (ticketIndex !== -1) {\r\n      state[ticketIndex] = ticket;\r\n    } else {\r\n      state.unshift(ticket);\r\n    }\r\n\r\n    return [...state];\r\n  }\r\n\r\n  if (action.type === \"UPDATE_TICKET_UNREAD_MESSAGES\") {\r\n    const ticket = action.payload;\r\n\r\n    const ticketIndex = state.findIndex((t) => t.id === ticket.id);\r\n    if (ticketIndex !== -1) {\r\n      state[ticketIndex] = ticket;\r\n      state.unshift(state.splice(ticketIndex, 1)[0]);\r\n    } else {\r\n      state.unshift(ticket);\r\n    }\r\n\r\n    return [...state];\r\n  }\r\n\r\n  if (action.type === \"UPDATE_TICKET_CONTACT\") {\r\n    const contact = action.payload;\r\n    const ticketIndex = state.findIndex((t) => t.contactId === contact.id);\r\n    if (ticketIndex !== -1) {\r\n      state[ticketIndex].contact = contact;\r\n    }\r\n    return [...state];\r\n  }\r\n\r\n  if (action.type === \"DELETE_TICKET\") {\r\n    const ticketId = action.payload;\r\n    const ticketIndex = state.findIndex((t) => t.id === ticketId);\r\n    if (ticketIndex !== -1) {\r\n      state.splice(ticketIndex, 1);\r\n    }\r\n\r\n    return [...state];\r\n  }\r\n\r\n  if (action.type === \"RESET\") {\r\n    return [];\r\n  }\r\n};\r\n\r\nconst TicketsListCustom = (props) => {\r\n  const {\r\n    status,\r\n    searchParam,\r\n    tags,\r\n    users,\r\n    showAll,\r\n    selectedQueueIds,\r\n    updateCount,\r\n    style,\r\n  } = props;\r\n  const classes = useStyles();\r\n  const [pageNumber, setPageNumber] = useState(1);\r\n  const [ticketsList, dispatch] = useReducer(reducer, []);\r\n  const { user } = useContext(AuthContext);\r\n  const { profile, queues } = user;\r\n\r\n  useEffect(() => {\r\n    dispatch({ type: \"RESET\" });\r\n    setPageNumber(1);\r\n  }, [status, searchParam, dispatch, showAll, tags, users, selectedQueueIds]);\r\n\r\n  const { tickets, hasMore, loading } = useTickets({\r\n    pageNumber,\r\n    searchParam,\r\n    status,\r\n    showAll,\r\n    tags: JSON.stringify(tags),\r\n    users: JSON.stringify(users),\r\n    queueIds: JSON.stringify(selectedQueueIds),\r\n  });\r\n\r\n  useEffect(() => {\r\n    const queueIds = queues.map((q) => q.id);\r\n    const filteredTickets = tickets.filter(\r\n      (t) => queueIds.indexOf(t.queueId) > -1\r\n    );\r\n\r\n    if (profile === \"user\") {\r\n      dispatch({ type: \"LOAD_TICKETS\", payload: filteredTickets });\r\n    } else {\r\n      dispatch({ type: \"LOAD_TICKETS\", payload: tickets });\r\n    }\r\n  }, [tickets, status, searchParam, queues, profile]);\r\n\r\n  useEffect(() => {\r\n    const companyId = localStorage.getItem(\"companyId\");\r\n    const socket = socketConnection({ companyId });\r\n\r\n    const shouldUpdateTicket = (ticket) =>\r\n      (!ticket.userId || ticket.userId === user?.id || showAll) &&\r\n      (!ticket.queueId || selectedQueueIds.indexOf(ticket.queueId) > -1);\r\n\r\n    const notBelongsToUserQueues = (ticket) =>\r\n      ticket.queueId && selectedQueueIds.indexOf(ticket.queueId) === -1;\r\n\r\n    socket.on(\"connect\", () => {\r\n      if (status) {\r\n        socket.emit(\"joinTickets\", status);\r\n      } else {\r\n        socket.emit(\"joinNotification\");\r\n      }\r\n    });\r\n\r\n    socket.on(`company-${companyId}-ticket`, (data) => {\r\n      \r\n      if (data.action === \"updateUnread\") {\r\n        dispatch({\r\n          type: \"RESET_UNREAD\",\r\n          payload: data.ticketId,\r\n        });\r\n      }\r\n\r\n      if (data.action === \"update\" && shouldUpdateTicket(data.ticket)) {\r\n        dispatch({\r\n          type: \"UPDATE_TICKET\",\r\n          payload: data.ticket,\r\n        });\r\n      }\r\n\r\n      if (data.action === \"update\" && notBelongsToUserQueues(data.ticket)) {\r\n        dispatch({ type: \"DELETE_TICKET\", payload: data.ticket.id });\r\n      }\r\n\r\n      if (data.action === \"delete\") {\r\n        dispatch({ type: \"DELETE_TICKET\", payload: data.ticketId });\r\n      }\r\n    });\r\n\r\n    socket.on(`company-${companyId}-appMessage`, (data) => {\r\n      const queueIds = queues.map((q) => q.id);\r\n      if (\r\n        profile === \"user\" &&\r\n        (queueIds.indexOf(data.ticket.queue?.id) === -1 ||\r\n          data.ticket.queue === null)\r\n      ) {\r\n        return;\r\n      }\r\n\r\n      if (data.action === \"create\" && shouldUpdateTicket(data.ticket)) {\r\n        dispatch({\r\n          type: \"UPDATE_TICKET_UNREAD_MESSAGES\",\r\n          payload: data.ticket,\r\n        });\r\n      }\r\n    });\r\n\r\n    socket.on(`company-${companyId}-contact`, (data) => {\r\n      if (data.action === \"update\") {\r\n        dispatch({\r\n          type: \"UPDATE_TICKET_CONTACT\",\r\n          payload: data.contact,\r\n        });\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      socket.disconnect();\r\n    };\r\n  }, [status, showAll, user, selectedQueueIds, tags, users, profile, queues]);\r\n\r\n  useEffect(() => {\r\n    if (typeof updateCount === \"function\") {\r\n      updateCount(ticketsList.length);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [ticketsList]);\r\n\r\n  const loadMore = () => {\r\n    setPageNumber((prevState) => prevState + 1);\r\n  };\r\n\r\n  const handleScroll = (e) => {\r\n    if (!hasMore || loading) return;\r\n\r\n    const { scrollTop, scrollHeight, clientHeight } = e.currentTarget;\r\n\r\n    if (scrollHeight - (scrollTop + 100) < clientHeight) {\r\n      loadMore();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Paper className={classes.ticketsListWrapper} style={style}>\r\n      <Paper\r\n        square\r\n        name=\"closed\"\r\n        elevation={0}\r\n        className={classes.ticketsList}\r\n        onScroll={handleScroll}\r\n      >\r\n        <List style={{ paddingTop: 0 }}>\r\n          {ticketsList.length === 0 && !loading ? (\r\n            <div className={classes.noTicketsDiv}>\r\n              <span className={classes.noTicketsTitle}>\r\n                {i18n.t(\"ticketsList.noTicketsTitle\")}\r\n              </span>\r\n              <p className={classes.noTicketsText}>\r\n                {i18n.t(\"ticketsList.noTicketsMessage\")}\r\n              </p>\r\n            </div>\r\n          ) : (\r\n            <>\r\n              {ticketsList.map((ticket) => (\r\n                <TicketListItem ticket={ticket} key={ticket.id} />\r\n              ))}\r\n            </>\r\n          )}\r\n          {loading && <TicketsListSkeleton />}\r\n        </List>\r\n      </Paper>\r\n    </Paper>\r\n  );\r\n};\r\n\r\nexport default TicketsListCustom;\r\n","import React from \"react\";\r\n\r\nconst TabPanel = ({ children, value, name, ...rest }) => {\r\n\tif (value === name) {\r\n\t\treturn (\r\n\t\t\t<div\r\n\t\t\t\trole=\"tabpanel\"\r\n\t\t\t\tid={`simple-tabpanel-${name}`}\r\n\t\t\t\taria-labelledby={`simple-tab-${name}`}\r\n\t\t\t\t{...rest}\r\n\t\t\t>\r\n\t\t\t\t<>{children}</>\r\n\t\t\t</div>\r\n\t\t);\r\n\t} else return null;\r\n};\r\n\r\nexport default TabPanel;\r\n","import React from \"react\";\r\n\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport { Checkbox, ListItemText } from \"@material-ui/core\";\r\nimport { i18n } from \"../../translate/i18n\";\r\n\r\nconst TicketsQueueSelect = ({\r\n\tuserQueues,\r\n\tselectedQueueIds = [],\r\n\tonChange,\r\n}) => {\r\n\tconst handleChange = e => {\r\n\t\tonChange(e.target.value);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div style={{ width: 120, marginTop: -4 }}>\r\n\t\t\t<FormControl fullWidth margin=\"dense\">\r\n\t\t\t\t<Select\r\n\t\t\t\t\tmultiple\r\n\t\t\t\t\tdisplayEmpty\r\n\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\tvalue={selectedQueueIds}\r\n\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\tMenuProps={{\r\n\t\t\t\t\t\tanchorOrigin: {\r\n\t\t\t\t\t\t\tvertical: \"bottom\",\r\n\t\t\t\t\t\t\thorizontal: \"left\",\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\ttransformOrigin: {\r\n\t\t\t\t\t\t\tvertical: \"top\",\r\n\t\t\t\t\t\t\thorizontal: \"left\",\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tgetContentAnchorEl: null,\r\n\t\t\t\t\t}}\r\n\t\t\t\t\trenderValue={() => i18n.t(\"ticketsQueueSelect.placeholder\")}\r\n\t\t\t\t>\r\n\t\t\t\t\t{userQueues?.length > 0 &&\r\n\t\t\t\t\t\tuserQueues.map(queue => (\r\n\t\t\t\t\t\t\t<MenuItem dense key={queue.id} value={queue.id}>\r\n\t\t\t\t\t\t\t\t<Checkbox\r\n\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\tcolor: queue.color,\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\t\tchecked={selectedQueueIds.indexOf(queue.id) > -1}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<ListItemText primary={queue.name} />\r\n\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t</Select>\r\n\t\t\t</FormControl>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default TicketsQueueSelect;\r\n","import { Box, Chip, TextField } from \"@material-ui/core\";\r\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport api from \"../../services/api\";\r\n\r\nexport function TagsFilter({ onFiltered }) {\r\n  const [tags, setTags] = useState([]);\r\n  const [selecteds, setSelecteds] = useState([]);\r\n\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      await loadTags();\r\n    }\r\n    fetchData();\r\n  }, []);\r\n\r\n  const loadTags = async () => {\r\n    try {\r\n      const { data } = await api.get(`/tags/list`);\r\n      setTags(data);\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n  };\r\n\r\n  const onChange = async (value) => {\r\n    setSelecteds(value);\r\n    onFiltered(value);\r\n  };\r\n\r\n  return (\r\n    <Box style={{ padding: 10 }}>\r\n      <Autocomplete\r\n        multiple\r\n        size=\"small\"\r\n        options={tags}\r\n        value={selecteds}\r\n        onChange={(e, v, r) => onChange(v)}\r\n        getOptionLabel={(option) => option.name}\r\n        renderTags={(value, getTagProps) =>\r\n          value.map((option, index) => (\r\n            <Chip\r\n              variant=\"outlined\"\r\n              style={{\r\n                backgroundColor: option.color || \"#eee\",\r\n                textShadow: \"1px 1px 1px #000\",\r\n                color: \"white\",\r\n              }}\r\n              label={option.name}\r\n              {...getTagProps({ index })}\r\n              size=\"small\"\r\n            />\r\n          ))\r\n        }\r\n        renderInput={(params) => (\r\n          <TextField\r\n            {...params}\r\n            variant=\"outlined\"\r\n            placeholder=\"Filtro por Tags\"\r\n          />\r\n        )}\r\n      />\r\n    </Box>\r\n  );\r\n}\r\n","import { Box, Chip, TextField } from \"@material-ui/core\";\r\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport api from \"../../services/api\";\r\n\r\nexport function UsersFilter({ onFiltered, initialUsers }) {\r\n  const [users, setUsers] = useState([]);\r\n  const [selecteds, setSelecteds] = useState([]);\r\n\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      await loadUsers();\r\n    }\r\n    fetchData();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setSelecteds([]);\r\n    if (\r\n      Array.isArray(initialUsers) &&\r\n      Array.isArray(users) &&\r\n      users.length > 0\r\n    ) {\r\n      onChange(initialUsers);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [initialUsers, users]);\r\n\r\n  const loadUsers = async () => {\r\n    try {\r\n      const { data } = await api.get(`/users/list`);\r\n      const userList = data.map((u) => ({ id: u.id, name: u.name }));\r\n      setUsers(userList);\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n  };\r\n\r\n  const onChange = async (value) => {\r\n    setSelecteds(value);\r\n    onFiltered(value);\r\n  };\r\n\r\n  return (\r\n    <Box style={{ padding: \"0px 10px 10px\" }}>\r\n      <Autocomplete\r\n        multiple\r\n        size=\"small\"\r\n        options={users}\r\n        value={selecteds}\r\n        onChange={(e, v, r) => onChange(v)}\r\n        getOptionLabel={(option) => option.name}\r\n        getOptionSelected={(option, value) => {\r\n          return (\r\n            option?.id === value?.id ||\r\n            option?.name.toLowerCase() === value?.name.toLowerCase()\r\n          );\r\n        }}\r\n        renderTags={(value, getUserProps) =>\r\n          value.map((option, index) => (\r\n            <Chip\r\n              variant=\"outlined\"\r\n              style={{\r\n                backgroundColor: \"#bfbfbf\",\r\n                textShadow: \"1px 1px 1px #000\",\r\n                color: \"white\",\r\n              }}\r\n              label={option.name}\r\n              {...getUserProps({ index })}\r\n              size=\"small\"\r\n            />\r\n          ))\r\n        }\r\n        renderInput={(params) => (\r\n          <TextField\r\n            {...params}\r\n            variant=\"outlined\"\r\n            placeholder=\"Filtro por Users\"\r\n          />\r\n        )}\r\n      />\r\n    </Box>\r\n  );\r\n}\r\n","import React, { useContext, useEffect, useRef, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport SearchIcon from \"@material-ui/icons/Search\";\r\nimport InputBase from \"@material-ui/core/InputBase\";\r\nimport Tabs from \"@material-ui/core/Tabs\";\r\nimport Tab from \"@material-ui/core/Tab\";\r\nimport Badge from \"@material-ui/core/Badge\";\r\nimport MoveToInboxIcon from \"@material-ui/icons/MoveToInbox\";\r\nimport CheckBoxIcon from \"@material-ui/icons/CheckBox\";\r\n\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport Switch from \"@material-ui/core/Switch\";\r\n\r\nimport NewTicketModal from \"../NewTicketModal\";\r\nimport TicketsList from \"../TicketsListCustom\";\r\nimport TabPanel from \"../TabPanel\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\nimport { Can } from \"../Can\";\r\nimport TicketsQueueSelect from \"../TicketsQueueSelect\";\r\nimport { Button } from \"@material-ui/core\";\r\nimport { TagsFilter } from \"../TagsFilter\";\r\nimport { UsersFilter } from \"../UsersFilter\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tticketsWrapper: {\r\n\t\tposition: \"relative\",\r\n\t\tdisplay: \"flex\",\r\n\t\theight: \"100%\",\r\n\t\tflexDirection: \"column\",\r\n\t\toverflow: \"hidden\",\r\n\t\tborderTopRightRadius: 0,\r\n\t\tborderBottomRightRadius: 0,\r\n\t\tborderRadius:0,\r\n\t},\r\n\r\n\ttabsHeader: {\r\n\t\tflex: \"none\",\r\n\t\tbackgroundColor: theme.palette.tabHeaderBackground,\r\n\t},\r\n\r\n\ttabsInternal: {\r\n\t\tflex: \"none\",\r\n\t\tbackgroundColor: theme.palette.tabHeaderBackground\r\n\t},\r\n\r\n\tsettingsIcon: {\r\n\t\talignSelf: \"center\",\r\n\t\tmarginLeft: \"auto\",\r\n\t\tpadding: 8,\r\n\t},\r\n\r\n\ttab: {\r\n\t\tminWidth: 120,\r\n\t\twidth: 120,\r\n\t},\r\n\r\n\tinternalTab: {\r\n\t\tminWidth: 120,\r\n\t\twidth: 120,\r\n\t\tpadding: 5\r\n\t},\r\n\r\n\tticketOptionsBox: {\r\n\t\tdisplay: \"flex\",\r\n\t\tjustifyContent: \"space-between\",\r\n\t\talignItems: \"center\",\r\n\t\tbackground: theme.palette.optionsBackground,\r\n\t\tpadding: theme.spacing(1),\r\n\t},\r\n\r\n\tticketSearchLine: {\r\n\t\tpadding: theme.spacing(1),\r\n\t},\r\n\r\n\tserachInputWrapper: {\r\n\t\tflex: 1,\r\n\t\tbackground: theme.palette.total,\r\n\t\tdisplay: \"flex\",\r\n\t\tborderRadius: 40,\r\n\t\tpadding: 4,\r\n\t\tmarginRight: theme.spacing(1),\r\n\t},\r\n\r\n\tsearchIcon: {\r\n\t\tcolor: \"grey\",\r\n\t\tmarginLeft: 6,\r\n\t\tmarginRight: 6,\r\n\t\talignSelf: \"center\",\r\n\t},\r\n\r\n\tsearchInput: {\r\n\t\tflex: 1,\r\n\t\tborder: \"none\",\r\n\t\tborderRadius: 30,\r\n\t},\r\n\r\n\tinsiderTabPanel: {\r\n\t\theight: '100%',\r\n\t\tmarginTop: \"-72px\",\r\n\t\tpaddingTop: \"72px\"\r\n\t},\r\n\r\n\tinsiderDoubleTabPanel: {\r\n\t\tdisplay:\"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t\tmarginTop: \"-72px\",\r\n\t\tpaddingTop: \"72px\",\r\n\t\theight: \"100%\"\r\n\t},\r\n\r\n\tlabelContainer: {\r\n\t\twidth: \"auto\",\r\n\t\tpadding: 0\r\n\t},\r\n\ticonLabelWrapper: {\r\n\t\tflexDirection: \"row\",\r\n\t\t'& > *:first-child': {\r\n\t\t\tmarginBottom: '3px !important',\r\n\t\t\tmarginRight: 16\r\n\t\t}\r\n\t},\r\n\tinsiderTabLabel: {\r\n\t\t[theme.breakpoints.down(1600)]: {\r\n\t\t\tdisplay:'none'\r\n\t\t}\r\n\t},\r\n\tsmallFormControl: {\r\n\t\t'& .MuiOutlinedInput-input': {\r\n\t\t\tpadding: \"12px 10px\",\r\n\t\t},\r\n\t\t'& .MuiInputLabel-outlined': {\r\n\t\t\tmarginTop: \"-6px\"\r\n\t\t}\r\n\t}\r\n}));\r\n\r\nconst TicketsManagerTabs = () => {\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n\r\n  const [searchParam, setSearchParam] = useState(\"\");\r\n  const [tab, setTab] = useState(\"open\");\r\n  const [tabOpen, setTabOpen] = useState(\"open\");\r\n  const [newTicketModalOpen, setNewTicketModalOpen] = useState(false);\r\n  const [showAllTickets, setShowAllTickets] = useState(false);\r\n  const searchInputRef = useRef();\r\n  const { user } = useContext(AuthContext);\r\n  const { profile } = user;\r\n\r\n  const [openCount, setOpenCount] = useState(0);\r\n  const [pendingCount, setPendingCount] = useState(0);\r\n\r\n  const userQueueIds = user.queues.map((q) => q.id);\r\n  const [selectedQueueIds, setSelectedQueueIds] = useState(userQueueIds || []);\r\n  const [selectedTags, setSelectedTags] = useState([]);\r\n  const [selectedUsers, setSelectedUsers] = useState([]);\r\n\r\n  useEffect(() => {\r\n    if (user.profile.toUpperCase() === \"ADMIN\") {\r\n      setShowAllTickets(true);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (tab === \"search\") {\r\n      searchInputRef.current.focus();\r\n    }\r\n  }, [tab]);\r\n\r\n  let searchTimeout;\r\n\r\n  const handleSearch = (e) => {\r\n    const searchedTerm = e.target.value.toLowerCase();\r\n\r\n    clearTimeout(searchTimeout);\r\n\r\n    if (searchedTerm === \"\") {\r\n      setSearchParam(searchedTerm);\r\n      setTab(\"open\");\r\n      return;\r\n    }\r\n\r\n    searchTimeout = setTimeout(() => {\r\n      setSearchParam(searchedTerm);\r\n    }, 500);\r\n  };\r\n\r\n  const handleChangeTab = (e, newValue) => {\r\n    setTab(newValue);\r\n  };\r\n\r\n  const handleChangeTabOpen = (e, newValue) => {\r\n    setTabOpen(newValue);\r\n  };\r\n\r\n  const applyPanelStyle = (status) => {\r\n    if (tabOpen !== status) {\r\n      return { width: 0, height: 0 };\r\n    }\r\n  };\r\n\r\n  const handleCloseOrOpenTicket = (ticket) => {\r\n    setNewTicketModalOpen(false);\r\n    if (ticket !== undefined && ticket.uuid !== undefined) {\r\n      history.push(`/tickets/${ticket.uuid}`);\r\n    }\r\n  };\r\n\r\n  const handleSelectedTags = (selecteds) => {\r\n    const tags = selecteds.map((t) => t.id);\r\n    setSelectedTags(tags);\r\n  };\r\n\r\n  const handleSelectedUsers = (selecteds) => {\r\n    const users = selecteds.map((t) => t.id);\r\n    setSelectedUsers(users);\r\n  };\r\n\r\n  return (\r\n    <Paper elevation={0} variant=\"outlined\" className={classes.ticketsWrapper}>\r\n      <NewTicketModal\r\n        modalOpen={newTicketModalOpen}\r\n        onClose={(ticket) => {\r\n          \r\n          handleCloseOrOpenTicket(ticket);\r\n        }}\r\n      />\r\n      <Paper elevation={0} square className={classes.tabsHeader}>\r\n        <Tabs\r\n          value={tab}\r\n          onChange={handleChangeTab}\r\n          variant=\"fullWidth\"\r\n          indicatorColor=\"primary\"\r\n          textColor=\"primary\"\r\n          aria-label=\"icon label tabs example\"\r\n        >\r\n          <Tab\r\n            value={\"open\"}\r\n            icon={<MoveToInboxIcon />}\r\n            label={i18n.t(\"tickets.tabs.open.title\")}\r\n            classes={{ root: classes.tab }}\r\n          />\r\n          <Tab\r\n            value={\"closed\"}\r\n            icon={<CheckBoxIcon />}\r\n            label={i18n.t(\"tickets.tabs.closed.title\")}\r\n            classes={{ root: classes.tab }}\r\n          />\r\n          <Tab\r\n            value={\"search\"}\r\n            icon={<SearchIcon />}\r\n            label={i18n.t(\"tickets.tabs.search.title\")}\r\n            classes={{ root: classes.tab }}\r\n          />\r\n        </Tabs>\r\n      </Paper>\r\n      <Paper square elevation={0} className={classes.ticketOptionsBox}>\r\n        {tab === \"search\" ? (\r\n          <div className={classes.serachInputWrapper}>\r\n            <SearchIcon className={classes.searchIcon} />\r\n            <InputBase\r\n              className={classes.searchInput}\r\n              inputRef={searchInputRef}\r\n              placeholder={i18n.t(\"tickets.search.placeholder\")}\r\n              type=\"search\"\r\n              onChange={handleSearch}\r\n            />\r\n          </div>\r\n        ) : (\r\n          <>\r\n            <Button\r\n              variant=\"outlined\"\r\n              color=\"primary\"\r\n              onClick={() => setNewTicketModalOpen(true)}\r\n            >\r\n              {i18n.t(\"ticketsManager.buttons.newTicket\")}\r\n            </Button>\r\n            <Can\r\n              role={user.profile}\r\n              perform=\"tickets-manager:showall\"\r\n              yes={() => (\r\n                <FormControlLabel\r\n                  label={i18n.t(\"tickets.buttons.showAll\")}\r\n                  labelPlacement=\"start\"\r\n                  control={\r\n                    <Switch\r\n                      size=\"small\"\r\n                      checked={showAllTickets}\r\n                      onChange={() =>\r\n                        setShowAllTickets((prevState) => !prevState)\r\n                      }\r\n                      name=\"showAllTickets\"\r\n                      color=\"primary\"\r\n                    />\r\n                  }\r\n                />\r\n              )}\r\n            />\r\n          </>\r\n        )}\r\n        <TicketsQueueSelect\r\n          style={{ marginLeft: 6 }}\r\n          selectedQueueIds={selectedQueueIds}\r\n          userQueues={user?.queues}\r\n          onChange={(values) => setSelectedQueueIds(values)}\r\n        />\r\n      </Paper>\r\n      <TabPanel value={tab} name=\"open\" className={classes.ticketsWrapper}>\r\n        <Tabs\r\n          value={tabOpen}\r\n          onChange={handleChangeTabOpen}\r\n          indicatorColor=\"primary\"\r\n          textColor=\"primary\"\r\n          variant=\"fullWidth\"\r\n        >\r\n          <Tab\r\n            label={\r\n              <Badge\r\n                className={classes.badge}\r\n                badgeContent={openCount}\r\n                color=\"primary\"\r\n              >\r\n                {i18n.t(\"ticketsList.assignedHeader\")}\r\n              </Badge>\r\n            }\r\n            value={\"open\"}\r\n          />\r\n          <Tab\r\n            label={\r\n              <Badge\r\n                className={classes.badge}\r\n                badgeContent={pendingCount}\r\n                color=\"secondary\"\r\n              >\r\n                {i18n.t(\"ticketsList.pendingHeader\")}\r\n              </Badge>\r\n            }\r\n            value={\"pending\"}\r\n          />\r\n        </Tabs>\r\n        <Paper className={classes.ticketsWrapper}>\r\n          <TicketsList\r\n            status=\"open\"\r\n            showAll={showAllTickets}\r\n            selectedQueueIds={selectedQueueIds}\r\n            updateCount={(val) => setOpenCount(val)}\r\n            style={applyPanelStyle(\"open\")}\r\n          />\r\n          <TicketsList\r\n            status=\"pending\"\r\n            selectedQueueIds={selectedQueueIds}\r\n            updateCount={(val) => setPendingCount(val)}\r\n            style={applyPanelStyle(\"pending\")}\r\n          />\r\n        </Paper>\r\n      </TabPanel>\r\n      <TabPanel value={tab} name=\"closed\" className={classes.ticketsWrapper}>\r\n        <TicketsList\r\n          status=\"closed\"\r\n          showAll={true}\r\n          selectedQueueIds={selectedQueueIds}\r\n        />\r\n      </TabPanel>\r\n      <TabPanel value={tab} name=\"search\" className={classes.ticketsWrapper}>\r\n        <TagsFilter onFiltered={handleSelectedTags} />\r\n        {profile === \"admin\" && (\r\n          <UsersFilter onFiltered={handleSelectedUsers} />\r\n        )}\r\n        <TicketsList\r\n          searchParam={searchParam}\r\n          showAll={true}\r\n          tags={selectedTags}\r\n          users={selectedUsers}\r\n          selectedQueueIds={selectedQueueIds}\r\n        />\r\n      </TabPanel>\r\n    </Paper>\r\n  );\r\n};\r\n\r\nexport default TicketsManagerTabs;\r\n","import React from \"react\";\r\nimport Skeleton from \"@material-ui/lab/Skeleton\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport { Grid } from \"@material-ui/core\";\r\n\r\nconst ContactDrawerSkeleton = ({ classes }) => {\r\n\treturn (\r\n\t\t<div className={classes.content}>\r\n\t\t\t<Paper square variant=\"outlined\" className={classes.contactHeader}>\r\n\t\t\t\t<Grid container>\r\n\t\t\t\t\t<Grid item>\r\n\t\t\t\t\t\t<Skeleton\r\n\t\t\t\t\t\t\tanimation=\"wave\"\r\n\t\t\t\t\t\t\tvariant=\"circle\"\r\n\t\t\t\t\t\t\twidth={60}\r\n\t\t\t\t\t\t\theight={60}\r\n\t\t\t\t\t\t\tclassName={classes.contactAvatar}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item>\r\n\t\t\t\t\t\t<Skeleton animation=\"wave\" height={25} width={90} />\r\n\t\t\t\t\t\t<Skeleton animation=\"wave\" height={25} width={80} />\r\n\t\t\t\t\t\t<Skeleton animation=\"wave\" height={25} width={80} />\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</Grid>\r\n\t\t\t</Paper>\r\n\t\t\t<Paper square className={classes.contactDetails}>\r\n\t\t\t\t<Typography variant=\"subtitle1\">\r\n\t\t\t\t\t{i18n.t(\"contactDrawer.extraInfo\")}\r\n\t\t\t\t</Typography>\r\n\t\t\t\t<Paper square variant=\"outlined\" className={classes.contactExtraInfo}>\r\n\t\t\t\t\t<Skeleton animation=\"wave\" height={20} width={60} />\r\n\t\t\t\t\t<Skeleton animation=\"wave\" height={20} width={160} />\r\n\t\t\t\t</Paper>\r\n\t\t\t\t<Paper square variant=\"outlined\" className={classes.contactExtraInfo}>\r\n\t\t\t\t\t<Skeleton animation=\"wave\" height={20} width={60} />\r\n\t\t\t\t\t<Skeleton animation=\"wave\" height={20} width={160} />\r\n\t\t\t\t</Paper>\r\n\t\t\t\t<Paper square variant=\"outlined\" className={classes.contactExtraInfo}>\r\n\t\t\t\t\t<Skeleton animation=\"wave\" height={20} width={60} />\r\n\t\t\t\t\t<Skeleton animation=\"wave\" height={20} width={160} />\r\n\t\t\t\t</Paper>\r\n\t\t\t</Paper>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default ContactDrawerSkeleton;\r\n","import React, { useState, useEffect } from \"react\";\r\n\r\nimport * as Yup from \"yup\";\r\nimport { Formik, Form, Field } from \"formik\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { green } from \"@material-ui/core/colors\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\n\r\nimport api from \"../../services/api\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport { Grid } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\troot: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexWrap: \"wrap\",\r\n\t},\r\n\ttextField: {\r\n\t\tmarginRight: theme.spacing(1),\r\n\t\tflex: 1,\r\n\t},\r\n\r\n\textraAttr: {\r\n\t\tdisplay: \"flex\",\r\n\t\tjustifyContent: \"center\",\r\n\t\talignItems: \"center\",\r\n\t},\r\n\r\n\tbtnWrapper: {\r\n\t\tposition: \"relative\",\r\n\t},\r\n\r\n\tbuttonProgress: {\r\n\t\tcolor: green[500],\r\n\t\tposition: \"absolute\",\r\n\t\ttop: \"50%\",\r\n\t\tleft: \"50%\",\r\n\t\tmarginTop: -12,\r\n\t\tmarginLeft: -12,\r\n\t},\r\n\r\n    textCenter: {\r\n        backgroundColor: 'red'\r\n    }\r\n}));\r\n\r\nconst ContactSchema = Yup.object().shape({\r\n\tname: Yup.string()\r\n\t\t.min(2, \"Too Short!\")\r\n\t\t.max(50, \"Too Long!\")\r\n\t\t.required(\"Required\"),\r\n\tnumber: Yup.string().min(8, \"Too Short!\").max(50, \"Too Long!\"),\r\n\temail: Yup.string().email(\"Invalid email\"),\r\n});\r\n\r\nexport function ContactForm ({ initialContact, onSave, onCancel }) {\r\n\tconst classes = useStyles();\r\n\r\n\tconst [contact, setContact] = useState(initialContact);\r\n\r\n    useEffect(() => {\r\n        setContact(initialContact);\r\n    }, [initialContact]);\r\n\r\n\tconst handleSaveContact = async values => {\r\n\t\ttry {\r\n\t\t\tif (contact.id) {\r\n\t\t\t\tawait api.put(`/contacts/${contact.id}`, values);\r\n\t\t\t} else {\r\n\t\t\t\tconst { data } = await api.post(\"/contacts\", values);\r\n\t\t\t\tif (onSave) {\r\n\t\t\t\t\tonSave(data);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\ttoast.success(i18n.t(\"contactModal.success\"));\r\n\t\t} catch (err) {\r\n\t\t\ttoastError(err);\r\n\t\t}\r\n\t};\r\n\r\n    return (\r\n        <Formik\r\n            initialValues={contact}\r\n            enableReinitialize={true}\r\n            validationSchema={ContactSchema}\r\n            onSubmit={(values, actions) => {\r\n                setTimeout(() => {\r\n                    handleSaveContact(values);\r\n                    actions.setSubmitting(false);\r\n                }, 400);\r\n            }}\r\n        >\r\n            {({ values, errors, touched, isSubmitting }) => (\r\n                <Form>\r\n                    <Grid container spacing={1}>\r\n                        {/* <Grid item xs={12}>\r\n                            <Typography variant=\"subtitle1\" gutterBottom>\r\n                                {i18n.t(\"contactModal.form.mainInfo\")}\r\n                            </Typography>\r\n                        </Grid> */}\r\n                        <Grid item xs={12}>\r\n                            <Field\r\n                                as={TextField}\r\n                                label={i18n.t(\"contactModal.form.name\")}\r\n                                name=\"name\"\r\n                                autoFocus\r\n                                error={touched.name && Boolean(errors.name)}\r\n                                helperText={touched.name && errors.name}\r\n                                variant=\"outlined\"\r\n                                margin=\"dense\"\r\n                                className={classes.textField}\r\n                                fullWidth\r\n                            />\r\n                        </Grid>\r\n                        <Grid item xs={12}>\r\n                            <Field\r\n                                as={TextField}\r\n                                label={i18n.t(\"contactModal.form.number\")}\r\n                                name=\"number\"\r\n                                error={touched.number && Boolean(errors.number)}\r\n                                helperText={touched.number && errors.number}\r\n                                placeholder=\"5513912344321\"\r\n                                variant=\"outlined\"\r\n                                margin=\"dense\"\r\n                                fullWidth\r\n                            />\r\n                        </Grid>\r\n                        <Grid item xs={12}>\r\n                            <Field\r\n                                as={TextField}\r\n                                label={i18n.t(\"contactModal.form.email\")}\r\n                                name=\"email\"\r\n                                error={touched.email && Boolean(errors.email)}\r\n                                helperText={touched.email && errors.email}\r\n                                placeholder=\"Email address\"\r\n                                fullWidth\r\n                                margin=\"dense\"\r\n                                variant=\"outlined\"\r\n                            />\r\n                        </Grid>\r\n                        <Grid item xs={12} spacing={1}>\r\n                            <Grid container spacing={1}>\r\n                                <Grid xs={6} item>\r\n                                    <Button\r\n                                        onClick={onCancel}\r\n                                        color=\"secondary\"\r\n                                        disabled={isSubmitting}\r\n                                        variant=\"outlined\"\r\n                                        fullWidth\r\n                                    >\r\n                                        {i18n.t(\"contactModal.buttons.cancel\")}\r\n                                    </Button>\r\n                                </Grid>\r\n                                <Grid classes={classes.textCenter} xs={6} item>\r\n                                    <Button\r\n                                        type=\"submit\"\r\n                                        color=\"primary\"\r\n                                        disabled={isSubmitting}\r\n                                        variant=\"contained\"\r\n                                        className={classes.btnWrapper}\r\n                                        fullWidth\r\n                                    >\r\n                                        {contact.id\r\n                                            ? `${i18n.t(\"contactModal.buttons.okEdit\")}`\r\n                                            : `${i18n.t(\"contactModal.buttons.okAdd\")}`}\r\n                                        {isSubmitting && (\r\n                                            <CircularProgress\r\n                                                size={24}\r\n                                                className={classes.buttonProgress}\r\n                                            />\r\n                                        )}\r\n                                    </Button>\r\n                                </Grid>\r\n                            </Grid>\r\n                        </Grid>\r\n                    </Grid>\r\n                </Form>\r\n            )}\r\n        </Formik>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport moment from 'moment';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    inline: {\r\n        width: '100%'\r\n    }\r\n}));\r\n\r\nexport default function ContactNotesDialogListItem (props) {\r\n    const { note, deleteItem } = props;\r\n    const classes = useStyles();\r\n\r\n    const handleDelete = (item) => {\r\n        deleteItem(item);\r\n    }\r\n\r\n    return (\r\n        <ListItem alignItems=\"flex-start\">\r\n            <ListItemAvatar>\r\n                <Avatar alt={note.user.name} src=\"/static/images/avatar/1.jpg\" />\r\n            </ListItemAvatar>\r\n            <ListItemText\r\n                primary={\r\n                    <>\r\n                        <Typography\r\n                            component=\"span\"\r\n                            variant=\"body2\"\r\n                            className={classes.inline}\r\n                            color=\"textPrimary\"\r\n                        >\r\n                            {note.note}\r\n                        </Typography>\r\n                    </>\r\n                }\r\n                secondary={\r\n                    <>\r\n                        {note.user.name}, {moment(note.createdAt).format('DD/MM/YY HH:mm')}\r\n                    </>\r\n                }\r\n            />\r\n            <ListItemSecondaryAction>\r\n                <IconButton onClick={() => handleDelete(note)} edge=\"end\" aria-label=\"delete\">\r\n                    <DeleteIcon />\r\n                </IconButton>\r\n            </ListItemSecondaryAction>\r\n        </ListItem>\r\n    )   \r\n}\r\n\r\nContactNotesDialogListItem.propTypes = {\r\n    note: PropTypes.object.isRequired,\r\n    deleteItem: PropTypes.func.isRequired\r\n}","import api from \"../../services/api\";\r\n\r\nconst useTicketNotes = () => {\r\n\r\n    const saveNote = async (data) => {\r\n        const { data: responseData } = await api.request({\r\n            url: '/ticket-notes',\r\n            method: 'POST',\r\n            data\r\n        });\r\n        return responseData;\r\n    }\r\n\r\n    const deleteNote = async (id) => {\r\n        const { data } = await api.request({\r\n            url: `/ticket-notes/${id}`,\r\n            method: 'DELETE'\r\n        });\r\n        return data;\r\n    }\r\n\r\n    const listNotes = async (params) => {\r\n        const { data } = await api.request({\r\n            url: '/ticket-notes/list',\r\n            method: 'GET',\r\n            params\r\n        });\r\n        return data;\r\n    }\r\n\r\n    return {\r\n        saveNote,\r\n        deleteNote,\r\n        listNotes\r\n    }\r\n}\r\n\r\nexport default useTicketNotes;","import React, { useState, useEffect } from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport List from '@material-ui/core/List';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport * as Yup from \"yup\";\r\nimport { Formik, Form, Field } from \"formik\";\r\n\r\nimport ContactNotesDialogListItem from '../ContactNotesDialogListItem';\r\nimport ConfirmationModal from '../ConfirmationModal';\r\n\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\n\r\nimport ButtonWithSpinner from '../ButtonWithSpinner';\r\n\r\nimport useTicketNotes from '../../hooks/useTicketNotes';\r\nimport { Grid } from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        '& .MuiTextField-root': {\r\n            margin: theme.spacing(1),\r\n            width: '350px',\r\n        },\r\n    },\r\n    list: {\r\n        width: '100%',\r\n        maxWidth: '350px',\r\n        maxHeight: '200px',\r\n        backgroundColor: theme.palette.background.paper,\r\n        overflow: 'auto'\r\n    },\r\n    inline: {\r\n        width: '100%'\r\n    }\r\n}));\r\n\r\nconst NoteSchema = Yup.object().shape({\r\n\tnote: Yup.string()\r\n\t\t.min(2, \"Too Short!\")\r\n\t\t.required(\"Required\")\r\n});\r\nexport function ContactNotes ({ ticket }) {\r\n    const { id: ticketId, contactId } = ticket\r\n    const classes = useStyles()\r\n    const [newNote, setNewNote] = useState({ note: \"\" });\r\n    const [loading, setLoading] = useState(false)\r\n    const [showOnDeleteDialog, setShowOnDeleteDialog] = useState(false)\r\n    const [selectedNote, setSelectedNote] = useState({})\r\n    const [notes, setNotes] = useState([])\r\n    const { saveNote, deleteNote, listNotes } = useTicketNotes()\r\n\r\n    useEffect(() => {\r\n        async function openAndFetchData () {\r\n            handleResetState()\r\n            await loadNotes()\r\n        }\r\n        openAndFetchData()\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [])\r\n\r\n    const handleResetState = () => {\r\n        setNewNote({ note: \"\" })\r\n        setLoading(false)\r\n    }\r\n\r\n    const handleChangeComment = (e) => {\r\n        setNewNote({ note: e.target.value })\r\n    }\r\n\r\n    const handleSave = async values => {\r\n        setLoading(true)\r\n        try {\r\n            await saveNote({\r\n                ...values,\r\n                ticketId,\r\n                contactId\r\n            })\r\n            await loadNotes()\r\n            setNewNote({ note: '' })\r\n            toast.success('Observação adicionada com sucesso!')\r\n        } catch (e) {\r\n            toast.error(e)\r\n        }\r\n        setLoading(false)\r\n    }\r\n\r\n    const handleOpenDialogDelete = (item) => {\r\n        setSelectedNote(item)\r\n        setShowOnDeleteDialog(true)\r\n    }\r\n\r\n    const handleDelete = async () => {\r\n        setLoading(true)\r\n        try {\r\n            await deleteNote(selectedNote.id)\r\n            await loadNotes()\r\n            setSelectedNote({})\r\n            toast.success('Observação excluída com sucesso!')\r\n        } catch (e) {\r\n            toast.error(e)\r\n        }\r\n        setLoading(false)\r\n    }\r\n\r\n    const loadNotes = async () => {\r\n        setLoading(true)\r\n        try {\r\n            const notes = await listNotes({ ticketId, contactId })\r\n            setNotes(notes)\r\n        } catch (e) {\r\n            toast.error(e)\r\n        }\r\n        setLoading(false)\r\n    }\r\n\r\n    const renderNoteList = () => {\r\n        return notes.map((note) => {\r\n            return <ContactNotesDialogListItem\r\n                note={note}\r\n                key={note.id}\r\n                deleteItem={handleOpenDialogDelete}\r\n            />\r\n        })\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <ConfirmationModal\r\n                title=\"Excluir Registro\"\r\n                open={showOnDeleteDialog}\r\n                onClose={setShowOnDeleteDialog}\r\n                onConfirm={handleDelete}\r\n            >\r\n                Deseja realmente excluir este registro?\r\n            </ConfirmationModal>\r\n            <Formik\r\n                initialValues={newNote}\r\n                enableReinitialize={true}\r\n                validationSchema={NoteSchema}\r\n                onSubmit={(values, actions) => {\r\n                    setTimeout(() => {\r\n                        handleSave(values);\r\n                        actions.setSubmitting(false);\r\n                    }, 400);\r\n                }}\r\n            >\r\n\r\n                {({ touched, errors, setErrors }) => (\r\n                    <Form>\r\n                        <Grid container spacing={2}>\r\n                            <Grid xs={12} item>\r\n                                <Field\r\n                                    as={TextField}\r\n                                    name=\"note\"\r\n                                    rows={3}\r\n                                    label={i18n.t(\"ticketOptionsMenu.appointmentsModal.textarea\")}\r\n                                    placeholder={i18n.t(\"ticketOptionsMenu.appointmentsModal.placeholder\")}\r\n                                    multiline={true}\r\n                                    error={touched.note && Boolean(errors.note)}\r\n                                    helperText={touched.note && errors.note}\r\n                                    variant=\"outlined\"\r\n                                    onChange={handleChangeComment}\r\n                                    fullWidth\r\n                                />\r\n                            </Grid>\r\n                            { notes.length > 0 && (\r\n                                <Grid xs={12} item>\r\n                                    <List className={classes.list}>\r\n                                        { renderNoteList() }\r\n                                    </List>\r\n                                </Grid>\r\n                            ) }\r\n                            <Grid xs={12} item>\r\n                                <Grid container spacing={2}>\r\n                                    <Grid xs={6} item>\r\n                                        <Button\r\n                                            onClick={() => {\r\n                                                setNewNote(\"\");\r\n                                                setErrors({});\r\n                                            }}\r\n                                            color=\"primary\"\r\n                                            variant=\"outlined\"\r\n                                            fullWidth\r\n                                        >\r\n                                            Cancelar\r\n                                        </Button>\r\n                                    </Grid>\r\n                                    <Grid xs={6} item>\r\n                                        <ButtonWithSpinner loading={loading} color=\"primary\" type=\"submit\" variant=\"contained\" autoFocus fullWidth>\r\n                                            Salvar\r\n                                        </ButtonWithSpinner>\r\n                                    </Grid>\r\n                                </Grid>\r\n                            </Grid>\r\n                        </Grid>\r\n                    </Form>\r\n                )}\r\n            </Formik>\r\n        </>\r\n    );\r\n}","import React, { useEffect, useState } from \"react\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport Drawer from \"@material-ui/core/Drawer\";\r\nimport Link from \"@material-ui/core/Link\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport CreateIcon from '@material-ui/icons/Create';\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\n\r\nimport ContactDrawerSkeleton from \"../ContactDrawerSkeleton\";\r\nimport MarkdownWrapper from \"../MarkdownWrapper\";\r\nimport { CardHeader } from \"@material-ui/core\";\r\nimport { ContactForm } from \"../ContactForm\";\r\nimport ContactModal from \"../ContactModal\";\r\nimport { ContactNotes } from \"../ContactNotes\";\r\n\r\nconst drawerWidth = 320;\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tdrawer: {\r\n\t\twidth: drawerWidth,\r\n\t\tflexShrink: 0,\r\n\t},\r\n\tdrawerPaper: {\r\n\t\twidth: drawerWidth,\r\n\t\tdisplay: \"flex\",\r\n\t\tborderTop: \"1px solid rgba(0, 0, 0, 0.12)\",\r\n\t\tborderRight: \"1px solid rgba(0, 0, 0, 0.12)\",\r\n\t\tborderBottom: \"1px solid rgba(0, 0, 0, 0.12)\",\r\n\t\tborderTopRightRadius: 4,\r\n\t\tborderBottomRightRadius: 4,\r\n\t},\r\n\theader: {\r\n\t\tdisplay: \"flex\",\r\n\t\tborderBottom: \"1px solid rgba(0, 0, 0, 0.12)\",\r\n\t\tbackgroundColor: theme.palette.contactdrawer, //DARK MODE PLW DESIGN//\r\n\t\talignItems: \"center\",\r\n\t\tpadding: theme.spacing(0, 1),\r\n\t\tminHeight: \"73px\",\r\n\t\tjustifyContent: \"flex-start\",\r\n\t},\r\n\tcontent: {\r\n\t\tdisplay: \"flex\",\r\n\t\tbackgroundColor: theme.palette.contactdrawer, //DARK MODE PLW DESIGN//\r\n\t\tflexDirection: \"column\",\r\n\t\tpadding: \"8px 0px 8px 8px\",\r\n\t\theight: \"100%\",\r\n\t\toverflowY: \"scroll\",\r\n\t\t...theme.scrollbarStyles,\r\n\t},\r\n\r\n\tcontactAvatar: {\r\n\t\tmargin: 15,\r\n\t\twidth: 100,\r\n\t\theight: 100,\r\n\t},\r\n\r\n\tcontactHeader: {\r\n\t\tdisplay: \"flex\",\r\n\t\tpadding: 8,\r\n\t\tflexDirection: \"column\",\r\n\t\talignItems: \"center\",\r\n\t\tjustifyContent: \"center\",\r\n\t\t\"& > *\": {\r\n\t\t\tmargin: 4,\r\n\t\t},\r\n\t},\r\n\r\n\tcontactDetails: {\r\n\t\tmarginTop: 8,\r\n\t\tpadding: 8,\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t},\r\n\tcontactExtraInfo: {\r\n\t\tmarginTop: 4,\r\n\t\tpadding: 6,\r\n\t},\r\n}));\r\n\r\nconst ContactDrawer = ({ open, handleDrawerClose, contact, ticket, loading }) => {\r\n\tconst classes = useStyles();\r\n\r\n\tconst [modalOpen, setModalOpen] = useState(false);\r\n\tconst [openForm, setOpenForm] = useState(false);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetOpenForm(false);\r\n\t}, [open, contact]);\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Drawer\r\n\t\t\t\tclassName={classes.drawer}\r\n\t\t\t\tvariant=\"persistent\"\r\n\t\t\t\tanchor=\"right\"\r\n\t\t\t\topen={open}\r\n\t\t\t\tPaperProps={{ style: { position: \"absolute\" } }}\r\n\t\t\t\tBackdropProps={{ style: { position: \"absolute\" } }}\r\n\t\t\t\tModalProps={{\r\n\t\t\t\t\tcontainer: document.getElementById(\"drawer-container\"),\r\n\t\t\t\t\tstyle: { position: \"absolute\" },\r\n\t\t\t\t}}\r\n\t\t\t\tclasses={{\r\n\t\t\t\t\tpaper: classes.drawerPaper,\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<div className={classes.header}>\r\n\t\t\t\t\t<IconButton onClick={handleDrawerClose}>\r\n\t\t\t\t\t\t<CloseIcon />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t<Typography style={{ justifySelf: \"center\" }}>\r\n\t\t\t\t\t\t{i18n.t(\"contactDrawer.header\")}\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t</div>\r\n\t\t\t\t{loading ? (\r\n\t\t\t\t\t<ContactDrawerSkeleton classes={classes} />\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<div className={classes.content}>\r\n\t\t\t\t\t\t<Paper square variant=\"outlined\" className={classes.contactHeader}>\r\n\t\t\t\t\t\t\t<CardHeader\r\n\t\t\t\t\t\t\t\tonClick={() => {}}\r\n\t\t\t\t\t\t\t\tstyle={{ cursor: \"pointer\", width: '100%' }}\r\n\t\t\t\t\t\t\t\ttitleTypographyProps={{ noWrap: true }}\r\n\t\t\t\t\t\t\t\tsubheaderTypographyProps={{ noWrap: true }}\r\n\t\t\t\t\t\t\t\tavatar={<Avatar src={contact.profilePicUrl} alt=\"contact_image\" style={{ width: 60, height: 60 }} />}\r\n\t\t\t\t\t\t\t\ttitle={\r\n\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t<Typography onClick={() => setOpenForm(true)}>\r\n\t\t\t\t\t\t\t\t\t\t\t{contact.name}\r\n\t\t\t\t\t\t\t\t\t\t\t<CreateIcon style={{fontSize: 16, marginLeft: 5}} />\r\n\t\t\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tsubheader={\r\n\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t<Typography style={{fontSize: 12}}>\r\n\t\t\t\t\t\t\t\t\t\t\t<Link href={`tel:${contact.number}`}>{contact.number}</Link>\r\n\t\t\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t\t\t<Typography style={{fontSize: 12}}>\r\n\t\t\t\t\t\t\t\t\t\t\t<Link href={`mailto:${contact.email}`}>{contact.email}</Link>\r\n\t\t\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\tonClick={() => setModalOpen(!openForm)}\r\n\t\t\t\t\t\t\t\tstyle={{fontSize: 12}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{i18n.t(\"contactDrawer.buttons.edit\")}\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t{(contact.id && openForm) && <ContactForm initialContact={contact} onCancel={() => setOpenForm(false)} />}\r\n\t\t\t\t\t\t</Paper>\r\n\t\t\t\t\t\t<Paper square variant=\"outlined\" className={classes.contactDetails}>\r\n\t\t\t\t\t\t\t<Typography variant=\"subtitle1\" style={{marginBottom: 10}}>\r\n\t\t\t\t\t\t\t\t{i18n.t(\"ticketOptionsMenu.appointmentsModal.title\")}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<ContactNotes ticket={ticket} />\r\n\t\t\t\t\t\t</Paper>\r\n\t\t\t\t\t\t<Paper square variant=\"outlined\" className={classes.contactDetails}>\r\n\t\t\t\t\t\t\t<ContactModal\r\n\t\t\t\t\t\t\t\topen={modalOpen}\r\n\t\t\t\t\t\t\t\tonClose={() => setModalOpen(false)}\r\n\t\t\t\t\t\t\t\tcontactId={contact.id}\r\n\t\t\t\t\t\t\t></ContactModal>\r\n\t\t\t\t\t\t\t<Typography variant=\"subtitle1\">\r\n\t\t\t\t\t\t\t\t{i18n.t(\"contactDrawer.extraInfo\")}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t{contact?.extraInfo?.map(info => (\r\n\t\t\t\t\t\t\t\t<Paper\r\n\t\t\t\t\t\t\t\t\tkey={info.id}\r\n\t\t\t\t\t\t\t\t\tsquare\r\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\tclassName={classes.contactExtraInfo}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<InputLabel>{info.name}</InputLabel>\r\n\t\t\t\t\t\t\t\t\t<Typography component=\"div\" noWrap style={{ paddingTop: 2 }}>\r\n\t\t\t\t\t\t\t\t\t\t<MarkdownWrapper>{info.value}</MarkdownWrapper>\r\n\t\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t</Paper>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</Paper>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</Drawer>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default ContactDrawer;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\ttimerBox: {\r\n\t\tdisplay: \"flex\",\r\n\t\tmarginLeft: 10,\r\n\t\tmarginRight: 10,\r\n\t\talignItems: \"center\",\r\n\t},\r\n}));\r\n\r\nconst RecordingTimer = () => {\r\n\tconst classes = useStyles();\r\n\tconst initialState = {\r\n\t\tminutes: 0,\r\n\t\tseconds: 0,\r\n\t};\r\n\tconst [timer, setTimer] = useState(initialState);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst interval = setInterval(\r\n\t\t\t() =>\r\n\t\t\t\tsetTimer(prevState => {\r\n\t\t\t\t\tif (prevState.seconds === 59) {\r\n\t\t\t\t\t\treturn { ...prevState, minutes: prevState.minutes + 1, seconds: 0 };\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn { ...prevState, seconds: prevState.seconds + 1 };\r\n\t\t\t\t}),\r\n\t\t\t1000\r\n\t\t);\r\n\t\treturn () => {\r\n\t\t\tclearInterval(interval);\r\n\t\t};\r\n\t}, []);\r\n\r\n\tconst addZero = n => {\r\n\t\treturn n < 10 ? \"0\" + n : n;\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className={classes.timerBox}>\r\n\t\t\t<span>{`${addZero(timer.minutes)}:${addZero(timer.seconds)}`}</span>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default RecordingTimer;\r\n","import api from \"../../services/api\";\r\n\r\nconst useQuickMessages = () => {\r\n\r\n    const save = async (data) => {\r\n        const { data: responseData } = await api.request({\r\n            url: '/quick-messages',\r\n            method: 'POST',\r\n            data\r\n        });\r\n        return responseData;\r\n    }\r\n\r\n    const update = async (data) => {\r\n        const { data: responseData } = await api.request({\r\n            url: `/quick-messages/${data.id}`,\r\n            method: 'PUT',\r\n            data\r\n        });\r\n        return responseData;\r\n    }\r\n\r\n    const deleteRecord = async (id) => {\r\n        const { data } = await api.request({\r\n            url: `/quick-messages/${id}`,\r\n            method: 'DELETE'\r\n        });\r\n        return data;\r\n    }\r\n\r\n    const list = async (params) => {\r\n        const { data } = await api.request({\r\n            url: '/quick-messages/list',\r\n            method: 'GET',\r\n            params\r\n        });\r\n        return data;\r\n    }\r\n\r\n    return {\r\n        save,\r\n        update,\r\n        deleteRecord,\r\n        list\r\n    }\r\n}\r\n\r\nexport default useQuickMessages;","import React, { useState, useEffect, useContext, useRef } from \"react\";\r\nimport withWidth, { isWidthUp } from \"@material-ui/core/withWidth\";\r\nimport \"emoji-mart/css/emoji-mart.css\";\r\nimport { Picker } from \"emoji-mart\";\r\nimport MicRecorder from \"mic-recorder-to-mp3\";\r\nimport clsx from \"clsx\";\r\nimport { isNil } from \"lodash\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport InputBase from \"@material-ui/core/InputBase\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport { green } from \"@material-ui/core/colors\";\r\nimport AttachFileIcon from \"@material-ui/icons/AttachFile\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport MoodIcon from \"@material-ui/icons/Mood\";\r\nimport SendIcon from \"@material-ui/icons/Send\";\r\nimport CancelIcon from \"@material-ui/icons/Cancel\";\r\nimport ClearIcon from \"@material-ui/icons/Clear\";\r\nimport MicIcon from \"@material-ui/icons/Mic\";\r\nimport CheckCircleOutlineIcon from \"@material-ui/icons/CheckCircleOutline\";\r\nimport HighlightOffIcon from \"@material-ui/icons/HighlightOff\";\r\nimport { FormControlLabel, Switch } from \"@material-ui/core\";\r\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\r\nimport { isString, isEmpty, isObject, has } from \"lodash\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport api from \"../../services/api\";\r\nimport axios from \"axios\";\r\n\r\nimport RecordingTimer from \"./RecordingTimer\";\r\nimport { ReplyMessageContext } from \"../../context/ReplyingMessage/ReplyingMessageContext\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\nimport { useLocalStorage } from \"../../hooks/useLocalStorage\";\r\nimport toastError from \"../../errors/toastError\";\r\n\r\nimport useQuickMessages from \"../../hooks/useQuickMessages\";\r\n\r\nconst Mp3Recorder = new MicRecorder({ bitRate: 128 });\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  mainWrapper: {\r\n    backgroundColor: theme.palette.bordabox, //DARK MODE PLW DESIGN//\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\",\r\n    borderTop: \"1px solid rgba(0, 0, 0, 0.12)\",\r\n  },\r\n\r\n  newMessageBox: {\r\n    backgroundColor: theme.palette.newmessagebox, //DARK MODE PLW DESIGN//\r\n    width: \"100%\",\r\n    display: \"flex\",\r\n    padding: \"7px\",\r\n    alignItems: \"center\",\r\n  },\r\n\r\n  messageInputWrapper: {\r\n    padding: 6,\r\n    marginRight: 7,\r\n    backgroundColor: theme.palette.inputdigita, //DARK MODE PLW DESIGN//\r\n    display: \"flex\",\r\n    borderRadius: 20,\r\n    flex: 1,\r\n  },\r\n\r\n  messageInput: {\r\n    paddingLeft: 10,\r\n    flex: 1,\r\n    border: \"none\",\r\n  },\r\n\r\n  sendMessageIcons: {\r\n    color: \"grey\",\r\n  },\r\n\r\n  uploadInput: {\r\n    display: \"none\",\r\n  },\r\n\r\n  viewMediaInputWrapper: {\r\n    display: \"flex\",\r\n    padding: \"10px 13px\",\r\n    position: \"relative\",\r\n    justifyContent: \"space-between\",\r\n    alignItems: \"center\",\r\n    backgroundColor: \"#eee\",\r\n    borderTop: \"1px solid rgba(0, 0, 0, 0.12)\",\r\n  },\r\n\r\n  emojiBox: {\r\n    position: \"absolute\",\r\n    bottom: 63,\r\n    width: 40,\r\n    borderTop: \"1px solid #e8e8e8\",\r\n  },\r\n\r\n  circleLoading: {\r\n    color: green[500],\r\n    opacity: \"70%\",\r\n    position: \"absolute\",\r\n    top: \"20%\",\r\n    left: \"50%\",\r\n    marginLeft: -12,\r\n  },\r\n\r\n  audioLoading: {\r\n    color: green[500],\r\n    opacity: \"70%\",\r\n  },\r\n\r\n  recorderWrapper: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    alignContent: \"middle\",\r\n  },\r\n\r\n  cancelAudioIcon: {\r\n    color: \"red\",\r\n  },\r\n\r\n  sendAudioIcon: {\r\n    color: \"green\",\r\n  },\r\n\r\n  replyginMsgWrapper: {\r\n    display: \"flex\",\r\n    width: \"100%\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    paddingTop: 8,\r\n    paddingLeft: 73,\r\n    paddingRight: 7,\r\n  },\r\n\r\n  replyginMsgContainer: {\r\n    flex: 1,\r\n    marginRight: 5,\r\n    overflowY: \"hidden\",\r\n    backgroundColor: \"rgba(0, 0, 0, 0.05)\",\r\n    borderRadius: \"7.5px\",\r\n    display: \"flex\",\r\n    position: \"relative\",\r\n  },\r\n\r\n  replyginMsgBody: {\r\n    padding: 10,\r\n    height: \"auto\",\r\n    display: \"block\",\r\n    whiteSpace: \"pre-wrap\",\r\n    overflow: \"hidden\",\r\n  },\r\n\r\n  replyginContactMsgSideColor: {\r\n    flex: \"none\",\r\n    width: \"4px\",\r\n    backgroundColor: \"#35cd96\",\r\n  },\r\n\r\n  replyginSelfMsgSideColor: {\r\n    flex: \"none\",\r\n    width: \"4px\",\r\n    backgroundColor: \"#6bcbef\",\r\n  },\r\n\r\n  messageContactName: {\r\n    display: \"flex\",\r\n    color: \"#6bcbef\",\r\n    fontWeight: 500,\r\n  },\r\n}));\r\n\r\nconst EmojiOptions = (props) => {\r\n  const { disabled, showEmoji, setShowEmoji, handleAddEmoji } = props;\r\n  const classes = useStyles();\r\n  return (\r\n    <>\r\n      <IconButton\r\n        aria-label=\"emojiPicker\"\r\n        component=\"span\"\r\n        disabled={disabled}\r\n        onClick={(e) => setShowEmoji((prevState) => !prevState)}\r\n      >\r\n        <MoodIcon className={classes.sendMessageIcons} />\r\n      </IconButton>\r\n      {showEmoji ? (\r\n        <div className={classes.emojiBox}>\r\n          <Picker\r\n            perLine={16}\r\n            showPreview={false}\r\n            showSkinTones={false}\r\n            onSelect={handleAddEmoji}\r\n          />\r\n        </div>\r\n      ) : null}\r\n    </>\r\n  );\r\n};\r\n\r\nconst SignSwitch = (props) => {\r\n  const { width, setSignMessage, signMessage } = props;\r\n  if (isWidthUp(\"md\", width)) {\r\n    return (\r\n      <FormControlLabel\r\n        style={{ marginRight: 7, color: \"gray\" }}\r\n        label={i18n.t(\"messagesInput.signMessage\")}\r\n        labelPlacement=\"start\"\r\n        control={\r\n          <Switch\r\n            size=\"small\"\r\n            checked={signMessage}\r\n            onChange={(e) => {\r\n              setSignMessage(e.target.checked);\r\n            }}\r\n            name=\"showAllTickets\"\r\n            color=\"primary\"\r\n          />\r\n        }\r\n      />\r\n    );\r\n  }\r\n  return null;\r\n};\r\n\r\nconst FileInput = (props) => {\r\n  const { handleChangeMedias, disableOption } = props;\r\n  const classes = useStyles();\r\n  return (\r\n    <>\r\n      <input\r\n        multiple\r\n        type=\"file\"\r\n        id=\"upload-button\"\r\n        disabled={disableOption()}\r\n        className={classes.uploadInput}\r\n        onChange={handleChangeMedias}\r\n      />\r\n      <label htmlFor=\"upload-button\">\r\n        <IconButton\r\n          aria-label=\"upload\"\r\n          component=\"span\"\r\n          disabled={disableOption()}\r\n        >\r\n          <AttachFileIcon className={classes.sendMessageIcons} />\r\n        </IconButton>\r\n      </label>\r\n    </>\r\n  );\r\n};\r\n\r\nconst ActionButtons = (props) => {\r\n  const {\r\n    inputMessage,\r\n    loading,\r\n    recording,\r\n    ticketStatus,\r\n    handleSendMessage,\r\n    handleCancelAudio,\r\n    handleUploadAudio,\r\n    handleStartRecording,\r\n  } = props;\r\n  const classes = useStyles();\r\n  if (inputMessage) {\r\n    return (\r\n      <IconButton\r\n        aria-label=\"sendMessage\"\r\n        component=\"span\"\r\n        onClick={handleSendMessage}\r\n        disabled={loading}\r\n      >\r\n        <SendIcon className={classes.sendMessageIcons} />\r\n      </IconButton>\r\n    );\r\n  } else if (recording) {\r\n    return (\r\n      <div className={classes.recorderWrapper}>\r\n        <IconButton\r\n          aria-label=\"cancelRecording\"\r\n          component=\"span\"\r\n          fontSize=\"large\"\r\n          disabled={loading}\r\n          onClick={handleCancelAudio}\r\n        >\r\n          <HighlightOffIcon className={classes.cancelAudioIcon} />\r\n        </IconButton>\r\n        {loading ? (\r\n          <div>\r\n            <CircularProgress className={classes.audioLoading} />\r\n          </div>\r\n        ) : (\r\n          <RecordingTimer />\r\n        )}\r\n\r\n        <IconButton\r\n          aria-label=\"sendRecordedAudio\"\r\n          component=\"span\"\r\n          onClick={handleUploadAudio}\r\n          disabled={loading}\r\n        >\r\n          <CheckCircleOutlineIcon className={classes.sendAudioIcon} />\r\n        </IconButton>\r\n      </div>\r\n    );\r\n  } else {\r\n    return (\r\n      <IconButton\r\n        aria-label=\"showRecorder\"\r\n        component=\"span\"\r\n        disabled={loading || ticketStatus !== \"open\"}\r\n        onClick={handleStartRecording}\r\n      >\r\n        <MicIcon className={classes.sendMessageIcons} />\r\n      </IconButton>\r\n    );\r\n  }\r\n};\r\n\r\nconst CustomInput = (props) => {\r\n  const {\r\n    loading,\r\n    inputRef,\r\n    ticketStatus,\r\n    inputMessage,\r\n    setInputMessage,\r\n    handleSendMessage,\r\n    handleInputPaste,\r\n    disableOption,\r\n    handleQuickAnswersClick,\r\n  } = props;\r\n  const classes = useStyles();\r\n  const [quickMessages, setQuickMessages] = useState([]);\r\n  const [options, setOptions] = useState([]);\r\n  const [popupOpen, setPopupOpen] = useState(false);\r\n\r\n  const { user } = useContext(AuthContext);\r\n\r\n  const { list: listQuickMessages } = useQuickMessages();\r\n\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      const companyId = localStorage.getItem(\"companyId\");\r\n      const messages = await listQuickMessages({ companyId, userId: user.id });\r\n      const options = messages.map((m) => {\r\n        let truncatedMessage = m.message;\r\n        if (isString(truncatedMessage) && truncatedMessage.length > 35) {\r\n          truncatedMessage = m.message.substring(0, 35) + \"...\";\r\n        }\r\n        return {\r\n          value: m.message,\r\n          label: `/${m.shortcode} - ${truncatedMessage}`,\r\n          mediaPath: m.mediaPath,\r\n        };\r\n      });\r\n      setQuickMessages(options);\r\n    }\r\n    fetchData();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (\r\n      isString(inputMessage) &&\r\n      !isEmpty(inputMessage) &&\r\n      inputMessage.length > 1\r\n    ) {\r\n      const firstWord = inputMessage.charAt(0);\r\n      setPopupOpen(firstWord.indexOf(\"/\") > -1);\r\n\r\n      const filteredOptions = quickMessages.filter(\r\n        (m) => m.label.indexOf(inputMessage) > -1\r\n      );\r\n      setOptions(filteredOptions);\r\n    } else {\r\n      setPopupOpen(false);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [inputMessage]);\r\n\r\n  const onKeyPress = (e) => {\r\n    if (loading || e.shiftKey) return;\r\n    else if (e.key === \"Enter\") {\r\n      handleSendMessage();\r\n    }\r\n  };\r\n\r\n  const onPaste = (e) => {\r\n    if (ticketStatus === \"open\") {\r\n      handleInputPaste(e);\r\n    }\r\n  };\r\n\r\n  const renderPlaceholder = () => {\r\n    if (ticketStatus === \"open\") {\r\n      return i18n.t(\"messagesInput.placeholderOpen\");\r\n    }\r\n    return i18n.t(\"messagesInput.placeholderClosed\");\r\n  };\r\n\r\n\r\n  const setInputRef = (input) => {\r\n    if (input) {\r\n      input.focus();\r\n      inputRef.current = input;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={classes.messageInputWrapper}>\r\n      <Autocomplete\r\n        freeSolo\r\n        open={popupOpen}\r\n        id=\"grouped-demo\"\r\n        value={inputMessage}\r\n        options={options}\r\n        closeIcon={null}\r\n        getOptionLabel={(option) => {\r\n          if (isObject(option)) {\r\n            return option.label;\r\n          } else {\r\n            return option;\r\n          }\r\n        }}\r\n        onChange={(event, opt) => {\r\n         \r\n          if (isObject(opt) && has(opt, \"value\") && isNil(opt.mediaPath)) {\r\n            setInputMessage(opt.value);\r\n            setTimeout(() => {\r\n              inputRef.current.scrollTop = inputRef.current.scrollHeight;\r\n            }, 200);\r\n          } else if (isObject(opt) && has(opt, \"value\") && !isNil(opt.mediaPath)) {\r\n            handleQuickAnswersClick(opt);\r\n\r\n            setTimeout(() => {\r\n              inputRef.current.scrollTop = inputRef.current.scrollHeight;\r\n            }, 200);\r\n          }\r\n        }}\r\n        onInputChange={(event, opt, reason) => {\r\n          if (reason === \"input\") {\r\n            setInputMessage(event.target.value);\r\n          }\r\n        }}\r\n        onPaste={onPaste}\r\n        onKeyPress={onKeyPress}\r\n        style={{ width: \"100%\" }}\r\n        renderInput={(params) => {\r\n          const { InputLabelProps, InputProps, ...rest } = params;\r\n          return (\r\n            <InputBase\r\n              {...params.InputProps}\r\n              {...rest}\r\n              disabled={disableOption()}\r\n              inputRef={setInputRef}\r\n              placeholder={renderPlaceholder()}\r\n              multiline\r\n              className={classes.messageInput}\r\n              maxRows={5}\r\n            />\r\n          );\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nconst MessageInputCustom = (props) => {\r\n  const { ticketStatus, ticketId } = props;\r\n  const classes = useStyles();\r\n\r\n  const [medias, setMedias] = useState([]);\r\n  const [inputMessage, setInputMessage] = useState(\"\");\r\n  const [showEmoji, setShowEmoji] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [recording, setRecording] = useState(false);\r\n  const inputRef = useRef();\r\n  const { setReplyingMessage, replyingMessage } =\r\n    useContext(ReplyMessageContext);\r\n  const { user } = useContext(AuthContext);\r\n\r\n  const [signMessage, setSignMessage] = useLocalStorage(\"signOption\", true);\r\n\r\n  useEffect(() => {\r\n    inputRef.current.focus();\r\n  }, [replyingMessage]);\r\n\r\n  useEffect(() => {\r\n    inputRef.current.focus();\r\n    return () => {\r\n      setInputMessage(\"\");\r\n      setShowEmoji(false);\r\n      setMedias([]);\r\n      setReplyingMessage(null);\r\n    };\r\n  }, [ticketId, setReplyingMessage]);\r\n\r\n  // const handleChangeInput = e => {\r\n  // \tif (isObject(e) && has(e, 'value')) {\r\n  // \t\tsetInputMessage(e.value);\r\n  // \t} else {\r\n  // \t\tsetInputMessage(e.target.value)\r\n  // \t}\r\n  // };\r\n\r\n  const handleAddEmoji = (e) => {\r\n    let emoji = e.native;\r\n    setInputMessage((prevState) => prevState + emoji);\r\n  };\r\n\r\n  const handleChangeMedias = (e) => {\r\n    if (!e.target.files) {\r\n      return;\r\n    }\r\n\r\n    const selectedMedias = Array.from(e.target.files);\r\n    setMedias(selectedMedias);\r\n  };\r\n\r\n  const handleInputPaste = (e) => {\r\n    if (e.clipboardData.files[0]) {\r\n      setMedias([e.clipboardData.files[0]]);\r\n    }\r\n  };\r\n\r\n  const handleUploadQuickMessageMedia = async (blob, message) => {\r\n    setLoading(true);\r\n    try {\r\n      const extension = blob.type.split(\"/\")[1];\r\n\r\n      const formData = new FormData();\r\n      const filename = `${new Date().getTime()}.${extension}`;\r\n      formData.append(\"medias\", blob, filename);\r\n      formData.append(\"body\",  message);\r\n      formData.append(\"fromMe\", true);\r\n\r\n      await api.post(`/messages/${ticketId}`, formData);\r\n    } catch (err) {\r\n      toastError(err);\r\n      setLoading(false);\r\n    }\r\n    setLoading(false);\r\n  };\r\n  \r\n  const handleQuickAnswersClick = async (value) => {\r\n    if (value.mediaPath) {\r\n      try {\r\n        const { data } = await axios.get(value.mediaPath, {\r\n          responseType: \"blob\",\r\n        });\r\n\r\n        handleUploadQuickMessageMedia(data, value.value);\r\n        setInputMessage(\"\");\r\n        return;\r\n        //  handleChangeMedias(response)\r\n      } catch (err) {\r\n        toastError(err);\r\n      }\r\n    }\r\n\r\n    setInputMessage(\"\");\r\n    setInputMessage(value.value);\r\n  };\r\n\r\n  const handleUploadMedia = async (e) => {\r\n    setLoading(true);\r\n    e.preventDefault();\r\n\r\n    const formData = new FormData();\r\n    formData.append(\"fromMe\", true);\r\n    medias.forEach((media) => {\r\n      formData.append(\"medias\", media);\r\n      formData.append(\"body\", media.name);\r\n    });\r\n\r\n    try {\r\n      await api.post(`/messages/${ticketId}`, formData);\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n\r\n    setLoading(false);\r\n    setMedias([]);\r\n  };\r\n\r\n  const handleSendMessage = async () => {\r\n    if (inputMessage.trim() === \"\") return;\r\n    setLoading(true);\r\n\r\n    const message = {\r\n      read: 1,\r\n      fromMe: true,\r\n      mediaUrl: \"\",\r\n      body: signMessage\r\n        ? `*${user?.name}:*\\n${inputMessage.trim()}`\r\n        : inputMessage.trim(),\r\n      quotedMsg: replyingMessage,\r\n    };\r\n    try {\r\n      await api.post(`/messages/${ticketId}`, message);\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n\r\n    setInputMessage(\"\");\r\n    setShowEmoji(false);\r\n    setLoading(false);\r\n    setReplyingMessage(null);\r\n  };\r\n\r\n  const handleStartRecording = async () => {\r\n    setLoading(true);\r\n    try {\r\n      await navigator.mediaDevices.getUserMedia({ audio: true });\r\n      await Mp3Recorder.start();\r\n      setRecording(true);\r\n      setLoading(false);\r\n    } catch (err) {\r\n      toastError(err);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleUploadAudio = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const [, blob] = await Mp3Recorder.stop().getMp3();\r\n      if (blob.size < 10000) {\r\n        setLoading(false);\r\n        setRecording(false);\r\n        return;\r\n      }\r\n\r\n      const formData = new FormData();\r\n      const filename = `audio-record-site-${new Date().getTime()}.mp3`;\r\n      formData.append(\"medias\", blob, filename);\r\n      formData.append(\"body\", filename);\r\n      formData.append(\"fromMe\", true);\r\n\r\n      await api.post(`/messages/${ticketId}`, formData);\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n\r\n    setRecording(false);\r\n    setLoading(false);\r\n  };\r\n\r\n  const handleCancelAudio = async () => {\r\n    try {\r\n      await Mp3Recorder.stop().getMp3();\r\n      setRecording(false);\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n  };\r\n\r\n  const disableOption = () => {\r\n    return loading || recording || ticketStatus !== \"open\";\r\n  };\r\n\r\n  const renderReplyingMessage = (message) => {\r\n    return (\r\n      <div className={classes.replyginMsgWrapper}>\r\n        <div className={classes.replyginMsgContainer}>\r\n          <span\r\n            className={clsx(classes.replyginContactMsgSideColor, {\r\n              [classes.replyginSelfMsgSideColor]: !message.fromMe,\r\n            })}\r\n          ></span>\r\n          <div className={classes.replyginMsgBody}>\r\n            {!message.fromMe && (\r\n              <span className={classes.messageContactName}>\r\n                {message.contact?.name}\r\n              </span>\r\n            )}\r\n            {message.body}\r\n          </div>\r\n        </div>\r\n        <IconButton\r\n          aria-label=\"showRecorder\"\r\n          component=\"span\"\r\n          disabled={loading || ticketStatus !== \"open\"}\r\n          onClick={() => setReplyingMessage(null)}\r\n        >\r\n          <ClearIcon className={classes.sendMessageIcons} />\r\n        </IconButton>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  if (medias.length > 0)\r\n    return (\r\n      <Paper elevation={0} square className={classes.viewMediaInputWrapper}>\r\n        <IconButton\r\n          aria-label=\"cancel-upload\"\r\n          component=\"span\"\r\n          onClick={(e) => setMedias([])}\r\n        >\r\n          <CancelIcon className={classes.sendMessageIcons} />\r\n        </IconButton>\r\n\r\n        {loading ? (\r\n          <div>\r\n            <CircularProgress className={classes.circleLoading} />\r\n          </div>\r\n        ) : (\r\n          <span>\r\n            {medias[0]?.name}\r\n            {/* <img src={media.preview} alt=\"\"></img> */}\r\n          </span>\r\n        )}\r\n        <IconButton\r\n          aria-label=\"send-upload\"\r\n          component=\"span\"\r\n          onClick={handleUploadMedia}\r\n          disabled={loading}\r\n        >\r\n          <SendIcon className={classes.sendMessageIcons} />\r\n        </IconButton>\r\n      </Paper>\r\n    );\r\n  else {\r\n    return (\r\n      <Paper square elevation={0} className={classes.mainWrapper}>\r\n        {replyingMessage && renderReplyingMessage(replyingMessage)}\r\n        <div className={classes.newMessageBox}>\r\n          <EmojiOptions\r\n            disabled={disableOption()}\r\n            handleAddEmoji={handleAddEmoji}\r\n            showEmoji={showEmoji}\r\n            setShowEmoji={setShowEmoji}\r\n          />\r\n\r\n          <FileInput\r\n            disableOption={disableOption}\r\n            handleChangeMedias={handleChangeMedias}\r\n          />\r\n\r\n          <SignSwitch\r\n            width={props.width}\r\n            setSignMessage={setSignMessage}\r\n            signMessage={signMessage}\r\n          />\r\n\r\n          <CustomInput\r\n            loading={loading}\r\n            inputRef={inputRef}\r\n            ticketStatus={ticketStatus}\r\n            inputMessage={inputMessage}\r\n            setInputMessage={setInputMessage}\r\n            // handleChangeInput={handleChangeInput}\r\n            handleSendMessage={handleSendMessage}\r\n            handleInputPaste={handleInputPaste}\r\n            disableOption={disableOption}\r\n            handleQuickAnswersClick={handleQuickAnswersClick}\r\n          />\r\n\r\n          <ActionButtons\r\n            inputMessage={inputMessage}\r\n            loading={loading}\r\n            recording={recording}\r\n            ticketStatus={ticketStatus}\r\n            handleSendMessage={handleSendMessage}\r\n            handleCancelAudio={handleCancelAudio}\r\n            handleUploadAudio={handleUploadAudio}\r\n            handleStartRecording={handleStartRecording}\r\n          />\r\n        </div>\r\n      </Paper>\r\n    );\r\n  }\r\n};\r\n\r\nexport default withWidth()(MessageInputCustom);\r\n","import { useState } from \"react\";\r\nimport toastError from \"../../errors/toastError\";\r\n\r\nexport function useLocalStorage(key, initialValue) {\r\n\tconst [storedValue, setStoredValue] = useState(() => {\r\n\t\ttry {\r\n\t\t\tconst item = localStorage.getItem(key);\r\n\t\t\treturn item ? JSON.parse(item) : initialValue;\r\n\t\t} catch (error) {\r\n\t\t\ttoastError(error);\r\n\t\t\treturn initialValue;\r\n\t\t}\r\n\t});\r\n\r\n\tconst setValue = value => {\r\n\t\ttry {\r\n\t\t\tconst valueToStore =\r\n\t\t\t\tvalue instanceof Function ? value(storedValue) : value;\r\n\r\n\t\t\tsetStoredValue(valueToStore);\r\n\r\n\t\t\tlocalStorage.setItem(key, JSON.stringify(valueToStore));\r\n\t\t} catch (error) {\r\n\t\t\ttoastError(error);\r\n\t\t}\r\n\t};\r\n\r\n\treturn [storedValue, setValue];\r\n}\r\n","import api from \"../../services/api\";\r\n\r\nconst useQueues = () => {\r\n\tconst findAll = async () => {\r\n        const { data } = await api.get(\"/queue\");\r\n        return data;\r\n    }\r\n\r\n\treturn { findAll };\r\n};\r\n\r\nexport default useQueues;\r\n","import React, { useState, useEffect, useRef, useContext } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport Button from \"@material-ui/core/Button\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport { Grid, ListItemText, Typography, makeStyles } from \"@material-ui/core\";\r\n\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Autocomplete, {\r\n  createFilterOptions,\r\n} from \"@material-ui/lab/Autocomplete\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport api from \"../../services/api\";\r\nimport ButtonWithSpinner from \"../ButtonWithSpinner\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport useQueues from \"../../hooks/useQueues\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  maxWidth: {\r\n    width: \"100%\",\r\n  },\r\n}));\r\n\r\nconst filterOptions = createFilterOptions({\r\n  trim: true,\r\n});\r\n\r\nconst TransferTicketModalCustom = ({ modalOpen, onClose, ticketid }) => {\r\n  const history = useHistory();\r\n  const [options, setOptions] = useState([]);\r\n  const [queues, setQueues] = useState([]);\r\n  const [allQueues, setAllQueues] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [searchParam, setSearchParam] = useState(\"\");\r\n  const [selectedUser, setSelectedUser] = useState(null);\r\n  const [selectedQueue, setSelectedQueue] = useState(\"\");\r\n  const classes = useStyles();\r\n  const { findAll: findAllQueues } = useQueues();\r\n  const isMounted = useRef(true);\r\n  const [whatsapps, setWhatsapps] = useState([]);\r\n  const [selectedWhatsapp, setSelectedWhatsapp] = useState(\"\");\r\n  const { user } = useContext(AuthContext);\r\n  const { companyId, whatsappId } = user;\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      isMounted.current = false;\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    const delayDebounceFn = setTimeout(() => {\r\n      const fetchContacts = async () => {\r\n        api\r\n          .get(`/whatsapp`, { params: { companyId, session: 0 } })\r\n          .then(({ data }) => setWhatsapps(data));\r\n      };\r\n\r\n      if (whatsappId !== null && whatsappId !== undefined) {\r\n        setSelectedWhatsapp(whatsappId)\r\n      }\r\n\r\n      if (user.queues.length === 1) {\r\n        setSelectedQueue(user.queues[0].id)\r\n      }\r\n      fetchContacts();\r\n      setLoading(false);\r\n    }, 500);\r\n    return () => clearTimeout(delayDebounceFn);\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    if (isMounted.current) {\r\n      const loadQueues = async () => {\r\n        const list = await findAllQueues();\r\n        setAllQueues(list);\r\n        setQueues(list);\r\n      };\r\n      loadQueues();\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!modalOpen || searchParam.length < 3) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n    const delayDebounceFn = setTimeout(() => {\r\n      setLoading(true);\r\n      const fetchUsers = async () => {\r\n        try {\r\n          const { data } = await api.get(\"/users/\", {\r\n            params: { searchParam },\r\n          });\r\n          setOptions(data.users);\r\n          setLoading(false);\r\n        } catch (err) {\r\n          setLoading(false);\r\n          toastError(err);\r\n        }\r\n      };\r\n\r\n      fetchUsers();\r\n    }, 500);\r\n    return () => clearTimeout(delayDebounceFn);\r\n  }, [searchParam, modalOpen]);\r\n\r\n  const handleClose = () => {\r\n    onClose();\r\n    setSearchParam(\"\");\r\n    setSelectedUser(null);\r\n  };\r\n\r\n  const handleSaveTicket = async (e) => {\r\n    e.preventDefault();\r\n    if (!ticketid) return;\r\n    if (!selectedQueue || selectedQueue === \"\") return;\r\n    setLoading(true);\r\n    try {\r\n      let data = {};\r\n\r\n      if (selectedUser) {\r\n        data.userId = selectedUser.id;\r\n      }\r\n\r\n      if (selectedQueue && selectedQueue !== null) {\r\n        data.queueId = selectedQueue;\r\n\r\n        if (!selectedUser) {\r\n          data.status = \"pending\";\r\n          data.userId = null;\r\n        }\r\n      }\r\n\r\n      if (selectedWhatsapp) {\r\n        data.whatsappId = selectedWhatsapp\r\n      }\r\n      await api.put(`/tickets/${ticketid}`, data);\r\n\r\n      history.push(`/tickets`);\r\n    } catch (err) {\r\n      setLoading(false);\r\n      toastError(err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Dialog open={modalOpen} onClose={handleClose} maxWidth=\"lg\" scroll=\"paper\">\r\n      <form onSubmit={handleSaveTicket}>\r\n        <DialogTitle id=\"form-dialog-title\">\r\n          {i18n.t(\"transferTicketModal.title\")}\r\n        </DialogTitle>\r\n        <DialogContent dividers>\r\n          <Autocomplete\r\n            style={{ width: 300, marginBottom: 20 }}\r\n            getOptionLabel={(option) => `${option.name}`}\r\n            onChange={(e, newValue) => {\r\n              setSelectedUser(newValue);\r\n              if (newValue != null && Array.isArray(newValue.queues)) {\r\n                setQueues(newValue.queues);\r\n              } else {\r\n                setQueues(allQueues);\r\n                setSelectedQueue(\"\");\r\n              }\r\n            }}\r\n            options={options}\r\n            filterOptions={filterOptions}\r\n            freeSolo\r\n            autoHighlight\r\n            noOptionsText={i18n.t(\"transferTicketModal.noOptions\")}\r\n            loading={loading}\r\n            renderInput={(params) => (\r\n              <TextField\r\n                {...params}\r\n                label={i18n.t(\"transferTicketModal.fieldLabel\")}\r\n                variant=\"outlined\"\r\n                autoFocus\r\n                onChange={(e) => setSearchParam(e.target.value)}\r\n                InputProps={{\r\n                  ...params.InputProps,\r\n                  endAdornment: (\r\n                    <React.Fragment>\r\n                      {loading ? (\r\n                        <CircularProgress color=\"inherit\" size={20} />\r\n                      ) : null}\r\n                      {params.InputProps.endAdornment}\r\n                    </React.Fragment>\r\n                  ),\r\n                }}\r\n              />\r\n            )}\r\n          />\r\n          <FormControl variant=\"outlined\" className={classes.maxWidth}>\r\n            <InputLabel>\r\n              {i18n.t(\"transferTicketModal.fieldQueueLabel\")}\r\n            </InputLabel>\r\n            <Select\r\n              value={selectedQueue}\r\n              onChange={(e) => setSelectedQueue(e.target.value)}\r\n              label={i18n.t(\"transferTicketModal.fieldQueuePlaceholder\")}\r\n            >\r\n              {queues.map((queue) => (\r\n                <MenuItem key={queue.id} value={queue.id}>\r\n                  {queue.name}\r\n                </MenuItem>\r\n              ))}\r\n            </Select>\r\n          </FormControl>\r\n          {/* CONEXAO */}\r\n          <Grid container spacing={2} style={{marginTop: '15px'}}>\r\n            <Grid xs={12} item>\r\n              <Select\r\n                required\r\n                fullWidth\r\n                displayEmpty\r\n                variant=\"outlined\"\r\n                value={selectedWhatsapp}\r\n                onChange={(e) => {\r\n                  setSelectedWhatsapp(e.target.value)\r\n                }}\r\n                MenuProps={{\r\n                  anchorOrigin: {\r\n                    vertical: \"bottom\",\r\n                    horizontal: \"left\",\r\n                  },\r\n                  transformOrigin: {\r\n                    vertical: \"top\",\r\n                    horizontal: \"left\",\r\n                  },\r\n                  getContentAnchorEl: null,\r\n                }}\r\n                renderValue={() => {\r\n                  if (selectedWhatsapp === \"\") {\r\n                    return \"Selecione uma Conexão\"\r\n                  }\r\n                  const whatsapp = whatsapps.find(w => w.id === selectedWhatsapp)\r\n                  return whatsapp.name\r\n                }}\r\n              >\r\n                {whatsapps?.length > 0 &&\r\n                  whatsapps.map((whatsapp, key) => (\r\n                    <MenuItem dense key={key} value={whatsapp.id}>\r\n                      <ListItemText\r\n                        primary={\r\n                          <>\r\n                            {/* {IconChannel(whatsapp.channel)} */}\r\n                            <Typography component=\"span\" style={{ fontSize: 14, marginLeft: \"10px\", display: \"inline-flex\", alignItems: \"center\", lineHeight: \"2\" }}>\r\n                              {whatsapp.name} &nbsp; <p className={(whatsapp.status) === 'CONNECTED' ? classes.online : classes.offline} >({whatsapp.status})</p>\r\n                            </Typography>\r\n                          </>\r\n                        }\r\n                      />\r\n                    </MenuItem>\r\n                  ))}\r\n              </Select>\r\n            </Grid>\r\n          </Grid>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            onClick={handleClose}\r\n            color=\"secondary\"\r\n            disabled={loading}\r\n            variant=\"outlined\"\r\n          >\r\n            {i18n.t(\"transferTicketModal.buttons.cancel\")}\r\n          </Button>\r\n          <ButtonWithSpinner\r\n            variant=\"contained\"\r\n            type=\"submit\"\r\n            color=\"primary\"\r\n            loading={loading}\r\n          >\r\n            {i18n.t(\"transferTicketModal.buttons.ok\")}\r\n          </ButtonWithSpinner>\r\n        </DialogActions>\r\n      </form>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default TransferTicketModalCustom;\r\n","import React from \"react\";\r\n\r\nimport TextField from \"@material-ui/core/TextField\";\r\n\r\nconst InputComponent = ({ inputRef, ...other }) => <div {...other} />;\r\n\r\nconst OutlinedDiv = ({\r\n  InputProps,\r\n  children,\r\n  InputLabelProps,\r\n  label,\r\n  ...other\r\n}) => {\r\n  return (\r\n    <TextField\r\n      {...other}\r\n      variant=\"outlined\"\r\n      label={label}\r\n      multiline\r\n      InputLabelProps={{ shrink: true, ...InputLabelProps }}\r\n      InputProps={{\r\n        inputComponent: InputComponent,\r\n        ...InputProps\r\n      }}\r\n      inputProps={{ children: children }}\r\n    />\r\n  );\r\n};\r\n\r\nexport default OutlinedDiv;","import React from \"react\";\r\nimport { Chip, makeStyles } from \"@material-ui/core\";\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport OutlinedDiv from \"../OutlinedDiv\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    chip: {\r\n        margin: theme.spacing(0.5),\r\n        cursor: \"pointer\"\r\n    }\r\n}));\r\n\r\nconst MessageVariablesPicker = ({ onClick, disabled }) => {\r\n    const classes = useStyles();\r\n\r\n    const handleClick = (e, value) => {\r\n        e.preventDefault();\r\n        if (disabled) return;\r\n        onClick(value);\r\n    };\r\n\r\n    const msgVars = [\r\n        {\r\n            name: i18n.t(\"messageVariablesPicker.vars.contactFirstName\"),\r\n            value: \"{{firstName}}\"\r\n        },\r\n        {\r\n            name: i18n.t(\"messageVariablesPicker.vars.contactName\"),\r\n            value: \"{{name}} \"\r\n        },\r\n        {\r\n            name: i18n.t(\"messageVariablesPicker.vars.greeting\"),\r\n            value: \"{{ms}} \"\r\n        },\r\n        {\r\n            name: i18n.t(\"messageVariablesPicker.vars.protocolNumber\"),\r\n            value: \"{{protocol}} \"\r\n        },\r\n        {\r\n            name: i18n.t(\"messageVariablesPicker.vars.date\"),\r\n            value: \"{{date}} \"\r\n        },\r\n        {\r\n            name: i18n.t(\"messageVariablesPicker.vars.hour\"),\r\n            value: \"{{hour}} \"\r\n        },\r\n    ];\r\n\r\n    return (\r\n        <OutlinedDiv\r\n            margin=\"dense\"\r\n            fullWidth\r\n            label={i18n.t(\"messageVariablesPicker.label\")}\r\n            disabled={disabled}\r\n        >\r\n            {msgVars.map(msgVar => (\r\n                <Chip\r\n                    key={msgVar.value}\r\n                    onMouseDown={e => handleClick(e, msgVar.value)}\r\n                    label={msgVar.name}\r\n                    size=\"small\"\r\n                    className={classes.chip}\r\n                    color=\"primary\"\r\n                />\r\n            ))}\r\n        </OutlinedDiv>\r\n    );\r\n};\r\n\r\nexport default MessageVariablesPicker;","import React, { useState, useEffect, useContext, useRef } from \"react\";\r\n\r\nimport * as Yup from \"yup\";\r\nimport { Formik, Form, Field } from \"formik\";\r\nimport { toast } from \"react-toastify\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { green } from \"@material-ui/core/colors\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\n\r\nimport api from \"../../services/api\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport { FormControl, Grid, IconButton } from \"@material-ui/core\";\r\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\r\nimport moment from \"moment\"\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\nimport { isArray, capitalize } from \"lodash\";\r\nimport DeleteOutline from \"@material-ui/icons/DeleteOutline\";\r\nimport AttachFile from \"@material-ui/icons/AttachFile\";\r\nimport { head } from \"lodash\";\r\nimport ConfirmationModal from \"../ConfirmationModal\";\r\nimport MessageVariablesPicker from \"../MessageVariablesPicker\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\troot: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexWrap: \"wrap\",\r\n\t},\r\n\tmultFieldLine: {\r\n\t\tdisplay: \"flex\",\r\n\t\t\"& > *:not(:last-child)\": {\r\n\t\t\tmarginRight: theme.spacing(1),\r\n\t\t},\r\n\t},\r\n\r\n\tbtnWrapper: {\r\n\t\tposition: \"relative\",\r\n\t},\r\n\r\n\tbuttonProgress: {\r\n\t\tcolor: green[500],\r\n\t\tposition: \"absolute\",\r\n\t\ttop: \"50%\",\r\n\t\tleft: \"50%\",\r\n\t\tmarginTop: -12,\r\n\t\tmarginLeft: -12,\r\n\t},\r\n\tformControl: {\r\n\t\tmargin: theme.spacing(1),\r\n\t\tminWidth: 120,\r\n\t},\r\n}));\r\n\r\nconst ScheduleSchema = Yup.object().shape({\r\n\tbody: Yup.string()\r\n\t\t.min(5, \"Mensagem muito curta\")\r\n\t\t.required(\"Obrigatório\"),\r\n\tcontactId: Yup.number().required(\"Obrigatório\"),\r\n\tsendAt: Yup.string().required(\"Obrigatório\")\r\n});\r\n\r\nconst ScheduleModal = ({ open, onClose, scheduleId, contactId, cleanContact, reload }) => {\r\n\tconst classes = useStyles();\r\n\tconst history = useHistory();\r\n\tconst { user } = useContext(AuthContext);\r\n\r\n\tconst initialState = {\r\n\t\tbody: \"\",\r\n\t\tcontactId: \"\",\r\n\t\tsendAt: moment().add(1, 'hour').format('YYYY-MM-DDTHH:mm'),\r\n\t\tsentAt: \"\"\r\n\t};\r\n\r\n\tconst initialContact = {\r\n\t\tid: \"\",\r\n\t\tname: \"\"\r\n\t}\r\n\r\n\tconst [schedule, setSchedule] = useState(initialState);\r\n\tconst [currentContact, setCurrentContact] = useState(initialContact);\r\n\tconst [contacts, setContacts] = useState([initialContact]);\r\n\tconst [attachment, setAttachment] = useState(null);\r\n\tconst attachmentFile = useRef(null);\r\n\tconst [confirmationOpen, setConfirmationOpen] = useState(false);\r\n\tconst messageInputRef = useRef();\r\n\r\n\tuseEffect(() => {\r\n\t\tif (contactId && contacts.length) {\r\n\t\t\tconst contact = contacts.find(c => c.id === contactId);\r\n\t\t\tif (contact) {\r\n\t\t\t\tsetCurrentContact(contact);\r\n\t\t\t}\r\n\t\t}\r\n\t}, [contactId, contacts]);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst { companyId } = user;\r\n\t\tif (open) {\r\n\t\t\ttry {\r\n\t\t\t\t(async () => {\r\n\t\t\t\t\tconst { data: contactList } = await api.get('/contacts/list', { params: { companyId: companyId } });\r\n\t\t\t\t\tlet customList = contactList.map((c) => ({ id: c.id, name: c.name }));\r\n\t\t\t\t\tif (isArray(customList)) {\r\n\t\t\t\t\t\tsetContacts([{ id: \"\", name: \"\" }, ...customList]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (contactId) {\r\n\t\t\t\t\t\tsetSchedule(prevState => {\r\n\t\t\t\t\t\t\treturn { ...prevState, contactId }\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (!scheduleId) return;\r\n\r\n\t\t\t\t\tconst { data } = await api.get(`/schedules/${scheduleId}`);\r\n\t\t\t\t\tsetSchedule(prevState => {\r\n\t\t\t\t\t\treturn { ...prevState, ...data, sendAt: moment(data.sendAt).format('YYYY-MM-DDTHH:mm') };\r\n\t\t\t\t\t});\r\n\t\t\t\t\tsetCurrentContact(data.contact);\r\n\t\t\t\t})()\r\n\t\t\t} catch (err) {\r\n\t\t\t\ttoastError(err);\r\n\t\t\t}\r\n\t\t}\r\n\t}, [scheduleId, contactId, open, user]);\r\n\r\n\tconst handleClose = () => {\r\n\t\tonClose();\r\n\t\tsetAttachment(null);\r\n\t\tsetSchedule(initialState);\r\n\t};\r\n\r\n\tconst handleAttachmentFile = (e) => {\r\n\t\tconst file = head(e.target.files);\r\n\t\tif (file) {\r\n\t\t\tsetAttachment(file);\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleSaveSchedule = async values => {\r\n\t\tconst scheduleData = { ...values, userId: user.id };\r\n\t\ttry {\r\n\t\t\tif (scheduleId) {\r\n\t\t\t\tawait api.put(`/schedules/${scheduleId}`, scheduleData);\r\n\t\t\t\tif (attachment != null) {\r\n\t\t\t\t\tconst formData = new FormData();\r\n\t\t\t\t\tformData.append(\"file\", attachment);\r\n\t\t\t\t\tawait api.post(\r\n\t\t\t\t\t\t`/schedules/${scheduleId}/media-upload`,\r\n\t\t\t\t\t\tformData\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tconst { data } = await api.post(\"/schedules\", scheduleData);\r\n\t\t\t\tif (attachment != null) {\r\n\t\t\t\t\tconst formData = new FormData();\r\n\t\t\t\t\tformData.append(\"file\", attachment);\r\n\t\t\t\t\tawait api.post(`/schedules/${data.id}/media-upload`, formData);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\ttoast.success(i18n.t(\"scheduleModal.success\"));\r\n\t\t\tif (typeof reload == 'function') {\r\n\t\t\t\treload();\r\n\t\t\t}\r\n\t\t\tif (contactId) {\r\n\t\t\t\tif (typeof cleanContact === 'function') {\r\n\t\t\t\t\tcleanContact();\r\n\t\t\t\t\thistory.push('/schedules');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\ttoastError(err);\r\n\t\t}\r\n\t\tsetCurrentContact(initialContact);\r\n\t\tsetSchedule(initialState);\r\n\t\thandleClose();\r\n\t};\r\n\tconst handleClickMsgVar = async (msgVar, setValueFunc) => {\r\n\t\tconst el = messageInputRef.current;\r\n\t\tconst firstHalfText = el.value.substring(0, el.selectionStart);\r\n\t\tconst secondHalfText = el.value.substring(el.selectionEnd);\r\n\t\tconst newCursorPos = el.selectionStart + msgVar.length;\r\n\r\n\t\tsetValueFunc(\"body\", `${firstHalfText}${msgVar}${secondHalfText}`);\r\n\r\n\t\tawait new Promise(r => setTimeout(r, 100));\r\n\t\tmessageInputRef.current.setSelectionRange(newCursorPos, newCursorPos);\r\n\t};\r\n\r\n\tconst deleteMedia = async () => {\r\n\t\tif (attachment) {\r\n\t\t\tsetAttachment(null);\r\n\t\t\tattachmentFile.current.value = null;\r\n\t\t}\r\n\r\n\t\tif (schedule.mediaPath) {\r\n\t\t\tawait api.delete(`/schedules/${schedule.id}/media-upload`);\r\n\t\t\tsetSchedule((prev) => ({\r\n\t\t\t\t...prev,\r\n\t\t\t\tmediaPath: null,\r\n\t\t\t}));\r\n\t\t\ttoast.success(i18n.t(\"scheduleModal.toasts.deleted\"));\r\n\t\t\tif (typeof reload == \"function\") {\r\n\t\t\t\tconsole.log(reload);\r\n\t\t\t\tconsole.log(\"1\");\r\n\t\t\t\treload();\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<ConfirmationModal\r\n\t\t\t\ttitle={i18n.t(\"scheduleModal.confirmationModal.deleteTitle\")}\r\n\t\t\t\topen={confirmationOpen}\r\n\t\t\t\tonClose={() => setConfirmationOpen(false)}\r\n\t\t\t\tonConfirm={deleteMedia}\r\n\t\t\t>\r\n\t\t\t\t{i18n.t(\"scheduleModal.confirmationModal.deleteMessage\")}\r\n\t\t\t</ConfirmationModal>\r\n\t\t\t<Dialog\r\n\t\t\t\topen={open}\r\n\t\t\t\tonClose={handleClose}\r\n\t\t\t\tmaxWidth=\"xs\"\r\n\t\t\t\tfullWidth\r\n\t\t\t\tscroll=\"paper\"\r\n\t\t\t>\r\n\t\t\t\t<DialogTitle id=\"form-dialog-title\">\r\n\t\t\t\t\t{schedule.status === 'ERRO' ? 'Erro de Envio' : `Mensagem ${capitalize(schedule.status)}`}\r\n\t\t\t\t</DialogTitle>\r\n\t\t\t\t<div style={{ display: \"none\" }}>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"file\"\r\n\t\t\t\t\t\taccept=\".png,.jpg,.jpeg\"\r\n\t\t\t\t\t\tref={attachmentFile}\r\n\t\t\t\t\t\tonChange={(e) => handleAttachmentFile(e)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<Formik\r\n\t\t\t\t\tinitialValues={schedule}\r\n\t\t\t\t\tenableReinitialize={true}\r\n\t\t\t\t\tvalidationSchema={ScheduleSchema}\r\n\t\t\t\t\tonSubmit={(values, actions) => {\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\thandleSaveSchedule(values);\r\n\t\t\t\t\t\t\tactions.setSubmitting(false);\r\n\t\t\t\t\t\t}, 400);\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{({ touched, errors, isSubmitting, values, setFieldValue }) => (\r\n\t\t\t\t\t\t<Form>\r\n\t\t\t\t\t\t\t<DialogContent dividers>\r\n\t\t\t\t\t\t\t\t<div className={classes.multFieldLine}>\r\n\t\t\t\t\t\t\t\t\t<FormControl\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<Autocomplete\r\n\t\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={currentContact}\r\n\t\t\t\t\t\t\t\t\t\t\toptions={contacts}\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e, contact) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tconst contactId = contact ? contact.id : '';\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetSchedule({ ...schedule, contactId });\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetCurrentContact(contact ? contact : initialContact);\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\tgetOptionLabel={(option) => option.name}\r\n\t\t\t\t\t\t\t\t\t\t\tgetOptionSelected={(option, value) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn value.id === option.id\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\trenderInput={(params) => <TextField {...params} variant=\"outlined\" placeholder=\"Contato\" />}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t<div className={classes.multFieldLine}>\r\n\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\tas={TextField}\r\n\t\t\t\t\t\t\t\t\t\trows={9}\r\n\t\t\t\t\t\t\t\t\t\tmultiline={true}\r\n\t\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"scheduleModal.form.body\")}\r\n\t\t\t\t\t\t\t\t\t\tname=\"body\"\r\n\t\t\t\t\t\t\t\t\t\tinputRef={messageInputRef}\r\n\t\t\t\t\t\t\t\t\t\terror={touched.body && Boolean(errors.body)}\r\n\t\t\t\t\t\t\t\t\t\thelperText={touched.body && errors.body}\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t\tmargin=\"dense\"\r\n\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<Grid item>\r\n\t\t\t\t\t\t\t\t\t<MessageVariablesPicker\r\n\t\t\t\t\t\t\t\t\t\tdisabled={isSubmitting}\r\n\t\t\t\t\t\t\t\t\t\tonClick={value => handleClickMsgVar(value, setFieldValue)}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t<div className={classes.multFieldLine}>\r\n\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\tas={TextField}\r\n\t\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"scheduleModal.form.sendAt\")}\r\n\t\t\t\t\t\t\t\t\t\ttype=\"datetime-local\"\r\n\t\t\t\t\t\t\t\t\t\tname=\"sendAt\"\r\n\t\t\t\t\t\t\t\t\t\tInputLabelProps={{\r\n\t\t\t\t\t\t\t\t\t\t\tshrink: true,\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\terror={touched.sendAt && Boolean(errors.sendAt)}\r\n\t\t\t\t\t\t\t\t\t\thelperText={touched.sendAt && errors.sendAt}\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t{(schedule.mediaPath || attachment) && (\r\n\t\t\t\t\t\t\t\t\t<Grid xs={12} item>\r\n\t\t\t\t\t\t\t\t\t\t<Button startIcon={<AttachFile />}>\r\n\t\t\t\t\t\t\t\t\t\t\t{attachment ? attachment.name : schedule.mediaName}\r\n\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => setConfirmationOpen(true)}\r\n\t\t\t\t\t\t\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<DeleteOutline color=\"secondary\" />\r\n\t\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</DialogContent>\r\n\t\t\t\t\t\t\t<DialogActions>\r\n\t\t\t\t\t\t\t\t{!attachment && !schedule.mediaPath && (\r\n\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => attachmentFile.current.click()}\r\n\t\t\t\t\t\t\t\t\t\tdisabled={isSubmitting}\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{i18n.t(\"quickMessages.buttons.attach\")}\r\n\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\tonClick={handleClose}\r\n\t\t\t\t\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\t\t\t\t\tdisabled={isSubmitting}\r\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{i18n.t(\"scheduleModal.buttons.cancel\")}\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t{(schedule.sentAt === null || schedule.sentAt === \"\") && (\r\n\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\t\t\tdisabled={isSubmitting}\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\t\t\t\tclassName={classes.btnWrapper}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{scheduleId\r\n\t\t\t\t\t\t\t\t\t\t\t? `${i18n.t(\"scheduleModal.buttons.okEdit\")}`\r\n\t\t\t\t\t\t\t\t\t\t\t: `${i18n.t(\"scheduleModal.buttons.okAdd\")}`}\r\n\t\t\t\t\t\t\t\t\t\t{isSubmitting && (\r\n\t\t\t\t\t\t\t\t\t\t\t<CircularProgress\r\n\t\t\t\t\t\t\t\t\t\t\t\tsize={24}\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.buttonProgress}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</DialogActions>\r\n\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Formik>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default ScheduleModal;","import React, { useContext, useEffect, useRef, useState } from \"react\";\r\n\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport Menu from \"@material-ui/core/Menu\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport api from \"../../services/api\";\r\nimport ConfirmationModal from \"../ConfirmationModal\";\r\nimport TransferTicketModalCustom from \"../TransferTicketModalCustom\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport { Can } from \"../Can\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\n\r\nimport ScheduleModal from \"../ScheduleModal\";\r\n\r\nconst TicketOptionsMenu = ({ ticket, menuOpen, handleClose, anchorEl }) => {\r\n\tconst [confirmationOpen, setConfirmationOpen] = useState(false);\r\n\tconst [transferTicketModalOpen, setTransferTicketModalOpen] = useState(false);\r\n\tconst isMounted = useRef(true);\r\n\tconst { user } = useContext(AuthContext);\r\n\r\n\tconst [scheduleModalOpen, setScheduleModalOpen] = useState(false);\r\n\tconst [contactId, setContactId] = useState(null);\r\n\r\n\tuseEffect(() => {\r\n\t\treturn () => {\r\n\t\t\tisMounted.current = false;\r\n\t\t};\r\n\t}, []);\r\n\r\n\tconst handleDeleteTicket = async () => {\r\n\t\ttry {\r\n\t\t\tawait api.delete(`/tickets/${ticket.id}`);\r\n\t\t} catch (err) {\r\n\t\t\ttoastError(err);\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleOpenConfirmationModal = e => {\r\n\t\tsetConfirmationOpen(true);\r\n\t\thandleClose();\r\n\t};\r\n\r\n\tconst handleOpenTransferModal = e => {\r\n\t\tsetTransferTicketModalOpen(true);\r\n\t\thandleClose();\r\n\t};\r\n\r\n\tconst handleCloseTransferTicketModal = () => {\r\n\t\tif (isMounted.current) {\r\n\t\t\tsetTransferTicketModalOpen(false);\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleOpenScheduleModal = () => {\r\n\t\thandleClose();\r\n\t\tsetContactId(ticket.contact.id);\r\n\t\tsetScheduleModalOpen(true);\r\n\t}\r\n\r\n\tconst handleCloseScheduleModal = () => {\r\n\t\tsetScheduleModalOpen(false);\r\n\t\tsetContactId(null);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Menu\r\n\t\t\t\tid=\"menu-appbar\"\r\n\t\t\t\tanchorEl={anchorEl}\r\n\t\t\t\tgetContentAnchorEl={null}\r\n\t\t\t\tanchorOrigin={{\r\n\t\t\t\t\tvertical: \"bottom\",\r\n\t\t\t\t\thorizontal: \"right\",\r\n\t\t\t\t}}\r\n\t\t\t\tkeepMounted\r\n\t\t\t\ttransformOrigin={{\r\n\t\t\t\t\tvertical: \"top\",\r\n\t\t\t\t\thorizontal: \"right\",\r\n\t\t\t\t}}\r\n\t\t\t\topen={menuOpen}\r\n\t\t\t\tonClose={handleClose}\r\n\t\t\t>\r\n\t\t\t\t<MenuItem onClick={handleOpenScheduleModal}>\r\n\t\t\t\t\t{i18n.t(\"ticketOptionsMenu.schedule\")}\r\n\t\t\t\t</MenuItem>\r\n\t\t\t\t<MenuItem onClick={handleOpenTransferModal}>\r\n\t\t\t\t\t{i18n.t(\"ticketOptionsMenu.transfer\")}\r\n\t\t\t\t</MenuItem>\r\n\t\t\t\t<Can\r\n\t\t\t\t\trole={user.profile}\r\n\t\t\t\t\tperform=\"ticket-options:deleteTicket\"\r\n\t\t\t\t\tyes={() => (\r\n\t\t\t\t\t\t<MenuItem onClick={handleOpenConfirmationModal}>\r\n\t\t\t\t\t\t\t{i18n.t(\"ticketOptionsMenu.delete\")}\r\n\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t)}\r\n\t\t\t\t/>\r\n\t\t\t</Menu>\r\n\t\t\t<ConfirmationModal\r\n\t\t\t\ttitle={`${i18n.t(\"ticketOptionsMenu.confirmationModal.title\")}${\r\n\t\t\t\t\tticket.id\r\n\t\t\t\t} ${i18n.t(\"ticketOptionsMenu.confirmationModal.titleFrom\")} ${\r\n\t\t\t\t\tticket.contact.name\r\n\t\t\t\t}?`}\r\n\t\t\t\topen={confirmationOpen}\r\n\t\t\t\tonClose={setConfirmationOpen}\r\n\t\t\t\tonConfirm={handleDeleteTicket}\r\n\t\t\t>\r\n\t\t\t\t{i18n.t(\"ticketOptionsMenu.confirmationModal.message\")}\r\n\t\t\t</ConfirmationModal>\r\n\t\t\t<TransferTicketModalCustom\r\n\t\t\t\tmodalOpen={transferTicketModalOpen}\r\n\t\t\t\tonClose={handleCloseTransferTicketModal}\r\n\t\t\t\tticketid={ticket.id}\r\n\t\t\t/>\r\n\t\t\t<ScheduleModal\r\n\t\t\t\topen={scheduleModalOpen}\r\n\t\t\t\tonClose={handleCloseScheduleModal}\r\n\t\t\t\taria-labelledby=\"form-dialog-title\"\r\n\t\t\t\tcontactId={contactId}\r\n\t\t\t/>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default TicketOptionsMenu;","import React, { useContext, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport { makeStyles, createTheme, ThemeProvider } from \"@material-ui/core/styles\";\r\nimport { IconButton } from \"@material-ui/core\";\r\nimport { MoreVert, Replay } from \"@material-ui/icons\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport api from \"../../services/api\";\r\nimport TicketOptionsMenu from \"../TicketOptionsMenu\";\r\nimport ButtonWithSpinner from \"../ButtonWithSpinner\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\nimport { TicketsContext } from \"../../context/Tickets/TicketsContext\";\r\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\r\nimport UndoRoundedIcon from '@material-ui/icons/UndoRounded';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport { green } from '@material-ui/core/colors';\r\n\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tactionButtons: {\r\n\t\tmarginRight: 6,\r\n\t\tflex: \"none\",\r\n\t\talignSelf: \"center\",\r\n\t\tmarginLeft: \"auto\",\r\n\t\t\"& > *\": {\r\n\t\t\tmargin: theme.spacing(0.5),\r\n\t\t},\r\n\t},\r\n}));\r\n\r\nconst TicketActionButtonsCustom = ({ ticket }) => {\r\n\tconst classes = useStyles();\r\n\tconst history = useHistory();\r\n\tconst [anchorEl, setAnchorEl] = useState(null);\r\n\tconst [loading, setLoading] = useState(false);\r\n\tconst ticketOptionsMenuOpen = Boolean(anchorEl);\r\n\tconst { user } = useContext(AuthContext);\r\n\tconst { setCurrentTicket } = useContext(TicketsContext);\r\n\r\n\tconst customTheme = createTheme({\r\n\t\tpalette: {\r\n\t\t  \tprimary: green,\r\n\t\t}\r\n\t});\r\n\r\n\tconst handleOpenTicketOptionsMenu = e => {\r\n\t\tsetAnchorEl(e.currentTarget);\r\n\t};\r\n\r\n\tconst handleCloseTicketOptionsMenu = e => {\r\n\t\tsetAnchorEl(null);\r\n\t};\r\n\r\n\tconst handleUpdateTicketStatus = async (e, status, userId) => {\r\n\t\tsetLoading(true);\r\n\t\ttry {\r\n\t\t\tawait api.put(`/tickets/${ticket.id}`, {\r\n\t\t\t\tstatus: status,\r\n\t\t\t\tuserId: userId || null,\r\n\t\t\t\tuseIntegration: status === \"closed\" ? false : ticket.useIntegration,\r\n\t\t\t\tpromptId: status === \"closed\" ? false : ticket.promptId,\r\n\t\t\t\tintegrationId: status === \"closed\" ? false : ticket.integrationId\r\n\t\t\t});\r\n\r\n\t\t\tsetLoading(false);\r\n\t\t\tif (status === \"open\") {\r\n\t\t\t\tsetCurrentTicket({ ...ticket, code: \"#open\" });\r\n\t\t\t} else {\r\n\t\t\t\tsetCurrentTicket({ id: null, code: null })\r\n\t\t\t\thistory.push(\"/tickets\");\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\tsetLoading(false);\r\n\t\t\ttoastError(err);\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className={classes.actionButtons}>\r\n\t\t\t{ticket.status === \"closed\" && (\r\n\t\t\t\t<ButtonWithSpinner\r\n\t\t\t\t\tloading={loading}\r\n\t\t\t\t\tstartIcon={<Replay />}\r\n\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\tonClick={e => handleUpdateTicketStatus(e, \"open\", user?.id)}\r\n\t\t\t\t>\r\n\t\t\t\t\t{i18n.t(\"messagesList.header.buttons.reopen\")}\r\n\t\t\t\t</ButtonWithSpinner>\r\n\t\t\t)}\r\n\t\t\t{ticket.status === \"open\" && (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<Tooltip title={i18n.t(\"messagesList.header.buttons.return\")}>\r\n\t\t\t\t\t\t<IconButton onClick={e => handleUpdateTicketStatus(e, \"pending\", null)}>\r\n\t\t\t\t\t\t\t<UndoRoundedIcon />\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t<ThemeProvider theme={customTheme}>\r\n\t\t\t\t\t\t<Tooltip title={i18n.t(\"messagesList.header.buttons.resolve\")}>\r\n\t\t\t\t\t\t\t<IconButton onClick={e => handleUpdateTicketStatus(e, \"closed\", user?.id)} color=\"primary\">\r\n\t\t\t\t\t\t\t\t<CheckCircleIcon />\r\n\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t</ThemeProvider>\r\n\t\t\t\t\t{/* <ButtonWithSpinner\r\n\t\t\t\t\t\tloading={loading}\r\n\t\t\t\t\t\tstartIcon={<Replay />}\r\n\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\tonClick={e => handleUpdateTicketStatus(e, \"pending\", null)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{i18n.t(\"messagesList.header.buttons.return\")}\r\n\t\t\t\t\t</ButtonWithSpinner>\r\n\t\t\t\t\t<ButtonWithSpinner\r\n\t\t\t\t\t\tloading={loading}\r\n\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\tonClick={e => handleUpdateTicketStatus(e, \"closed\", user?.id)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{i18n.t(\"messagesList.header.buttons.resolve\")}\r\n\t\t\t\t\t</ButtonWithSpinner> */}\r\n\t\t\t\t\t<IconButton onClick={handleOpenTicketOptionsMenu}>\r\n\t\t\t\t\t\t<MoreVert />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t<TicketOptionsMenu\r\n\t\t\t\t\t\tticket={ticket}\r\n\t\t\t\t\t\tanchorEl={anchorEl}\r\n\t\t\t\t\t\tmenuOpen={ticketOptionsMenuOpen}\r\n\t\t\t\t\t\thandleClose={handleCloseTicketOptionsMenu}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</>\r\n\t\t\t)}\r\n\t\t\t{ticket.status === \"pending\" && (\r\n\t\t\t\t<ButtonWithSpinner\r\n\t\t\t\t\tloading={loading}\r\n\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\tonClick={e => handleUpdateTicketStatus(e, \"open\", user?.id)}\r\n\t\t\t\t>\r\n\t\t\t\t\t{i18n.t(\"messagesList.header.buttons.accept\")}\r\n\t\t\t\t</ButtonWithSpinner>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default TicketActionButtonsCustom;\r\n","import { Chip, Paper, TextField } from \"@material-ui/core\";\r\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { isArray, isString } from \"lodash\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport api from \"../../services/api\";\r\n\r\nexport function TagsContainer({ ticket }) {\r\n\r\n    const [tags, setTags] = useState([]);\r\n    const [selecteds, setSelecteds] = useState([]);\r\n    const isMounted = useRef(true);\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            isMounted.current = false\r\n        }\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        if (isMounted.current) {\r\n            loadTags().then(() => {\r\n                if (Array.isArray(ticket.tags)) {\r\n                    setSelecteds(ticket.tags);\r\n                } else {\r\n                    setSelecteds([]);\r\n                }\r\n            });\r\n        }\r\n    }, [ticket]);\r\n\r\n    const createTag = async (data) => {\r\n        try {\r\n            const { data: responseData } = await api.post(`/tags`, data);\r\n            return responseData;\r\n        } catch (err) {\r\n            toastError(err);\r\n        }\r\n    }\r\n\r\n    const loadTags = async () => {\r\n        try {\r\n            const { data } = await api.get(`/tags/list`);\r\n            setTags(data);\r\n        } catch (err) {\r\n            toastError(err);\r\n        }\r\n    }\r\n\r\n    const syncTags = async (data) => {\r\n        try {\r\n            const { data: responseData } = await api.post(`/tags/sync`, data);\r\n            return responseData;\r\n        } catch (err) {\r\n            toastError(err);\r\n        }\r\n    }\r\n\r\n    const onChange = async (value, reason) => {\r\n        let optionsChanged = []\r\n        if (reason === 'create-option') {\r\n            if (isArray(value)) {\r\n                for (let item of value) {\r\n                    if (isString(item)) {\r\n                        const newTag = await createTag({ name: item })\r\n                        optionsChanged.push(newTag);\r\n                    } else {\r\n                        optionsChanged.push(item);\r\n                    }\r\n                }\r\n            }\r\n            await loadTags();\r\n        } else {\r\n            optionsChanged = value;\r\n        }\r\n        setSelecteds(optionsChanged);\r\n        await syncTags({ ticketId: ticket.id, tags: optionsChanged });\r\n    }\r\n\r\n    return (\r\n        <Paper style={{ padding: 12 }}>\r\n            <Autocomplete\r\n                multiple\r\n                size=\"small\"\r\n                options={tags}\r\n                value={selecteds}\r\n                freeSolo\r\n                onChange={(e, v, r) => onChange(v, r)}\r\n                getOptionLabel={(option) => option.name}\r\n                renderTags={(value, getTagProps) =>\r\n                    value.map((option, index) => (\r\n                        <Chip\r\n                            variant=\"outlined\"\r\n                            style={{\r\n                                background: option.color || '#eee',\r\n                                color: \"#FFF\",\r\n                                marginRight: 1,\r\n                                fontWeight: 600,\r\n                                borderRadius: 3,\r\n                                fontSize: \"0.8em\",\r\n                                whiteSpace: \"nowrap\"\r\n                            }}\r\n                            label={option.name.toUpperCase()}\r\n                            {...getTagProps({ index })}\r\n                            size=\"small\"\r\n                        />\r\n                    ))\r\n                }\r\n                renderInput={(params) => (\r\n                    <TextField {...params} variant=\"outlined\" placeholder=\"Tags\" />\r\n                )}\r\n                PaperComponent={({ children }) => (\r\n                    <Paper style={{ width: 400, marginLeft: 12 }}>\r\n                        {children}\r\n                    </Paper>\r\n                )}\r\n            />\r\n        </Paper>\r\n    )\r\n}","import React, { useState, useEffect, useContext } from \"react\";\r\nimport { useParams, useHistory } from \"react-router-dom\";\r\n\r\nimport { toast } from \"react-toastify\";\r\nimport clsx from \"clsx\";\r\n\r\nimport { Paper, makeStyles } from \"@material-ui/core\";\r\n\r\nimport ContactDrawer from \"../ContactDrawer\";\r\nimport MessageInput from \"../MessageInputCustom/\";\r\nimport TicketHeader from \"../TicketHeader\";\r\nimport TicketInfo from \"../TicketInfo\";\r\nimport TicketActionButtons from \"../TicketActionButtonsCustom\";\r\nimport MessagesList from \"../MessagesList\";\r\nimport api from \"../../services/api\";\r\nimport { ReplyMessageProvider } from \"../../context/ReplyingMessage/ReplyingMessageContext\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\nimport { TagsContainer } from \"../TagsContainer\";\r\nimport { socketConnection } from \"../../services/socket\";\r\n\r\nconst drawerWidth = 320;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n    height: \"100%\",\r\n    position: \"relative\",\r\n    overflow: \"hidden\",\r\n  },\r\n\r\n  mainWrapper: {\r\n    flex: 1,\r\n    height: \"100%\",\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    overflow: \"hidden\",\r\n    borderTopLeftRadius: 0,\r\n    borderBottomLeftRadius: 0,\r\n    borderLeft: \"0\",\r\n    marginRight: -drawerWidth,\r\n    transition: theme.transitions.create(\"margin\", {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.leavingScreen,\r\n    }),\r\n  },\r\n\r\n  mainWrapperShift: {\r\n    borderTopRightRadius: 0,\r\n    borderBottomRightRadius: 0,\r\n    transition: theme.transitions.create(\"margin\", {\r\n      easing: theme.transitions.easing.easeOut,\r\n      duration: theme.transitions.duration.enteringScreen,\r\n    }),\r\n    marginRight: 0,\r\n  },\r\n}));\r\n\r\nconst Ticket = () => {\r\n  const { ticketId } = useParams();\r\n  const history = useHistory();\r\n  const classes = useStyles();\r\n\r\n  const { user } = useContext(AuthContext);\r\n\r\n  const [drawerOpen, setDrawerOpen] = useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n  const [contact, setContact] = useState({});\r\n  const [ticket, setTicket] = useState({});\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    const delayDebounceFn = setTimeout(() => {\r\n      const fetchTicket = async () => {\r\n        try {\r\n          const { data } = await api.get(\"/tickets/u/\" + ticketId);\r\n          const { queueId } = data;\r\n          const { queues, profile } = user;\r\n\r\n          const queueAllowed = queues.find((q) => q.id === queueId);\r\n          if (queueAllowed === undefined && profile !== \"admin\") {\r\n            toast.error(\"Acesso não permitido\");\r\n            history.push(\"/tickets\");\r\n            return;\r\n          }\r\n\r\n          setContact(data.contact);\r\n          setTicket(data);\r\n          setLoading(false);\r\n        } catch (err) {\r\n          setLoading(false);\r\n          toastError(err);\r\n        }\r\n      };\r\n      fetchTicket();\r\n    }, 500);\r\n    return () => clearTimeout(delayDebounceFn);\r\n  }, [ticketId, user, history]);\r\n\r\n  useEffect(() => {\r\n    const companyId = localStorage.getItem(\"companyId\");\r\n    const socket = socketConnection({ companyId });\r\n\r\n    socket.on(\"connect\", () => socket.emit(\"joinChatBox\", `${ticket.id}`));\r\n\r\n    socket.on(`company-${companyId}-ticket`, (data) => {\r\n      if (data.action === \"update\") {\r\n        setTicket(data.ticket);\r\n      }\r\n\r\n      if (data.action === \"delete\") {\r\n        toast.success(\"Ticket deleted sucessfully.\");\r\n        history.push(\"/tickets\");\r\n      }\r\n    });\r\n\r\n    socket.on(`company-${companyId}-contact`, (data) => {\r\n      if (data.action === \"update\") {\r\n        setContact((prevState) => {\r\n          if (prevState.id === data.contact?.id) {\r\n            return { ...prevState, ...data.contact };\r\n          }\r\n          return prevState;\r\n        });\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      socket.disconnect();\r\n    };\r\n  }, [ticketId, ticket, history]);\r\n\r\n  const handleDrawerOpen = () => {\r\n    setDrawerOpen(true);\r\n  };\r\n\r\n  const handleDrawerClose = () => {\r\n    setDrawerOpen(false);\r\n  };\r\n\r\n  const renderTicketInfo = () => {\r\n    if (ticket.user !== undefined) {\r\n      return (\r\n        <TicketInfo\r\n          contact={contact}\r\n          ticket={ticket}\r\n          onClick={handleDrawerOpen}\r\n        />\r\n      );\r\n    }\r\n  };\r\n\r\n  const renderMessagesList = () => {\r\n    return (\r\n      <>\r\n        <MessagesList\r\n          ticket={ticket}\r\n          ticketId={ticket.id}\r\n          isGroup={ticket.isGroup}\r\n        ></MessagesList>\r\n        <MessageInput ticketId={ticket.id} ticketStatus={ticket.status} />\r\n      </>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root} id=\"drawer-container\">\r\n      <Paper\r\n        variant=\"outlined\"\r\n        elevation={0}\r\n        className={clsx(classes.mainWrapper, {\r\n          [classes.mainWrapperShift]: drawerOpen,\r\n        })}\r\n      >\r\n        <TicketHeader loading={loading}>\r\n          {renderTicketInfo()}\r\n          <TicketActionButtons ticket={ticket} />\r\n        </TicketHeader>\r\n        <Paper>\r\n          <TagsContainer ticket={ticket} />\r\n        </Paper>\r\n        <ReplyMessageProvider>{renderMessagesList()}</ReplyMessageProvider>\r\n      </Paper>\r\n      <ContactDrawer\r\n        open={drawerOpen}\r\n        handleDrawerClose={handleDrawerClose}\r\n        contact={contact}\r\n        loading={loading}\r\n        ticket={ticket}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Ticket;\r\n","import React from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nimport TicketsManager from \"../../components/TicketsManagerTabs/\";\r\nimport Ticket from \"../../components/Ticket/\";\r\nimport logo from \"../../assets/logo.png\"; // LOGO//\r\nimport { i18n } from \"../../translate/i18n\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tchatContainer: {\r\n\t\tflex: 1,\r\n\t\t// backgroundColor: \"#eee\",\r\n\t\tpadding: theme.spacing(1), //Aqui ele ajusta espaço na tela de ticket\r\n\t\theight: `calc(100% - 48px)`,\r\n\t\toverflowY: \"hidden\",\r\n\t},\r\n\r\n\tchatPapper: {\r\n\t\t// backgroundColor: \"red\",\r\n\t\tdisplay: \"flex\",\r\n\t\theight: \"100%\",\r\n\t},\r\n\r\n\tcontactsWrapper: {\r\n\t\tdisplay: \"flex\",\r\n\t\theight: \"100%\",\r\n\t\tflexDirection: \"column\",\r\n\t\toverflowY: \"hidden\",\r\n\t},\r\n\tmessagesWrapper: {\r\n\t\tdisplay: \"flex\",\r\n\t\theight: \"100%\",\r\n\t\tflexDirection: \"column\",\r\n\t},\r\n\twelcomeMsg: {\r\n\t\tbackgroundColor: theme.palette.boxticket, //DARK MODE //\r\n\t\tdisplay: \"flex\",\r\n\t\tjustifyContent: \"space-evenly\",\r\n\t\talignItems: \"center\",\r\n\t\theight: \"100%\",\r\n\t\ttextAlign: \"center\",\r\n\t},\r\n}));\r\n\r\nconst TicketsCustom = () => {\r\n\tconst classes = useStyles();\r\n\tconst { ticketId } = useParams();\r\n\r\n\treturn (\r\n\t\t<div className={classes.chatContainer}>\r\n\t\t\t<div className={classes.chatPapper}>\r\n\t\t\t\t<Grid container spacing={0}>\r\n\t\t\t\t\t<Grid item xs={4} className={classes.contactsWrapper}>\r\n\t\t\t\t\t\t<TicketsManager />\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item xs={8} className={classes.messagesWrapper}>\r\n\t\t\t\t\t\t{ticketId ? (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<Ticket />\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<Paper square variant=\"outlined\" className={classes.welcomeMsg}>\r\n\t\t\t\t\t\t\t{/*  LOGO */}\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<center><img style={{ margin: \"0 auto\", width: \"70%\" }} src={logo} alt=\"logologin\" /></center>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t{/*  LOGO */}\r\n\t\t\t\t\t\t\t{/*<span>{i18n.t(\"chat.noTicketMessage\")}</span>*/}\r\n\t\t\t\t\t\t\t</Paper>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</Grid>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default TicketsCustom;\r\n","import { styled } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\n\r\nconst TicketAdvancedLayout = styled(Paper)({\r\n    height: `calc(100% - 48px)`,\r\n    display: \"grid\",\r\n    gridTemplateRows: \"56px 1fr\"\r\n})\r\n\r\nexport default TicketAdvancedLayout;","import React, { useState, useEffect, useContext } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from '@material-ui/core/Button';\r\nimport Box from '@material-ui/core/Box';\r\nimport BottomNavigation from '@material-ui/core/BottomNavigation';\r\nimport BottomNavigationAction from '@material-ui/core/BottomNavigationAction';\r\nimport QuestionAnswerIcon from '@material-ui/icons/QuestionAnswer';\r\nimport ChatIcon from '@material-ui/icons/Chat';\r\n\r\nimport TicketsManagerTabs from \"../../components/TicketsManagerTabs/\";\r\nimport Ticket from \"../../components/Ticket/\";\r\nimport TicketAdvancedLayout from \"../../components/TicketAdvancedLayout\";\r\nimport logo from \"../../assets/logo.png\"; // LOGO//\r\nimport { TicketsContext } from \"../../context/Tickets/TicketsContext\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    header: {\r\n    },\r\n    content: {\r\n        overflow: \"auto\"\r\n    },\r\n    placeholderContainer: {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"center\",\r\n        height: \"100%\",\r\n\t\tbackgroundColor: theme.palette.boxticket, //DARK MODE //\r\n    },\r\n    placeholderItem: {\r\n    }\r\n}));\r\n\r\nconst TicketAdvanced = (props) => {\r\n\tconst classes = useStyles();\r\n\tconst { ticketId } = useParams();\r\n\tconst [option, setOption] = useState(0);\r\n    const { currentTicket, setCurrentTicket } = useContext(TicketsContext)\r\n\r\n    useEffect(() => {\r\n        if(currentTicket.id !== null) {\r\n            setCurrentTicket({ id: currentTicket.id, code: '#open' })\r\n        }\r\n        if (!ticketId) {\r\n            setOption(1)\r\n        }\r\n        return () => {\r\n            setCurrentTicket({ id: null, code: null })\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        if (currentTicket.id !== null) {\r\n            setOption(0)\r\n        }\r\n    }, [currentTicket])\r\n\r\n\tconst renderPlaceholder = () => {\r\n\t\treturn <Box className={classes.placeholderContainer}>\r\n             {/*<div className={classes.placeholderItem}>{i18n.t(\"chat.noTicketMessage\")}</div>*/}\r\n\t\t\t// LOGO//\r\n\t\t\t<div>\r\n\t\t\t<center><img style={{ margin: \"0 auto\", width: \"70%\" }} src={logo} alt=\"logologin\" /></center>\r\n\t\t\t</div>\r\n\t\t\t// LOGO//\r\n\t\t\t<br />\r\n            <Button onClick={() => setOption(1)} variant=\"contained\" color=\"primary\">\r\n                Selecionar Ticket\r\n            </Button>\r\n        </Box>\r\n\t}\r\n\r\n\tconst renderMessageContext = () => {\r\n\t\tif (ticketId) {\r\n\t\t\treturn <Ticket />\r\n\t\t}\r\n\t\treturn renderPlaceholder()\r\n\t}\r\n\r\n\tconst renderTicketsManagerTabs = () => {\r\n\t\treturn <TicketsManagerTabs />\r\n\t}\r\n\r\n\treturn (\r\n        <TicketAdvancedLayout>\r\n            <Box className={classes.header}>\r\n                <BottomNavigation\r\n                    value={option}\r\n                    onChange={(event, newValue) => {\r\n                        setOption(newValue);\r\n                    }}\r\n                    showLabels\r\n                    className={classes.root}\r\n                >\r\n                    <BottomNavigationAction label=\"Ticket\" icon={<ChatIcon />} />\r\n                    <BottomNavigationAction label=\"Atendimentos\" icon={<QuestionAnswerIcon />} />\r\n                </BottomNavigation>\r\n            </Box>\r\n            <Box className={classes.content}>\r\n                { option === 0 ? renderMessageContext() : renderTicketsManagerTabs() }\r\n            </Box>\r\n        </TicketAdvancedLayout>\r\n\t);\r\n};\r\n\r\nexport default TicketAdvanced;\r\n","import React from \"react\";\r\nimport withWidth, { isWidthUp } from '@material-ui/core/withWidth';\r\n\r\nimport Tickets from \"../TicketsCustom\"\r\nimport TicketAdvanced from \"../TicketsAdvanced\";\r\n\r\nfunction TicketResponsiveContainer (props) {\r\n    if (isWidthUp('md', props.width)) {\r\n        return <Tickets />;    \r\n    }\r\n    return <TicketAdvanced />\r\n}\r\n\r\nexport default withWidth()(TicketResponsiveContainer);","import React, { useState, useEffect } from \"react\";\r\nimport qs from 'query-string'\r\n\r\nimport * as Yup from \"yup\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { Link as RouterLink } from \"react-router-dom\";\r\nimport { toast } from \"react-toastify\";\r\nimport { Formik, Form, Field } from \"formik\";\r\nimport usePlans from \"../../hooks/usePlans\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Link from \"@material-ui/core/Link\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport {\r\n\tFormControl,\r\n\tInputLabel,\r\n\tMenuItem,\r\n\tSelect,\r\n} from \"@material-ui/core\";\r\nimport LockOutlinedIcon from \"@material-ui/icons/LockOutlined\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport logo from \"../../assets/logo.png\";\r\nimport { i18n } from \"../../translate/i18n\";\r\n\r\nimport { openApi } from \"../../services/api\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport moment from \"moment\";\r\nconst Copyright = () => {\r\n\treturn (\r\n\t\t<Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\r\n\t\t\t{\"Copyright © \"}\r\n\t\t\t<Link color=\"inherit\" href=\"#\">\r\n\t\t\t\tAtendeChat\r\n\t\t\t</Link>{\" \"}\r\n\t\t   {new Date().getFullYear()}\r\n\t\t\t{\".\"}\r\n\t\t</Typography>\r\n\t);\r\n};\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tpaper: {\r\n\t\tmarginTop: theme.spacing(8),\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t\talignItems: \"center\",\r\n\t},\r\n\tavatar: {\r\n\t\tmargin: theme.spacing(1),\r\n\t\tbackgroundColor: theme.palette.secondary.main,\r\n\t},\r\n\tform: {\r\n\t\twidth: \"100%\",\r\n\t\tmarginTop: theme.spacing(3),\r\n\t},\r\n\tsubmit: {\r\n\t\tmargin: theme.spacing(3, 0, 2),\r\n\t},\r\n}));\r\n\r\nconst UserSchema = Yup.object().shape({\r\n\tname: Yup.string()\r\n\t\t.min(2, \"Too Short!\")\r\n\t\t.max(50, \"Too Long!\")\r\n\t\t.required(\"Required\"),\r\n\tpassword: Yup.string().min(5, \"Too Short!\").max(50, \"Too Long!\"),\r\n\temail: Yup.string().email(\"Invalid email\").required(\"Required\"),\r\n});\r\n\r\nconst SignUp = () => {\r\n\tconst classes = useStyles();\r\n\tconst history = useHistory();\r\n\tlet companyId = null\r\n\r\n\tconst params = qs.parse(window.location.search)\r\n\tif (params.companyId !== undefined) {\r\n\t\tcompanyId = params.companyId\r\n\t}\r\n\r\n\tconst initialState = { name: \"\", email: \"\", phone: \"\", password: \"\", planId: \"\", };\r\n\r\n\tconst [user] = useState(initialState);\r\n\tconst dueDate = moment().add(1, \"day\").format();\r\n\tconst handleSignUp = async values => {\r\n\t\tObject.assign(values, { recurrence: \"MENSAL\" });\r\n\t\tObject.assign(values, { dueDate: dueDate });\r\n\t\tObject.assign(values, { status: \"t\" });\r\n\t\tObject.assign(values, { campaignsEnabled: true });\r\n\t\ttry {\r\n\t\t\tawait openApi.post(\"/companies/cadastro\", values);\r\n\t\t\ttoast.success(i18n.t(\"signup.toasts.success\"));\r\n\t\t\thistory.push(\"/login\");\r\n\t\t} catch (err) {\r\n\t\t\tconsole.log(err);\r\n\t\t\ttoastError(err);\r\n\t\t}\r\n\t};\r\n\r\n\tconst [plans, setPlans] = useState([]);\r\n\tconst { list: listPlans } = usePlans();\r\n\r\n\tuseEffect(() => {\r\n\t\tasync function fetchData() {\r\n\t\t\tconst list = await listPlans();\r\n\t\t\tsetPlans(list);\r\n\t\t}\r\n\t\tfetchData();\r\n\t}, []);\r\n\r\n\r\n\treturn (\r\n\t\t<Container component=\"main\" maxWidth=\"xs\">\r\n\t\t\t<CssBaseline />\r\n\t\t\t<div className={classes.paper}>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<center><img style={{ margin: \"0 auto\", width: \"70%\" }} src={logo} alt=\"Logocadastro\" /></center>\r\n\t\t\t\t</div>\r\n\t\t\t\t{/*<Typography component=\"h1\" variant=\"h5\">\r\n\t\t\t\t\t{i18n.t(\"signup.title\")}\r\n\t\t\t\t</Typography>*/}\r\n\t\t\t\t{/* <form className={classes.form} noValidate onSubmit={handleSignUp}> */}\r\n\t\t\t\t<Formik\r\n\t\t\t\t\tinitialValues={user}\r\n\t\t\t\t\tenableReinitialize={true}\r\n\t\t\t\t\tvalidationSchema={UserSchema}\r\n\t\t\t\t\tonSubmit={(values, actions) => {\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\thandleSignUp(values);\r\n\t\t\t\t\t\t\tactions.setSubmitting(false);\r\n\t\t\t\t\t\t}, 400);\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{({ touched, errors, isSubmitting }) => (\r\n\t\t\t\t\t\t<Form className={classes.form}>\r\n\t\t\t\t\t\t\t<Grid container spacing={2}>\r\n\t\t\t\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\tas={TextField}\r\n\t\t\t\t\t\t\t\t\t\tautoComplete=\"name\"\r\n\t\t\t\t\t\t\t\t\t\tname=\"name\"\r\n\t\t\t\t\t\t\t\t\t\terror={touched.name && Boolean(errors.name)}\r\n\t\t\t\t\t\t\t\t\t\thelperText={touched.name && errors.name}\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t\tid=\"name\"\r\n\t\t\t\t\t\t\t\t\t\tlabel=\"Nome da Empresa\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</Grid>\r\n\r\n\t\t\t\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\tas={TextField}\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t\tid=\"email\"\r\n\t\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"signup.form.email\")}\r\n\t\t\t\t\t\t\t\t\t\tname=\"email\"\r\n\t\t\t\t\t\t\t\t\t\terror={touched.email && Boolean(errors.email)}\r\n\t\t\t\t\t\t\t\t\t\thelperText={touched.email && errors.email}\r\n\t\t\t\t\t\t\t\t\t\tautoComplete=\"email\"\r\n\t\t\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\tas={TextField}\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t\tid=\"phone\"\r\n\t\t\t\t\t\t\t\t\t\tlabel=\"Telefone com (DDD)\"\r\n\t\t\t\t\t\t\t\t\t\tname=\"phone\"\r\n\t\t\t\t\t\t\t\t\t\terror={touched.email && Boolean(errors.email)}\r\n\t\t\t\t\t\t\t\t\t\thelperText={touched.email && errors.email}\r\n\t\t\t\t\t\t\t\t\t\tautoComplete=\"phone\"\r\n\t\t\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</Grid>\r\n\r\n\t\t\t\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\tas={TextField}\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\t\t\t\t\terror={touched.password && Boolean(errors.password)}\r\n\t\t\t\t\t\t\t\t\t\thelperText={touched.password && errors.password}\r\n\t\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"signup.form.password\")}\r\n\t\t\t\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\t\t\t\tid=\"password\"\r\n\t\t\t\t\t\t\t\t\t\tautoComplete=\"current-password\"\r\n\t\t\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t\t\t\t<InputLabel htmlFor=\"plan-selection\">Plano</InputLabel>\r\n\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\tas={Select}\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t\tid=\"plan-selection\"\r\n\t\t\t\t\t\t\t\t\t\tlabel=\"Plano\"\r\n\t\t\t\t\t\t\t\t\t\tname=\"planId\"\r\n\t\t\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{plans.map((plan, key) => (\r\n\t\t\t\t\t\t\t\t\t\t\t<MenuItem key={key} value={plan.id}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{plan.name} - Atendentes: {plan.users} - WhatsApp: {plan.connections} - Filas: {plan.queues} - R$ {plan.value}\r\n\t\t\t\t\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t</Field>\r\n\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\tclassName={classes.submit}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{i18n.t(\"signup.buttons.submit\")}\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t<Grid container justify=\"flex-end\">\r\n\t\t\t\t\t\t\t\t<Grid item>\r\n\t\t\t\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\t\t\t\thref=\"#\"\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"body2\"\r\n\t\t\t\t\t\t\t\t\t\tcomponent={RouterLink}\r\n\t\t\t\t\t\t\t\t\t\tto=\"/login\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{i18n.t(\"signup.buttons.login\")}\r\n\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Formik>\r\n\t\t\t</div>\r\n\t\t\t<Box mt={5}>{/* <Copyright /> */}</Box>\r\n\t\t</Container>\r\n\t);\r\n};\r\n\r\nexport default SignUp;\r\n","import React, { useState, useContext } from \"react\";\r\nimport { Link as RouterLink } from \"react-router-dom\";\r\n\r\nimport Button from \"@material-ui/core/Button\";\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Link from \"@material-ui/core/Link\";\r\nimport Grid from \"@material-ui/core/Grid\"; \r\nimport Box from \"@material-ui/core/Box\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Container from \"@material-ui/core/Container\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\n\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\nimport logo from \"../../assets/logo.png\";\r\n\r\n\r\nconst Copyright = () => {\r\n\treturn (\r\n\t\t<Typography variant=\"body2\" color=\"primary\" align=\"center\">\r\n\t\t\t{\"Copyright \"}\r\n \t\t\t<Link color=\"primary\" href=\"#\">\r\n \t\t\t\tPLW\r\n \t\t\t</Link>{\" \"}\r\n \t\t\t{new Date().getFullYear()}\r\n \t\t\t{\".\"}\r\n \t\t</Typography>\r\n \t);\r\n };\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\troot: {\r\n\t\twidth: \"100vw\",\r\n\t\theight: \"100vh\",\r\n\t\tbackground: \"linear-gradient(to right, #08A46E , #08A46E , #077c51)\", //cor de fundo \r\n\t\t//backgroundImage: \"url(https://#)\",\r\n\t\tbackgroundRepeat: \"no-repeat\",\r\n\t\tbackgroundSize: \"100% 100%\",\r\n\t\tbackgroundPosition: \"center\",\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t\talignItems: \"center\",\r\n\t\tjustifyContent: \"center\",\r\n\t\ttextAlign: \"center\",\r\n\t},\r\n\tpaper: {\r\n\t\tbackgroundColor: theme.palette.login, \r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t\talignItems: \"center\",\r\n\t\tpadding: \"55px 30px\",\r\n\t\tborderRadius: \"12.5px\",\r\n\t},\r\n\tavatar: {\r\n\t\tmargin: theme.spacing(1),  \r\n\t\tbackgroundColor: theme.palette.secondary.main,\r\n\t},\r\n\tform: {\r\n\t\twidth: \"100%\", // Fix IE 11 issue.\r\n\t\tmarginTop: theme.spacing(1),\r\n\t},\r\n\tsubmit: {\r\n\t\tmargin: theme.spacing(3, 0, 2),\r\n\t},\r\n\tpowered: {\r\n\t\tcolor: \"white\"\r\n\t}\r\n}));\r\n\r\nconst Login = () => {\r\n\tconst classes = useStyles();\r\n\r\n\tconst [user, setUser] = useState({ email: \"\", password: \"\" });\r\n\r\n\tconst { handleLogin } = useContext(AuthContext);\r\n\r\n\tconst handleChangeInput = e => {\r\n\t\tsetUser({ ...user, [e.target.name]: e.target.value });\r\n\t};\r\n\r\n\tconst handlSubmit = e => {\r\n\t\te.preventDefault();\r\n\t\thandleLogin(user);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t<Container component=\"main\" maxWidth=\"xs\">\r\n\t\t\t<CssBaseline/>\r\n\t\t\t<div className={classes.paper}>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<center><img style={{ margin: \"0 auto\", width: \"70%\" }} src={logo} alt=\"Logologin\" /></center>\r\n\t\t\t\t</div>\r\n\t\t\t\t{/*<Typography component=\"h1\" variant=\"h5\">\r\n\t\t\t\t\t{i18n.t(\"login.title\")}\r\n\t\t\t\t</Typography>*/}\r\n\t\t\t\t<form className={classes.form} noValidate onSubmit={handlSubmit}>\r\n\t\t\t\t\t<TextField\r\n\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\tmargin=\"normal\"\r\n\t\t\t\t\t\trequired\r\n\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\tid=\"email\"\r\n\t\t\t\t\t\tlabel={i18n.t(\"login.form.email\")}\r\n\t\t\t\t\t\tname=\"email\"\r\n\t\t\t\t\t\tvalue={user.email}\r\n\t\t\t\t\t\tonChange={handleChangeInput}\r\n\t\t\t\t\t\tautoComplete=\"email\"\r\n\t\t\t\t\t\tautoFocus\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<TextField\r\n\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\tmargin=\"normal\"\r\n\t\t\t\t\t\trequired\r\n\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\tlabel={i18n.t(\"login.form.password\")}\r\n\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\tid=\"password\"\r\n\t\t\t\t\t\tvalue={user.password}\r\n\t\t\t\t\t\tonChange={handleChangeInput}\r\n\t\t\t\t\t\tautoComplete=\"current-password\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\tclassName={classes.submit}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{i18n.t(\"login.buttons.submit\")}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t{ <Grid container>\r\n\t\t\t\t\t\t<Grid item>\r\n\t\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\t\thref=\"#\"\r\n\t\t\t\t\t\t\t\tvariant=\"body2\"\r\n\t\t\t\t\t\t\t\tcomponent={RouterLink}\r\n\t\t\t\t\t\t\t\tto=\"/signup\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{i18n.t(\"login.buttons.register\")}\r\n\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t</Grid> }\r\n\t\t\t\t</form>\r\n\t\t\t\r\n\t\t\t</div>\r\n\t\t\t\r\n\t\t\t\r\n\t\t</Container>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Login;\r\n","import React from \"react\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Container from \"@material-ui/core/Container\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tmainContainer: {\r\n\t\tflex: 1,\r\n\t\tpadding: theme.spacing(2),\r\n\t\theight: `calc(100% - 48px)`,\r\n\t},\r\n\r\n\tcontentWrapper: {\r\n\t\theight: \"100%\",\r\n\t\toverflowY: \"hidden\",\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t},\r\n}));\r\n\r\nconst MainContainer = ({ children }) => {\r\n\tconst classes = useStyles();\r\n\r\n\treturn (\r\n\t\t<Container className={classes.mainContainer}>\r\n\t\t\t<div className={classes.contentWrapper}>{children}</div>\r\n\t\t</Container>\r\n\t);\r\n};\r\n\r\nexport default MainContainer;\r\n","import React from \"react\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tcontactsHeader: {\r\n\t\tdisplay: \"flex\",\r\n\t\talignItems: \"center\",\r\n\t\tpadding: \"0px 6px 6px 6px\",\r\n\t},\r\n}));\r\n\r\nconst MainHeader = ({ children }) => {\r\n\tconst classes = useStyles();\r\n\r\n\treturn <div className={classes.contactsHeader}>{children}</div>;\r\n};\r\n\r\nexport default MainHeader;\r\n","import React from \"react\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tMainHeaderButtonsWrapper: {\r\n\t\tflex: \"none\",\r\n\t\tmarginLeft: \"auto\",\r\n\t\t\"& > *\": {\r\n\t\t\tmargin: theme.spacing(1),\r\n\t\t},\r\n\t},\r\n}));\r\n\r\nconst MainHeaderButtonsWrapper = ({ children }) => {\r\n\tconst classes = useStyles();\r\n\r\n\treturn <div className={classes.MainHeaderButtonsWrapper}>{children}</div>;\r\n};\r\n\r\nexport default MainHeaderButtonsWrapper;\r\n","import React from \"react\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\n\r\nexport default function Title(props) {\r\n\treturn (\r\n\t\t<Typography variant=\"h5\" color=\"primary\" gutterBottom>\r\n\t\t\t{props.children}\r\n\t\t</Typography>\r\n\t);\r\n}\r\n","import React from \"react\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Skeleton from \"@material-ui/lab/Skeleton\";\r\nimport { makeStyles } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tcustomTableCell: {\r\n\t\tdisplay: \"flex\",\r\n\t\talignItems: \"center\",\r\n\t\tjustifyContent: \"center\",\r\n\t},\r\n}));\r\n\r\nconst TableRowSkeleton = ({ avatar, columns }) => {\r\n\tconst classes = useStyles();\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<TableRow>\r\n\t\t\t\t{avatar && (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<TableCell style={{ paddingRight: 0 }}>\r\n\t\t\t\t\t\t\t<Skeleton\r\n\t\t\t\t\t\t\t\tanimation=\"wave\"\r\n\t\t\t\t\t\t\t\tvariant=\"circle\"\r\n\t\t\t\t\t\t\t\twidth={40}\r\n\t\t\t\t\t\t\t\theight={40}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t<TableCell>\r\n\t\t\t\t\t\t\t<Skeleton animation=\"wave\" height={30} width={80} />\r\n\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t</>\r\n\t\t\t\t)}\r\n\t\t\t\t{Array.from({ length: columns }, (_, index) => (\r\n\t\t\t\t\t<TableCell align=\"center\" key={index}>\r\n\t\t\t\t\t\t<div className={classes.customTableCell}>\r\n\t\t\t\t\t\t\t<Skeleton\r\n\t\t\t\t\t\t\t\talign=\"center\"\r\n\t\t\t\t\t\t\t\tanimation=\"wave\"\r\n\t\t\t\t\t\t\t\theight={30}\r\n\t\t\t\t\t\t\t\twidth={80}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t))}\r\n\t\t\t</TableRow>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default TableRowSkeleton;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport * as Yup from \"yup\";\r\nimport { Formik, Form, Field } from \"formik\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { green } from \"@material-ui/core/colors\";\r\n\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogTitle,\r\n  Button,\r\n  DialogActions,\r\n  CircularProgress,\r\n  TextField,\r\n  Switch,\r\n  FormControlLabel,\r\n  Grid,\r\n  FormControl,\r\n  InputLabel,\r\n  Select,\r\n  MenuItem,\r\n} from \"@material-ui/core\";\r\n\r\nimport api from \"../../services/api\";\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport QueueSelect from \"../QueueSelect\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n    flexWrap: \"wrap\",\r\n  },\r\n\r\n  multFieldLine: {\r\n    display: \"flex\",\r\n    \"& > *:not(:last-child)\": {\r\n      marginRight: theme.spacing(1),\r\n    },\r\n  },\r\n\r\n  btnWrapper: {\r\n    position: \"relative\",\r\n  },\r\n\r\n  buttonProgress: {\r\n    color: green[500],\r\n    position: \"absolute\",\r\n    top: \"50%\",\r\n    left: \"50%\",\r\n    marginTop: -12,\r\n    marginLeft: -12,\r\n  },\r\n}));\r\n\r\nconst SessionSchema = Yup.object().shape({\r\n  name: Yup.string()\r\n    .min(2, \"Too Short!\")\r\n    .max(50, \"Too Long!\")\r\n    .required(\"Required\"),\r\n});\r\n\r\nconst WhatsAppModal = ({ open, onClose, whatsAppId }) => {\r\n  const classes = useStyles();\r\n  const initialState = {\r\n    name: \"\",\r\n    greetingMessage: \"\",\r\n    complationMessage: \"\",\r\n    outOfHoursMessage: \"\",\r\n    ratingMessage: \"\",\r\n    isDefault: false,\r\n    token: \"\",\r\n    provider: \"beta\",\r\n    //timeSendQueue: 0,\r\n    //sendIdQueue: 0,\r\n    expiresInactiveMessage: \"\",\r\n    expiresTicket: 0,\r\n    timeUseBotQueues: 0,\r\n    maxUseBotQueues: 3\r\n  };\r\n  const [whatsApp, setWhatsApp] = useState(initialState);\r\n  const [selectedQueueIds, setSelectedQueueIds] = useState([]);\r\n  const [queues, setQueues] = useState([]);\r\n  const [selectedQueueId, setSelectedQueueId] = useState(null)\r\n  const [selectedPrompt, setSelectedPrompt] = useState(null);\r\n  const [prompts, setPrompts] = useState([]);\r\n  \r\n    useEffect(() => {\r\n    const fetchSession = async () => {\r\n      if (!whatsAppId) return;\r\n\r\n      try {\r\n        const { data } = await api.get(`whatsapp/${whatsAppId}?session=0`);\r\n        setWhatsApp(data);\r\n\r\n        const whatsQueueIds = data.queues?.map((queue) => queue.id);\r\n        setSelectedQueueIds(whatsQueueIds);\r\n\t\tsetSelectedQueueId(data.transferQueueId);\r\n      } catch (err) {\r\n        toastError(err);\r\n      }\r\n    };\r\n    fetchSession();\r\n  }, [whatsAppId]);\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      try {\r\n        const { data } = await api.get(\"/prompt\");\r\n        setPrompts(data.prompts);\r\n      } catch (err) {\r\n        toastError(err);\r\n      }\r\n    })();\r\n  }, [whatsAppId]);\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      try {\r\n        const { data } = await api.get(\"/queue\");\r\n        setQueues(data);\r\n      } catch (err) {\r\n        toastError(err);\r\n      }\r\n    })();\r\n  }, []);\r\n\r\n  const handleSaveWhatsApp = async (values) => {\r\nconst whatsappData = {\r\n      ...values, queueIds: selectedQueueIds, transferQueueId: selectedQueueId,\r\n      promptId: selectedPrompt ? selectedPrompt : null\r\n    };\r\n    delete whatsappData[\"queues\"];\r\n    delete whatsappData[\"session\"];\r\n\r\n    try {\r\n      if (whatsAppId) {\r\n        await api.put(`/whatsapp/${whatsAppId}`, whatsappData);\r\n      } else {\r\n        await api.post(\"/whatsapp\", whatsappData);\r\n      }\r\n      toast.success(i18n.t(\"whatsappModal.success\"));\r\n      handleClose();\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n  };\r\n\r\n  const handleChangeQueue = (e) => {\r\n    setSelectedQueueIds(e);\r\n    setSelectedPrompt(null);\r\n  };\r\n\r\n  const handleChangePrompt = (e) => {\r\n    setSelectedPrompt(e.target.value);\r\n    setSelectedQueueIds([]);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    onClose();\r\n    setWhatsApp(initialState);\r\n\t  setSelectedQueueId(null);\r\n    setSelectedQueueIds([]);\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Dialog\r\n        open={open}\r\n        onClose={handleClose}\r\n        maxWidth=\"md\"\r\n        fullWidth\r\n        scroll=\"paper\"\r\n      >\r\n        <DialogTitle>\r\n          {whatsAppId\r\n            ? i18n.t(\"whatsappModal.title.edit\")\r\n            : i18n.t(\"whatsappModal.title.add\")}\r\n        </DialogTitle>\r\n        <Formik\r\n          initialValues={whatsApp}\r\n          enableReinitialize={true}\r\n          validationSchema={SessionSchema}\r\n          onSubmit={(values, actions) => {\r\n            setTimeout(() => {\r\n              handleSaveWhatsApp(values);\r\n              actions.setSubmitting(false);\r\n            }, 400);\r\n          }}\r\n        >\r\n          {({ values, touched, errors, isSubmitting }) => (\r\n            <Form>\r\n              <DialogContent dividers>\r\n                <div className={classes.multFieldLine}>\r\n                  <Grid spacing={2} container>\r\n                    <Grid item>\r\n                      <Field\r\n                        as={TextField}\r\n                        label={i18n.t(\"whatsappModal.form.name\")}\r\n                        autoFocus\r\n                        name=\"name\"\r\n                        error={touched.name && Boolean(errors.name)}\r\n                        helperText={touched.name && errors.name}\r\n                        variant=\"outlined\"\r\n                        margin=\"dense\"\r\n                        className={classes.textField}\r\n                      />\r\n                    </Grid>\r\n                    <Grid style={{ paddingTop: 15 }} item>\r\n                      <FormControlLabel\r\n                        control={\r\n                          <Field\r\n                            as={Switch}\r\n                            color=\"primary\"\r\n                            name=\"isDefault\"\r\n                            checked={values.isDefault}\r\n                          />\r\n                        }\r\n                        label={i18n.t(\"whatsappModal.form.default\")}\r\n                      />\r\n                    </Grid>\r\n                  </Grid>\r\n                </div>\r\n                <div>\r\n                  <Field\r\n                    as={TextField}\r\n                    label={i18n.t(\"queueModal.form.greetingMessage\")}\r\n                    type=\"greetingMessage\"\r\n                    multiline\r\n                    rows={4}\r\n                    fullWidth\r\n                    name=\"greetingMessage\"\r\n                    error={\r\n                      touched.greetingMessage && Boolean(errors.greetingMessage)\r\n                    }\r\n                    helperText={\r\n                      touched.greetingMessage && errors.greetingMessage\r\n                    }\r\n                    variant=\"outlined\"\r\n                    margin=\"dense\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <Field\r\n                    as={TextField}\r\n                    label={i18n.t(\"queueModal.form.complationMessage\")}\r\n                    type=\"complationMessage\"\r\n                    multiline\r\n                    rows={4}\r\n                    fullWidth\r\n                    name=\"complationMessage\"\r\n                    error={\r\n                      touched.complationMessage &&\r\n                      Boolean(errors.complationMessage)\r\n                    }\r\n                    helperText={\r\n                      touched.complationMessage && errors.complationMessage\r\n                    }\r\n                    variant=\"outlined\"\r\n                    margin=\"dense\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <Field\r\n                    as={TextField}\r\n                    label={i18n.t(\"queueModal.form.outOfHoursMessage\")}\r\n                    type=\"outOfHoursMessage\"\r\n                    multiline\r\n                    rows={4}\r\n                    fullWidth\r\n                    name=\"outOfHoursMessage\"\r\n                    error={\r\n                      touched.outOfHoursMessage &&\r\n                      Boolean(errors.outOfHoursMessage)\r\n                    }\r\n                    helperText={\r\n                      touched.outOfHoursMessage && errors.outOfHoursMessage\r\n                    }\r\n                    variant=\"outlined\"\r\n                    margin=\"dense\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <Field\r\n                    as={TextField}\r\n                    label={i18n.t(\"queueModal.form.ratingMessage\")}\r\n                    type=\"ratingMessage\"\r\n                    multiline\r\n                    rows={4}\r\n                    fullWidth\r\n                    name=\"ratingMessage\"\r\n                    error={\r\n                      touched.ratingMessage && Boolean(errors.ratingMessage)\r\n                    }\r\n                    helperText={touched.ratingMessage && errors.ratingMessage}\r\n                    variant=\"outlined\"\r\n                    margin=\"dense\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <Field\r\n                    as={TextField}\r\n                    label={i18n.t(\"queueModal.form.token\")}\r\n                    type=\"token\"\r\n                    fullWidth\r\n                    name=\"token\"\r\n                    variant=\"outlined\"\r\n                    margin=\"dense\"\r\n                  />\r\n                </div>\r\n                <QueueSelect\r\n                  selectedQueueIds={selectedQueueIds}\r\n                  onChange={(selectedIds) => handleChangeQueue(selectedIds)}\r\n                />\r\n                <FormControl\r\n                  margin=\"dense\"\r\n                  variant=\"outlined\"\r\n                  fullWidth\r\n                >\r\n                  <InputLabel>\r\n                    {i18n.t(\"whatsappModal.form.prompt\")}\r\n                  </InputLabel>\r\n                  <Select\r\n                    labelId=\"dialog-select-prompt-label\"\r\n                    id=\"dialog-select-prompt\"\r\n                    name=\"promptId\"\r\n                    value={selectedPrompt || \"\"}\r\n                    onChange={handleChangePrompt}\r\n                    label={i18n.t(\"whatsappModal.form.prompt\")}\r\n                    fullWidth\r\n                    MenuProps={{\r\n                      anchorOrigin: {\r\n                        vertical: \"bottom\",\r\n                        horizontal: \"left\",\r\n                      },\r\n                      transformOrigin: {\r\n                        vertical: \"top\",\r\n                        horizontal: \"left\",\r\n                      },\r\n                      getContentAnchorEl: null,\r\n                    }}\r\n                  >\r\n                    {prompts.map((prompt) => (\r\n                      <MenuItem\r\n                        key={prompt.id}\r\n                        value={prompt.id}\r\n                      >\r\n                        {prompt.name}\r\n                      </MenuItem>\r\n                    ))}\r\n                  </Select>\r\n                </FormControl>\r\n                <div>\r\n                  <h3>{i18n.t(\"whatsappModal.form.queueRedirection\")}</h3>\r\n                  <p>{i18n.t(\"whatsappModal.form.queueRedirectionDesc\")}</p>\r\n\t\t\t\t<Grid container spacing={2}>\r\n                  <Grid item sm={6} >\r\n                    <Field\r\n                      fullWidth\r\n                      type=\"number\"\r\n                      as={TextField}\r\n                      label='Transferir após x (minutos)'\r\n                      name=\"timeToTransfer\"\r\n                      error={touched.timeToTransfer && Boolean(errors.timeToTransfer)}\r\n                      helperText={touched.timeToTransfer && errors.timeToTransfer}\r\n                      variant=\"outlined\"\r\n                      margin=\"dense\"\r\n                      className={classes.textField}\r\n                      InputLabelProps={{ shrink: values.timeToTransfer ? true : false }}\r\n                    />\r\n\r\n                  </Grid>\r\n\r\n                  <Grid item sm={6}>\r\n                    <QueueSelect\r\n                      selectedQueueIds={selectedQueueId}\r\n                      onChange={(selectedId) => {\r\n                        setSelectedQueueId(selectedId)\r\n                      }}\r\n                      multiple={false}\r\n                      title={'Fila de Transferência'}\r\n                    />\r\n                  </Grid>\r\n\r\n                  </Grid>\r\n                  <Grid spacing={2} container>\r\n                    {/* ENCERRAR CHATS ABERTOS APÓS X HORAS */}\r\n                    <Grid xs={12} md={12} item>\r\n                      <Field\r\n                        as={TextField}\r\n                        label={i18n.t(\"whatsappModal.form.expiresTicket\")}\r\n                        fullWidth\r\n                        name=\"expiresTicket\"\r\n                        variant=\"outlined\"\r\n                        margin=\"dense\"\r\n                        error={touched.expiresTicket && Boolean(errors.expiresTicket)}\r\n                        helperText={touched.expiresTicket && errors.expiresTicket}\r\n                      />\r\n                    </Grid>\r\n                  </Grid>\r\n                  {/* MENSAGEM POR INATIVIDADE*/}\r\n                  <div>\r\n                    <Field\r\n                      as={TextField}\r\n                      label={i18n.t(\"whatsappModal.form.expiresInactiveMessage\")}\r\n                      multiline\r\n                      rows={4}\r\n                      fullWidth\r\n                      name=\"expiresInactiveMessage\"\r\n                      error={touched.expiresInactiveMessage && Boolean(errors.expiresInactiveMessage)}\r\n                      helperText={touched.expiresInactiveMessage && errors.expiresInactiveMessage}\r\n                      variant=\"outlined\"\r\n                      margin=\"dense\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </DialogContent>\r\n              <DialogActions>\r\n                <Button\r\n                  onClick={handleClose}\r\n                  color=\"secondary\"\r\n                  disabled={isSubmitting}\r\n                  variant=\"outlined\"\r\n                >\r\n                  {i18n.t(\"whatsappModal.buttons.cancel\")}\r\n                </Button>\r\n                <Button\r\n                  type=\"submit\"\r\n                  color=\"primary\"\r\n                  disabled={isSubmitting}\r\n                  variant=\"contained\"\r\n                  className={classes.btnWrapper}\r\n                >\r\n                  {whatsAppId\r\n                    ? i18n.t(\"whatsappModal.buttons.okEdit\")\r\n                    : i18n.t(\"whatsappModal.buttons.okAdd\")}\r\n                  {isSubmitting && (\r\n                    <CircularProgress\r\n                      size={24}\r\n                      className={classes.buttonProgress}\r\n                    />\r\n                  )}\r\n                </Button>\r\n              </DialogActions>\r\n            </Form>\r\n          )}\r\n        </Formik>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(WhatsAppModal);\r\n","import React, { useEffect, useState } from \"react\";\r\nimport QRCode from \"qrcode.react\";\r\nimport toastError from \"../../errors/toastError\";\r\n\r\nimport { Dialog, DialogContent, Paper, Typography } from \"@material-ui/core\";\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport api from \"../../services/api\";\r\nimport { socketConnection } from \"../../services/socket\";\r\n\r\nconst QrcodeModal = ({ open, onClose, whatsAppId }) => {\r\n  const [qrCode, setQrCode] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    const fetchSession = async () => {\r\n      if (!whatsAppId) return;\r\n\r\n      try {\r\n        const { data } = await api.get(`/whatsapp/${whatsAppId}`);\r\n        setQrCode(data.qrcode);\r\n      } catch (err) {\r\n        toastError(err);\r\n      }\r\n    };\r\n    fetchSession();\r\n  }, [whatsAppId]);\r\n\r\n  useEffect(() => {\r\n    if (!whatsAppId) return;\r\n    const companyId = localStorage.getItem(\"companyId\");\r\n    const socket = socketConnection({ companyId });\r\n\r\n    socket.on(`company-${companyId}-whatsappSession`, (data) => {\r\n      if (data.action === \"update\" && data.session.id === whatsAppId) {\r\n        setQrCode(data.session.qrcode);\r\n      }\r\n\r\n      if (data.action === \"update\" && data.session.qrcode === \"\") {\r\n        onClose();\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      socket.disconnect();\r\n    };\r\n  }, [whatsAppId, onClose]);\r\n\r\n  return (\r\n    <Dialog open={open} onClose={onClose} maxWidth=\"lg\" scroll=\"paper\">\r\n      <DialogContent>\r\n        <Paper elevation={0}>\r\n          <Typography color=\"primary\" gutterBottom>\r\n            {i18n.t(\"qrCode.message\")}\r\n          </Typography>\r\n          {qrCode ? (\r\n            <QRCode value={qrCode} size={256} />\r\n          ) : (\r\n            <span>Waiting for QR Code</span>\r\n          )}\r\n        </Paper>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default React.memo(QrcodeModal);\r\n","import React, { useState, useCallback, useContext } from \"react\";\r\nimport { toast } from \"react-toastify\";\r\nimport { format, parseISO } from \"date-fns\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { green } from \"@material-ui/core/colors\";\r\nimport {\r\n\tButton,\r\n\tTableBody,\r\n\tTableRow,\r\n\tTableCell,\r\n\tIconButton,\r\n\tTable,\r\n\tTableHead,\r\n\tPaper,\r\n\tTooltip,\r\n\tTypography,\r\n\tCircularProgress,\r\n} from \"@material-ui/core\";\r\nimport {\r\n\tEdit,\r\n\tCheckCircle,\r\n\tSignalCellularConnectedNoInternet2Bar,\r\n\tSignalCellularConnectedNoInternet0Bar,\r\n\tSignalCellular4Bar,\r\n\tCropFree,\r\n\tDeleteOutline,\r\n} from \"@material-ui/icons\";\r\n\r\nimport MainContainer from \"../../components/MainContainer\";\r\nimport MainHeader from \"../../components/MainHeader\";\r\nimport MainHeaderButtonsWrapper from \"../../components/MainHeaderButtonsWrapper\";\r\nimport Title from \"../../components/Title\";\r\nimport TableRowSkeleton from \"../../components/TableRowSkeleton\";\r\n\r\nimport api from \"../../services/api\";\r\nimport WhatsAppModal from \"../../components/WhatsAppModal\";\r\nimport ConfirmationModal from \"../../components/ConfirmationModal\";\r\nimport QrcodeModal from \"../../components/QrcodeModal\";\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport { WhatsAppsContext } from \"../../context/WhatsApp/WhatsAppsContext\";\r\nimport toastError from \"../../errors/toastError\";\r\n\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\nimport { Can } from \"../../components/Can\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tmainPaper: {\r\n\t\tflex: 1,\r\n\t\tpadding: theme.spacing(1),\r\n\t\toverflowY: \"scroll\",\r\n\t\t...theme.scrollbarStyles,\r\n\t},\r\n\tcustomTableCell: {\r\n\t\tdisplay: \"flex\",\r\n\t\talignItems: \"center\",\r\n\t\tjustifyContent: \"center\",\r\n\t},\r\n\ttooltip: {\r\n\t\tbackgroundColor: \"#f5f5f9\",\r\n\t\tcolor: \"rgba(0, 0, 0, 0.87)\",\r\n\t\tfontSize: theme.typography.pxToRem(14),\r\n\t\tborder: \"1px solid #dadde9\",\r\n\t\tmaxWidth: 450,\r\n\t},\r\n\ttooltipPopper: {\r\n\t\ttextAlign: \"center\",\r\n\t},\r\n\tbuttonProgress: {\r\n\t\tcolor: green[500],\r\n\t},\r\n}));\r\n\r\nconst CustomToolTip = ({ title, content, children }) => {\r\n\tconst classes = useStyles();\r\n\r\n\treturn (\r\n\t\t<Tooltip\r\n\t\t\tarrow\r\n\t\t\tclasses={{\r\n\t\t\t\ttooltip: classes.tooltip,\r\n\t\t\t\tpopper: classes.tooltipPopper,\r\n\t\t\t}}\r\n\t\t\ttitle={\r\n\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t<Typography gutterBottom color=\"inherit\">\r\n\t\t\t\t\t\t{title}\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t\t{content && <Typography>{content}</Typography>}\r\n\t\t\t\t</React.Fragment>\r\n\t\t\t}\r\n\t\t>\r\n\t\t\t{children}\r\n\t\t</Tooltip>\r\n\t);\r\n};\r\n\r\nconst Connections = () => {\r\n\tconst classes = useStyles();\r\n\r\n\tconst { user } = useContext(AuthContext);\r\n\tconst { whatsApps, loading } = useContext(WhatsAppsContext);\r\n\tconst [whatsAppModalOpen, setWhatsAppModalOpen] = useState(false);\r\n\tconst [qrModalOpen, setQrModalOpen] = useState(false);\r\n\tconst [selectedWhatsApp, setSelectedWhatsApp] = useState(null);\r\n\tconst [confirmModalOpen, setConfirmModalOpen] = useState(false);\r\n\tconst confirmationModalInitialState = {\r\n\t\taction: \"\",\r\n\t\ttitle: \"\",\r\n\t\tmessage: \"\",\r\n\t\twhatsAppId: \"\",\r\n\t\topen: false,\r\n\t};\r\n\tconst [confirmModalInfo, setConfirmModalInfo] = useState(\r\n\t\tconfirmationModalInitialState\r\n\t);\r\n\r\n\tconst handleStartWhatsAppSession = async whatsAppId => {\r\n\t\ttry {\r\n\t\t\tawait api.post(`/whatsappsession/${whatsAppId}`);\r\n\t\t} catch (err) {\r\n\t\t\ttoastError(err);\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleRequestNewQrCode = async whatsAppId => {\r\n\t\ttry {\r\n\t\t\tawait api.put(`/whatsappsession/${whatsAppId}`);\r\n\t\t} catch (err) {\r\n\t\t\ttoastError(err);\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleOpenWhatsAppModal = () => {\r\n\t\tsetSelectedWhatsApp(null);\r\n\t\tsetWhatsAppModalOpen(true);\r\n\t};\r\n\r\n\tconst handleCloseWhatsAppModal = useCallback(() => {\r\n\t\tsetWhatsAppModalOpen(false);\r\n\t\tsetSelectedWhatsApp(null);\r\n\t}, [setSelectedWhatsApp, setWhatsAppModalOpen]);\r\n\r\n\tconst handleOpenQrModal = whatsApp => {\r\n\t\tsetSelectedWhatsApp(whatsApp);\r\n\t\tsetQrModalOpen(true);\r\n\t};\r\n\r\n\tconst handleCloseQrModal = useCallback(() => {\r\n\t\tsetSelectedWhatsApp(null);\r\n\t\tsetQrModalOpen(false);\r\n\t}, [setQrModalOpen, setSelectedWhatsApp]);\r\n\r\n\tconst handleEditWhatsApp = whatsApp => {\r\n\t\tsetSelectedWhatsApp(whatsApp);\r\n\t\tsetWhatsAppModalOpen(true);\r\n\t};\r\n\r\n\tconst handleOpenConfirmationModal = (action, whatsAppId) => {\r\n\t\tif (action === \"disconnect\") {\r\n\t\t\tsetConfirmModalInfo({\r\n\t\t\t\taction: action,\r\n\t\t\t\ttitle: i18n.t(\"connections.confirmationModal.disconnectTitle\"),\r\n\t\t\t\tmessage: i18n.t(\"connections.confirmationModal.disconnectMessage\"),\r\n\t\t\t\twhatsAppId: whatsAppId,\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (action === \"delete\") {\r\n\t\t\tsetConfirmModalInfo({\r\n\t\t\t\taction: action,\r\n\t\t\t\ttitle: i18n.t(\"connections.confirmationModal.deleteTitle\"),\r\n\t\t\t\tmessage: i18n.t(\"connections.confirmationModal.deleteMessage\"),\r\n\t\t\t\twhatsAppId: whatsAppId,\r\n\t\t\t});\r\n\t\t}\r\n\t\tsetConfirmModalOpen(true);\r\n\t};\r\n\r\n\tconst handleSubmitConfirmationModal = async () => {\r\n\t\tif (confirmModalInfo.action === \"disconnect\") {\r\n\t\t\ttry {\r\n\t\t\t\tawait api.delete(`/whatsappsession/${confirmModalInfo.whatsAppId}`);\r\n\t\t\t} catch (err) {\r\n\t\t\t\ttoastError(err);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (confirmModalInfo.action === \"delete\") {\r\n\t\t\ttry {\r\n\t\t\t\tawait api.delete(`/whatsapp/${confirmModalInfo.whatsAppId}`);\r\n\t\t\t\ttoast.success(i18n.t(\"connections.toasts.deleted\"));\r\n\t\t\t} catch (err) {\r\n\t\t\t\ttoastError(err);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tsetConfirmModalInfo(confirmationModalInitialState);\r\n\t};\r\n\r\n\tconst renderActionButtons = whatsApp => {\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t{whatsApp.status === \"qrcode\" && (\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\tonClick={() => handleOpenQrModal(whatsApp)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{i18n.t(\"connections.buttons.qrcode\")}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t)}\r\n\t\t\t\t{whatsApp.status === \"DISCONNECTED\" && (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\tonClick={() => handleStartWhatsAppSession(whatsApp.id)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{i18n.t(\"connections.buttons.tryAgain\")}\r\n\t\t\t\t\t\t</Button>{\" \"}\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\t\t\tonClick={() => handleRequestNewQrCode(whatsApp.id)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{i18n.t(\"connections.buttons.newQr\")}\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</>\r\n\t\t\t\t)}\r\n\t\t\t\t{(whatsApp.status === \"CONNECTED\" ||\r\n\t\t\t\t\twhatsApp.status === \"PAIRING\" ||\r\n\t\t\t\t\twhatsApp.status === \"TIMEOUT\") && (\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\thandleOpenConfirmationModal(\"disconnect\", whatsApp.id);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{i18n.t(\"connections.buttons.disconnect\")}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t)}\r\n\t\t\t\t{whatsApp.status === \"OPENING\" && (\r\n\t\t\t\t\t<Button size=\"small\" variant=\"outlined\" disabled color=\"default\">\r\n\t\t\t\t\t\t{i18n.t(\"connections.buttons.connecting\")}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t)}\r\n\t\t\t</>\r\n\t\t);\r\n\t};\r\n\r\n\tconst renderStatusToolTips = whatsApp => {\r\n\t\treturn (\r\n\t\t\t<div className={classes.customTableCell}>\r\n\t\t\t\t{whatsApp.status === \"DISCONNECTED\" && (\r\n\t\t\t\t\t<CustomToolTip\r\n\t\t\t\t\t\ttitle={i18n.t(\"connections.toolTips.disconnected.title\")}\r\n\t\t\t\t\t\tcontent={i18n.t(\"connections.toolTips.disconnected.content\")}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<SignalCellularConnectedNoInternet0Bar color=\"secondary\" />\r\n\t\t\t\t\t</CustomToolTip>\r\n\t\t\t\t)}\r\n\t\t\t\t{whatsApp.status === \"OPENING\" && (\r\n\t\t\t\t\t<CircularProgress size={24} className={classes.buttonProgress} />\r\n\t\t\t\t)}\r\n\t\t\t\t{whatsApp.status === \"qrcode\" && (\r\n\t\t\t\t\t<CustomToolTip\r\n\t\t\t\t\t\ttitle={i18n.t(\"connections.toolTips.qrcode.title\")}\r\n\t\t\t\t\t\tcontent={i18n.t(\"connections.toolTips.qrcode.content\")}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<CropFree />\r\n\t\t\t\t\t</CustomToolTip>\r\n\t\t\t\t)}\r\n\t\t\t\t{whatsApp.status === \"CONNECTED\" && (\r\n\t\t\t\t\t<CustomToolTip title={i18n.t(\"connections.toolTips.connected.title\")}>\r\n\t\t\t\t\t\t<SignalCellular4Bar style={{ color: green[500] }} />\r\n\t\t\t\t\t</CustomToolTip>\r\n\t\t\t\t)}\r\n\t\t\t\t{(whatsApp.status === \"TIMEOUT\" || whatsApp.status === \"PAIRING\") && (\r\n\t\t\t\t\t<CustomToolTip\r\n\t\t\t\t\t\ttitle={i18n.t(\"connections.toolTips.timeout.title\")}\r\n\t\t\t\t\t\tcontent={i18n.t(\"connections.toolTips.timeout.content\")}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<SignalCellularConnectedNoInternet2Bar color=\"secondary\" />\r\n\t\t\t\t\t</CustomToolTip>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<MainContainer>\r\n\t\t\t<ConfirmationModal\r\n\t\t\t\ttitle={confirmModalInfo.title}\r\n\t\t\t\topen={confirmModalOpen}\r\n\t\t\t\tonClose={setConfirmModalOpen}\r\n\t\t\t\tonConfirm={handleSubmitConfirmationModal}\r\n\t\t\t>\r\n\t\t\t\t{confirmModalInfo.message}\r\n\t\t\t</ConfirmationModal>\r\n\t\t\t<QrcodeModal\r\n\t\t\t\topen={qrModalOpen}\r\n\t\t\t\tonClose={handleCloseQrModal}\r\n\t\t\t\twhatsAppId={!whatsAppModalOpen && selectedWhatsApp?.id}\r\n\t\t\t/>\r\n\t\t\t<WhatsAppModal\r\n\t\t\t\topen={whatsAppModalOpen}\r\n\t\t\t\tonClose={handleCloseWhatsAppModal}\r\n\t\t\t\twhatsAppId={!qrModalOpen && selectedWhatsApp?.id}\r\n\t\t\t/>\r\n\t\t\t<MainHeader>\r\n\t\t\t\t<Title>{i18n.t(\"connections.title\")}</Title>\r\n\t\t\t\t<MainHeaderButtonsWrapper>\r\n\t\t\t\t\t<Can\r\n\t\t\t\t\t\trole={user.profile}\r\n\t\t\t\t\t\tperform=\"connections-page:addConnection\"\r\n\t\t\t\t\t\tyes={() => (\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\tonClick={handleOpenWhatsAppModal}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{i18n.t(\"connections.buttons.add\")}\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</MainHeaderButtonsWrapper>\r\n\t\t\t</MainHeader>\r\n\t\t\t<Paper className={classes.mainPaper} variant=\"outlined\">\r\n\t\t\t\t<Table size=\"small\">\r\n\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t{i18n.t(\"connections.table.name\")}\r\n\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t{i18n.t(\"connections.table.status\")}\r\n\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t<Can\r\n\t\t\t\t\t\t\t\trole={user.profile}\r\n\t\t\t\t\t\t\t\tperform=\"connections-page:actionButtons\"\r\n\t\t\t\t\t\t\t\tyes={() => (\r\n\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t\t\t{i18n.t(\"connections.table.session\")}\r\n\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t{i18n.t(\"connections.table.lastUpdate\")}\r\n\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t{i18n.t(\"connections.table.default\")}\r\n\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t<Can\r\n\t\t\t\t\t\t\t\trole={user.profile}\r\n\t\t\t\t\t\t\t\tperform=\"connections-page:editOrDeleteConnection\"\r\n\t\t\t\t\t\t\t\tyes={() => (\r\n\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t\t\t{i18n.t(\"connections.table.actions\")}\r\n\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t{loading ? (\r\n\t\t\t\t\t\t\t<TableRowSkeleton />\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t{whatsApps?.length > 0 &&\r\n\t\t\t\t\t\t\t\t\twhatsApps.map(whatsApp => (\r\n\t\t\t\t\t\t\t\t\t\t<TableRow key={whatsApp.id}>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">{whatsApp.name}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{renderStatusToolTips(whatsApp)}\r\n\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t<Can\r\n\t\t\t\t\t\t\t\t\t\t\t\trole={user.profile}\r\n\t\t\t\t\t\t\t\t\t\t\t\tperform=\"connections-page:actionButtons\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tyes={() => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{renderActionButtons(whatsApp)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{format(parseISO(whatsApp.updatedAt), \"dd/MM/yy HH:mm\")}\r\n\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{whatsApp.isDefault && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className={classes.customTableCell}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<CheckCircle style={{ color: green[500] }} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t<Can\r\n\t\t\t\t\t\t\t\t\t\t\t\trole={user.profile}\r\n\t\t\t\t\t\t\t\t\t\t\t\tperform=\"connections-page:editOrDeleteConnection\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tyes={() => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => handleEditWhatsApp(whatsApp)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Edit />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</IconButton>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={e => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thandleOpenConfirmationModal(\"delete\", whatsApp.id);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<DeleteOutline />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</TableBody>\r\n\t\t\t\t</Table>\r\n\t\t\t</Paper>\r\n\t\t</MainContainer>\r\n\t);\r\n};\r\n\r\nexport default Connections;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { makeStyles, TextField, Grid, Container } from \"@material-ui/core\";\r\nimport { Formik, Form, FastField, FieldArray } from \"formik\";\r\nimport { isArray } from \"lodash\";\r\nimport NumberFormat from \"react-number-format\";\r\nimport ButtonWithSpinner from \"../ButtonWithSpinner\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  fullWidth: {\r\n    width: \"100%\",\r\n  },\r\n  textfield: {\r\n    width: \"100%\",\r\n  },\r\n  row: {\r\n    paddingTop: theme.spacing(2),\r\n    paddingBottom: theme.spacing(2),\r\n  },\r\n  control: {\r\n    paddingRight: theme.spacing(1),\r\n    paddingLeft: theme.spacing(1),\r\n  },\r\n  buttonContainer: {\r\n    textAlign: \"right\",\r\n    padding: theme.spacing(1),\r\n  },\r\n}));\r\n\r\nfunction SchedulesForm(props) {\r\n  const { initialValues, onSubmit, loading, labelSaveButton } = props;\r\n  const classes = useStyles();\r\n\r\n  const [schedules, setSchedules] = useState([\r\n    { weekday: \"Segunda-feira\", weekdayEn: \"monday\", startTime: \"\", endTime: \"\", },\r\n    { weekday: \"Terça-feira\", weekdayEn: \"tuesday\", startTime: \"\", endTime: \"\", },\r\n    { weekday: \"Quarta-feira\", weekdayEn: \"wednesday\", startTime: \"\", endTime: \"\", },\r\n    { weekday: \"Quinta-feira\", weekdayEn: \"thursday\", startTime: \"\", endTime: \"\", },\r\n    { weekday: \"Sexta-feira\", weekdayEn: \"friday\", startTime: \"\", endTime: \"\" },\r\n    { weekday: \"Sábado\", weekdayEn: \"saturday\", startTime: \"\", endTime: \"\" },\r\n    { weekday: \"Domingo\", weekdayEn: \"sunday\", startTime: \"\", endTime: \"\" },\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    if (isArray(initialValues) && initialValues.length > 0) {\r\n      setSchedules(initialValues);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [initialValues]);\r\n\r\n  const handleSubmit = (data) => {\r\n    onSubmit(data);\r\n  };\r\n\r\n  return (\r\n    <Formik\r\n      enableReinitialize\r\n      className={classes.fullWidth}\r\n      initialValues={{ schedules }}\r\n      onSubmit={({ schedules }) =>\r\n        setTimeout(() => {\r\n          handleSubmit(schedules);\r\n        }, 500)\r\n      }\r\n    >\r\n      {({ values }) => (\r\n        <Form className={classes.fullWidth}>\r\n          <FieldArray\r\n            name=\"schedules\"\r\n            render={(arrayHelpers) => (\r\n              <Grid spacing={4} container>\r\n                {values.schedules.map((item, index) => {\r\n                  return (\r\n                      <Container>\r\n                          <FastField\r\n                            as={TextField}\r\n                            label=\"Dia da Semana\"\r\n                            name={`schedules[${index}].weekday`}\r\n                            disabled\r\n                            variant=\"outlined\"\r\n                            style={{ marginRight: \"3.2%\", width: \"30%\" }}\r\n                            margin=\"dense\"\r\n                          />\r\n                          <FastField\r\n                            name={`schedules[${index}].startTime`}\r\n                            >\r\n                            {({ field }) => (\r\n                              <NumberFormat\r\n                                label=\"Hora de Inicial\"\r\n                                {...field}\r\n                                variant=\"outlined\"\r\n                                margin=\"dense\"\r\n                                customInput={TextField}\r\n                                format=\"##:##\"\r\n                                style={{ marginRight: \"3.2%\", width: \"30%\" }}\r\n                              />\r\n                            )}\r\n                          </FastField>\r\n                          <FastField\r\n                            name={`schedules[${index}].endTime`}\r\n                            >\r\n                            {({ field }) => (\r\n                              <NumberFormat\r\n                                label=\"Hora de Final\"\r\n                                {...field}\r\n                                variant=\"outlined\"\r\n                                margin=\"dense\"\r\n                                customInput={TextField}\r\n                                format=\"##:##\"\r\n                                style={{ marginRight: \"3.2%\", width: \"30%\" }}\r\n                              />\r\n                            )}\r\n                          </FastField>\r\n\r\n                      </Container>\r\n\r\n                  );\r\n                })}\r\n              </Grid>\r\n            )}\r\n          ></FieldArray>\r\n          <div style={{ textAlign: \"center\", marginTop: \"2%\" }} className={classes.buttonContainer}>\r\n            <ButtonWithSpinner\r\n              loading={loading}\r\n              type=\"submit\"\r\n              color=\"primary\"\r\n              variant=\"contained\"\r\n            >\r\n              {labelSaveButton ?? \"Salvar\"}\r\n            </ButtonWithSpinner>\r\n          </div>\r\n        </Form>\r\n      )}\r\n    </Formik>\r\n  );\r\n}\r\n\r\nexport default SchedulesForm;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport Chip from \"@material-ui/core/Chip\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport api from \"../../services/api\";\r\nimport { i18n } from \"../../translate/i18n\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tchips: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexWrap: \"wrap\",\r\n\t},\r\n\tchip: {\r\n\t\tmargin: 2,\r\n\t},\r\n}));\r\n\r\nconst QueueSelectCustom = ({ selectedQueueIds, companyId, onChange }) => {\r\n\tconst classes = useStyles();\r\n\tconst [queues, setQueues] = useState([]);\r\n\r\n\tuseEffect(() => {\r\n\t\t(async () => {\r\n\t\t\ttry {\r\n\t\t\t\tconst { data } = await api.get(\"/queue\", {\r\n\t\t\t\t\tparams: { companyId }\r\n\t\t\t\t});\r\n\t\t\t\tsetQueues(data);\r\n\t\t\t} catch (err) {\r\n\t\t\t\ttoastError(err);\r\n\t\t\t}\r\n\t\t})();\r\n\t}, [companyId]);\r\n\r\n\tconst handleChange = e => {\r\n\t\tonChange(e.target.value);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div style={{ marginTop: 6 }}>\r\n\t\t\t<FormControl fullWidth margin=\"dense\" variant=\"outlined\">\r\n\t\t\t\t<InputLabel>{i18n.t(\"queueSelect.inputLabel\")}</InputLabel>\r\n\t\t\t\t<Select\r\n\t\t\t\t\tmultiple\r\n\t\t\t\t\tlabelWidth={60}\r\n\t\t\t\t\tvalue={selectedQueueIds}\r\n\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\tMenuProps={{\r\n\t\t\t\t\t\tanchorOrigin: {\r\n\t\t\t\t\t\t\tvertical: \"bottom\",\r\n\t\t\t\t\t\t\thorizontal: \"left\",\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\ttransformOrigin: {\r\n\t\t\t\t\t\t\tvertical: \"top\",\r\n\t\t\t\t\t\t\thorizontal: \"left\",\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tgetContentAnchorEl: null,\r\n\t\t\t\t\t}}\r\n\t\t\t\t\trenderValue={selected => (\r\n\t\t\t\t\t\t<div className={classes.chips}>\r\n\t\t\t\t\t\t\t{selected?.length > 0 &&\r\n\t\t\t\t\t\t\t\tselected.map(id => {\r\n\t\t\t\t\t\t\t\t\tconst queue = queues.find(q => q.id === id);\r\n\t\t\t\t\t\t\t\t\treturn queue ? (\r\n\t\t\t\t\t\t\t\t\t\t<Chip\r\n\t\t\t\t\t\t\t\t\t\t\tkey={id}\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={{ backgroundColor: queue.color }}\r\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t\t\tlabel={queue.name}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName={classes.chip}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t) : null;\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t>\r\n\t\t\t\t\t{queues.map(queue => (\r\n\t\t\t\t\t\t<MenuItem key={queue.id} value={queue.id}>\r\n\t\t\t\t\t\t\t{queue.name}\r\n\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</Select>\r\n\t\t\t</FormControl>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default QueueSelectCustom;\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\n\r\nimport * as Yup from \"yup\";\r\nimport { Formik, Form, Field } from \"formik\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { green } from \"@material-ui/core/colors\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\n\r\nimport api from \"../../services/api\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport QueueSelectCustom from \"../QueueSelectCustom\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\nimport { Can } from \"../Can\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n    flexWrap: \"wrap\",\r\n  },\r\n  multFieldLine: {\r\n    display: \"flex\",\r\n    \"& > *:not(:last-child)\": {\r\n      marginRight: theme.spacing(1),\r\n    },\r\n  },\r\n\r\n  btnWrapper: {\r\n    position: \"relative\",\r\n  },\r\n\r\n  buttonProgress: {\r\n    color: green[500],\r\n    position: \"absolute\",\r\n    top: \"50%\",\r\n    left: \"50%\",\r\n    marginTop: -12,\r\n    marginLeft: -12,\r\n  },\r\n  formControl: {\r\n    margin: theme.spacing(1),\r\n    minWidth: 120,\r\n  },\r\n}));\r\n\r\nconst UserSchema = Yup.object().shape({\r\n  name: Yup.string()\r\n    .min(2, \"Too Short!\")\r\n    .max(50, \"Too Long!\")\r\n    .required(\"Required\"),\r\n  password: Yup.string().min(5, \"Too Short!\").max(50, \"Too Long!\"),\r\n  email: Yup.string().email(\"Invalid email\").required(\"Required\"),\r\n});\r\n\r\nconst ModalUsers = ({ open, onClose, userId, companyId }) => {\r\n  const classes = useStyles();\r\n\r\n  const initialState = {\r\n    name: \"\",\r\n    email: \"\",\r\n    password: \"\",\r\n    profile: \"user\",\r\n  };\r\n\r\n  const { user: loggedInUser } = useContext(AuthContext);\r\n\r\n  const [user, setUser] = useState(initialState);\r\n  const [selectedQueueIds, setSelectedQueueIds] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const fetchUser = async () => {\r\n      if (!userId) return;\r\n      if (open) {\r\n        try {\r\n          const { data } = await api.get(`/users/${userId}`);\r\n          setUser((prevState) => {\r\n            return { ...prevState, ...data };\r\n          });\r\n          const userQueueIds = data.queues?.map((queue) => queue.id);\r\n          setSelectedQueueIds(userQueueIds);\r\n        } catch (err) {\r\n          toastError(err);\r\n        }\r\n      }\r\n    };\r\n\r\n    fetchUser();\r\n  }, [userId, open]);\r\n\r\n  const handleClose = () => {\r\n    onClose();\r\n    setUser(initialState);\r\n  };\r\n\r\n  const handleSaveUser = async (values) => {\r\n    const userData = { ...values, companyId, queueIds: selectedQueueIds };\r\n    try {\r\n      if (userId) {\r\n        await api.put(`/users/${userId}`, userData);\r\n      } else {\r\n        await api.post(\"/users\", userData);\r\n      }\r\n      toast.success(i18n.t(\"userModal.success\"));\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n    handleClose();\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Dialog\r\n        open={open}\r\n        onClose={handleClose}\r\n        maxWidth=\"xs\"\r\n        fullWidth\r\n        scroll=\"paper\"\r\n      >\r\n        <DialogTitle id=\"form-dialog-title\">\r\n          {userId\r\n            ? `${i18n.t(\"userModal.title.edit\")}`\r\n            : `${i18n.t(\"userModal.title.add\")}`}\r\n        </DialogTitle>\r\n        <Formik\r\n          initialValues={user}\r\n          enableReinitialize={true}\r\n          validationSchema={UserSchema}\r\n          onSubmit={(values, actions) => {\r\n            setTimeout(() => {\r\n              handleSaveUser(values);\r\n              actions.setSubmitting(false);\r\n            }, 400);\r\n          }}\r\n        >\r\n          {({ touched, errors, isSubmitting }) => (\r\n            <Form>\r\n              <DialogContent dividers>\r\n                <div className={classes.multFieldLine}>\r\n                  <Field\r\n                    as={TextField}\r\n                    label={i18n.t(\"userModal.form.name\")}\r\n                    autoFocus\r\n                    name=\"name\"\r\n                    error={touched.name && Boolean(errors.name)}\r\n                    helperText={touched.name && errors.name}\r\n                    variant=\"outlined\"\r\n                    margin=\"dense\"\r\n                    fullWidth\r\n                  />\r\n                  <Field\r\n                    as={TextField}\r\n                    label={i18n.t(\"userModal.form.password\")}\r\n                    type=\"password\"\r\n                    name=\"password\"\r\n                    error={touched.password && Boolean(errors.password)}\r\n                    helperText={touched.password && errors.password}\r\n                    variant=\"outlined\"\r\n                    margin=\"dense\"\r\n                    fullWidth\r\n                  />\r\n                </div>\r\n                <div className={classes.multFieldLine}>\r\n                  <Field\r\n                    as={TextField}\r\n                    label={i18n.t(\"userModal.form.email\")}\r\n                    name=\"email\"\r\n                    error={touched.email && Boolean(errors.email)}\r\n                    helperText={touched.email && errors.email}\r\n                    variant=\"outlined\"\r\n                    margin=\"dense\"\r\n                    fullWidth\r\n                  />\r\n                  <FormControl\r\n                    variant=\"outlined\"\r\n                    className={classes.formControl}\r\n                    margin=\"dense\"\r\n                  >\r\n                    <Can\r\n                      role={loggedInUser.profile}\r\n                      perform=\"user-modal:editProfile\"\r\n                      yes={() => (\r\n                        <>\r\n                          <InputLabel id=\"profile-selection-input-label\">\r\n                            {i18n.t(\"userModal.form.profile\")}\r\n                          </InputLabel>\r\n\r\n                          <Field\r\n                            as={Select}\r\n                            label={i18n.t(\"userModal.form.profile\")}\r\n                            name=\"profile\"\r\n                            labelId=\"profile-selection-label\"\r\n                            id=\"profile-selection\"\r\n                            required\r\n                          >\r\n                            <MenuItem value=\"admin\">Admin</MenuItem>\r\n                            <MenuItem value=\"user\">User</MenuItem>\r\n                          </Field>\r\n                        </>\r\n                      )}\r\n                    />\r\n                  </FormControl>\r\n                </div>\r\n                <Can\r\n                  role={loggedInUser.profile}\r\n                  perform=\"user-modal:editQueues\"\r\n                  yes={() => (\r\n                    <QueueSelectCustom\r\n                      companyId={companyId}\r\n                      selectedQueueIds={selectedQueueIds}\r\n                      onChange={(values) => setSelectedQueueIds(values)}\r\n                    />\r\n                  )}\r\n                />\r\n              </DialogContent>\r\n              <DialogActions>\r\n                <Button\r\n                  onClick={handleClose}\r\n                  color=\"secondary\"\r\n                  disabled={isSubmitting}\r\n                  variant=\"outlined\"\r\n                >\r\n                  {i18n.t(\"userModal.buttons.cancel\")}\r\n                </Button>\r\n                <Button\r\n                  type=\"submit\"\r\n                  color=\"primary\"\r\n                  disabled={isSubmitting}\r\n                  variant=\"contained\"\r\n                  className={classes.btnWrapper}\r\n                >\r\n                  {userId\r\n                    ? `${i18n.t(\"userModal.buttons.okEdit\")}`\r\n                    : `${i18n.t(\"userModal.buttons.okAdd\")}`}\r\n                  {isSubmitting && (\r\n                    <CircularProgress\r\n                      size={24}\r\n                      className={classes.buttonProgress}\r\n                    />\r\n                  )}\r\n                </Button>\r\n              </DialogActions>\r\n            </Form>\r\n          )}\r\n        </Formik>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ModalUsers;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  makeStyles,\r\n  Paper,\r\n  Grid,\r\n  FormControl,\r\n  InputLabel,\r\n  MenuItem,\r\n  TextField,\r\n  Table,\r\n  TableHead,\r\n  TableBody,\r\n  TableCell,\r\n  TableRow,\r\n  IconButton,\r\n  Select,\r\n} from \"@material-ui/core\";\r\nimport { Formik, Form, Field } from \"formik\";\r\nimport ButtonWithSpinner from \"../ButtonWithSpinner\";\r\nimport ConfirmationModal from \"../ConfirmationModal\";\r\n\r\nimport { Edit as EditIcon } from \"@material-ui/icons\";\r\n\r\nimport { toast } from \"react-toastify\";\r\nimport useCompanies from \"../../hooks/useCompanies\";\r\nimport usePlans from \"../../hooks/usePlans\";\r\nimport ModalUsers from \"../ModalUsers\";\r\nimport api from \"../../services/api\";\r\nimport { head, isArray, has } from \"lodash\";\r\nimport { useDate } from \"../../hooks/useDate\";\r\n\r\nimport moment from \"moment\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  mainPaper: {\r\n    width: \"100%\",\r\n    flex: 1,\r\n    padding: theme.spacing(2),\r\n  },\r\n  fullWidth: {\r\n    width: \"100%\",\r\n  },\r\n  tableContainer: {\r\n    width: \"100%\",\r\n    overflowX: \"scroll\",\r\n    ...theme.scrollbarStyles,\r\n  },\r\n  textfield: {\r\n    width: \"100%\",\r\n  },\r\n  textRight: {\r\n    textAlign: \"right\",\r\n  },\r\n  row: {\r\n    paddingTop: theme.spacing(2),\r\n    paddingBottom: theme.spacing(2),\r\n  },\r\n  control: {\r\n    paddingRight: theme.spacing(1),\r\n    paddingLeft: theme.spacing(1),\r\n  },\r\n  buttonContainer: {\r\n    textAlign: \"right\",\r\n    padding: theme.spacing(1),\r\n  },\r\n}));\r\n\r\nexport function CompanyForm(props) {\r\n  const { onSubmit, onDelete, onCancel, initialValue, loading } = props;\r\n  const classes = useStyles();\r\n  const [plans, setPlans] = useState([]);\r\n  const [modalUser, setModalUser] = useState(false);\r\n  const [firstUser, setFirstUser] = useState({});\r\n\r\n  const [record, setRecord] = useState({\r\n    name: \"\",\r\n    email: \"\",\r\n    phone: \"\",\r\n    planId: \"\",\r\n    status: true,\r\n    campaignsEnabled: false,\r\n    dueDate: \"\",\r\n    recurrence: \"\",\r\n    ...initialValue,\r\n  });\r\n\r\n  const { list: listPlans } = usePlans();\r\n\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      const list = await listPlans();\r\n      setPlans(list);\r\n    }\r\n    fetchData();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setRecord((prev) => {\r\n      if (moment(initialValue).isValid()) {\r\n        initialValue.dueDate = moment(initialValue.dueDate).format(\r\n          \"YYYY-MM-DD\"\r\n        );\r\n      }\r\n      return {\r\n        ...prev,\r\n        ...initialValue,\r\n      };\r\n    });\r\n  }, [initialValue]);\r\n\r\n  const handleSubmit = async (data) => {\r\n    if (data.dueDate === \"\" || moment(data.dueDate).isValid() === false) {\r\n      data.dueDate = null;\r\n    }\r\n    onSubmit(data);\r\n    setRecord({ ...initialValue, dueDate: \"\" });\r\n  };\r\n\r\n  const handleOpenModalUsers = async () => {\r\n    try {\r\n      const { data } = await api.get(\"/users/list\", {\r\n        params: {\r\n          companyId: initialValue.id,\r\n        },\r\n      });\r\n      if (isArray(data) && data.length) {\r\n        setFirstUser(head(data));\r\n      }\r\n      setModalUser(true);\r\n    } catch (e) {\r\n      toast.error(e);\r\n    }\r\n  };\r\n\r\n  const handleCloseModalUsers = () => {\r\n    setFirstUser({});\r\n    setModalUser(false);\r\n  };\r\n\r\n  const incrementDueDate = () => {\r\n    const data = { ...record };\r\n    if (data.dueDate !== \"\" && data.dueDate !== null) {\r\n      switch (data.recurrence) {\r\n        case \"MENSAL\":\r\n          data.dueDate = moment(data.dueDate)\r\n            .add(1, \"month\")\r\n            .format(\"YYYY-MM-DD\");\r\n          break;\r\n        case \"BIMESTRAL\":\r\n          data.dueDate = moment(data.dueDate)\r\n            .add(2, \"month\")\r\n            .format(\"YYYY-MM-DD\");\r\n          break;\r\n        case \"TRIMESTRAL\":\r\n          data.dueDate = moment(data.dueDate)\r\n            .add(3, \"month\")\r\n            .format(\"YYYY-MM-DD\");\r\n          break;\r\n        case \"SEMESTRAL\":\r\n          data.dueDate = moment(data.dueDate)\r\n            .add(6, \"month\")\r\n            .format(\"YYYY-MM-DD\");\r\n          break;\r\n        case \"ANUAL\":\r\n          data.dueDate = moment(data.dueDate)\r\n            .add(12, \"month\")\r\n            .format(\"YYYY-MM-DD\");\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n    }\r\n    setRecord(data);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <ModalUsers\r\n        userId={firstUser.id}\r\n        companyId={initialValue.id}\r\n        open={modalUser}\r\n        onClose={handleCloseModalUsers}\r\n      />\r\n      <Formik\r\n        enableReinitialize\r\n        className={classes.fullWidth}\r\n        initialValues={record}\r\n        onSubmit={(values, { resetForm }) =>\r\n          setTimeout(() => {\r\n            handleSubmit(values);\r\n            resetForm();\r\n          }, 500)\r\n        }\r\n      >\r\n        {(values, setValues) => (\r\n          <Form className={classes.fullWidth}>\r\n            <Grid spacing={2} justifyContent=\"flex-end\" container>\r\n              <Grid xs={12} sm={6} md={4} item>\r\n                <Field\r\n                  as={TextField}\r\n                  label=\"Nome\"\r\n                  name=\"name\"\r\n                  variant=\"outlined\"\r\n                  className={classes.fullWidth}\r\n                  margin=\"dense\"\r\n                />\r\n              </Grid>\r\n              <Grid xs={12} sm={6} md={2} item>\r\n                <Field\r\n                  as={TextField}\r\n                  label=\"E-mail\"\r\n                  name=\"email\"\r\n                  variant=\"outlined\"\r\n                  className={classes.fullWidth}\r\n                  margin=\"dense\"\r\n                  required\r\n                />\r\n              </Grid>\r\n              <Grid xs={12} sm={6} md={2} item>\r\n                <Field\r\n                  as={TextField}\r\n                  label=\"Telefone\"\r\n                  name=\"phone\"\r\n                  variant=\"outlined\"\r\n                  className={classes.fullWidth}\r\n                  margin=\"dense\"\r\n                />\r\n              </Grid>\r\n              <Grid xs={12} sm={6} md={2} item>\r\n                <FormControl margin=\"dense\" variant=\"outlined\" fullWidth>\r\n                  <InputLabel htmlFor=\"plan-selection\">Plano</InputLabel>\r\n                  <Field\r\n                    as={Select}\r\n                    id=\"plan-selection\"\r\n                    label=\"Plano\"\r\n                    labelId=\"plan-selection-label\"\r\n                    name=\"planId\"\r\n                    margin=\"dense\"\r\n                    required\r\n                  >\r\n                    {plans.map((plan, key) => (\r\n                      <MenuItem key={key} value={plan.id}>\r\n                        {plan.name}\r\n                      </MenuItem>\r\n                    ))}\r\n                  </Field>\r\n                </FormControl>\r\n              </Grid>\r\n              <Grid xs={12} sm={6} md={2} item>\r\n                <FormControl margin=\"dense\" variant=\"outlined\" fullWidth>\r\n                  <InputLabel htmlFor=\"status-selection\">Status</InputLabel>\r\n                  <Field\r\n                    as={Select}\r\n                    id=\"status-selection\"\r\n                    label=\"Status\"\r\n                    labelId=\"status-selection-label\"\r\n                    name=\"status\"\r\n                    margin=\"dense\"\r\n                  >\r\n                    <MenuItem value={true}>Sim</MenuItem>\r\n                    <MenuItem value={false}>Não</MenuItem>\r\n                  </Field>\r\n                </FormControl>\r\n              </Grid>\r\n              <Grid xs={12} sm={6} md={2} item>\r\n                <FormControl margin=\"dense\" variant=\"outlined\" fullWidth>\r\n                  <InputLabel htmlFor=\"status-selection\">Campanhas</InputLabel>\r\n                  <Field\r\n                    as={Select}\r\n                    id=\"campaigns-selection\"\r\n                    label=\"Campanhas\"\r\n                    labelId=\"campaigns-selection-label\"\r\n                    name=\"campaignsEnabled\"\r\n                    margin=\"dense\"\r\n                  >\r\n                    <MenuItem value={true}>Habilitadas</MenuItem>\r\n                    <MenuItem value={false}>Desabilitadas</MenuItem>\r\n                  </Field>\r\n                </FormControl>\r\n              </Grid>\r\n              <Grid xs={12} sm={6} md={2} item>\r\n                <FormControl variant=\"outlined\" fullWidth>\r\n                  <Field\r\n                    as={TextField}\r\n                    label=\"Data de Vencimento\"\r\n                    type=\"date\"\r\n                    name=\"dueDate\"\r\n                    InputLabelProps={{\r\n                      shrink: true,\r\n                    }}\r\n                    variant=\"outlined\"\r\n                    fullWidth\r\n                    margin=\"dense\"\r\n                  />\r\n                </FormControl>\r\n              </Grid>\r\n              <Grid xs={12} sm={6} md={2} item>\r\n                <FormControl margin=\"dense\" variant=\"outlined\" fullWidth>\r\n                  <InputLabel htmlFor=\"recorrencia-selection\">\r\n                    Recorrência\r\n                  </InputLabel>\r\n                  <Field\r\n                    as={Select}\r\n                    label=\"Recorrência\"\r\n                    labelId=\"recorrencia-selection-label\"\r\n                    id=\"recurrence\"\r\n                    name=\"recurrence\"\r\n                    margin=\"dense\"\r\n                  >\r\n                    <MenuItem value=\"MENSAL\">Mensal</MenuItem>\r\n                    {/*<MenuItem value=\"BIMESTRAL\">Bimestral</MenuItem>*/}\r\n                    {/*<MenuItem value=\"TRIMESTRAL\">Trimestral</MenuItem>*/}\r\n                    {/*<MenuItem value=\"SEMESTRAL\">Semestral</MenuItem>*/}\r\n                    {/*<MenuItem value=\"ANUAL\">Anual</MenuItem>*/}\r\n                  </Field>\r\n                </FormControl>\r\n              </Grid>\r\n              <Grid xs={12} item>\r\n                <Grid justifyContent=\"flex-end\" spacing={1} container>\r\n                  <Grid xs={4} md={1} item>\r\n                    <ButtonWithSpinner\r\n                      className={classes.fullWidth}\r\n                      style={{ marginTop: 7 }}\r\n                      loading={loading}\r\n                      onClick={() => onCancel()}\r\n                      variant=\"contained\"\r\n                    >\r\n                      Limpar\r\n                    </ButtonWithSpinner>\r\n                  </Grid>\r\n                  {record.id !== undefined ? (\r\n                    <>\r\n                      <Grid xs={6} md={1} item>\r\n                        <ButtonWithSpinner\r\n                          style={{ marginTop: 7 }}\r\n                          className={classes.fullWidth}\r\n                          loading={loading}\r\n                          onClick={() => onDelete(record)}\r\n                          variant=\"contained\"\r\n                          color=\"secondary\"\r\n                        >\r\n                          Excluir\r\n                        </ButtonWithSpinner>\r\n                      </Grid>\r\n                      <Grid xs={6} md={2} item>\r\n                        <ButtonWithSpinner\r\n                          style={{ marginTop: 7 }}\r\n                          className={classes.fullWidth}\r\n                          loading={loading}\r\n                          onClick={() => incrementDueDate()}\r\n                          variant=\"contained\"\r\n                          color=\"primary\"\r\n                        >\r\n                          + Vencimento\r\n                        </ButtonWithSpinner>\r\n                      </Grid>\r\n                      <Grid xs={6} md={1} item>\r\n                        <ButtonWithSpinner\r\n                          style={{ marginTop: 7 }}\r\n                          className={classes.fullWidth}\r\n                          loading={loading}\r\n                          onClick={() => handleOpenModalUsers()}\r\n                          variant=\"contained\"\r\n                          color=\"primary\"\r\n                        >\r\n                          Usuário\r\n                        </ButtonWithSpinner>\r\n                      </Grid>\r\n                    </>\r\n                  ) : null}\r\n                  <Grid xs={6} md={1} item>\r\n                    <ButtonWithSpinner\r\n                      className={classes.fullWidth}\r\n                      style={{ marginTop: 7 }}\r\n                      loading={loading}\r\n                      type=\"submit\"\r\n                      variant=\"contained\"\r\n                      color=\"primary\"\r\n                    >\r\n                      Salvar\r\n                    </ButtonWithSpinner>\r\n                  </Grid>\r\n                </Grid>\r\n              </Grid>\r\n            </Grid>\r\n          </Form>\r\n        )}\r\n      </Formik>\r\n    </>\r\n  );\r\n}\r\n\r\nexport function CompaniesManagerGrid(props) {\r\n  const { records, onSelect } = props;\r\n  const classes = useStyles();\r\n  const { dateToClient } = useDate();\r\n\r\n  const renderStatus = (row) => {\r\n    return row.status === false ? \"Não\" : \"Sim\";\r\n  };\r\n\r\n  const renderPlan = (row) => {\r\n    return row.planId !== null ? row.plan.name : \"-\";\r\n  };\r\n\r\n  const renderCampaignsStatus = (row) => {\r\n    if (\r\n      has(row, \"settings\") &&\r\n      isArray(row.settings) &&\r\n      row.settings.length > 0\r\n    ) {\r\n      const setting = row.settings.find((s) => s.key === \"campaignsEnabled\");\r\n      if (setting) {\r\n        return setting.value === \"true\" ? \"Habilitadas\" : \"Desabilitadas\";\r\n      }\r\n    }\r\n    return \"Desabilitadas\";\r\n  };\r\n\r\n  const rowStyle = (record) => {\r\n    if (moment(record.dueDate).isValid()) {\r\n      const now = moment();\r\n      const dueDate = moment(record.dueDate);\r\n      const diff = dueDate.diff(now, \"days\");\r\n      if (diff === 5) {\r\n        return { backgroundColor: \"#fffead\" };\r\n      }\r\n      if (diff >= -3 && diff <= 4) {\r\n        return { backgroundColor: \"#f7cc8f\" };\r\n      }\r\n      if (diff === -4) {\r\n        return { backgroundColor: \"#fa8c8c\" };\r\n      }\r\n    }\r\n    return {};\r\n  };\r\n\r\n  return (\r\n    <Paper className={classes.tableContainer}>\r\n      <Table\r\n        className={classes.fullWidth}\r\n        size=\"small\"\r\n        aria-label=\"a dense table\"\r\n      >\r\n        <TableHead>\r\n          <TableRow>\r\n            <TableCell align=\"center\" style={{ width: \"1%\" }}>\r\n              #\r\n            </TableCell>\r\n            <TableCell align=\"left\">Nome</TableCell>\r\n            <TableCell align=\"left\">E-mail</TableCell>\r\n            <TableCell align=\"left\">Telefone</TableCell>\r\n            <TableCell align=\"left\">Plano</TableCell>\r\n            <TableCell align=\"left\">Campanhas</TableCell>\r\n            <TableCell align=\"left\">Status</TableCell>\r\n            <TableCell align=\"left\">Criada Em</TableCell>\r\n            <TableCell align=\"left\">Vencimento</TableCell>\r\n          </TableRow>\r\n        </TableHead>\r\n        <TableBody>\r\n          {records.map((row, key) => (\r\n            <TableRow style={rowStyle(row)} key={key}>\r\n              <TableCell align=\"center\" style={{ width: \"1%\" }}>\r\n                <IconButton onClick={() => onSelect(row)} aria-label=\"delete\">\r\n                  <EditIcon />\r\n                </IconButton>\r\n              </TableCell>\r\n              <TableCell align=\"left\">{row.name || \"-\"}</TableCell>\r\n              <TableCell align=\"left\">{row.email || \"-\"}</TableCell>\r\n              <TableCell align=\"left\">{row.phone || \"-\"}</TableCell>\r\n              <TableCell align=\"left\">{renderPlan(row)}</TableCell>\r\n              <TableCell align=\"left\">{renderCampaignsStatus(row)}</TableCell>\r\n              <TableCell align=\"left\">{renderStatus(row)}</TableCell>\r\n              <TableCell align=\"left\">{dateToClient(row.createdAt)}</TableCell>\r\n              <TableCell align=\"left\">\r\n                {dateToClient(row.dueDate)}\r\n                <br />\r\n                <span>{row.recurrence}</span>\r\n              </TableCell>\r\n            </TableRow>\r\n          ))}\r\n        </TableBody>\r\n      </Table>\r\n    </Paper>\r\n  );\r\n}\r\n\r\nexport default function CompaniesManager() {\r\n  const classes = useStyles();\r\n  const { list, save, update, remove } = useCompanies();\r\n\r\n  const [showConfirmDialog, setShowConfirmDialog] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [records, setRecords] = useState([]);\r\n  const [record, setRecord] = useState({\r\n    name: \"\",\r\n    email: \"\",\r\n    phone: \"\",\r\n    planId: \"\",\r\n    status: true,\r\n    campaignsEnabled: false,\r\n    dueDate: \"\",\r\n    recurrence: \"\",\r\n  });\r\n\r\n  useEffect(() => {\r\n    loadPlans();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  const loadPlans = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const companyList = await list();\r\n      setRecords(companyList);\r\n    } catch (e) {\r\n      toast.error(\"Não foi possível carregar a lista de registros\");\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  const handleSubmit = async (data) => {\r\n    setLoading(true);\r\n    try {\r\n      if (data.id !== undefined) {\r\n        await update(data);\r\n      } else {\r\n        await save(data);\r\n      }\r\n      await loadPlans();\r\n      handleCancel();\r\n      toast.success(\"Operação realizada com sucesso!\");\r\n    } catch (e) {\r\n      toast.error(\r\n        \"Não foi possível realizar a operação. Verifique se já existe uma empresa com o mesmo nome ou se os campos foram preenchidos corretamente\"\r\n      );\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  const handleDelete = async () => {\r\n    setLoading(true);\r\n    try {\r\n      await remove(record.id);\r\n      await loadPlans();\r\n      handleCancel();\r\n      toast.success(\"Operação realizada com sucesso!\");\r\n    } catch (e) {\r\n      toast.error(\"Não foi possível realizar a operação\");\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  const handleOpenDeleteDialog = () => {\r\n    setShowConfirmDialog(true);\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setRecord((prev) => ({\r\n      ...prev,\r\n      name: \"\",\r\n      email: \"\",\r\n      phone: \"\",\r\n      planId: \"\",\r\n      status: true,\r\n      campaignsEnabled: false,\r\n      dueDate: \"\",\r\n      recurrence: \"\",\r\n    }));\r\n  };\r\n\r\n  const handleSelect = (data) => {\r\n    let campaignsEnabled = false;\r\n\r\n    const setting = data.settings.find(\r\n      (s) => s.key.indexOf(\"campaignsEnabled\") > -1\r\n    );\r\n    if (setting) {\r\n      campaignsEnabled =\r\n        setting.value === \"true\" || setting.value === \"enabled\";\r\n    }\r\n\r\n    setRecord((prev) => ({\r\n      ...prev,\r\n      id: data.id,\r\n      name: data.name || \"\",\r\n      phone: data.phone || \"\",\r\n      email: data.email || \"\",\r\n      planId: data.planId || \"\",\r\n      status: data.status === false ? false : true,\r\n      campaignsEnabled,\r\n      dueDate: data.dueDate || \"\",\r\n      recurrence: data.recurrence || \"\",\r\n    }));\r\n  };\r\n\r\n  return (\r\n    <Paper className={classes.mainPaper} elevation={0}>\r\n      <Grid spacing={2} container>\r\n        <Grid xs={12} item>\r\n          <CompanyForm\r\n            initialValue={record}\r\n            onDelete={handleOpenDeleteDialog}\r\n            onSubmit={handleSubmit}\r\n            onCancel={handleCancel}\r\n            loading={loading}\r\n          />\r\n        </Grid>\r\n        <Grid xs={12} item>\r\n          <CompaniesManagerGrid records={records} onSelect={handleSelect} />\r\n        </Grid>\r\n      </Grid>\r\n      <ConfirmationModal\r\n        title=\"Exclusão de Registro\"\r\n        open={showConfirmDialog}\r\n        onClose={() => setShowConfirmDialog(false)}\r\n        onConfirm={() => handleDelete()}\r\n      >\r\n        Deseja realmente excluir esse registro?\r\n      </ConfirmationModal>\r\n    </Paper>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport {\r\n    makeStyles,\r\n    Paper,\r\n    Grid,\r\n    TextField,\r\n    Table,\r\n    TableHead,\r\n    TableBody,\r\n    TableCell,\r\n    TableRow,\r\n    IconButton,\r\n    FormControl,\r\n    InputLabel,\r\n    MenuItem,\r\n    Select\r\n} from \"@material-ui/core\";\r\nimport { Formik, Form, Field } from 'formik';\r\nimport ButtonWithSpinner from \"../ButtonWithSpinner\";\r\nimport ConfirmationModal from \"../ConfirmationModal\";\r\n\r\nimport { Edit as EditIcon } from \"@material-ui/icons\";\r\n\r\nimport { toast } from \"react-toastify\";\r\nimport usePlans from \"../../hooks/usePlans\";\r\nimport { i18n } from \"../../translate/i18n\";\r\n\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root: {\r\n        width: '100%'\r\n    },\r\n    mainPaper: {\r\n        width: '100%',\r\n        flex: 1,\r\n        padding: theme.spacing(2)\r\n    },\r\n    fullWidth: {\r\n        width: '100%'\r\n    },\r\n    tableContainer: {\r\n        width: '100%',\r\n        overflowX: \"scroll\",\r\n        ...theme.scrollbarStyles\r\n    },\r\n    textfield: {\r\n        width: '100%'\r\n    },\r\n    textRight: {\r\n        textAlign: 'right'\r\n    },\r\n    row: {\r\n        paddingTop: theme.spacing(2),\r\n        paddingBottom: theme.spacing(2)\r\n    },\r\n    control: {\r\n        paddingRight: theme.spacing(1),\r\n        paddingLeft: theme.spacing(1)\r\n    },\r\n    buttonContainer: {\r\n        textAlign: 'right',\r\n        padding: theme.spacing(1)\r\n    }\r\n}));\r\n\r\nexport function PlanManagerForm(props) {\r\n    const { onSubmit, onDelete, onCancel, initialValue, loading } = props;\r\n    const classes = useStyles()\r\n\r\n    const [record, setRecord] = useState({\r\n        name: '',\r\n        users: 0,\r\n        connections: 0,\r\n        queues: 0,\r\n        value: 0,\r\n        useCampaigns: true,\r\n        useSchedules: true,\r\n        useInternalChat: true,\r\n        useExternalApi: true,\r\n        useKanban: true,\r\n        useOpenAi: true,\r\n        useIntegrations: true,\r\n    });\r\n\r\n    useEffect(() => {\r\n        setRecord(initialValue)\r\n    }, [initialValue])\r\n\r\n    const handleSubmit = async (data) => {\r\n        onSubmit(data)\r\n    }\r\n\r\n    return (\r\n        <Formik\r\n            enableReinitialize\r\n            className={classes.fullWidth}\r\n            initialValues={record}\r\n            onSubmit={(values, { resetForm }) =>\r\n                setTimeout(() => {\r\n                    handleSubmit(values)\r\n                    resetForm()\r\n                }, 500)\r\n            }\r\n        >\r\n            {(values) => (\r\n                <Form className={classes.fullWidth}>\r\n                    <Grid spacing={1} justifyContent=\"flex-start\" container>\r\n                        {/* NOME */}\r\n                        <Grid xs={12} sm={6} md={2} item>\r\n                            <Field\r\n                                as={TextField}\r\n                                label={i18n.t(\"plans.form.name\")}\r\n                                name=\"name\"\r\n                                variant=\"outlined\"\r\n                                className={classes.fullWidth}\r\n                                margin=\"dense\"\r\n                            />\r\n                        </Grid>\r\n\r\n                        {/* USUARIOS */}\r\n                        <Grid xs={12} sm={6} md={1} item>\r\n                            <Field\r\n                                as={TextField}\r\n                                label={i18n.t(\"plans.form.users\")}\r\n                                name=\"users\"\r\n                                variant=\"outlined\"\r\n                                className={classes.fullWidth}\r\n                                margin=\"dense\"\r\n                                type=\"number\"\r\n                            />\r\n                        </Grid>\r\n\r\n                        {/* CONEXOES */}\r\n                        <Grid xs={12} sm={6} md={1} item>\r\n                            <Field\r\n                                as={TextField}\r\n                                label={i18n.t(\"plans.form.connections\")}\r\n                                name=\"connections\"\r\n                                variant=\"outlined\"\r\n                                className={classes.fullWidth}\r\n                                margin=\"dense\"\r\n                                type=\"number\"\r\n                            />\r\n                        </Grid>\r\n\r\n                        {/* FILAS */}\r\n                        <Grid xs={12} sm={6} md={1} item>\r\n                            <Field\r\n                                as={TextField}\r\n                                label=\"Filas\"\r\n                                name=\"queues\"\r\n                                variant=\"outlined\"\r\n                                className={classes.fullWidth}\r\n                                margin=\"dense\"\r\n                                type=\"number\"\r\n                            />\r\n                        </Grid>\r\n\r\n                        {/* VALOR */}\r\n                        <Grid xs={12} sm={6} md={1} item>\r\n                            <Field\r\n                                as={TextField}\r\n                                label=\"Valor\"\r\n                                name=\"value\"\r\n                                variant=\"outlined\"\r\n                                className={classes.fullWidth}\r\n                                margin=\"dense\"\r\n                                type=\"text\"\r\n                            />\r\n                        </Grid>\r\n\r\n                        {/* CAMPANHAS */}\r\n                        <Grid xs={12} sm={6} md={2} item>\r\n                            <FormControl margin=\"dense\" variant=\"outlined\" fullWidth>\r\n                                <InputLabel htmlFor=\"useCampaigns-selection\">{i18n.t(\"plans.form.campaigns\")}</InputLabel>\r\n                                <Field\r\n                                    as={Select}\r\n                                    id=\"useCampaigns-selection\"\r\n                                    label={i18n.t(\"plans.form.campaigns\")}\r\n                                    labelId=\"useCampaigns-selection-label\"\r\n                                    name=\"useCampaigns\"\r\n                                    margin=\"dense\"\r\n                                >\r\n                                    <MenuItem value={true}>{i18n.t(\"plans.form.enabled\")}</MenuItem>\r\n                                    <MenuItem value={false}>{i18n.t(\"plans.form.disabled\")}</MenuItem>\r\n                                </Field>\r\n                            </FormControl>\r\n                        </Grid>\r\n\r\n                        {/* AGENDAMENTOS */}\r\n                        <Grid xs={12} sm={8} md={2} item>\r\n                            <FormControl margin=\"dense\" variant=\"outlined\" fullWidth>\r\n                                <InputLabel htmlFor=\"useSchedules-selection\">{i18n.t(\"plans.form.schedules\")}</InputLabel>\r\n                                <Field\r\n                                    as={Select}\r\n                                    id=\"useSchedules-selection\"\r\n                                    label={i18n.t(\"plans.form.schedules\")}\r\n                                    labelId=\"useSchedules-selection-label\"\r\n                                    name=\"useSchedules\"\r\n                                    margin=\"dense\"\r\n                                >\r\n                                    <MenuItem value={true}>{i18n.t(\"plans.form.enabled\")}</MenuItem>\r\n                                    <MenuItem value={false}>{i18n.t(\"plans.form.disabled\")}</MenuItem>\r\n                                </Field>\r\n                            </FormControl>\r\n                        </Grid>\r\n\r\n                        {/* CHAT INTERNO */}\r\n                        <Grid xs={12} sm={8} md={2} item>\r\n                            <FormControl margin=\"dense\" variant=\"outlined\" fullWidth>\r\n                                <InputLabel htmlFor=\"useInternalChat-selection\">Chat Interno</InputLabel>\r\n                                <Field\r\n                                    as={Select}\r\n                                    id=\"useInternalChat-selection\"\r\n                                    label=\"Chat Interno\"\r\n                                    labelId=\"useInternalChat-selection-label\"\r\n                                    name=\"useInternalChat\"\r\n                                    margin=\"dense\"\r\n                                >\r\n                                    <MenuItem value={true}>{i18n.t(\"plans.form.enabled\")}</MenuItem>\r\n                                    <MenuItem value={false}>{i18n.t(\"plans.form.disabled\")}</MenuItem>\r\n                                </Field>\r\n                            </FormControl>\r\n                        </Grid>\r\n\r\n                        {/* API Externa */}\r\n                        <Grid xs={12} sm={8} md={4} item>\r\n                            <FormControl margin=\"dense\" variant=\"outlined\" fullWidth>\r\n                                <InputLabel htmlFor=\"useExternalApi-selection\">API Externa</InputLabel>\r\n                                <Field\r\n                                    as={Select}\r\n                                    id=\"useExternalApi-selection\"\r\n                                    label=\"API Externa\"\r\n                                    labelId=\"useExternalApi-selection-label\"\r\n                                    name=\"useExternalApi\"\r\n                                    margin=\"dense\"\r\n                                >\r\n                                    <MenuItem value={true}>{i18n.t(\"plans.form.enabled\")}</MenuItem>\r\n                                    <MenuItem value={false}>{i18n.t(\"plans.form.disabled\")}</MenuItem>\r\n                                </Field>\r\n                            </FormControl>\r\n                        </Grid>\r\n\r\n                        {/* KANBAN */}\r\n                        <Grid xs={12} sm={8} md={2} item>\r\n                            <FormControl margin=\"dense\" variant=\"outlined\" fullWidth>\r\n                                <InputLabel htmlFor=\"useKanban-selection\">Kanban</InputLabel>\r\n                                <Field\r\n                                    as={Select}\r\n                                    id=\"useKanban-selection\"\r\n                                    label=\"Kanban\"\r\n                                    labelId=\"useKanban-selection-label\"\r\n                                    name=\"useKanban\"\r\n                                    margin=\"dense\"\r\n                                >\r\n                                    <MenuItem value={true}>{i18n.t(\"plans.form.enabled\")}</MenuItem>\r\n                                    <MenuItem value={false}>{i18n.t(\"plans.form.disabled\")}</MenuItem>\r\n                                </Field>\r\n                            </FormControl>\r\n                        </Grid>\r\n\r\n                        {/* OPENAI */}\r\n                        <Grid xs={12} sm={8} md={2} item>\r\n                            <FormControl margin=\"dense\" variant=\"outlined\" fullWidth>\r\n                                <InputLabel htmlFor=\"useOpenAi-selection\">Open.Ai</InputLabel>\r\n                                <Field\r\n                                    as={Select}\r\n                                    id=\"useOpenAi-selection\"\r\n                                    label=\"Talk.Ai\"\r\n                                    labelId=\"useOpenAi-selection-label\"\r\n                                    name=\"useOpenAi\"\r\n                                    margin=\"dense\"\r\n                                >\r\n                                    <MenuItem value={true}>{i18n.t(\"plans.form.enabled\")}</MenuItem>\r\n                                    <MenuItem value={false}>{i18n.t(\"plans.form.disabled\")}</MenuItem>\r\n                                </Field>\r\n                            </FormControl>\r\n                        </Grid>\r\n\r\n                        {/* INTEGRACOES */}\r\n                        <Grid xs={12} sm={8} md={2} item>\r\n                            <FormControl margin=\"dense\" variant=\"outlined\" fullWidth>\r\n                                <InputLabel htmlFor=\"useIntegrations-selection\">Integrações</InputLabel>\r\n                                <Field\r\n                                    as={Select}\r\n                                    id=\"useIntegrations-selection\"\r\n                                    label=\"Integrações\"\r\n                                    labelId=\"useIntegrations-selection-label\"\r\n                                    name=\"useIntegrations\"\r\n                                    margin=\"dense\"\r\n                                >\r\n                                    <MenuItem value={true}>{i18n.t(\"plans.form.enabled\")}</MenuItem>\r\n                                    <MenuItem value={false}>{i18n.t(\"plans.form.disabled\")}</MenuItem>\r\n                                </Field>\r\n                            </FormControl>\r\n                        </Grid>\r\n                    </Grid>\r\n                    <Grid spacing={2} justifyContent=\"flex-end\" container>\r\n\r\n                        <Grid sm={3} md={2} item>\r\n                            <ButtonWithSpinner className={classes.fullWidth} loading={loading} onClick={() => onCancel()} variant=\"contained\">\r\n                                {i18n.t(\"plans.form.clear\")}\r\n                            </ButtonWithSpinner>\r\n                        </Grid>\r\n                        {record.id !== undefined ? (\r\n                            <Grid sm={3} md={2} item>\r\n                                <ButtonWithSpinner className={classes.fullWidth} loading={loading} onClick={() => onDelete(record)} variant=\"contained\" color=\"secondary\">\r\n                                    {i18n.t(\"plans.form.delete\")}\r\n                                </ButtonWithSpinner>\r\n                            </Grid>\r\n                        ) : null}\r\n                        <Grid sm={3} md={2} item>\r\n                            <ButtonWithSpinner className={classes.fullWidth} loading={loading} type=\"submit\" variant=\"contained\" color=\"primary\">\r\n                                {i18n.t(\"plans.form.save\")}\r\n                            </ButtonWithSpinner>\r\n                        </Grid>\r\n                    </Grid>\r\n                </Form>\r\n            )}\r\n        </Formik>\r\n    )\r\n}\r\n\r\nexport function PlansManagerGrid(props) {\r\n    const { records, onSelect } = props\r\n    const classes = useStyles()\r\n    \r\n    const renderCampaigns = (row) => {\r\n        return row.useCampaigns === false ? `${i18n.t(\"plans.form.no\")}` : `${i18n.t(\"plans.form.yes\")}`;\r\n    };\r\n\r\n    const renderSchedules = (row) => {\r\n        return row.useSchedules === false ? `${i18n.t(\"plans.form.no\")}` : `${i18n.t(\"plans.form.yes\")}`;\r\n    };\r\n\r\n    const renderInternalChat = (row) => {\r\n        return row.useInternalChat === false ? `${i18n.t(\"plans.form.no\")}` : `${i18n.t(\"plans.form.yes\")}`;\r\n    };\r\n\r\n    const renderExternalApi = (row) => {\r\n        return row.useExternalApi === false ? `${i18n.t(\"plans.form.no\")}` : `${i18n.t(\"plans.form.yes\")}`;\r\n    };\r\n\r\n    const renderKanban = (row) => {\r\n        return row.useKanban === false ? `${i18n.t(\"plans.form.no\")}` : `${i18n.t(\"plans.form.yes\")}`;\r\n    };\r\n\r\n    const renderOpenAi = (row) => {\r\n        return row.useOpenAi === false ? `${i18n.t(\"plans.form.no\")}` : `${i18n.t(\"plans.form.yes\")}`;\r\n    };\r\n\r\n    const renderIntegrations = (row) => {\r\n        return row.useIntegrations === false ? `${i18n.t(\"plans.form.no\")}` : `${i18n.t(\"plans.form.yes\")}`;\r\n    };\r\n\r\n    return (\r\n        <Paper className={classes.tableContainer}>\r\n            <Table\r\n                className={classes.fullWidth}\r\n                // size=\"small\"\r\n                padding=\"none\"\r\n                aria-label=\"a dense table\"\r\n            >\r\n                <TableHead>\r\n                    <TableRow>\r\n                        <TableCell align=\"center\" style={{ width: '1%' }}>#</TableCell>\r\n                        <TableCell align=\"left\">{i18n.t(\"plans.form.name\")}</TableCell>\r\n                        <TableCell align=\"center\">{i18n.t(\"plans.form.users\")}</TableCell>\r\n                        <TableCell align=\"center\">{i18n.t(\"plans.form.connections\")}</TableCell>\r\n                        <TableCell align=\"center\">Filas</TableCell>\r\n                        <TableCell align=\"center\">Valor</TableCell>\r\n                        <TableCell align=\"center\">{i18n.t(\"plans.form.campaigns\")}</TableCell>\r\n                        <TableCell align=\"center\">{i18n.t(\"plans.form.schedules\")}</TableCell>\r\n                        <TableCell align=\"center\">Chat Interno</TableCell>\r\n                        <TableCell align=\"center\">API Externa</TableCell>\r\n                        <TableCell align=\"center\">Kanban</TableCell>\r\n                        <TableCell align=\"center\">Open.Ai</TableCell>\r\n                        <TableCell align=\"center\">Integrações</TableCell>\r\n                    </TableRow>\r\n                </TableHead>\r\n                <TableBody>\r\n                    {records.map((row) => (\r\n                        <TableRow key={row.id}>\r\n                            <TableCell align=\"center\" style={{ width: '1%' }}>\r\n                                <IconButton onClick={() => onSelect(row)} aria-label=\"delete\">\r\n                                    <EditIcon />\r\n                                </IconButton>\r\n                            </TableCell>\r\n                            <TableCell align=\"left\">{row.name || '-'}</TableCell>\r\n                            <TableCell align=\"center\">{row.users || '-'}</TableCell>\r\n                            <TableCell align=\"center\">{row.connections || '-'}</TableCell>\r\n                            <TableCell align=\"center\">{row.queues || '-'}</TableCell>\r\n                            <TableCell align=\"center\">{i18n.t(\"plans.form.money\")} {row.value ? row.value.toLocaleString('pt-br', { minimumFractionDigits: 2 }) : '00.00'}</TableCell>\r\n                            <TableCell align=\"center\">{renderCampaigns(row)}</TableCell>\r\n                            <TableCell align=\"center\">{renderSchedules(row)}</TableCell>\r\n                            <TableCell align=\"center\">{renderInternalChat(row)}</TableCell>\r\n                            <TableCell align=\"center\">{renderExternalApi(row)}</TableCell>\r\n                            <TableCell align=\"center\">{renderKanban(row)}</TableCell>\r\n                            <TableCell align=\"center\">{renderOpenAi(row)}</TableCell>\r\n                            <TableCell align=\"center\">{renderIntegrations(row)}</TableCell>\r\n                        </TableRow>\r\n                    ))}\r\n                </TableBody>\r\n            </Table>\r\n        </Paper>\r\n    )\r\n}\r\n\r\nexport default function PlansManager() {\r\n    const classes = useStyles()\r\n    const { list, save, update, remove } = usePlans()\r\n\r\n    const [showConfirmDialog, setShowConfirmDialog] = useState(false)\r\n    const [loading, setLoading] = useState(false)\r\n    const [records, setRecords] = useState([])\r\n    const [record, setRecord] = useState({\r\n        name: '',\r\n        users: 0,\r\n        connections: 0,\r\n        queues: 0,\r\n        value: 0,\r\n        useCampaigns: true,\r\n        useSchedules: true,\r\n        useInternalChat: true,\r\n        useExternalApi: true,\r\n        useKanban: true,\r\n        useOpenAi: true,\r\n        useIntegrations: true,\r\n    })\r\n\r\n    useEffect(() => {\r\n        async function fetchData() {\r\n            await loadPlans()\r\n        }\r\n        fetchData()\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [record])\r\n\r\n    const loadPlans = async () => {\r\n        setLoading(true)\r\n        try {\r\n            const planList = await list()\r\n            setRecords(planList)\r\n        } catch (e) {\r\n            toast.error('Não foi possível carregar a lista de registros')\r\n        }\r\n        setLoading(false)\r\n    }\r\n\r\n    const handleSubmit = async (data) => {\r\n        setLoading(true)\r\n        console.log(data)\r\n        try {\r\n            if (data.id !== undefined) {\r\n                await update(data)\r\n            } else {\r\n                await save(data)\r\n            }\r\n            await loadPlans()\r\n            handleCancel()\r\n            toast.success('Operação realizada com sucesso!')\r\n        } catch (e) {\r\n            toast.error('Não foi possível realizar a operação. Verifique se já existe uma plano com o mesmo nome ou se os campos foram preenchidos corretamente')\r\n        }\r\n        setLoading(false)\r\n    }\r\n\r\n    const handleDelete = async () => {\r\n        setLoading(true)\r\n        try {\r\n            await remove(record.id)\r\n            await loadPlans()\r\n            handleCancel()\r\n            toast.success('Operação realizada com sucesso!')\r\n        } catch (e) {\r\n            toast.error('Não foi possível realizar a operação')\r\n        }\r\n        setLoading(false)\r\n    }\r\n\r\n    const handleOpenDeleteDialog = () => {\r\n        setShowConfirmDialog(true)\r\n    }\r\n\r\n    const handleCancel = () => {\r\n        setRecord({\r\n            id: undefined,\r\n            name: '',\r\n            users: 0,\r\n            connections: 0,\r\n            queues: 0,\r\n            value: 0,\r\n            useCampaigns: true,\r\n            useSchedules: true,\r\n            useInternalChat: true,\r\n            useExternalApi: true,\r\n            useKanban: true,\r\n            useOpenAi: true,\r\n            useIntegrations: true\r\n        })\r\n    }\r\n\r\n    const handleSelect = (data) => {\r\n\r\n        let useCampaigns = data.useCampaigns === false ? false : true\r\n        let useSchedules = data.useSchedules === false ? false : true\r\n        let useInternalChat = data.useInternalChat === false ? false : true\r\n        let useExternalApi = data.useExternalApi === false ? false : true\r\n        let useKanban = data.useKanban === false ? false : true\r\n        let useOpenAi = data.useOpenAi === false ? false : true\r\n        let useIntegrations = data.useIntegrations === false ? false : true\r\n\r\n        setRecord({\r\n            id: data.id,\r\n            name: data.name || '',\r\n            users: data.users || 0,\r\n            connections: data.connections || 0,\r\n            queues: data.queues || 0,\r\n            value: data.value?.toLocaleString('pt-br', { minimumFractionDigits: 0 }) || 0,\r\n            useCampaigns,\r\n            useSchedules,\r\n            useInternalChat,\r\n            useExternalApi,\r\n            useKanban,\r\n            useOpenAi,\r\n            useIntegrations\r\n        })\r\n    }\r\n\r\n    return (\r\n        <Paper className={classes.mainPaper} elevation={0}>\r\n            <Grid spacing={2} container>\r\n                <Grid xs={12} item>\r\n                    <PlanManagerForm\r\n                        initialValue={record}\r\n                        onDelete={handleOpenDeleteDialog}\r\n                        onSubmit={handleSubmit}\r\n                        onCancel={handleCancel}\r\n                        loading={loading}\r\n                    />\r\n                </Grid>\r\n                <Grid xs={12} item>\r\n                    <PlansManagerGrid\r\n                        records={records}\r\n                        onSelect={handleSelect}\r\n                    />\r\n                </Grid>\r\n            </Grid>\r\n            <ConfirmationModal\r\n                title=\"Exclusão de Registro\"\r\n                open={showConfirmDialog}\r\n                onClose={() => setShowConfirmDialog(false)}\r\n                onConfirm={() => handleDelete()}\r\n            >\r\n                Deseja realmente excluir esse registro?\r\n            </ConfirmationModal>\r\n        </Paper>\r\n    )\r\n}","import api from \"../../services/api\";\r\n\r\nconst usePlans = () => {\r\n\r\n    const findAll = async (params) => {\r\n        const { data } = await api.request({\r\n            url: `/helps`,\r\n            method: 'GET',\r\n            params\r\n        });\r\n        return data;\r\n    }\r\n\r\n    const list = async (params) => {\r\n        const { data } = await api.request({\r\n            url: '/helps/list',\r\n            method: 'GET',\r\n            params\r\n        });\r\n        return data;\r\n    }\r\n\r\n    const save = async (data) => {\r\n        const { data: responseData } = await api.request({\r\n            url: '/helps',\r\n            method: 'POST',\r\n            data\r\n        });\r\n        return responseData;\r\n    }\r\n\r\n    const update = async (data) => {\r\n        const { data: responseData } = await api.request({\r\n            url: `/helps/${data.id}`,\r\n            method: 'PUT',\r\n            data\r\n        });\r\n        return responseData;\r\n    }\r\n\r\n    const remove = async (id) => {\r\n        const { data } = await api.request({\r\n            url: `/helps/${id}`,\r\n            method: 'DELETE'\r\n        });\r\n        return data;\r\n    }\r\n\r\n    return {\r\n        findAll,\r\n        list,\r\n        save,\r\n        update,\r\n        remove\r\n    }\r\n}\r\n\r\nexport default usePlans;","import React, { useState, useEffect } from \"react\";\r\nimport {\r\n    makeStyles,\r\n    Paper,\r\n    Grid,\r\n    TextField,\r\n    Table,\r\n    TableHead,\r\n    TableBody,\r\n    TableCell,\r\n    TableRow,\r\n    IconButton\r\n} from \"@material-ui/core\";\r\nimport { Formik, Form, Field } from 'formik';\r\nimport ButtonWithSpinner from \"../ButtonWithSpinner\";\r\nimport ConfirmationModal from \"../ConfirmationModal\";\r\n\r\nimport { Edit as EditIcon } from \"@material-ui/icons\";\r\n\r\nimport { toast } from \"react-toastify\";\r\nimport useHelps from \"../../hooks/useHelps\";\r\n\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n    mainPaper: {\r\n\t\twidth: '100%',\r\n\t\tflex: 1,\r\n\t\tpadding: theme.spacing(2)\r\n    },\r\n\tfullWidth: {\r\n\t\twidth: '100%'\r\n\t},\r\n    tableContainer: {\r\n\t\twidth: '100%',\r\n\t\toverflowX: \"scroll\",\r\n\t\t...theme.scrollbarStyles\r\n    },\r\n\ttextfield: {\r\n\t\twidth: '100%'\r\n\t},\r\n    textRight: {\r\n        textAlign: 'right'\r\n    },\r\n    row: {\r\n\t\tpaddingTop: theme.spacing(2),\r\n\t\tpaddingBottom: theme.spacing(2)\r\n    },\r\n    control: {\r\n\t\tpaddingRight: theme.spacing(1),\r\n\t\tpaddingLeft: theme.spacing(1)\r\n\t},\r\n    buttonContainer: {\r\n        textAlign: 'right',\r\n\t\tpadding: theme.spacing(1)\r\n\t}\r\n}));\r\n\r\nexport function HelpManagerForm (props) {\r\n    const { onSubmit, onDelete, onCancel, initialValue, loading } = props;\r\n    const classes = useStyles()\r\n\r\n    const [record, setRecord] = useState(initialValue);\r\n\r\n    useEffect(() => {\r\n        setRecord(initialValue)\r\n    }, [initialValue])\r\n\r\n    const handleSubmit = async(data) => {\r\n        onSubmit(data)\r\n    }\r\n\r\n    return (\r\n        <Formik\r\n            enableReinitialize\r\n            className={classes.fullWidth}\r\n            initialValues={record}\r\n            onSubmit={(values, { resetForm }) =>\r\n                setTimeout(() => {\r\n                    handleSubmit(values)\r\n                    resetForm()\r\n                }, 500)\r\n            }\r\n        >\r\n            {(values) => (\r\n                <Form className={classes.fullWidth}>\r\n                    <Grid spacing={2} justifyContent=\"flex-end\" container>\r\n                        <Grid xs={12} sm={6} md={3} item>\r\n                            <Field\r\n                                as={TextField}\r\n                                label=\"Título\"\r\n                                name=\"title\"\r\n                                variant=\"outlined\"\r\n                                className={classes.fullWidth}\r\n                                margin=\"dense\"\r\n                            />\r\n                        </Grid>\r\n                        <Grid xs={12} sm={6} md={3} item>\r\n                            <Field\r\n                                as={TextField}\r\n                                label=\"Código do Vídeo\"\r\n                                name=\"video\"\r\n                                variant=\"outlined\"\r\n                                className={classes.fullWidth}\r\n                                margin=\"dense\"\r\n                            />\r\n                        </Grid>\r\n                        <Grid xs={12} sm={12} md={6} item>\r\n                            <Field\r\n                                as={TextField}\r\n                                label=\"Descrição\"\r\n                                name=\"description\"\r\n                                variant=\"outlined\"\r\n                                className={classes.fullWidth}\r\n                                margin=\"dense\"\r\n                            />\r\n                        </Grid>\r\n                        <Grid sm={3} md={1} item>\r\n                            <ButtonWithSpinner className={classes.fullWidth} loading={loading} onClick={() => onCancel()} variant=\"contained\">\r\n                                Limpar\r\n                            </ButtonWithSpinner>\r\n                        </Grid>\r\n                        { record.id !== undefined ? (\r\n                            <Grid sm={3} md={1} item>\r\n                                <ButtonWithSpinner className={classes.fullWidth} loading={loading} onClick={() => onDelete(record)} variant=\"contained\" color=\"secondary\">\r\n                                    Excluir\r\n                                </ButtonWithSpinner>\r\n                            </Grid>\r\n                        ) : null}\r\n                        <Grid sm={3} md={1} item>\r\n                            <ButtonWithSpinner className={classes.fullWidth} loading={loading} type=\"submit\" variant=\"contained\" color=\"primary\">\r\n                                Salvar\r\n                            </ButtonWithSpinner>\r\n                        </Grid>\r\n                    </Grid>\r\n                </Form>\r\n            )}\r\n        </Formik>\r\n    )\r\n}\r\n\r\nexport function HelpsManagerGrid (props) {\r\n    const { records, onSelect } = props\r\n    const classes = useStyles()\r\n\r\n    return (\r\n        <Paper className={classes.tableContainer}>\r\n            <Table className={classes.fullWidth} size=\"small\" aria-label=\"a dense table\">\r\n                <TableHead>\r\n                <TableRow>\r\n                    <TableCell align=\"center\" style={{width: '1%'}}>#</TableCell>\r\n                    <TableCell align=\"left\">Título</TableCell>\r\n                    <TableCell align=\"left\">Descrição</TableCell>\r\n                    <TableCell align=\"left\">Vídeo</TableCell>\r\n                </TableRow>\r\n                </TableHead>\r\n                <TableBody>\r\n                {records.map((row) => (\r\n                    <TableRow key={row.id}>\r\n                        <TableCell align=\"center\" style={{width: '1%'}}>\r\n                            <IconButton onClick={() => onSelect(row)} aria-label=\"delete\">\r\n                                <EditIcon />\r\n                            </IconButton>\r\n                        </TableCell>\r\n                        <TableCell align=\"left\">{row.title || '-'}</TableCell>\r\n                        <TableCell align=\"left\">{row.description || '-'}</TableCell>\r\n                        <TableCell align=\"left\">{row.video || '-'}</TableCell>\r\n                    </TableRow>\r\n                ))}\r\n                </TableBody>\r\n            </Table>\r\n        </Paper>\r\n    )\r\n}\r\n\r\nexport default function HelpsManager () {\r\n    const classes = useStyles()\r\n    const { list, save, update, remove } = useHelps()\r\n    \r\n    const [showConfirmDialog, setShowConfirmDialog] = useState(false)\r\n    const [loading, setLoading] = useState(false)\r\n    const [records, setRecords] = useState([])\r\n    const [record, setRecord] = useState({\r\n        title: '',\r\n        description: '',\r\n        video: ''\r\n    })\r\n\r\n    useEffect(() => {\r\n        async function fetchData () {\r\n            await loadHelps()\r\n        }\r\n        fetchData()\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [])\r\n\r\n    const loadHelps = async () => {\r\n        setLoading(true)\r\n        try {\r\n            const helpList = await list()\r\n            setRecords(helpList)\r\n        } catch (e) {\r\n            toast.error('Não foi possível carregar a lista de registros')\r\n        }\r\n        setLoading(false)\r\n    }\r\n\r\n    const handleSubmit = async (data) => {\r\n        setLoading(true)\r\n        try {\r\n            if (data.id !== undefined) {\r\n                await update(data)\r\n            } else {\r\n                await save(data)\r\n            }\r\n            await loadHelps()\r\n            handleCancel()\r\n            toast.success('Operação realizada com sucesso!')\r\n        } catch (e) {\r\n            toast.error('Não foi possível realizar a operação. Verifique se já existe uma helpo com o mesmo nome ou se os campos foram preenchidos corretamente')\r\n        }\r\n        setLoading(false)\r\n    }\r\n\r\n    const handleDelete = async () => {\r\n        setLoading(true)\r\n        try {\r\n            await remove(record.id)\r\n            await loadHelps()\r\n            handleCancel()\r\n            toast.success('Operação realizada com sucesso!')\r\n        } catch (e) {\r\n            toast.error('Não foi possível realizar a operação')\r\n        }\r\n        setLoading(false)\r\n    }\r\n\r\n    const handleOpenDeleteDialog = () => {\r\n        setShowConfirmDialog(true)\r\n    }\r\n\r\n    const handleCancel = () => {\r\n        setRecord({\r\n            title: '',\r\n            description: '',\r\n            video: ''\r\n        })\r\n    }\r\n\r\n    const handleSelect = (data) => {\r\n        setRecord({\r\n            id: data.id,\r\n            title: data.title || '',\r\n            description: data.description || '',\r\n            video: data.video || ''\r\n        })\r\n    }\r\n\r\n    return (\r\n        <Paper className={classes.mainPaper} elevation={0}>\r\n            <Grid spacing={2} container>\r\n                <Grid xs={12} item>\r\n                    <HelpManagerForm \r\n                        initialValue={record} \r\n                        onDelete={handleOpenDeleteDialog} \r\n                        onSubmit={handleSubmit} \r\n                        onCancel={handleCancel} \r\n                        loading={loading}\r\n                    />\r\n                </Grid>\r\n                <Grid xs={12} item>\r\n                    <HelpsManagerGrid \r\n                        records={records}\r\n                        onSelect={handleSelect}\r\n                    />\r\n                </Grid>\r\n            </Grid>\r\n            <ConfirmationModal\r\n                title=\"Exclusão de Registro\"\r\n                open={showConfirmDialog}\r\n                onClose={() => setShowConfirmDialog(false)}\r\n                onConfirm={() => handleDelete()}\r\n            >\r\n                Deseja realmente excluir esse registro?\r\n            </ConfirmationModal>\r\n        </Paper>\r\n    )\r\n}","import api from \"../../services/api\";\r\n\r\nconst useSettings = () => {\r\n\r\n    const getAll = async (params) => {\r\n        const { data } = await api.request({\r\n            url: '/settings',\r\n            method: 'GET',\r\n            params\r\n        });\r\n        return data;\r\n    }\r\n\r\n    const update = async (data) => {\r\n        const { data: responseData } = await api.request({\r\n            url: `/settings/${data.key}`,\r\n            method: 'PUT',\r\n            data\r\n        });\r\n        return responseData;\r\n    }\r\n\r\n    return {\r\n\t\tgetAll,\r\n        update\r\n    }\r\n}\r\n\r\nexport default useSettings;","import React, { useEffect, useState } from \"react\";\r\n\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport FormHelperText from \"@material-ui/core/FormHelperText\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Title from \"../Title\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport useSettings from \"../../hooks/useSettings\";\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { grey, blue } from \"@material-ui/core/colors\";\r\nimport { Tabs, Tab } from \"@material-ui/core\";\r\n\r\n//import 'react-toastify/dist/ReactToastify.css';\r\n \r\nconst useStyles = makeStyles((theme) => ({\r\n  container: {\r\n    paddingTop: theme.spacing(4),\r\n    paddingBottom: theme.spacing(4),\r\n  },\r\n  fixedHeightPaper: {\r\n    padding: theme.spacing(2),\r\n    display: \"flex\",\r\n    overflow: \"auto\",\r\n    flexDirection: \"column\",\r\n    height: 240,\r\n  },\r\n  tab: {\r\n    backgroundColor: theme.palette.options,  //DARK MODE PLW DESIGN//\r\n    borderRadius: 4,\r\n    width: \"100%\",\r\n    \"& .MuiTab-wrapper\": {\r\n      color: theme.palette.fontecor,\r\n    },   //DARK MODE PLW DESIGN//\r\n    \"& .MuiTabs-flexContainer\": {\r\n      justifyContent: \"center\"\r\n    }\r\n\r\n\r\n  },\r\n  paper: {\r\n    padding: theme.spacing(2),\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    marginBottom: 12,\r\n    width: \"100%\",\r\n  },\r\n  cardAvatar: {\r\n    fontSize: \"55px\",\r\n    color: grey[500],\r\n    backgroundColor: \"#ffffff\",\r\n    width: theme.spacing(7),\r\n    height: theme.spacing(7),\r\n  },\r\n  cardTitle: {\r\n    fontSize: \"18px\",\r\n    color: blue[700],\r\n  },\r\n  cardSubtitle: {\r\n    color: grey[600],\r\n    fontSize: \"14px\",\r\n  },\r\n  alignRight: {\r\n    textAlign: \"right\",\r\n  },\r\n  fullWidth: {\r\n    width: \"100%\",\r\n  },\r\n  selectContainer: {\r\n    width: \"100%\",\r\n    textAlign: \"left\",\r\n  },\r\n}));\r\n\r\nexport default function Options(props) {\r\n  const { settings, scheduleTypeChanged } = props;\r\n  const classes = useStyles();\r\n  const [userRating, setUserRating] = useState(\"disabled\");\r\n  const [scheduleType, setScheduleType] = useState(\"disabled\");\r\n  const [callType, setCallType] = useState(\"enabled\");\r\n  const [chatbotType, setChatbotType] = useState(\"\");\r\n  const [CheckMsgIsGroup, setCheckMsgIsGroupType] = useState(\"enabled\");\r\n\r\n  const [loadingUserRating, setLoadingUserRating] = useState(false);\r\n  const [loadingScheduleType, setLoadingScheduleType] = useState(false);\r\n  const [loadingCallType, setLoadingCallType] = useState(false);\r\n  const [loadingChatbotType, setLoadingChatbotType] = useState(false);\r\n  const [loadingCheckMsgIsGroup, setCheckMsgIsGroup] = useState(false);\r\n\r\n\r\n  const [ipixcType, setIpIxcType] = useState(\"\");\r\n  const [loadingIpIxcType, setLoadingIpIxcType] = useState(false);\r\n  const [tokenixcType, setTokenIxcType] = useState(\"\");\r\n  const [loadingTokenIxcType, setLoadingTokenIxcType] = useState(false);\r\n\r\n  const [ipmkauthType, setIpMkauthType] = useState(\"\");\r\n  const [loadingIpMkauthType, setLoadingIpMkauthType] = useState(false);\r\n  const [clientidmkauthType, setClientIdMkauthType] = useState(\"\");\r\n  const [loadingClientIdMkauthType, setLoadingClientIdMkauthType] = useState(false);\r\n  const [clientsecretmkauthType, setClientSecrectMkauthType] = useState(\"\");\r\n  const [loadingClientSecrectMkauthType, setLoadingClientSecrectMkauthType] = useState(false);\r\n\r\n  const [asaasType, setAsaasType] = useState(\"\");\r\n  const [loadingAsaasType, setLoadingAsaasType] = useState(false);\r\n  \r\n  // recursos a mais da plw design\r\n\r\n  const [SendGreetingAccepted, setSendGreetingAccepted] = useState(\"disabled\");\r\n  const [loadingSendGreetingAccepted, setLoadingSendGreetingAccepted] = useState(false);\r\n  \r\n  const [SettingsTransfTicket, setSettingsTransfTicket] = useState(\"disabled\");\r\n  const [loadingSettingsTransfTicket, setLoadingSettingsTransfTicket] = useState(false);\r\n\r\n  const { update } = useSettings();\r\n\r\n  useEffect(() => {\r\n    if (Array.isArray(settings) && settings.length) {\r\n      const userRating = settings.find((s) => s.key === \"userRating\");\r\n      if (userRating) {\r\n        setUserRating(userRating.value);\r\n      }\r\n      const scheduleType = settings.find((s) => s.key === \"scheduleType\");\r\n      if (scheduleType) {\r\n        setScheduleType(scheduleType.value);\r\n      }\r\n      const callType = settings.find((s) => s.key === \"call\");\r\n      if (callType) {\r\n        setCallType(callType.value);\r\n      }\r\n      const CheckMsgIsGroup = settings.find((s) => s.key === \"CheckMsgIsGroup\");\r\n      if (CheckMsgIsGroup) {\r\n        setCheckMsgIsGroupType(CheckMsgIsGroup.value);\r\n      }\r\n\t  \r\n\t  {/*PLW DESIGN SAUDAÇÃO*/}\r\n      const SendGreetingAccepted = settings.find((s) => s.key === \"sendGreetingAccepted\");\r\n      if (SendGreetingAccepted) {\r\n        setSendGreetingAccepted(SendGreetingAccepted.value);\r\n      }\t \r\n\t  {/*PLW DESIGN SAUDAÇÃO*/}\t \r\n\t  \r\n\t  {/*TRANSFERIR TICKET*/}\t\r\n\t  const SettingsTransfTicket = settings.find((s) => s.key === \"sendMsgTransfTicket\");\r\n      if (SettingsTransfTicket) {\r\n        setSettingsTransfTicket(SettingsTransfTicket.value);\r\n      }\r\n\t  {/*TRANSFERIR TICKET*/}\t\r\n\t  \r\n      const chatbotType = settings.find((s) => s.key === \"chatBotType\");\r\n      if (chatbotType) {\r\n        setChatbotType(chatbotType.value);\r\n      }\r\n\r\n      const ipixcType = settings.find((s) => s.key === \"ipixc\");\r\n      if (ipixcType) {\r\n        setIpIxcType(ipixcType.value);\r\n      }\r\n\r\n      const tokenixcType = settings.find((s) => s.key === \"tokenixc\");\r\n      if (tokenixcType) {\r\n        setTokenIxcType(tokenixcType.value);\r\n      }\r\n\r\n      const ipmkauthType = settings.find((s) => s.key === \"ipmkauth\");\r\n      if (ipmkauthType) {\r\n        setIpMkauthType(ipmkauthType.value);\r\n      }\r\n\r\n      const clientidmkauthType = settings.find((s) => s.key === \"clientidmkauth\");\r\n      if (clientidmkauthType) {\r\n        setClientIdMkauthType(clientidmkauthType.value);\r\n      }\r\n\r\n      const clientsecretmkauthType = settings.find((s) => s.key === \"clientsecretmkauth\");\r\n      if (clientsecretmkauthType) {\r\n        setClientSecrectMkauthType(clientsecretmkauthType.value);\r\n      }\r\n\r\n      const asaasType = settings.find((s) => s.key === \"asaas\");\r\n      if (asaasType) {\r\n        setAsaasType(asaasType.value);\r\n      }\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [settings]);\r\n\r\n  async function handleChangeUserRating(value) {\r\n    setUserRating(value);\r\n    setLoadingUserRating(true);\r\n    await update({\r\n      key: \"userRating\",\r\n      value,\r\n    });\r\n    toast.success(\"Operação atualizada com sucesso.\");\r\n    setLoadingUserRating(false);\r\n  }\r\n\r\n  async function handleScheduleType(value) {\r\n    setScheduleType(value);\r\n    setLoadingScheduleType(true);\r\n    await update({\r\n      key: \"scheduleType\",\r\n      value,\r\n    });\r\n    //toast.success(\"Oraçãpeo atualizada com sucesso.\");\r\n    toast.success('Operação atualizada com sucesso.', {\r\n      position: \"top-right\",\r\n      autoClose: 2000,\r\n      hideProgressBar: false,\r\n      closeOnClick: true,\r\n      pauseOnHover: false,\r\n      draggable: true,\r\n      theme: \"light\",\r\n      });\r\n    setLoadingScheduleType(false);\r\n    if (typeof scheduleTypeChanged === \"function\") {\r\n      scheduleTypeChanged(value);\r\n    }\r\n  }\r\n\r\n  async function handleCallType(value) {\r\n    setCallType(value);\r\n    setLoadingCallType(true);\r\n    await update({\r\n      key: \"call\",\r\n      value,\r\n    });\r\n    toast.success(\"Operação atualizada com sucesso.\");\r\n    setLoadingCallType(false);\r\n  }\r\n\r\n  async function handleChatbotType(value) {\r\n    setChatbotType(value);\r\n    setLoadingChatbotType(true);\r\n    await update({\r\n      key: \"chatBotType\",\r\n      value,\r\n    });\r\n    toast.success(\"Operação atualizada com sucesso.\");\r\n    setLoadingChatbotType(false);\r\n  }\r\n\r\n  async function handleGroupType(value) {\r\n    setCheckMsgIsGroupType(value);\r\n    setCheckMsgIsGroup(true);\r\n    await update({\r\n      key: \"CheckMsgIsGroup\",\r\n      value,\r\n    });\r\n    toast.success(\"Operação atualizada com sucesso.\");\r\n    setCheckMsgIsGroupType(false);\r\n    /*     if (typeof scheduleTypeChanged === \"function\") {\r\n          scheduleTypeChanged(value);\r\n        } */\r\n  }\r\n  \r\n  {/*NOVO CÓDIGO*/}  \r\n  async function handleSendGreetingAccepted(value) {\r\n    setSendGreetingAccepted(value);\r\n    setLoadingSendGreetingAccepted(true);\r\n    await update({\r\n      key: \"sendGreetingAccepted\",\r\n      value,\r\n    });\r\n\ttoast.success(\"Operação atualizada com sucesso.\");\r\n    setLoadingSendGreetingAccepted(false);\r\n  }  \r\n  \r\n  \r\n  {/*NOVO CÓDIGO*/}    \r\n\r\n  async function handleSettingsTransfTicket(value) {\r\n    setSettingsTransfTicket(value);\r\n    setLoadingSettingsTransfTicket(true);\r\n    await update({\r\n      key: \"sendMsgTransfTicket\",\r\n      value,\r\n    });\r\n\r\n    toast.success(\"Operação atualizada com sucesso.\");\r\n    setLoadingSettingsTransfTicket(false);\r\n  } \r\n \r\n  async function handleChangeIPIxc(value) {\r\n    setIpIxcType(value);\r\n    setLoadingIpIxcType(true);\r\n    await update({\r\n      key: \"ipixc\",\r\n      value,\r\n    });\r\n    toast.success(\"Operação atualizada com sucesso.\");\r\n    setLoadingIpIxcType(false);\r\n  }\r\n\r\n  async function handleChangeTokenIxc(value) {\r\n    setTokenIxcType(value);\r\n    setLoadingTokenIxcType(true);\r\n    await update({\r\n      key: \"tokenixc\",\r\n      value,\r\n    });\r\n    toast.success(\"Operação atualizada com sucesso.\");\r\n    setLoadingTokenIxcType(false);\r\n  }\r\n\r\n  async function handleChangeIpMkauth(value) {\r\n    setIpMkauthType(value);\r\n    setLoadingIpMkauthType(true);\r\n    await update({\r\n      key: \"ipmkauth\",\r\n      value,\r\n    });\r\n    toast.success(\"Operação atualizada com sucesso.\");\r\n    setLoadingIpMkauthType(false);\r\n  }\r\n\r\n  async function handleChangeClientIdMkauth(value) {\r\n    setClientIdMkauthType(value);\r\n    setLoadingClientIdMkauthType(true);\r\n    await update({\r\n      key: \"clientidmkauth\",\r\n      value,\r\n    });\r\n    toast.success(\"Operação atualizada com sucesso.\");\r\n    setLoadingClientIdMkauthType(false);\r\n  }\r\n\r\n  async function handleChangeClientSecrectMkauth(value) {\r\n    setClientSecrectMkauthType(value);\r\n    setLoadingClientSecrectMkauthType(true);\r\n    await update({\r\n      key: \"clientsecretmkauth\",\r\n      value,\r\n    });\r\n    toast.success(\"Operação atualizada com sucesso.\");\r\n    setLoadingClientSecrectMkauthType(false);\r\n  }\r\n\r\n  async function handleChangeAsaas(value) {\r\n    setAsaasType(value);\r\n    setLoadingAsaasType(true);\r\n    await update({\r\n      key: \"asaas\",\r\n      value,\r\n    });\r\n    toast.success(\"Operação atualizada com sucesso.\");\r\n    setLoadingAsaasType(false);\r\n  }\r\n  return (\r\n    <>\r\n      <Grid spacing={3} container>\r\n        {/* <Grid xs={12} item>\r\n                    <Title>Configurações Gerais</Title>\r\n                </Grid> */}\r\n        <Grid xs={12} sm={6} md={4} item>\r\n          <FormControl className={classes.selectContainer}>\r\n            <InputLabel id=\"ratings-label\">Avaliações</InputLabel>\r\n            <Select\r\n              labelId=\"ratings-label\"\r\n              value={userRating}\r\n              onChange={async (e) => {\r\n                handleChangeUserRating(e.target.value);\r\n              }}\r\n            >\r\n              <MenuItem value={\"disabled\"}>Desabilitadas</MenuItem>\r\n              <MenuItem value={\"enabled\"}>Habilitadas</MenuItem>\r\n            </Select>\r\n            <FormHelperText>\r\n              {loadingUserRating && \"Atualizando...\"}\r\n            </FormHelperText>\r\n          </FormControl>\r\n        </Grid>\r\n        <Grid xs={12} sm={6} md={4} item>\r\n          <FormControl className={classes.selectContainer}>\r\n            <InputLabel id=\"schedule-type-label\">\r\n              Gerenciamento de Expediente\r\n            </InputLabel>\r\n            <Select\r\n              labelId=\"schedule-type-label\"\r\n              value={scheduleType}\r\n              onChange={async (e) => {\r\n                handleScheduleType(e.target.value);\r\n              }}\r\n            >\r\n              <MenuItem value={\"disabled\"}>Desabilitado</MenuItem>\r\n              <MenuItem value={\"queue\"}>Fila</MenuItem>\r\n              <MenuItem value={\"company\"}>Empresa</MenuItem>\r\n            </Select>\r\n            <FormHelperText>\r\n              {loadingScheduleType && \"Atualizando...\"}\r\n            </FormHelperText>\r\n          </FormControl>\r\n        </Grid>\r\n        <Grid xs={12} sm={6} md={4} item>\r\n          <FormControl className={classes.selectContainer}>\r\n            <InputLabel id=\"group-type-label\">\r\n              Ignorar Mensagens de Grupos\r\n            </InputLabel>\r\n            <Select\r\n              labelId=\"group-type-label\"\r\n              value={CheckMsgIsGroup}\r\n              onChange={async (e) => {\r\n                handleGroupType(e.target.value);\r\n              }}\r\n            >\r\n              <MenuItem value={\"disabled\"}>Desativado</MenuItem>\r\n              <MenuItem value={\"enabled\"}>Ativado</MenuItem>\r\n            </Select>\r\n            <FormHelperText>\r\n              {loadingScheduleType && \"Atualizando...\"}\r\n            </FormHelperText>\r\n          </FormControl>\r\n        </Grid>\r\n        <Grid xs={12} sm={6} md={4} item>\r\n          <FormControl className={classes.selectContainer}>\r\n            <InputLabel id=\"call-type-label\">\r\n              Aceitar Chamada\r\n            </InputLabel>\r\n            <Select\r\n              labelId=\"call-type-label\"\r\n              value={callType}\r\n              onChange={async (e) => {\r\n                handleCallType(e.target.value);\r\n              }}\r\n            >\r\n              <MenuItem value={\"disabled\"}>Não Aceitar</MenuItem>\r\n              <MenuItem value={\"enabled\"}>Aceitar</MenuItem>\r\n            </Select>\r\n            <FormHelperText>\r\n              {loadingCallType && \"Atualizando...\"}\r\n            </FormHelperText>\r\n          </FormControl>\r\n        </Grid>\r\n        <Grid xs={12} sm={6} md={4} item>\r\n          <FormControl className={classes.selectContainer}>\r\n            <InputLabel id=\"chatbot-type-label\">\r\n              Tipo Chatbot\r\n            </InputLabel>\r\n            <Select\r\n              labelId=\"chatbot-type-label\"\r\n              value={chatbotType}\r\n              onChange={async (e) => {\r\n                handleChatbotType(e.target.value);\r\n              }}\r\n            >\r\n              <MenuItem value={\"text\"}>Texto</MenuItem>\r\n\t\t\t {/*<MenuItem value={\"button\"}>Botão</MenuItem>*/}\r\n             {/*<MenuItem value={\"list\"}>Lista</MenuItem>*/}\r\n            </Select>\r\n            <FormHelperText>\r\n              {loadingChatbotType && \"Atualizando...\"}\r\n            </FormHelperText>\r\n          </FormControl>\r\n        </Grid>\r\n\t\t{/* ENVIAR SAUDAÇÃO AO ACEITAR O TICKET */}\r\n        <Grid xs={12} sm={6} md={4} item>\r\n          <FormControl className={classes.selectContainer}>\r\n            <InputLabel id=\"sendGreetingAccepted-label\">Enviar saudação ao aceitar o ticket</InputLabel>\r\n            <Select\r\n              labelId=\"sendGreetingAccepted-label\"\r\n              value={SendGreetingAccepted}\r\n              onChange={async (e) => {\r\n                handleSendGreetingAccepted(e.target.value);\r\n              }}\r\n            >\r\n              <MenuItem value={\"disabled\"}>Desabilitado</MenuItem>\r\n              <MenuItem value={\"enabled\"}>Habilitado</MenuItem>\r\n            </Select>\r\n            <FormHelperText>\r\n              {loadingSendGreetingAccepted && \"Atualizando...\"}\r\n            </FormHelperText>\r\n          </FormControl>\r\n        </Grid>\r\n\t\t{/* ENVIAR SAUDAÇÃO AO ACEITAR O TICKET */}\r\n\t\t\r\n\t\t{/* ENVIAR MENSAGEM DE TRANSFERENCIA DE SETOR/ATENDENTE */}\r\n        <Grid xs={12} sm={6} md={4} item>\r\n          <FormControl className={classes.selectContainer}>\r\n            <InputLabel id=\"sendMsgTransfTicket-label\">Enviar mensagem de transferencia de Fila/agente</InputLabel>\r\n            <Select\r\n              labelId=\"sendMsgTransfTicket-label\"\r\n              value={SettingsTransfTicket}\r\n              onChange={async (e) => {\r\n                handleSettingsTransfTicket(e.target.value);\r\n              }}\r\n            >\r\n              <MenuItem value={\"disabled\"}>Desabilitado</MenuItem>\r\n              <MenuItem value={\"enabled\"}>Habilitado</MenuItem>\r\n            </Select>\r\n            <FormHelperText>\r\n              {loadingSettingsTransfTicket && \"Atualizando...\"}\r\n            </FormHelperText>\r\n          </FormControl>\r\n        </Grid>\r\n\t\t\r\n      </Grid>\r\n      <Grid spacing={3} container>\r\n        <Tabs\r\n          indicatorColor=\"primary\"\r\n          textColor=\"primary\"\r\n          scrollButtons=\"on\"\r\n          variant=\"scrollable\"\r\n          className={classes.tab}\r\n          style={{\r\n            marginBottom: 20,\r\n            marginTop: 20\r\n          }}\r\n        >\r\n          <Tab\r\n\r\n            label=\"INTEGRAÇÕES\" />\r\n\r\n        </Tabs>\r\n\r\n      </Grid>\r\n      {/*-----------------ASAAS-----------------*/}\r\n      <Grid spacing={3} container\r\n        style={{ marginBottom: 10 }}>\r\n        <Tabs\r\n          indicatorColor=\"primary\"\r\n          textColor=\"primary\"\r\n          scrollButtons=\"on\"\r\n          variant=\"scrollable\"\r\n          className={classes.tab}\r\n        >\r\n          <Tab label=\"ASAAS\" />\r\n\r\n        </Tabs>\r\n        <Grid xs={12} sm={12} md={12} item>\r\n          <FormControl className={classes.selectContainer}>\r\n            <TextField\r\n              id=\"asaas\"\r\n              name=\"asaas\"\r\n              margin=\"dense\"\r\n              label=\"Token Asaas\"\r\n              variant=\"outlined\"\r\n              value={asaasType}\r\n              onChange={async (e) => {\r\n                handleChangeAsaas(e.target.value);\r\n              }}\r\n            >\r\n            </TextField>\r\n            <FormHelperText>\r\n              {loadingAsaasType && \"Atualizando...\"}\r\n            </FormHelperText>\r\n          </FormControl>\r\n        </Grid>\r\n      </Grid>\r\n    </>\r\n  );\r\n}\r\n","const OnlyForSuperUser = ({ user, yes, no }) => user.super ? yes() : no();\r\n\r\nOnlyForSuperUser.defaultProps = {\r\n    user: {},\r\n\tyes: () => null,\r\n\tno: () => null,\r\n};\r\n\r\nexport default OnlyForSuperUser;","import React, { useState, useEffect } from \"react\";\r\nimport MainContainer from \"../../components/MainContainer\";\r\nimport MainHeader from \"../../components/MainHeader\";\r\nimport Title from \"../../components/Title\";\r\nimport { makeStyles, Paper, Tabs, Tab } from \"@material-ui/core\";\r\n\r\nimport TabPanel from \"../../components/TabPanel\";\r\n\r\nimport SchedulesForm from \"../../components/SchedulesForm\";\r\nimport CompaniesManager from \"../../components/CompaniesManager\";\r\nimport PlansManager from \"../../components/PlansManager\";\r\nimport HelpsManager from \"../../components/HelpsManager\";\r\nimport Options from \"../../components/Settings/Options\";\r\n\r\nimport { i18n } from \"../../translate/i18n.js\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport useCompanies from \"../../hooks/useCompanies\";\r\nimport useAuth from \"../../hooks/useAuth.js\";\r\nimport useSettings from \"../../hooks/useSettings\";\r\n\r\nimport OnlyForSuperUser from \"../../components/OnlyForSuperUser\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    flex: 1,\r\n    backgroundColor: theme.palette.background.paper,\r\n  },\r\n  mainPaper: {\r\n    ...theme.scrollbarStyles,\r\n    overflowY: \"scroll\",\r\n    flex: 1,\r\n  },\r\n  tab: {\r\n    backgroundColor: theme.palette.options,\r\n    borderRadius: 4,\r\n  },\r\n  paper: {\r\n    ...theme.scrollbarStyles,\r\n    overflowY: \"scroll\",\r\n    padding: theme.spacing(2),\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    width: \"100%\",\r\n    maxHeight: \"100%\",\r\n  },\r\n  control: {\r\n    padding: theme.spacing(1),\r\n  },\r\n  textfield: {\r\n    width: \"100%\",\r\n  },\r\n}));\r\n\r\nconst SettingsCustom = () => {\r\n  const classes = useStyles();\r\n  const [tab, setTab] = useState(\"options\");\r\n  const [schedules, setSchedules] = useState([]);\r\n  const [company, setCompany] = useState({});\r\n  const [loading, setLoading] = useState(false);\r\n  const [currentUser, setCurrentUser] = useState({});\r\n  const [settings, setSettings] = useState({});\r\n  const [schedulesEnabled, setSchedulesEnabled] = useState(false);\r\n\r\n  const { getCurrentUserInfo } = useAuth();\r\n  const { find, updateSchedules } = useCompanies();\r\n  const { getAll: getAllSettings } = useSettings();\r\n\r\n  useEffect(() => {\r\n    async function findData() {\r\n      setLoading(true);\r\n      try {\r\n        const companyId = localStorage.getItem(\"companyId\");\r\n        const company = await find(companyId);\r\n        const settingList = await getAllSettings();\r\n        setCompany(company);\r\n        setSchedules(company.schedules);\r\n        setSettings(settingList);\r\n\r\n        if (Array.isArray(settingList)) {\r\n          const scheduleType = settingList.find(\r\n            (d) => d.key === \"scheduleType\"\r\n          );\r\n          if (scheduleType) {\r\n            setSchedulesEnabled(scheduleType.value === \"company\");\r\n          }\r\n        }\r\n\r\n        const user = await getCurrentUserInfo();\r\n        setCurrentUser(user);\r\n      } catch (e) {\r\n        toast.error(e);\r\n      }\r\n      setLoading(false);\r\n    }\r\n    findData();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  const handleTabChange = (event, newValue) => {\r\n      async function findData() {\r\n        setLoading(true);\r\n        try {\r\n          const companyId = localStorage.getItem(\"companyId\");\r\n          const company = await find(companyId);\r\n          const settingList = await getAllSettings();\r\n          setCompany(company);\r\n          setSchedules(company.schedules);\r\n          setSettings(settingList);\r\n  \r\n          if (Array.isArray(settingList)) {\r\n            const scheduleType = settingList.find(\r\n              (d) => d.key === \"scheduleType\"\r\n            );\r\n            if (scheduleType) {\r\n              setSchedulesEnabled(scheduleType.value === \"company\");\r\n            }\r\n          }\r\n  \r\n          const user = await getCurrentUserInfo();\r\n          setCurrentUser(user);\r\n        } catch (e) {\r\n          toast.error(e);\r\n        }\r\n        setLoading(false);\r\n      }\r\n      findData();\r\n      // eslint-disable-next-line react-hooks/exhaustive-deps\r\n\r\n    setTab(newValue);\r\n  };\r\n\r\n  const handleSubmitSchedules = async (data) => {\r\n    setLoading(true);\r\n    try {\r\n      setSchedules(data);\r\n      await updateSchedules({ id: company.id, schedules: data });\r\n      toast.success(\"Horários atualizados com sucesso.\");\r\n    } catch (e) {\r\n      toast.error(e);\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  const isSuper = () => {\r\n    return currentUser.super;\r\n  };\r\n\r\n  return (\r\n    <MainContainer className={classes.root}>\r\n      <MainHeader>\r\n        <Title>{i18n.t(\"settings.title\")}</Title>\r\n      </MainHeader>\r\n      <Paper className={classes.mainPaper} elevation={1}>\r\n        <Tabs\r\n          value={tab}\r\n          indicatorColor=\"primary\"\r\n          textColor=\"primary\"\r\n          scrollButtons=\"on\"\r\n          variant=\"scrollable\"\r\n          onChange={handleTabChange}\r\n          className={classes.tab}\r\n        >\r\n          <Tab label=\"Opções\" value={\"options\"} />\r\n          {schedulesEnabled && <Tab label=\"Horários\" value={\"schedules\"} />}\r\n          {isSuper() ? <Tab label=\"Empresas\" value={\"companies\"} /> : null}\r\n          {isSuper() ? <Tab label=\"Planos\" value={\"plans\"} /> : null}\r\n          {isSuper() ? <Tab label=\"Ajuda\" value={\"helps\"} /> : null}\r\n        </Tabs>\r\n        <Paper className={classes.paper} elevation={0}>\r\n          <TabPanel\r\n            className={classes.container}\r\n            value={tab}\r\n            name={\"schedules\"}\r\n          >\r\n            <SchedulesForm\r\n              loading={loading}\r\n              onSubmit={handleSubmitSchedules}\r\n              initialValues={schedules}\r\n            />\r\n          </TabPanel>\r\n          <OnlyForSuperUser\r\n            user={currentUser}\r\n            yes={() => (\r\n              <TabPanel\r\n                className={classes.container}\r\n                value={tab}\r\n                name={\"companies\"}\r\n              >\r\n                <CompaniesManager />\r\n              </TabPanel>\r\n            )}\r\n          />\r\n          <OnlyForSuperUser\r\n            user={currentUser}\r\n            yes={() => (\r\n              <TabPanel\r\n                className={classes.container}\r\n                value={tab}\r\n                name={\"plans\"}\r\n              >\r\n                <PlansManager />\r\n              </TabPanel>\r\n            )}\r\n          />\r\n          <OnlyForSuperUser\r\n            user={currentUser}\r\n            yes={() => (\r\n              <TabPanel\r\n                className={classes.container}\r\n                value={tab}\r\n                name={\"helps\"}\r\n              >\r\n                <HelpsManager />\r\n              </TabPanel>\r\n            )}\r\n          />\r\n          <TabPanel className={classes.container} value={tab} name={\"options\"}>\r\n            <Options\r\n              settings={settings}\r\n              scheduleTypeChanged={(value) =>\r\n                setSchedulesEnabled(value === \"company\")\r\n              }\r\n            />\r\n          </TabPanel>\r\n        </Paper>\r\n      </Paper>\r\n    </MainContainer>\r\n  );\r\n};\r\n\r\nexport default SettingsCustom;\r\n","import React from 'react';\r\nimport { at } from 'lodash';\r\nimport { useField } from 'formik';\r\nimport { TextField } from '@material-ui/core';\r\n\r\nexport default function InputField(props) {\r\n  const { errorText, ...rest } = props;\r\n  const [field, meta] = useField(props);\r\n\r\n  function _renderHelperText() {\r\n    const [touched, error] = at(meta, 'touched', 'error');\r\n    if (touched && error) {\r\n      return error;\r\n    }\r\n  }\r\n\r\n  return (\r\n    <TextField\r\n      type=\"text\"\r\n      error={meta.touched && meta.error && true}\r\n      helperText={_renderHelperText()}\r\n      {...field}\r\n      {...rest}\r\n    />\r\n  );\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { at } from 'lodash';\r\nimport { useField } from 'formik';\r\nimport {\r\n  InputLabel,\r\n  FormControl,\r\n  Select,\r\n  MenuItem,\r\n  FormHelperText\r\n} from '@material-ui/core';\r\n\r\nfunction SelectField(props) {\r\n  const { label, data, ...rest } = props;\r\n  const [field, meta] = useField(props);\r\n  const { value: selectedValue } = field;\r\n  const [touched, error] = at(meta, 'touched', 'error');\r\n  const isError = touched && error && true;\r\n  function _renderHelperText() {\r\n    if (isError) {\r\n      return <FormHelperText>{error}</FormHelperText>;\r\n    }\r\n  }\r\n\r\n  return (\r\n    <FormControl {...rest} error={isError}>\r\n      <InputLabel>{label}</InputLabel>\r\n      <Select {...field} value={selectedValue ? selectedValue : ''}>\r\n        {data.map((item, index) => (\r\n          <MenuItem key={index} value={item.value}>\r\n            {item.label}\r\n          </MenuItem>\r\n        ))}\r\n      </Select>\r\n      {_renderHelperText()}\r\n    </FormControl>\r\n  );\r\n}\r\n\r\nSelectField.defaultProps = {\r\n  data: []\r\n};\r\n\r\nSelectField.propTypes = {\r\n  data: PropTypes.array.isRequired\r\n};\r\n\r\nexport default SelectField;\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport { Grid, Typography } from \"@material-ui/core\";\r\nimport { InputField, SelectField } from \"../../FormFields\";\r\nimport { AuthContext } from \"../../../context/Auth/AuthContext\";\r\n\r\nconst countries = [\r\n  {\r\n    value: \"BR\",\r\n    label: \"Brasil\",\r\n  },\r\n  {\r\n    value: \"usa\",\r\n    label: \"United States\",\r\n  },\r\n];\r\n\r\nexport default function AddressForm(props) {\r\n\r\n  const { user } = useContext(AuthContext);\r\n  const [billingName, setBillingName] = useState(user.company.billingName);\r\n  const [addressZipCode, setAddressZipCode] = useState(user.company.addressZipCode);\r\n  const [addressStreet, setAddressStreet] = useState(user.company.addressStreet);\r\n  const [addressState, setAddressState] = useState(user.company.addressState);\r\n  const [addressCity, setAddressCity] = useState(user.company.addressCity);\r\n  const [addressDistrict, setAddressDistrict] = useState(user.company.addressDistrict);\r\n\r\n  const {\r\n    formField: {\r\n      firstName,\r\n      address1,\r\n      city,\r\n      state,\r\n      zipcode,\r\n      country,\r\n    },\r\n    setFieldValue\r\n  } = props;\r\n  useEffect(() => {\r\n    setFieldValue(\"firstName\", billingName)\r\n    setFieldValue(\"zipcode\", addressZipCode)\r\n    setFieldValue(\"address2\", addressStreet)\r\n    setFieldValue(\"state\", addressState)\r\n    setFieldValue(\"city\", addressCity)\r\n    setFieldValue(\"country\", addressDistrict)\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [])\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Typography variant=\"h6\" gutterBottom>\r\n        Vamos precisar de algumas informações\r\n      </Typography>\r\n      <Grid container spacing={3}>\r\n\r\n        <Grid item xs={6} sm={6}>\r\n          <InputField name={firstName.name} label={firstName.label} fullWidth\r\n            value={billingName}\r\n            onChange={(e) => {\r\n              setBillingName(e.target.value)\r\n              setFieldValue(\"firstName\", e.target.value)\r\n            }}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={6} sm={6}>\r\n          <SelectField\r\n            name={country.name}\r\n            label={country.label}\r\n            data={countries}\r\n            fullWidth\r\n            value={addressDistrict}\r\n            onChange={(e) => {\r\n              setAddressDistrict(e.target.value)\r\n              setFieldValue(\"country\", e.target.value)\r\n            }\r\n            }\r\n          />\r\n        </Grid>\r\n\r\n        <Grid item xs={4}>\r\n          <InputField\r\n            name={zipcode.name}\r\n            label={zipcode.label}\r\n            fullWidth\r\n            value={addressZipCode}\r\n            onChange={(e) => {\r\n              setAddressZipCode(e.target.value)\r\n              setFieldValue(\"zipcode\", e.target.value)\r\n            }}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={8}>\r\n          <InputField\r\n            name={address1.name}\r\n            label={address1.label}\r\n            fullWidth\r\n            value={addressStreet}\r\n            onChange={(e) => {\r\n              setAddressStreet(e.target.value)\r\n              setFieldValue(\"address2\", e.target.value)\r\n\r\n            }}\r\n          />\r\n        </Grid>\r\n\r\n        <Grid item xs={4}>\r\n          <InputField\r\n            name={state.name}\r\n            label={state.label}\r\n            fullWidth\r\n            value={addressState}\r\n            onChange={(e) => {\r\n              setAddressState(e.target.value)\r\n              setFieldValue(\"state\", e.target.value)\r\n\r\n            }}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={8}>\r\n          <InputField\r\n            name={city.name}\r\n            label={city.label}\r\n            fullWidth\r\n            value={addressCity}\r\n            onChange={(e) => {\r\n              setAddressCity(e.target.value)\r\n              setFieldValue(\"city\", e.target.value)\r\n            }}\r\n          />\r\n        </Grid>\r\n\r\n      </Grid>\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React, { useState, useEffect, useReducer } from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardHeader from '@material-ui/core/CardHeader';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport StarIcon from '@material-ui/icons/StarBorder';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MinimizeIcon from '@material-ui/icons/Minimize';\r\nimport AddIcon from '@material-ui/icons/Add';\r\n\r\nimport usePlans from \"../../../hooks/usePlans\";\r\nimport useCompanies from \"../../../hooks/useCompanies\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  '@global': {\r\n    ul: {\r\n      margin: 0,\r\n      padding: 0,\r\n      listStyle: 'none',\r\n    },\r\n  },\r\n  margin: {\r\n    margin: theme.spacing(1),\r\n  },\r\n\r\n\r\n  cardHeader: {\r\n    backgroundColor:\r\n      theme.palette.type === 'light' ? theme.palette.grey[200] : theme.palette.grey[700],\r\n  },\r\n  cardPricing: {\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    alignItems: 'baseline',\r\n    marginBottom: theme.spacing(2),\r\n  },\r\n  footer: {\r\n    borderTop: `1px solid ${theme.palette.divider}`,\r\n    marginTop: theme.spacing(8),\r\n    paddingTop: theme.spacing(3),\r\n    paddingBottom: theme.spacing(3),\r\n    [theme.breakpoints.up('sm')]: {\r\n      paddingTop: theme.spacing(6),\r\n      paddingBottom: theme.spacing(6),\r\n    },\r\n  },\r\n\r\n  customCard: {\r\n    display: \"flex\",\r\n    marginTop: \"16px\",\r\n    alignItems: \"center\",\r\n    flexDirection: \"column\",\r\n  },\r\n  custom: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"space-between\",\r\n  }\r\n}));\r\n\r\n\r\nexport default function Pricing(props) {\r\n  const {\r\n    setFieldValue,\r\n    setActiveStep,\r\n    activeStep,\r\n  } = props;\r\n\r\n  const handleChangeAdd = (event, newValue) => {\r\n    if (newValue < 3) return\r\n\r\n    const newPrice = 11.00;\r\n\r\n    setUsersPlans(newValue);\r\n    setCustomValuePlans(customValuePlans + newPrice);\r\n  }\r\n\r\n  const handleChangeMin = (event, newValue) => {\r\n    if (newValue < 3) return\r\n\r\n    const newPrice = 11;\r\n\r\n    setUsersPlans(newValue);\r\n    setCustomValuePlans(customValuePlans - newPrice);\r\n  }\r\n\r\n  const handleChangeConnectionsAdd = (event, newValue) => {\r\n    if (newValue < 3) return\r\n    const newPrice = 20.00;\r\n    setConnectionsPlans(newValue);\r\n    setCustomValuePlans(customValuePlans + newPrice);\r\n  }\r\n\r\n  const handleChangeConnectionsMin = (event, newValue) => {\r\n    if (newValue < 3) return\r\n    const newPrice = 20;\r\n    setConnectionsPlans(newValue);\r\n    setCustomValuePlans(customValuePlans - newPrice);\r\n  }\r\n\r\n  const { list, finder } = usePlans();\r\n  const { find } = useCompanies();\r\n\r\n  const classes = useStyles();\r\n  const [usersPlans, setUsersPlans] = React.useState(3);\r\n  const [companiesPlans, setCompaniesPlans] = useState(0);\r\n  const [connectionsPlans, setConnectionsPlans] = React.useState(3);\r\n  const [storagePlans, setStoragePlans] = React.useState([]);\r\n  const [customValuePlans, setCustomValuePlans] = React.useState(49.00);\r\n  const [loading, setLoading] = React.useState(false);\r\n  const companyId = localStorage.getItem(\"companyId\");\r\n\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      await loadCompanies();\r\n    }\r\n    fetchData();\r\n  }, [])\r\n\r\n  const loadCompanies = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const companiesList = await find(companyId);\r\n      setCompaniesPlans(companiesList.planId);\r\n      await loadPlans(companiesList.planId);\r\n    } catch (e) {\r\n      console.log(e);\r\n      // toast.error(\"Não foi possível carregar a lista de registros\");\r\n    }\r\n    setLoading(false);\r\n  };\r\n  const loadPlans = async (companiesPlans) => {\r\n    setLoading(true);\r\n    try {\r\n      const plansCompanies = await finder(companiesPlans);\r\n      const plans = []\r\n\r\n      //plansCompanies.forEach((plan) => {\r\n      plans.push({\r\n        title: plansCompanies.name,\r\n        planId: plansCompanies.id,\r\n        price: plansCompanies.value,\r\n        description: [\r\n          `${plansCompanies.users} Usuários`,\r\n          `${plansCompanies.connections} Conexão`,\r\n          `${plansCompanies.queues} Filas`\r\n        ],\r\n        users: plansCompanies.users,\r\n        connections: plansCompanies.connections,\r\n        queues: plansCompanies.queues,\r\n        buttonText: 'SELECIONAR',\r\n        buttonVariant: 'outlined',\r\n      })\r\n\r\n      // setStoragePlans(data);\r\n      //});\r\n      setStoragePlans(plans);\r\n    } catch (e) {\r\n      console.log(e);\r\n      // toast.error(\"Não foi possível carregar a lista de registros\");\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n\r\n  const tiers = storagePlans\r\n  return (\r\n    <React.Fragment>\r\n      <Grid container spacing={3}>\r\n        {tiers.map((tier) => (\r\n          // Enterprise card is full width at sm breakpoint\r\n          <Grid item key={tier.title} xs={12} sm={tier.title === 'Enterprise' ? 12 : 12} md={12}>\r\n            <Card>\r\n              <CardHeader\r\n                title={tier.title}\r\n                subheader={tier.subheader}\r\n                titleTypographyProps={{ align: 'center' }}\r\n                subheaderTypographyProps={{ align: 'center' }}\r\n                action={tier.title === 'Pro' ? <StarIcon /> : null}\r\n                className={classes.cardHeader}\r\n              />\r\n              <CardContent>\r\n                <div className={classes.cardPricing}>\r\n                  <Typography component=\"h2\" variant=\"h3\" color=\"textPrimary\">\r\n                    {\r\n\r\n                      <React.Fragment>\r\n                        R${tier.price.toLocaleString('pt-br', { minimumFractionDigits: 2 })}\r\n                      </React.Fragment>\r\n                    }\r\n                  </Typography>\r\n                  <Typography variant=\"h6\" color=\"textSecondary\">\r\n                    /mês\r\n                  </Typography>\r\n                </div>\r\n                <ul>\r\n                  {tier.description.map((line) => (\r\n                    <Typography component=\"li\" variant=\"subtitle1\" align=\"center\" key={line}>\r\n                      {line}\r\n                    </Typography>\r\n                  ))}\r\n                </ul>\r\n              </CardContent>\r\n              <CardActions>\r\n                <Button\r\n                  fullWidth\r\n                  variant={tier.buttonVariant}\r\n                  color=\"primary\"\r\n                  onClick={() => {\r\n                    if (tier.custom) {\r\n                      setFieldValue(\"plan\", JSON.stringify({\r\n                        users: usersPlans,\r\n                        connections: connectionsPlans,\r\n                        price: customValuePlans,\r\n                      }));\r\n                    } else {\r\n                      setFieldValue(\"plan\", JSON.stringify(tier));\r\n                    }\r\n                    setActiveStep(activeStep + 1);\r\n                  }\r\n                  }\r\n                >\r\n                  {tier.buttonText}\r\n                </Button>\r\n              </CardActions>\r\n            </Card>\r\n          </Grid>\r\n        ))}\r\n      </Grid>\r\n    </React.Fragment>\r\n  );\r\n}","import { makeStyles } from '@material-ui/core/styles';\r\nexport default makeStyles(theme => ({\r\n  listItem: {\r\n    padding: theme.spacing(1, 0)\r\n  },\r\n  total: {\r\n    fontWeight: '700'\r\n  },\r\n  title: {\r\n    marginTop: theme.spacing(2)\r\n  }\r\n}));\r\n","import React from 'react';\r\nimport { Typography, Grid } from '@material-ui/core';\r\nimport useStyles from './styles';\r\n\r\nfunction PaymentDetails(props) {\r\n  const { formValues } = props;\r\n  const classes = useStyles();\r\n  const { plan } = formValues;\r\n\r\n  const newPlan = JSON.parse(plan);\r\n  const { users, connections, price } = newPlan;\r\n  return (\r\n    <Grid item xs={12} sm={12}>\r\n      <Typography variant=\"h6\" gutterBottom className={classes.title}>\r\n        Detalhes do plano\r\n      </Typography>\r\n      <Typography gutterBottom>Usuários: {users}</Typography>\r\n      <Typography gutterBottom>Whatsapps: {connections}</Typography>\r\n      <Typography gutterBottom>Cobrança: Mensal</Typography>\r\n      <Typography gutterBottom>Total: R${price.toLocaleString('pt-br', {minimumFractionDigits: 2})}</Typography>\r\n    </Grid>\r\n  );\r\n}\r\n\r\nexport default PaymentDetails;\r\n","import ReviewOrder from './ReviewOrder';\r\nexport default ReviewOrder;\r\n","import React from 'react';\r\nimport { useFormikContext } from 'formik';\r\nimport { Typography, Grid } from '@material-ui/core';\r\nimport ShippingDetails from './ShippingDetails';\r\nimport PaymentDetails from './PaymentDetails';\r\n\r\nexport default function ReviewOrder() {\r\n  const { values: formValues } = useFormikContext();\r\n  return (\r\n    <React.Fragment>\r\n      <Typography variant=\"h6\" gutterBottom>\r\n        Resumo da assinatura\r\n      </Typography>\r\n      <Grid container spacing={2}>\r\n        <ShippingDetails formValues={formValues} />\r\n      </Grid>\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import styled from 'styled-components';\r\n\r\nexport const Container = styled.div`\r\n  footer {\r\n    margin-top: 30px;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    width: 100%;\r\n\r\n    @media (max-width: 768px) {\r\n      flex-direction: column;\r\n      .checkout-buttons {\r\n        display: flex;\r\n        flex-direction: column-reverse;\r\n        width: 100%;\r\n\r\n        button {\r\n          width: 100%;\r\n          margin-top: 16px;\r\n          margin-left: 0;\r\n        }\r\n      }\r\n    }\r\n\r\n    button {\r\n      margin-left: 16px;\r\n    }\r\n  }\r\n`;\r\nexport const Total = styled.div`\r\n  display: flex;\r\n  align-items: baseline;\r\n\r\n  span {\r\n    color: #333;\r\n    font-weight: bold;\r\n  }\r\n\r\n  strong {\r\n    color: #333;\r\n    font-size: 28px;\r\n    margin-left: 5px;\r\n  }\r\n\r\n  @media (max-width: 768px) {\r\n    min-width: 100%;\r\n    justify-content: space-between;\r\n  }\r\n`;\r\n\r\nexport const SuccessContent = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n\r\n  > h2 {\r\n    text-align: center;\r\n  }\r\n\r\n  > svg {\r\n    margin-top: 16px;\r\n  }\r\n\r\n  > span {\r\n    margin-top: 24px;\r\n    text-align: center;\r\n  }\r\n\r\n  > p,\r\n  strong {\r\n    margin-top: 8px;\r\n    font-size: 9px;\r\n    color: #999;\r\n  }\r\n\r\n  .copy-button {\r\n    font-size: 14px;\r\n    cursor: pointer;\r\n    text-align: center;\r\n    user-select: none;\r\n    min-height: 56px;\r\n    display: inline-flex;\r\n    -webkit-box-pack: center;\r\n    justify-content: center;\r\n    -webkit-box-align: center;\r\n    align-items: center;\r\n    background-color: #f9f9f9;\r\n    color: #000;\r\n    -webkit-appearance: none !important;\r\n    outline: none;\r\n    margin-top: 16px;\r\n    width: 256px;\r\n    font-weight: 600;\r\n    text-transform: uppercase;\r\n    border: none;\r\n\r\n    > span {\r\n      margin-right: 8px;\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CheckoutWrapper = styled.div`\r\n  width: 100%;\r\n  margin: 0 auto 0;\r\n  max-width: 1110px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  -webkit-box-align: center;\r\n  align-items: center;\r\n  padding: 50px 95px;\r\n  background: #fff;\r\n  @media (max-width: 768px) {\r\n    padding: 16px 24px;\r\n`;","import React, { useState, useEffect } from 'react';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport QRCode from 'react-qr-code';\r\nimport { SuccessContent, Total } from './style';\r\nimport { CopyToClipboard } from 'react-copy-to-clipboard';\r\nimport { FaCopy, FaCheckCircle } from 'react-icons/fa';\r\nimport { socketConnection } from \"../../../services/socket\";\r\nimport { useDate } from \"../../../hooks/useDate\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nfunction CheckoutSuccess(props) {\r\n\r\n  const { pix } = props;\r\n  const [pixString,] = useState(pix.qrcode.qrcode);\r\n  const [copied, setCopied] = useState(false);\r\n  const history = useHistory();\r\n\r\n  const { dateToClient } = useDate();\r\n\r\n  useEffect(() => {\r\n    const companyId = localStorage.getItem(\"companyId\");\r\n    const socket = socketConnection({ companyId });\r\n    socket.on(`company-${companyId}-payment`, (data) => {\r\n\r\n      if (data.action === \"CONCLUIDA\") {\r\n        toast.success(`Sua licença foi renovada até ${dateToClient(data.company.dueDate)}!`);\r\n        setTimeout(() => {\r\n          history.push(\"/\");\r\n        }, 4000);\r\n      }\r\n    });\r\n  }, [history]);\r\n\r\n  const handleCopyQR = () => {\r\n    setTimeout(() => {\r\n      setCopied(false);\r\n    }, 1 * 1000);\r\n    setCopied(true);\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Total>\r\n        <span>TOTAL</span>\r\n        <strong>R${pix.valor.original.toLocaleString('pt-br', { minimumFractionDigits: 2 })}</strong>\r\n      </Total>\r\n      <SuccessContent>\r\n        <QRCode value={pixString} />\r\n        <CopyToClipboard text={pixString} onCopy={handleCopyQR}>\r\n          <button className=\"copy-button\" type=\"button\">\r\n            {copied ? (\r\n              <>\r\n                <span>Copiado</span>\r\n                <FaCheckCircle size={18} />\r\n              </>\r\n            ) : (\r\n              <>\r\n                <span>Copiar código QR</span>\r\n                <FaCopy size={18} />\r\n              </>\r\n            )}\r\n          </button>\r\n        </CopyToClipboard>\r\n        <span>\r\n          Para finalizar, basta realizar o pagamento escaneando ou colando o\r\n          código Pix acima :)\r\n        </span>\r\n      </SuccessContent>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default CheckoutSuccess;\r\n","import CheckoutSuccess from './CheckoutSuccess';\r\nexport default CheckoutSuccess;\r\n","export default {\r\n  formId: 'checkoutForm',\r\n  formField: {\r\n    firstName: {\r\n      name: 'firstName',\r\n      label: 'Nome completo*',\r\n      requiredErrorMsg: 'O nome completo é obrigatório'\r\n    },\r\n    lastName: {\r\n      name: 'lastName',\r\n      label: 'Last name*',\r\n      requiredErrorMsg: 'Last name is required'\r\n    },\r\n    address1: {\r\n      name: 'address2',\r\n      label: 'Endereço*',\r\n      requiredErrorMsg: 'O Endereço é obrigatório'\r\n    },\r\n\r\n    city: {\r\n      name: 'city',\r\n      label: 'Cidade*',\r\n      requiredErrorMsg: 'Cidade é obrigatória'\r\n    },\r\n    state: {\r\n      name: 'state',\r\n      label: 'Estado*',\r\n      requiredErrorMsg: 'Cidade é obrigatória'\r\n    },\r\n    zipcode: {\r\n      name: 'zipcode',\r\n      label: 'CEP*',\r\n      requiredErrorMsg: 'CEP é obrigatório',\r\n      invalidErrorMsg: 'Formato de CEP inválido'\r\n    },\r\n    country: {\r\n      name: 'country',\r\n      label: 'País*',\r\n      requiredErrorMsg: 'País é obrigatório'\r\n    },\r\n    useAddressForPaymentDetails: {\r\n      name: 'useAddressForPaymentDetails',\r\n      label: 'Use this address for payment details'\r\n    },\r\n    invoiceId: {\r\n      name: 'invoiceId',\r\n      label: 'Use this invoiceId'\r\n    },\r\n    nameOnCard: {\r\n      name: 'nameOnCard',\r\n      label: 'Name on card*',\r\n      requiredErrorMsg: 'Name on card is required'\r\n    },\r\n    cardNumber: {\r\n      name: 'cardNumber',\r\n      label: 'Card number*',\r\n      requiredErrorMsg: 'Card number is required',\r\n      invalidErrorMsg: 'Card number is not valid (e.g. 4111111111111)'\r\n    },\r\n    expiryDate: {\r\n      name: 'expiryDate',\r\n      label: 'Expiry date*',\r\n      requiredErrorMsg: 'Expiry date is required',\r\n      invalidErrorMsg: 'Expiry date is not valid'\r\n    },\r\n    cvv: {\r\n      name: 'cvv',\r\n      label: 'CVV*',\r\n      requiredErrorMsg: 'CVV is required',\r\n      invalidErrorMsg: 'CVV is invalid (e.g. 357)'\r\n    }\r\n  }\r\n};\r\n","import * as Yup from 'yup';\r\nimport checkoutFormModel from './checkoutFormModel';\r\nconst {\r\n  formField: {\r\n    firstName,\r\n    address1,\r\n    city,\r\n    zipcode,\r\n    country,\r\n  }\r\n} = checkoutFormModel;\r\n\r\n\r\nexport default [\r\n  Yup.object().shape({\r\n    [firstName.name]: Yup.string().required(`${firstName.requiredErrorMsg}`),\r\n    [address1.name]: Yup.string().required(`${address1.requiredErrorMsg}`),\r\n    [city.name]: Yup.string()\r\n      .nullable()\r\n      .required(`${city.requiredErrorMsg}`),\r\n    [zipcode.name]: Yup.string()\r\n      .required(`${zipcode.requiredErrorMsg}`),\r\n\r\n    [country.name]: Yup.string()\r\n      .nullable()\r\n      .required(`${country.requiredErrorMsg}`)\r\n  }),\r\n\r\n];\r\n","import checkoutFormModel from './checkoutFormModel';\r\nconst {\r\n  formField: {\r\n    firstName,\r\n    lastName,\r\n    address1,\r\n    city,\r\n    state,\r\n    zipcode,\r\n    country,\r\n    useAddressForPaymentDetails,\r\n    nameOnCard,\r\n    cardNumber,\r\n    invoiceId,\r\n    cvv\r\n  }\r\n} = checkoutFormModel;\r\n\r\nexport default {\r\n  [firstName.name]: '',\r\n  [lastName.name]: '',\r\n  [address1.name]: '',\r\n  [city.name]: '',\r\n  [state.name]: '',\r\n  [zipcode.name]: '',\r\n  [country.name]: '',\r\n  [useAddressForPaymentDetails.name]: false,\r\n  [nameOnCard.name]: '',\r\n  [cardNumber.name]: '',\r\n  [invoiceId.name]: '',\r\n  [cvv.name]: ''\r\n};\r\n","import { makeStyles } from '@material-ui/core/styles';\r\nexport default makeStyles(theme => ({\r\n  stepper: {\r\n    padding: theme.spacing(3, 0, 5)\r\n  },\r\n  buttons: {\r\n    display: 'flex',\r\n    justifyContent: 'flex-end'\r\n  },\r\n  button: {\r\n    marginTop: theme.spacing(3),\r\n    marginLeft: theme.spacing(1)\r\n  },\r\n  wrapper: {\r\n    margin: theme.spacing(1),\r\n    position: 'relative'\r\n  },\r\n  buttonProgress: {\r\n    position: 'absolute',\r\n    top: '50%',\r\n    left: '50%'\r\n  }\r\n}));\r\n","import CheckoutPage from './CheckoutPage';\r\nexport default CheckoutPage;\r\n","import React, { useContext, useState } from \"react\";\r\nimport {\r\n  Stepper,\r\n  Step,\r\n  StepLabel,\r\n  Button,\r\n  Typography,\r\n  CircularProgress,\r\n} from \"@material-ui/core\";\r\nimport { Formik, Form } from \"formik\";\r\n\r\nimport AddressForm from \"./Forms/AddressForm\";\r\nimport PaymentForm from \"./Forms/PaymentForm\";\r\nimport ReviewOrder from \"./ReviewOrder\";\r\nimport CheckoutSuccess from \"./CheckoutSuccess\";\r\n\r\nimport api from \"../../services/api\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport { toast } from \"react-toastify\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\n\r\n\r\nimport validationSchema from \"./FormModel/validationSchema\";\r\nimport checkoutFormModel from \"./FormModel/checkoutFormModel\";\r\nimport formInitialValues from \"./FormModel/formInitialValues\";\r\n\r\nimport useStyles from \"./styles\";\r\nimport Invoices from \"../../pages/Financeiro\";\r\n\r\n\r\nexport default function CheckoutPage(props) {\r\n  const steps = [\"Dados\", \"Personalizar\", \"Revisar\"];\r\n  const { formId, formField } = checkoutFormModel;\r\n  \r\n  \r\n  \r\n  const classes = useStyles();\r\n  const [activeStep, setActiveStep] = useState(1);\r\n  const [datePayment, setDatePayment] = useState(null);\r\n  const [invoiceId, setinvoiceId] = useState(props.Invoice.id);\r\n  const currentValidationSchema = validationSchema[activeStep];\r\n  const isLastStep = activeStep === steps.length - 1;\r\n  const { user } = useContext(AuthContext);\r\n\r\nfunction _renderStepContent(step, setFieldValue, setActiveStep, values ) {\r\n\r\n  switch (step) {\r\n    case 0:\r\n      return <AddressForm formField={formField} values={values} setFieldValue={setFieldValue}  />;\r\n    case 1:\r\n      return <PaymentForm \r\n      formField={formField} \r\n      setFieldValue={setFieldValue} \r\n      setActiveStep={setActiveStep} \r\n      activeStep={step} \r\n      invoiceId={invoiceId}\r\n      values={values}\r\n      />;\r\n    case 2:\r\n      return <ReviewOrder />;\r\n    default:\r\n      return <div>Not Found</div>;\r\n  }\r\n}\r\n\r\n\r\n  async function _submitForm(values, actions) {\r\n    try {\r\n      const plan = JSON.parse(values.plan);\r\n      const newValues = {\r\n        firstName: values.firstName,\r\n        lastName: values.lastName,\r\n        address2: values.address2,\r\n        city: values.city,\r\n        state: values.state,\r\n        zipcode: values.zipcode,\r\n        country: values.country,\r\n        useAddressForPaymentDetails: values.useAddressForPaymentDetails,\r\n        nameOnCard: values.nameOnCard,\r\n        cardNumber: values.cardNumber,\r\n        cvv: values.cvv,\r\n        plan: values.plan,\r\n        price: plan.price,\r\n        users: plan.users,\r\n        connections: plan.connections,\r\n        invoiceId: invoiceId\r\n      }\r\n\r\n      const { data } = await api.post(\"/subscription\", newValues);\r\n      setDatePayment(data)\r\n      actions.setSubmitting(false);\r\n      setActiveStep(activeStep + 1);\r\n      toast.success(\"Assinatura realizada com sucesso!, aguardando a realização do pagamento\");\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n  }\r\n\r\n  function _handleSubmit(values, actions) {\r\n    if (isLastStep) {\r\n      _submitForm(values, actions);\r\n    } else {\r\n      setActiveStep(activeStep + 1);\r\n      actions.setTouched({});\r\n      actions.setSubmitting(false);\r\n    }\r\n  }\r\n\r\n  function _handleBack() {\r\n    setActiveStep(activeStep - 1);\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Typography component=\"h1\" variant=\"h4\" align=\"center\">\r\n        Falta pouco!\r\n      </Typography>\r\n      <Stepper activeStep={activeStep} className={classes.stepper}>\r\n        {steps.map((label) => (\r\n          <Step key={label}>\r\n            <StepLabel>{label}</StepLabel>\r\n          </Step>\r\n        ))}\r\n      </Stepper>\r\n      <React.Fragment>\r\n        {activeStep === steps.length ? (\r\n          <CheckoutSuccess pix={datePayment} />\r\n        ) : (\r\n          <Formik\r\n            initialValues={{\r\n              ...user, \r\n              ...formInitialValues\r\n            }}\r\n            validationSchema={currentValidationSchema}\r\n            onSubmit={_handleSubmit}\r\n          >\r\n            {({ isSubmitting, setFieldValue, values }) => (\r\n              <Form id={formId}>\r\n                {_renderStepContent(activeStep, setFieldValue, setActiveStep, values)}\r\n\r\n                <div className={classes.buttons}>\r\n                  {activeStep !== 1 && (\r\n                    <Button onClick={_handleBack} className={classes.button}>\r\n                      VOLTAR\r\n                    </Button>\r\n                  )}\r\n                  <div className={classes.wrapper}>\r\n                    {activeStep !== 1 && (\r\n                      <Button\r\n                        disabled={isSubmitting}\r\n                        type=\"submit\"\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        className={classes.button}\r\n                      >\r\n                        {isLastStep ? \"PAGAR\" : \"PRÓXIMO\"}\r\n                      </Button>\r\n                    )}\r\n                    {isSubmitting && (\r\n                      <CircularProgress\r\n                        size={24}\r\n                        className={classes.buttonProgress}\r\n                      />\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </Form>\r\n            )}\r\n          </Formik>\r\n        )}\r\n      </React.Fragment>\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React, { useEffect, useRef } from \"react\";\r\n\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { green } from \"@material-ui/core/colors\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport CheckoutPage from \"../CheckoutPage/\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n    flexWrap: \"wrap\",\r\n  },\r\n  textField: {\r\n    marginRight: theme.spacing(1),\r\n    flex: 1,\r\n  },\r\n\r\n  extraAttr: {\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n  },\r\n\r\n  btnWrapper: {\r\n    position: \"relative\",\r\n  },\r\n\r\n  buttonProgress: {\r\n    color: green[500],\r\n    position: \"absolute\",\r\n    top: \"50%\",\r\n    left: \"50%\",\r\n    marginTop: -12,\r\n    marginLeft: -12,\r\n  },\r\n}));\r\n\r\n\r\nconst ContactModal = ({ open, onClose, Invoice, contactId, initialValues, onSave }) => {\r\n  const classes = useStyles();\r\n  const isMounted = useRef(true);\r\n\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      isMounted.current = false;\r\n    };\r\n  }, []);\r\n\r\n\r\n  const handleClose = () => {\r\n    onClose();\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Dialog open={open} onClose={handleClose} maxWidth=\"md\" scroll=\"paper\">\r\n        <DialogContent dividers>\r\n          <CheckoutPage\r\n            Invoice={Invoice}\r\n          />\r\n        </DialogContent>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ContactModal;\r\n","import React, { useState, useEffect, useReducer } from \"react\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport SearchIcon from \"@material-ui/icons/Search\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\n\r\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\r\nimport EditIcon from \"@material-ui/icons/Edit\";\r\n\r\nimport MainContainer from \"../../components/MainContainer\";\r\nimport MainHeader from \"../../components/MainHeader\";\r\nimport MainHeaderButtonsWrapper from \"../../components/MainHeaderButtonsWrapper\";\r\nimport Title from \"../../components/Title\";\r\nimport SubscriptionModal from \"../../components/SubscriptionModal\";\r\nimport api from \"../../services/api\";\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport TableRowSkeleton from \"../../components/TableRowSkeleton\";\r\nimport UserModal from \"../../components/UserModal\";\r\nimport ConfirmationModal from \"../../components/ConfirmationModal\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport { socketConnection } from \"../../services/socket\";\r\n\r\nimport moment from \"moment\";\r\n\r\nconst reducer = (state, action) => {\r\n  if (action.type === \"LOAD_INVOICES\") {\r\n    const invoices = action.payload;\r\n    const newUsers = [];\r\n\r\n    invoices.forEach((user) => {\r\n      const userIndex = state.findIndex((u) => u.id === user.id);\r\n      if (userIndex !== -1) {\r\n        state[userIndex] = user;\r\n      } else {\r\n        newUsers.push(user);\r\n      }\r\n    });\r\n\r\n    return [...state, ...newUsers];\r\n  }\r\n\r\n  if (action.type === \"UPDATE_USERS\") {\r\n    const user = action.payload;\r\n    const userIndex = state.findIndex((u) => u.id === user.id);\r\n\r\n    if (userIndex !== -1) {\r\n      state[userIndex] = user;\r\n      return [...state];\r\n    } else {\r\n      return [user, ...state];\r\n    }\r\n  }\r\n\r\n  if (action.type === \"DELETE_USER\") {\r\n    const userId = action.payload;\r\n\r\n    const userIndex = state.findIndex((u) => u.id === userId);\r\n    if (userIndex !== -1) {\r\n      state.splice(userIndex, 1);\r\n    }\r\n    return [...state];\r\n  }\r\n\r\n  if (action.type === \"RESET\") {\r\n    return [];\r\n  }\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  mainPaper: {\r\n    flex: 1,\r\n    padding: theme.spacing(1),\r\n    overflowY: \"scroll\",\r\n    ...theme.scrollbarStyles,\r\n  },\r\n}));\r\n\r\nconst Invoices = () => {\r\n  const classes = useStyles();\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [pageNumber, setPageNumber] = useState(1);\r\n  const [hasMore, setHasMore] = useState(false);\r\n  const [searchParam, setSearchParam] = useState(\"\");\r\n  const [invoices, dispatch] = useReducer(reducer, []);\r\n  const [storagePlans, setStoragePlans] = React.useState([]);\r\n  const [selectedContactId, setSelectedContactId] = useState(null);\r\n  const [contactModalOpen, setContactModalOpen] = useState(false);\r\n\r\n\r\n  const handleOpenContactModal = (invoices) => {\r\n    setStoragePlans(invoices);\r\n    setSelectedContactId(null);\r\n    setContactModalOpen(true);\r\n  };\r\n\r\n\r\n  const handleCloseContactModal = () => {\r\n    setSelectedContactId(null);\r\n    setContactModalOpen(false);\r\n  };\r\n  useEffect(() => {\r\n    dispatch({ type: \"RESET\" });\r\n    setPageNumber(1);\r\n  }, [searchParam]);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    const delayDebounceFn = setTimeout(() => {\r\n      const fetchInvoices = async () => {\r\n        try {\r\n          const { data } = await api.get(\"/invoices/all\", {\r\n            params: { searchParam, pageNumber },\r\n          });\r\n          dispatch({ type: \"LOAD_INVOICES\", payload: data });\r\n          setHasMore(data.hasMore);\r\n          setLoading(false);\r\n        } catch (err) {\r\n          toastError(err);\r\n        }\r\n      };\r\n      fetchInvoices();\r\n    }, 500);\r\n    return () => clearTimeout(delayDebounceFn);\r\n  }, [searchParam, pageNumber]);\r\n\r\n\r\n  const loadMore = () => {\r\n    setPageNumber((prevState) => prevState + 1);\r\n  };\r\n\r\n  const handleScroll = (e) => {\r\n    if (!hasMore || loading) return;\r\n    const { scrollTop, scrollHeight, clientHeight } = e.currentTarget;\r\n    if (scrollHeight - (scrollTop + 100) < clientHeight) {\r\n      loadMore();\r\n    }\r\n  };\r\n  const rowStyle = (record) => {\r\n    const hoje = moment(moment()).format(\"DD/MM/yyyy\");\r\n    const vencimento = moment(record.dueDate).format(\"DD/MM/yyyy\");\r\n    var diff = moment(vencimento, \"DD/MM/yyyy\").diff(moment(hoje, \"DD/MM/yyyy\"));\r\n    var dias = moment.duration(diff).asDays();    \r\n    if (dias < 0 && record.status !== \"paid\") {\r\n      return { backgroundColor: \"#ffbcbc9c\" };\r\n    }\r\n  };\r\n\r\n  const rowStatus = (record) => {\r\n    const hoje = moment(moment()).format(\"DD/MM/yyyy\");\r\n    const vencimento = moment(record.dueDate).format(\"DD/MM/yyyy\");\r\n    var diff = moment(vencimento, \"DD/MM/yyyy\").diff(moment(hoje, \"DD/MM/yyyy\"));\r\n    var dias = moment.duration(diff).asDays();    \r\n    const status = record.status;\r\n    if (status === \"paid\") {\r\n      return \"Pago\";\r\n    }\r\n    if (dias < 0) {\r\n      return \"Vencido\";\r\n    } else {\r\n      return \"Em Aberto\"\r\n    }\r\n\r\n  }\r\n\r\n  return (\r\n    <MainContainer>\r\n      <SubscriptionModal\r\n        open={contactModalOpen}\r\n        onClose={handleCloseContactModal}\r\n        aria-labelledby=\"form-dialog-title\"\r\n        Invoice={storagePlans}\r\n        contactId={selectedContactId}\r\n\r\n      ></SubscriptionModal>\r\n      <MainHeader>\r\n        <Title>Faturas</Title>\r\n      </MainHeader>\r\n      <Paper\r\n        className={classes.mainPaper}\r\n        variant=\"outlined\"\r\n        onScroll={handleScroll}\r\n      >\r\n        <Table size=\"small\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell align=\"center\">Id</TableCell>\r\n              <TableCell align=\"center\">Detalhes</TableCell>\r\n              <TableCell align=\"center\">Valor</TableCell>\r\n              <TableCell align=\"center\">Data Venc.</TableCell>\r\n              <TableCell align=\"center\">Status</TableCell>\r\n              <TableCell align=\"center\">Ação</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            <>\r\n              {invoices.map((invoices) => (\r\n                <TableRow style={rowStyle(invoices)} key={invoices.id}>\r\n                  <TableCell align=\"center\">{invoices.id}</TableCell>\r\n                  <TableCell align=\"center\">{invoices.detail}</TableCell>\r\n                  <TableCell style={{ fontWeight: 'bold' }} align=\"center\">{invoices.value.toLocaleString('pt-br', { style: 'currency', currency: 'BRL' })}</TableCell>\r\n                  <TableCell align=\"center\">{moment(invoices.dueDate).format(\"DD/MM/YYYY\")}</TableCell>\r\n                  <TableCell style={{ fontWeight: 'bold' }} align=\"center\">{rowStatus(invoices)}</TableCell>\r\n                  <TableCell align=\"center\">\r\n                    {rowStatus(invoices) !== \"Pago\" ?\r\n                      <Button\r\n                        size=\"small\"\r\n                        variant=\"outlined\"\r\n                        color=\"secondary\"\r\n                        onClick={() => handleOpenContactModal(invoices)}\r\n                      >\r\n                        PAGAR\r\n                      </Button> :\r\n                      <Button\r\n                        size=\"small\"\r\n                        variant=\"outlined\" \r\n                        /* color=\"secondary\"\r\n                        disabled */\r\n                      >\r\n                        PAGO \r\n                      </Button>}\r\n\r\n                  </TableCell>\r\n                </TableRow>\r\n              ))}\r\n              {loading && <TableRowSkeleton columns={4} />}\r\n            </>\r\n          </TableBody>\r\n        </Table>\r\n      </Paper>\r\n    </MainContainer>\r\n  );\r\n};\r\n\r\nexport default Invoices;\r\n","import React, { useState, useEffect, useReducer } from \"react\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport SearchIcon from \"@material-ui/icons/Search\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\n\r\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\r\nimport EditIcon from \"@material-ui/icons/Edit\";\r\n\r\nimport MainContainer from \"../../components/MainContainer\";\r\nimport MainHeader from \"../../components/MainHeader\";\r\nimport MainHeaderButtonsWrapper from \"../../components/MainHeaderButtonsWrapper\";\r\nimport Title from \"../../components/Title\";\r\n\r\nimport api from \"../../services/api\";\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport TableRowSkeleton from \"../../components/TableRowSkeleton\";\r\nimport UserModal from \"../../components/UserModal\";\r\nimport ConfirmationModal from \"../../components/ConfirmationModal\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport { socketConnection } from \"../../services/socket\";\r\n\r\nconst reducer = (state, action) => {\r\n  if (action.type === \"LOAD_USERS\") {\r\n    const users = action.payload;\r\n    const newUsers = [];\r\n\r\n    users.forEach((user) => {\r\n      const userIndex = state.findIndex((u) => u.id === user.id);\r\n      if (userIndex !== -1) {\r\n        state[userIndex] = user;\r\n      } else {\r\n        newUsers.push(user);\r\n      }\r\n    });\r\n\r\n    return [...state, ...newUsers];\r\n  }\r\n\r\n  if (action.type === \"UPDATE_USERS\") {\r\n    const user = action.payload;\r\n    const userIndex = state.findIndex((u) => u.id === user.id);\r\n\r\n    if (userIndex !== -1) {\r\n      state[userIndex] = user;\r\n      return [...state];\r\n    } else {\r\n      return [user, ...state];\r\n    }\r\n  }\r\n\r\n  if (action.type === \"DELETE_USER\") {\r\n    const userId = action.payload;\r\n\r\n    const userIndex = state.findIndex((u) => u.id === userId);\r\n    if (userIndex !== -1) {\r\n      state.splice(userIndex, 1);\r\n    }\r\n    return [...state];\r\n  }\r\n\r\n  if (action.type === \"RESET\") {\r\n    return [];\r\n  }\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  mainPaper: {\r\n    flex: 1,\r\n    padding: theme.spacing(1),\r\n    overflowY: \"scroll\",\r\n    ...theme.scrollbarStyles,\r\n  },\r\n}));\r\n\r\nconst Users = () => {\r\n  const classes = useStyles();\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [pageNumber, setPageNumber] = useState(1);\r\n  const [hasMore, setHasMore] = useState(false);\r\n  const [selectedUser, setSelectedUser] = useState(null);\r\n  const [deletingUser, setDeletingUser] = useState(null);\r\n  const [userModalOpen, setUserModalOpen] = useState(false);\r\n  const [confirmModalOpen, setConfirmModalOpen] = useState(false);\r\n  const [searchParam, setSearchParam] = useState(\"\");\r\n  const [users, dispatch] = useReducer(reducer, []);\r\n\r\n  useEffect(() => {\r\n    dispatch({ type: \"RESET\" });\r\n    setPageNumber(1);\r\n  }, [searchParam]);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    const delayDebounceFn = setTimeout(() => {\r\n      const fetchUsers = async () => {\r\n        try {\r\n          const { data } = await api.get(\"/users/\", {\r\n            params: { searchParam, pageNumber },\r\n          });\r\n          dispatch({ type: \"LOAD_USERS\", payload: data.users });\r\n          setHasMore(data.hasMore);\r\n          setLoading(false);\r\n        } catch (err) {\r\n          toastError(err);\r\n        }\r\n      };\r\n      fetchUsers();\r\n    }, 500);\r\n    return () => clearTimeout(delayDebounceFn);\r\n  }, [searchParam, pageNumber]);\r\n\r\n  useEffect(() => {\r\n    const companyId = localStorage.getItem(\"companyId\");\r\n    const socket = socketConnection({ companyId });\r\n\r\n    socket.on(`company-${companyId}-user`, (data) => {\r\n      if (data.action === \"update\" || data.action === \"create\") {\r\n        dispatch({ type: \"UPDATE_USERS\", payload: data.user });\r\n      }\r\n\r\n      if (data.action === \"delete\") {\r\n        dispatch({ type: \"DELETE_USER\", payload: +data.userId });\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      socket.disconnect();\r\n    };\r\n  }, []);\r\n\r\n  const handleOpenUserModal = () => {\r\n    setSelectedUser(null);\r\n    setUserModalOpen(true);\r\n  };\r\n\r\n  const handleCloseUserModal = () => {\r\n    setSelectedUser(null);\r\n    setUserModalOpen(false);\r\n  };\r\n\r\n  const handleSearch = (event) => {\r\n    setSearchParam(event.target.value.toLowerCase());\r\n  };\r\n\r\n  const handleEditUser = (user) => {\r\n    setSelectedUser(user);\r\n    setUserModalOpen(true);\r\n  };\r\n\r\n  const handleDeleteUser = async (userId) => {\r\n    try {\r\n      await api.delete(`/users/${userId}`);\r\n      toast.success(i18n.t(\"users.toasts.deleted\"));\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n    setDeletingUser(null);\r\n    setSearchParam(\"\");\r\n    setPageNumber(1);\r\n  };\r\n\r\n  const loadMore = () => {\r\n    setPageNumber((prevState) => prevState + 1);\r\n  };\r\n\r\n  const handleScroll = (e) => {\r\n    if (!hasMore || loading) return;\r\n    const { scrollTop, scrollHeight, clientHeight } = e.currentTarget;\r\n    if (scrollHeight - (scrollTop + 100) < clientHeight) {\r\n      loadMore();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <MainContainer>\r\n      <ConfirmationModal\r\n        title={\r\n          deletingUser &&\r\n          `${i18n.t(\"users.confirmationModal.deleteTitle\")} ${\r\n            deletingUser.name\r\n          }?`\r\n        }\r\n        open={confirmModalOpen}\r\n        onClose={setConfirmModalOpen}\r\n        onConfirm={() => handleDeleteUser(deletingUser.id)}\r\n      >\r\n        {i18n.t(\"users.confirmationModal.deleteMessage\")}\r\n      </ConfirmationModal>\r\n      <UserModal\r\n        open={userModalOpen}\r\n        onClose={handleCloseUserModal}\r\n        aria-labelledby=\"form-dialog-title\"\r\n        userId={selectedUser && selectedUser.id}\r\n      />\r\n      <MainHeader>\r\n        <Title>{i18n.t(\"users.title\")}</Title>\r\n        <MainHeaderButtonsWrapper>\r\n          <TextField\r\n            placeholder={i18n.t(\"contacts.searchPlaceholder\")}\r\n            type=\"search\"\r\n            value={searchParam}\r\n            onChange={handleSearch}\r\n            InputProps={{\r\n              startAdornment: (\r\n                <InputAdornment position=\"start\">\r\n                  <SearchIcon style={{ color: \"gray\" }} />\r\n                </InputAdornment>\r\n              ),\r\n            }}\r\n          />\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            onClick={handleOpenUserModal}\r\n          >\r\n            {i18n.t(\"users.buttons.add\")}\r\n          </Button>\r\n        </MainHeaderButtonsWrapper>\r\n      </MainHeader>\r\n      <Paper\r\n        className={classes.mainPaper}\r\n        variant=\"outlined\"\r\n        onScroll={handleScroll}\r\n      >\r\n        <Table size=\"small\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell align=\"center\">{i18n.t(\"users.table.name\")}</TableCell>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"users.table.email\")}\r\n              </TableCell>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"users.table.profile\")}\r\n              </TableCell>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"users.table.actions\")}\r\n              </TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            <>\r\n              {users.map((user) => (\r\n                <TableRow key={user.id}>\r\n                  <TableCell align=\"center\">{user.name}</TableCell>\r\n                  <TableCell align=\"center\">{user.email}</TableCell>\r\n                  <TableCell align=\"center\">{user.profile}</TableCell>\r\n                  <TableCell align=\"center\">\r\n                    <IconButton\r\n                      size=\"small\"\r\n                      onClick={() => handleEditUser(user)}\r\n                    >\r\n                      <EditIcon />\r\n                    </IconButton>\r\n\r\n                    <IconButton\r\n                      size=\"small\"\r\n                      onClick={(e) => {\r\n                        setConfirmModalOpen(true);\r\n                        setDeletingUser(user);\r\n                      }}\r\n                    >\r\n                      <DeleteOutlineIcon />\r\n                    </IconButton>\r\n                  </TableCell>\r\n                </TableRow>\r\n              ))}\r\n              {loading && <TableRowSkeleton columns={4} />}\r\n            </>\r\n          </TableBody>\r\n        </Table>\r\n      </Paper>\r\n    </MainContainer>\r\n  );\r\n};\r\n\r\nexport default Users;\r\n","import React, { useState, useEffect, useReducer, useContext } from \"react\";\r\n\r\nimport { toast } from \"react-toastify\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport WhatsAppIcon from \"@material-ui/icons/WhatsApp\";\r\nimport SearchIcon from \"@material-ui/icons/Search\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\n\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\r\nimport EditIcon from \"@material-ui/icons/Edit\";\r\n\r\nimport api from \"../../services/api\";\r\nimport TableRowSkeleton from \"../../components/TableRowSkeleton\";\r\nimport ContactModal from \"../../components/ContactModal\";\r\nimport ConfirmationModal from \"../../components/ConfirmationModal/\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport MainHeader from \"../../components/MainHeader\";\r\nimport Title from \"../../components/Title\";\r\nimport MainHeaderButtonsWrapper from \"../../components/MainHeaderButtonsWrapper\";\r\nimport MainContainer from \"../../components/MainContainer\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\nimport { Can } from \"../../components/Can\";\r\nimport NewTicketModal from \"../../components/NewTicketModal\";\r\nimport { socketConnection } from \"../../services/socket\";\r\n\r\nimport {CSVLink} from \"react-csv\";\r\n\r\nconst reducer = (state, action) => {\r\n  if (action.type === \"LOAD_CONTACTS\") {\r\n    const contacts = action.payload;\r\n    const newContacts = [];\r\n\r\n    contacts.forEach((contact) => {\r\n      const contactIndex = state.findIndex((c) => c.id === contact.id);\r\n      if (contactIndex !== -1) {\r\n        state[contactIndex] = contact;\r\n      } else {\r\n        newContacts.push(contact);\r\n      }\r\n    });\r\n\r\n    return [...state, ...newContacts];\r\n  }\r\n\r\n  if (action.type === \"UPDATE_CONTACTS\") {\r\n    const contact = action.payload;\r\n    const contactIndex = state.findIndex((c) => c.id === contact.id);\r\n\r\n    if (contactIndex !== -1) {\r\n      state[contactIndex] = contact;\r\n      return [...state];\r\n    } else {\r\n      return [contact, ...state];\r\n    }\r\n  }\r\n\r\n  if (action.type === \"DELETE_CONTACT\") {\r\n    const contactId = action.payload;\r\n\r\n    const contactIndex = state.findIndex((c) => c.id === contactId);\r\n    if (contactIndex !== -1) {\r\n      state.splice(contactIndex, 1);\r\n    }\r\n    return [...state];\r\n  }\r\n\r\n  if (action.type === \"RESET\") {\r\n    return [];\r\n  }\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  mainPaper: {\r\n    flex: 1,\r\n    padding: theme.spacing(1),\r\n    overflowY: \"scroll\",\r\n    ...theme.scrollbarStyles,\r\n  },\r\n}));\r\n\r\nconst Contacts = () => {\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n\r\n  const { user } = useContext(AuthContext);\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [pageNumber, setPageNumber] = useState(1);\r\n  const [searchParam, setSearchParam] = useState(\"\");\r\n  const [contacts, dispatch] = useReducer(reducer, []);\r\n  const [selectedContactId, setSelectedContactId] = useState(null);\r\n  const [contactModalOpen, setContactModalOpen] = useState(false);\r\n  const [newTicketModalOpen, setNewTicketModalOpen] = useState(false);\r\n  const [contactTicket, setContactTicket] = useState({});\r\n  const [deletingContact, setDeletingContact] = useState(null);\r\n  const [confirmOpen, setConfirmOpen] = useState(false);\r\n  const [hasMore, setHasMore] = useState(false);\r\n\r\n  useEffect(() => {\r\n    dispatch({ type: \"RESET\" });\r\n    setPageNumber(1);\r\n  }, [searchParam]);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    const delayDebounceFn = setTimeout(() => {\r\n      const fetchContacts = async () => {\r\n        try {\r\n          const { data } = await api.get(\"/contacts/\", {\r\n            params: { searchParam, pageNumber },\r\n          });\r\n          dispatch({ type: \"LOAD_CONTACTS\", payload: data.contacts });\r\n          setHasMore(data.hasMore);\r\n          setLoading(false);\r\n        } catch (err) {\r\n          toastError(err);\r\n        }\r\n      };\r\n      fetchContacts();\r\n    }, 500);\r\n    return () => clearTimeout(delayDebounceFn);\r\n  }, [searchParam, pageNumber]);\r\n\r\n  useEffect(() => {\r\n    const companyId = localStorage.getItem(\"companyId\");\r\n    const socket = socketConnection({ companyId });\r\n\r\n    socket.on(`company-${companyId}-contact`, (data) => {\r\n      if (data.action === \"update\" || data.action === \"create\") {\r\n        dispatch({ type: \"UPDATE_CONTACTS\", payload: data.contact });\r\n      }\r\n\r\n      if (data.action === \"delete\") {\r\n        dispatch({ type: \"DELETE_CONTACT\", payload: +data.contactId });\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      socket.disconnect();\r\n    };\r\n  }, []);\r\n\r\n  const handleSearch = (event) => {\r\n    setSearchParam(event.target.value.toLowerCase());\r\n  };\r\n\r\n  const handleOpenContactModal = () => {\r\n    setSelectedContactId(null);\r\n    setContactModalOpen(true);\r\n  };\r\n\r\n  const handleCloseContactModal = () => {\r\n    setSelectedContactId(null);\r\n    setContactModalOpen(false);\r\n  };\r\n\r\n  // const handleSaveTicket = async contactId => {\r\n  // \tif (!contactId) return;\r\n  // \tsetLoading(true);\r\n  // \ttry {\r\n  // \t\tconst { data: ticket } = await api.post(\"/tickets\", {\r\n  // \t\t\tcontactId: contactId,\r\n  // \t\t\tuserId: user?.id,\r\n  // \t\t\tstatus: \"open\",\r\n  // \t\t});\r\n  // \t\thistory.push(`/tickets/${ticket.id}`);\r\n  // \t} catch (err) {\r\n  // \t\ttoastError(err);\r\n  // \t}\r\n  // \tsetLoading(false);\r\n  // };\r\n\r\n  const handleCloseOrOpenTicket = (ticket) => {\r\n    setNewTicketModalOpen(false);\r\n    if (ticket !== undefined && ticket.uuid !== undefined) {\r\n      history.push(`/tickets/${ticket.uuid}`);\r\n    }\r\n  };\r\n\r\n  const hadleEditContact = (contactId) => {\r\n    setSelectedContactId(contactId);\r\n    setContactModalOpen(true);\r\n  };\r\n\r\n  const handleDeleteContact = async (contactId) => {\r\n    try {\r\n      await api.delete(`/contacts/${contactId}`);\r\n      toast.success(i18n.t(\"contacts.toasts.deleted\"));\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n    setDeletingContact(null);\r\n    setSearchParam(\"\");\r\n    setPageNumber(1);\r\n  };\r\n\r\n  const handleimportContact = async () => {\r\n    try {\r\n      await api.post(\"/contacts/import\");\r\n      history.go(0);\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n  };\r\n  \r\n \r\n\r\n  const loadMore = () => {\r\n    setPageNumber((prevState) => prevState + 1);\r\n  };\r\n\r\n  const handleScroll = (e) => {\r\n    if (!hasMore || loading) return;\r\n    const { scrollTop, scrollHeight, clientHeight } = e.currentTarget;\r\n    if (scrollHeight - (scrollTop + 100) < clientHeight) {\r\n      loadMore();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <MainContainer className={classes.mainContainer}>\r\n      <NewTicketModal\r\n        modalOpen={newTicketModalOpen}\r\n        initialContact={contactTicket}\r\n        onClose={(ticket) => {\r\n          handleCloseOrOpenTicket(ticket);\r\n        }}\r\n      />\r\n      <ContactModal\r\n        open={contactModalOpen}\r\n        onClose={handleCloseContactModal}\r\n        aria-labelledby=\"form-dialog-title\"\r\n        contactId={selectedContactId}\r\n      ></ContactModal>\r\n      <ConfirmationModal\r\n        title={\r\n          deletingContact\r\n            ? `${i18n.t(\"contacts.confirmationModal.deleteTitle\")} ${\r\n                deletingContact.name\r\n              }?`\r\n            : `${i18n.t(\"contacts.confirmationModal.importTitlte\")}`\r\n        }\r\n        open={confirmOpen}\r\n        onClose={setConfirmOpen}\r\n        onConfirm={(e) =>\r\n          deletingContact\r\n            ? handleDeleteContact(deletingContact.id)\r\n            : handleimportContact()\r\n        }\r\n      >\r\n        {deletingContact\r\n          ? `${i18n.t(\"contacts.confirmationModal.deleteMessage\")}`\r\n          : `${i18n.t(\"contacts.confirmationModal.importMessage\")}`}\r\n      </ConfirmationModal>\r\n      <MainHeader>\r\n        <Title>{i18n.t(\"contacts.title\")}</Title>\r\n        <MainHeaderButtonsWrapper>\r\n          <TextField\r\n            placeholder={i18n.t(\"contacts.searchPlaceholder\")}\r\n            type=\"search\"\r\n            value={searchParam}\r\n            onChange={handleSearch}\r\n            InputProps={{\r\n              startAdornment: (\r\n                <InputAdornment position=\"start\">\r\n                  <SearchIcon style={{ color: \"gray\" }} />\r\n                </InputAdornment>\r\n              ),\r\n            }}\r\n          />\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            onClick={(e) => setConfirmOpen(true)}\r\n          >\r\n            {i18n.t(\"contacts.buttons.import\")}\r\n          </Button>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            onClick={handleOpenContactModal}\r\n          >\r\n            {i18n.t(\"contacts.buttons.add\")}\r\n          </Button>\r\n\r\n         <CSVLink style={{ textDecoration:'none'}} separator=\";\" filename={'contatos.csv'} data={contacts.map((contact) => ({ name: contact.name, number: contact.number, email: contact.email }))}>\r\n          <Button\tvariant=\"contained\" color=\"primary\"> \r\n          EXPORTAR CONTATOS \r\n          </Button>\r\n          </CSVLink>\r\n\r\n        </MainHeaderButtonsWrapper>\r\n      </MainHeader>\r\n      <Paper\r\n        className={classes.mainPaper}\r\n        variant=\"outlined\"\r\n        onScroll={handleScroll}\r\n      >\r\n        <Table size=\"small\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell padding=\"checkbox\" />\r\n              <TableCell>{i18n.t(\"contacts.table.name\")}</TableCell>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"contacts.table.whatsapp\")}\r\n              </TableCell>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"contacts.table.email\")}\r\n              </TableCell>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"contacts.table.actions\")}\r\n              </TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            <>\r\n              {contacts.map((contact) => (\r\n                <TableRow key={contact.id}>\r\n                  <TableCell style={{ paddingRight: 0 }}>\r\n                    {<Avatar src={contact.profilePicUrl} />}\r\n                  </TableCell>\r\n                  <TableCell>{contact.name}</TableCell>\r\n                  <TableCell align=\"center\">{contact.number}</TableCell>\r\n                  <TableCell align=\"center\">{contact.email}</TableCell>\r\n                  <TableCell align=\"center\">\r\n                    <IconButton\r\n                      size=\"small\"\r\n                      onClick={() => {\r\n                        setContactTicket(contact);\r\n                        setNewTicketModalOpen(true);\r\n                      }}\r\n                    >\r\n                      <WhatsAppIcon />\r\n                    </IconButton>\r\n                    <IconButton\r\n                      size=\"small\"\r\n                      onClick={() => hadleEditContact(contact.id)}\r\n                    >\r\n                      <EditIcon />\r\n                    </IconButton>\r\n                    <Can\r\n                      role={user.profile}\r\n                      perform=\"contacts-page:deleteContact\"\r\n                      yes={() => (\r\n                        <IconButton\r\n                          size=\"small\"\r\n                          onClick={(e) => {\r\n                            setConfirmOpen(true);\r\n                            setDeletingContact(contact);\r\n                          }}\r\n                        >\r\n                          <DeleteOutlineIcon />\r\n                        </IconButton>\r\n                      )}\r\n                    />\r\n                  </TableCell>\r\n                </TableRow>\r\n              ))}\r\n              {loading && <TableRowSkeleton avatar columns={3} />}\r\n            </>\r\n          </TableBody>\r\n        </Table>\r\n      </Paper>\r\n    </MainContainer>\r\n  );\r\n};\r\n\r\nexport default Contacts;\r\n","import { Dialog } from \"@material-ui/core\";\r\nimport React, { useState } from \"react\";\r\n\r\nimport { BlockPicker } from \"react-color\";\r\n\r\nconst ColorPicker = ({ onChange, currentColor, handleClose, open }) => {\r\n\tconst [selectedColor, setSelectedColor] = useState(currentColor);\r\n\r\n\tconst handleChange = color => {\r\n\t\tsetSelectedColor(color.hex);\r\n\t\thandleClose();\r\n\t};\r\n\r\n\tconst colors = [\r\n\t\t\"#B80000\",\r\n\t\t\"#DB3E00\",\r\n\t\t\"#FCCB00\",\r\n\t\t\"#008B02\",\r\n\t\t\"#006B76\",\r\n\t\t\"#1273DE\",\r\n\t\t\"#004DCF\",\r\n\t\t\"#5300EB\",\r\n\t\t\"#EB9694\",\r\n\t\t\"#FAD0C3\",\r\n\t\t\"#FEF3BD\",\r\n\t\t\"#C1E1C5\",\r\n\t\t\"#BEDADC\",\r\n\t\t\"#C4DEF6\",\r\n\t\t\"#BED3F3\",\r\n\t\t\"#D4C4FB\",\r\n\t\t\"#4D4D4D\",\r\n\t\t\"#999999\",\r\n\t\t\"#F44E3B\",\r\n\t\t\"#FE9200\",\r\n\t\t\"#FCDC00\",\r\n\t\t\"#DBDF00\",\r\n\t\t\"#A4DD00\",\r\n\t\t\"#68CCCA\",\r\n\t\t\"#73D8FF\",\r\n\t\t\"#AEA1FF\",\r\n\t\t\"#FDA1FF\",\r\n\t\t\"#333333\",\r\n\t\t\"#808080\",\r\n\t\t\"#cccccc\",\r\n\t\t\"#D33115\",\r\n\t\t\"#E27300\",\r\n\t\t\"#FCC400\",\r\n\t\t\"#B0BC00\",\r\n\t\t\"#68BC00\",\r\n\t\t\"#16A5A5\",\r\n\t\t\"#009CE0\",\r\n\t\t\"#7B64FF\",\r\n\t\t\"#FA28FF\",\r\n\t\t\"#666666\",\r\n\t\t\"#B3B3B3\",\r\n\t\t\"#9F0500\",\r\n\t\t\"#C45100\",\r\n\t\t\"#FB9E00\",\r\n\t\t\"#808900\",\r\n\t\t\"#194D33\",\r\n\t\t\"#0C797D\",\r\n\t\t\"#0062B1\",\r\n\t\t\"#653294\",\r\n\t\t\"#AB149E\",\r\n\t];\r\n\r\n\treturn (\r\n\t\t<Dialog\r\n\t\t\tonClose={handleClose}\r\n\t\t\taria-labelledby=\"simple-dialog-title\"\r\n\t\t\topen={open}\r\n\t\t>\r\n\t\t\t<BlockPicker\r\n\t\t\t\twidth={\"100%\"}\r\n\t\t\t\ttriangle=\"hide\"\r\n\t\t\t\tcolor={selectedColor}\r\n\t\t\t\tcolors={colors}\r\n\t\t\t\tonChange={handleChange}\r\n\t\t\t\tonChangeComplete={color => onChange(color.hex)}\r\n\t\t\t/>\r\n\t\t</Dialog>\r\n\t);\r\n};\r\n\r\nexport default ColorPicker;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Stepper from \"@material-ui/core/Stepper\";\r\nimport Step from \"@material-ui/core/Step\";\r\nimport StepLabel from \"@material-ui/core/StepLabel\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { Button, IconButton, StepContent, TextField } from \"@material-ui/core\";\r\nimport AddIcon from \"@material-ui/icons/Add\";\r\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\r\nimport SaveIcon from \"@material-ui/icons/Save\";\r\nimport EditIcon from \"@material-ui/icons/Edit\";\r\nimport api from \"../../services/api\";\r\nimport toastError from \"../../errors/toastError\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n    //height: 400,\r\n    [theme.breakpoints.down(\"sm\")]: {\r\n      maxHeight: \"20vh\",\r\n    },\r\n  },\r\n  button: {\r\n    marginRight: theme.spacing(1),\r\n  },\r\n  input: {\r\n    marginTop: theme.spacing(1),\r\n    marginBottom: theme.spacing(1),\r\n  },\r\n  addButton: {\r\n    marginTop: theme.spacing(2),\r\n    marginBottom: theme.spacing(2),\r\n  },\r\n}));\r\n\r\nexport function QueueOptionStepper({ queueId, options, updateOptions }) {\r\n  const classes = useStyles();\r\n  const [activeOption, setActiveOption] = useState(-1);\r\n\r\n  const handleOption = (index) => async () => {\r\n    setActiveOption(index);\r\n    const option = options[index];\r\n\r\n    if (option !== undefined && option.id !== undefined) {\r\n      try {\r\n        const { data } = await api.request({\r\n          url: \"/queue-options\",\r\n          method: \"GET\",\r\n          params: { queueId, parentId: option.id },\r\n        });\r\n        const optionList = data.map((option) => {\r\n          return {\r\n            ...option,\r\n            children: [],\r\n            edition: false,\r\n          };\r\n        });\r\n        option.children = optionList;\r\n        updateOptions();\r\n      } catch (e) {\r\n        toastError(e);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleSave = async (option) => {\r\n    try {\r\n      if (option.id) {\r\n        await api.request({\r\n          url: `/queue-options/${option.id}`,\r\n          method: \"PUT\",\r\n          data: option,\r\n        });\r\n      } else {\r\n        const { data } = await api.request({\r\n          url: `/queue-options`,\r\n          method: \"POST\",\r\n          data: option,\r\n        });\r\n        option.id = data.id;\r\n      }\r\n      option.edition = false;\r\n      updateOptions();\r\n    } catch (e) {\r\n      toastError(e);\r\n    }\r\n  };\r\n\r\n  const handleEdition = (index) => {\r\n    options[index].edition = !options[index].edition;\r\n    updateOptions();\r\n  };\r\n\r\n  const handleDeleteOption = async (index) => {\r\n    const option = options[index];\r\n    if (option !== undefined && option.id !== undefined) {\r\n      try {\r\n        await api.request({\r\n          url: `/queue-options/${option.id}`,\r\n          method: \"DELETE\",\r\n        });\r\n      } catch (e) {\r\n        toastError(e);\r\n      }\r\n    }\r\n    options.splice(index, 1);\r\n    options.forEach(async (option, order) => {\r\n      option.option = order + 1;\r\n      await handleSave(option);\r\n    });\r\n    updateOptions();\r\n  };\r\n\r\n  const handleOptionChangeTitle = (event, index) => {\r\n    options[index].title = event.target.value;\r\n    updateOptions();\r\n  };\r\n\r\n  const handleOptionChangeMessage = (event, index) => {\r\n    options[index].message = event.target.value;\r\n    updateOptions();\r\n  };\r\n\r\n  const renderTitle = (index) => {\r\n    const option = options[index];\r\n    if (option.edition) {\r\n      return (\r\n        <>\r\n          <TextField\r\n            value={option.title}\r\n            onChange={(event) => handleOptionChangeTitle(event, index)}\r\n            size=\"small\"\r\n            className={classes.input}\r\n            placeholder=\"Título da opção\"\r\n          />\r\n          {option.edition && (\r\n            <>\r\n              <IconButton\r\n                color=\"primary\"\r\n                variant=\"outlined\"\r\n                size=\"small\"\r\n                className={classes.button}\r\n                onClick={() => handleSave(option)}\r\n              >\r\n                <SaveIcon />\r\n              </IconButton>\r\n              <IconButton\r\n                variant=\"outlined\"\r\n                color=\"secondary\"\r\n                size=\"small\"\r\n                className={classes.button}\r\n                onClick={() => handleDeleteOption(index)}\r\n              >\r\n                <DeleteOutlineIcon />\r\n              </IconButton>\r\n            </>\r\n          )}\r\n        </>\r\n      );\r\n    }\r\n    return (\r\n      <>\r\n        <Typography>\r\n          {option.title !== \"\" ? option.title : \"Título não definido\"}\r\n          <IconButton\r\n            variant=\"outlined\"\r\n            size=\"small\"\r\n            className={classes.button}\r\n            onClick={() => handleEdition(index)}\r\n          >\r\n            <EditIcon />\r\n          </IconButton>\r\n        </Typography>\r\n      </>\r\n    );\r\n  };\r\n\r\n  const renderMessage = (index) => {\r\n    const option = options[index];\r\n    if (option.edition) {\r\n      return (\r\n        <>\r\n          <TextField\r\n            style={{ width: \"100%\" }}\r\n            multiline\r\n            value={option.message}\r\n            onChange={(event) => handleOptionChangeMessage(event, index)}\r\n            size=\"small\"\r\n            className={classes.input}\r\n            placeholder=\"Digite o texto da opção\"\r\n          />\r\n        </>\r\n      );\r\n    }\r\n    return (\r\n      <>\r\n        <Typography onClick={() => handleEdition(index)}>\r\n          {option.message}\r\n        </Typography>\r\n      </>\r\n    );\r\n  };\r\n\r\n  const handleAddOption = (index) => {\r\n    const optionNumber = options[index].children.length + 1;\r\n    options[index].children.push({\r\n      title: \"\",\r\n      message: \"\",\r\n      edition: false,\r\n      option: optionNumber,\r\n      queueId,\r\n      parentId: options[index].id,\r\n      children: [],\r\n    });\r\n    updateOptions();\r\n  };\r\n\r\n  const renderStep = (option, index) => {\r\n    return (\r\n      <Step key={index}>\r\n        <StepLabel style={{ cursor: \"pointer\" }} onClick={handleOption(index)}>\r\n          {renderTitle(index)}\r\n        </StepLabel>\r\n        <StepContent>\r\n          {renderMessage(index)}\r\n\r\n          {option.id !== undefined && (\r\n            <>\r\n              <Button\r\n                color=\"primary\"\r\n                size=\"small\"\r\n                onClick={() => handleAddOption(index)}\r\n                startIcon={<AddIcon />}\r\n                variant=\"outlined\"\r\n                className={classes.addButton}\r\n              >\r\n                Adicionar\r\n              </Button>\r\n            </>\r\n          )}\r\n          <QueueOptionStepper\r\n            queueId={queueId}\r\n            options={option.children}\r\n            updateOptions={updateOptions}\r\n          />\r\n        </StepContent>\r\n      </Step>\r\n    );\r\n  };\r\n\r\n  const renderStepper = () => {\r\n    return (\r\n      <Stepper\r\n        style={{ marginBottom: 0, paddingBottom: 0 }}\r\n        nonLinear\r\n        activeStep={activeOption}\r\n        orientation=\"vertical\"\r\n      >\r\n        {options.map((option, index) => renderStep(option, index))}\r\n      </Stepper>\r\n    );\r\n  };\r\n\r\n  return renderStepper();\r\n}\r\n\r\nexport function QueueOptions({ queueId }) {\r\n  const classes = useStyles();\r\n  const [options, setOptions] = useState([]);\r\n\r\n  useEffect(() => {\r\n    if (queueId) {\r\n      const fetchOptions = async () => {\r\n        try {\r\n          const { data } = await api.request({\r\n            url: \"/queue-options\",\r\n            method: \"GET\",\r\n            params: { queueId, parentId: -1 },\r\n          });\r\n          const optionList = data.map((option) => {\r\n            return {\r\n              ...option,\r\n              children: [],\r\n              edition: false,\r\n            };\r\n          });\r\n          setOptions(optionList);\r\n        } catch (e) {\r\n          toastError(e);\r\n        }\r\n      };\r\n      fetchOptions();\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  const renderStepper = () => {\r\n    if (options.length > 0) {\r\n      return (\r\n        <QueueOptionStepper\r\n          queueId={queueId}\r\n          updateOptions={updateOptions}\r\n          options={options}\r\n        />\r\n      );\r\n    }\r\n  };\r\n\r\n  const updateOptions = () => {\r\n    setOptions([...options]);\r\n  };\r\n\r\n  const addOption = () => {\r\n    const newOption = {\r\n      title: \"\",\r\n      message: \"\",\r\n      edition: false,\r\n      option: options.length + 1,\r\n      queueId,\r\n      parentId: null,\r\n      children: [],\r\n    };\r\n    setOptions([...options, newOption]);\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <br />\r\n      <Typography>\r\n        Opções\r\n        <Button\r\n          color=\"primary\"\r\n          size=\"small\"\r\n          onClick={addOption}\r\n          startIcon={<AddIcon />}\r\n          style={{ marginLeft: 10 }}\r\n          variant=\"outlined\"\r\n        >\r\n          Adicionar\r\n        </Button>\r\n      </Typography>\r\n      {renderStepper()}\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useEffect, useRef } from \"react\";\r\n\r\nimport * as Yup from \"yup\";\r\nimport { Formik, Form, Field } from \"formik\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { green } from \"@material-ui/core/colors\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\n\r\nimport api from \"../../services/api\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport ColorPicker from \"../ColorPicker\";\r\nimport {\r\n  FormControl,\r\n  Grid,\r\n  IconButton,\r\n  InputAdornment,\r\n  InputLabel,\r\n  MenuItem,\r\n  Paper,\r\n  Select,\r\n  Tab,\r\n  Tabs,\r\n} from \"@material-ui/core\";\r\nimport { Colorize } from \"@material-ui/icons\";\r\nimport { QueueOptions } from \"../QueueOptions\";\r\nimport SchedulesForm from \"../SchedulesForm\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n    flexWrap: \"wrap\",\r\n  },\r\n  textField: {\r\n    marginRight: theme.spacing(1),\r\n    flex: 1,\r\n  },\r\n\r\n  btnWrapper: {\r\n    position: \"relative\",\r\n  },\r\n\r\n  buttonProgress: {\r\n    color: green[500],\r\n    position: \"absolute\",\r\n    top: \"50%\",\r\n    left: \"50%\",\r\n    marginTop: -12,\r\n    marginLeft: -12,\r\n  },\r\n  formControl: {\r\n    margin: theme.spacing(1),\r\n    minWidth: 120,\r\n  },\r\n  colorAdorment: {\r\n    width: 20,\r\n    height: 20,\r\n  },\r\n}));\r\n\r\nconst QueueSchema = Yup.object().shape({\r\n  name: Yup.string()\r\n    .min(2, \"Too Short!\")\r\n    .max(50, \"Too Long!\")\r\n    .required(\"Required\"),\r\n  color: Yup.string().min(3, \"Too Short!\").max(9, \"Too Long!\").required(),\r\n  greetingMessage: Yup.string(),\r\n});\r\n\r\nconst QueueModal = ({ open, onClose, queueId }) => {\r\n  const classes = useStyles();\r\n\r\n  const initialState = {\r\n    name: \"\",\r\n    color: \"\",\r\n    greetingMessage: \"\",\r\n    outOfHoursMessage: \"\",\r\n    orderQueue: \"\",\r\n    integrationId: \"\",\r\n    promptId: \"\"\r\n  };\r\n\r\n  const [colorPickerModalOpen, setColorPickerModalOpen] = useState(false);\r\n  const [queue, setQueue] = useState(initialState);\r\n  const [tab, setTab] = useState(0);\r\n  const [schedulesEnabled, setSchedulesEnabled] = useState(false);\r\n  const greetingRef = useRef();\r\n  const [integrations, setIntegrations] = useState([]);\r\n\r\n  const [schedules, setSchedules] = useState([\r\n    { weekday: \"Segunda-feira\", weekdayEn: \"monday\", startTime: \"08:00\", endTime: \"18:00\", },\r\n    { weekday: \"Terça-feira\", weekdayEn: \"tuesday\", startTime: \"08:00\", endTime: \"18:00\", },\r\n    { weekday: \"Quarta-feira\", weekdayEn: \"wednesday\", startTime: \"08:00\", endTime: \"18:00\", },\r\n    { weekday: \"Quinta-feira\", weekdayEn: \"thursday\", startTime: \"08:00\", endTime: \"18:00\", },\r\n    { weekday: \"Sexta-feira\", weekdayEn: \"friday\", startTime: \"08:00\", endTime: \"18:00\", },\r\n    { weekday: \"Sábado\", weekdayEn: \"saturday\", startTime: \"08:00\", endTime: \"12:00\", },\r\n    { weekday: \"Domingo\", weekdayEn: \"sunday\", startTime: \"00:00\", endTime: \"00:00\", },\r\n  ]);\r\n  const [selectedPrompt, setSelectedPrompt] = useState(null);\r\n  const [prompts, setPrompts] = useState([]);\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      try {\r\n        const { data } = await api.get(\"/prompt\");\r\n        setPrompts(data.prompts);\r\n      } catch (err) {\r\n        toastError(err);\r\n      }\r\n    })();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    api.get(`/settings`).then(({ data }) => {\r\n      if (Array.isArray(data)) {\r\n        const scheduleType = data.find((d) => d.key === \"scheduleType\");\r\n        if (scheduleType) {\r\n          setSchedulesEnabled(scheduleType.value === \"queue\");\r\n        }\r\n      }\r\n    });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      try {\r\n        const { data } = await api.get(\"/queueIntegration\");\r\n\r\n        setIntegrations(data.queueIntegrations);\r\n      } catch (err) {\r\n        toastError(err);\r\n      }\r\n    })();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      if (!queueId) return;\r\n      try {\r\n        const { data } = await api.get(`/queue/${queueId}`);\r\n        setQueue((prevState) => {\r\n          return { ...prevState, ...data };\r\n        });\r\n        data.promptId ? setSelectedPrompt(data.promptId) : setSelectedPrompt(null);\r\n\r\n        setSchedules(data.schedules);\r\n      } catch (err) {\r\n        toastError(err);\r\n      }\r\n    })();\r\n\r\n    return () => {\r\n      setQueue({\r\n        name: \"\",\r\n        color: \"\",\r\n        greetingMessage: \"\",\r\n        outOfHoursMessage: \"\",\r\n        orderQueue: \"\",\r\n        integrationId: \"\"\r\n      });\r\n    };\r\n  }, [queueId, open]);\r\n\r\n  const handleClose = () => {\r\n    onClose();\r\n    setQueue(initialState);\r\n  };\r\n\r\n  const handleSaveQueue = async (values) => {\r\n    try {\r\n      if (queueId) {\r\n        await api.put(`/queue/${queueId}`, {\r\n          ...values, schedules, promptId: selectedPrompt ? selectedPrompt : null\r\n        });\r\n      } else {\r\n        await api.post(\"/queue\", {\r\n          ...values, schedules, promptId: selectedPrompt ? selectedPrompt : null\r\n        });\r\n      }\r\n      toast.success(\"Queue saved successfully\");\r\n      handleClose();\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n  };\r\n\r\n  const handleSaveSchedules = async (values) => {\r\n    toast.success(\"Clique em salvar para registar as alterações\");\r\n    setSchedules(values);\r\n    setTab(0);\r\n  };\r\n\r\n  const handleChangePrompt = (e) => {\r\n    setSelectedPrompt(e.target.value);\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Dialog\r\n        maxWidth=\"md\"\r\n        fullWidth={true}\r\n        open={open}\r\n        onClose={handleClose}\r\n        scroll=\"paper\"\r\n      >\r\n        <DialogTitle>\r\n          {queueId\r\n            ? `${i18n.t(\"queueModal.title.edit\")}`\r\n            : `${i18n.t(\"queueModal.title.add\")}`}\r\n        </DialogTitle>\r\n        <Tabs\r\n          value={tab}\r\n          indicatorColor=\"primary\"\r\n          textColor=\"primary\"\r\n          onChange={(_, v) => setTab(v)}\r\n          aria-label=\"disabled tabs example\"\r\n        >\r\n          <Tab label=\"Dados da Fila\" />\r\n          {schedulesEnabled && <Tab label=\"Horários de Atendimento\" />}\r\n        </Tabs>\r\n        {tab === 0 && (\r\n          <Paper>\r\n            <Formik\r\n              initialValues={queue}\r\n              enableReinitialize={true}\r\n              validationSchema={QueueSchema}\r\n              onSubmit={(values, actions) => {\r\n                setTimeout(() => {\r\n                  handleSaveQueue(values);\r\n                  actions.setSubmitting(false);\r\n                }, 400);\r\n              }}\r\n            >\r\n              {({ touched, errors, isSubmitting, values }) => (\r\n                <Form>\r\n                  <DialogContent dividers>\r\n                    <Field\r\n                      as={TextField}\r\n                      label={i18n.t(\"queueModal.form.name\")}\r\n                      autoFocus\r\n                      name=\"name\"\r\n                      error={touched.name && Boolean(errors.name)}\r\n                      helperText={touched.name && errors.name}\r\n                      variant=\"outlined\"\r\n                      margin=\"dense\"\r\n                      className={classes.textField}\r\n                    />\r\n                    <Field\r\n                      as={TextField}\r\n                      label={i18n.t(\"queueModal.form.color\")}\r\n                      name=\"color\"\r\n                      id=\"color\"\r\n                      onFocus={() => {\r\n                        setColorPickerModalOpen(true);\r\n                        greetingRef.current.focus();\r\n                      }}\r\n                      error={touched.color && Boolean(errors.color)}\r\n                      helperText={touched.color && errors.color}\r\n                      InputProps={{\r\n                        startAdornment: (\r\n                          <InputAdornment position=\"start\">\r\n                            <div\r\n                              style={{ backgroundColor: values.color }}\r\n                              className={classes.colorAdorment}\r\n                            ></div>\r\n                          </InputAdornment>\r\n                        ),\r\n                        endAdornment: (\r\n                          <IconButton\r\n                            size=\"small\"\r\n                            color=\"default\"\r\n                            onClick={() => setColorPickerModalOpen(true)}\r\n                          >\r\n                            <Colorize />\r\n                          </IconButton>\r\n                        ),\r\n                      }}\r\n                      variant=\"outlined\"\r\n                      margin=\"dense\"\r\n                      className={classes.textField}\r\n                    />\r\n                    <ColorPicker\r\n                      open={colorPickerModalOpen}\r\n                      handleClose={() => setColorPickerModalOpen(false)}\r\n                      onChange={(color) => {\r\n                        values.color = color;\r\n                        setQueue(() => {\r\n                          return { ...values, color };\r\n                        });\r\n                      }}\r\n                    />\r\n                    <Field\r\n                      as={TextField}\r\n                      label={i18n.t(\"queueModal.form.orderQueue\")}\r\n                      name=\"orderQueue\"\r\n                      type=\"orderQueue\"\r\n                      error={touched.orderQueue && Boolean(errors.orderQueue)}\r\n                      helperText={touched.orderQueue && errors.orderQueue}\r\n                      variant=\"outlined\"\r\n                      margin=\"dense\"\r\n                      className={classes.textField1}\r\n                    />\r\n                    <div>\r\n                      <FormControl\r\n                        variant=\"outlined\"\r\n                        margin=\"dense\"\r\n                        className={classes.FormControl}\r\n                        fullWidth\r\n                      >\r\n                        <InputLabel id=\"integrationId-selection-label\">\r\n                          {i18n.t(\"queueModal.form.integrationId\")}\r\n                        </InputLabel>\r\n                        <Field\r\n                          as={Select}\r\n                          label={i18n.t(\"queueModal.form.integrationId\")}\r\n                          name=\"integrationId\"\r\n                          id=\"integrationId\"\r\n                          placeholder={i18n.t(\"queueModal.form.integrationId\")}\r\n                          labelId=\"integrationId-selection-label\"\r\n                          value={values.integrationId || \"\"}\r\n                        >\r\n                          <MenuItem value={\"\"} >{\"Nenhum\"}</MenuItem>\r\n                          {integrations.map((integration) => (\r\n                            <MenuItem key={integration.id} value={integration.id}>\r\n                              {integration.name}\r\n                            </MenuItem>\r\n                          ))}\r\n                        </Field>\r\n\r\n                      </FormControl>\r\n                      <FormControl\r\n                        margin=\"dense\"\r\n                        variant=\"outlined\"\r\n                        fullWidth\r\n                      >\r\n                        <InputLabel>\r\n                          {i18n.t(\"whatsappModal.form.prompt\")}\r\n                        </InputLabel>\r\n                        <Select\r\n                          labelId=\"dialog-select-prompt-label\"\r\n                          id=\"dialog-select-prompt\"\r\n                          name=\"promptId\"\r\n                          value={selectedPrompt || \"\"}\r\n                          onChange={handleChangePrompt}\r\n                          label={i18n.t(\"whatsappModal.form.prompt\")}\r\n                          fullWidth\r\n                          MenuProps={{\r\n                            anchorOrigin: {\r\n                              vertical: \"bottom\",\r\n                              horizontal: \"left\",\r\n                            },\r\n                            transformOrigin: {\r\n                              vertical: \"top\",\r\n                              horizontal: \"left\",\r\n                            },\r\n                            getContentAnchorEl: null,\r\n                          }}\r\n                        >\r\n                          {prompts.map((prompt) => (\r\n                            <MenuItem\r\n                              key={prompt.id}\r\n                              value={prompt.id}\r\n                            >\r\n                              {prompt.name}\r\n                            </MenuItem>\r\n                          ))}\r\n                        </Select>\r\n                      </FormControl>\r\n                    </div>\r\n                    <div style={{ marginTop: 5 }}>\r\n                      <Field\r\n                        as={TextField}\r\n                        label={i18n.t(\"queueModal.form.greetingMessage\")}\r\n                        type=\"greetingMessage\"\r\n                        multiline\r\n                        inputRef={greetingRef}\r\n                        rows={5}\r\n                        fullWidth\r\n                        name=\"greetingMessage\"\r\n                        error={\r\n                          touched.greetingMessage &&\r\n                          Boolean(errors.greetingMessage)\r\n                        }\r\n                        helperText={\r\n                          touched.greetingMessage && errors.greetingMessage\r\n                        }\r\n                        variant=\"outlined\"\r\n                        margin=\"dense\"\r\n                      />\r\n                      {schedulesEnabled && (\r\n                        <Field\r\n                          as={TextField}\r\n                          label={i18n.t(\"queueModal.form.outOfHoursMessage\")}\r\n                          type=\"outOfHoursMessage\"\r\n                          multiline\r\n                          inputRef={greetingRef}\r\n                          rows={5}\r\n                          fullWidth\r\n                          name=\"outOfHoursMessage\"\r\n                          error={\r\n                            touched.outOfHoursMessage &&\r\n                            Boolean(errors.outOfHoursMessage)\r\n                          }\r\n                          helperText={\r\n                            touched.outOfHoursMessage && errors.outOfHoursMessage\r\n                          }\r\n                          variant=\"outlined\"\r\n                          margin=\"dense\"\r\n                        />\r\n                      )}\r\n                    </div>\r\n                    <QueueOptions queueId={queueId} />\r\n                  </DialogContent>\r\n                  <DialogActions>\r\n                    <Button\r\n                      onClick={handleClose}\r\n                      color=\"secondary\"\r\n                      disabled={isSubmitting}\r\n                      variant=\"outlined\"\r\n                    >\r\n                      {i18n.t(\"queueModal.buttons.cancel\")}\r\n                    </Button>\r\n                    <Button\r\n                      type=\"submit\"\r\n                      color=\"primary\"\r\n                      disabled={isSubmitting}\r\n                      variant=\"contained\"\r\n                      className={classes.btnWrapper}\r\n                    >\r\n                      {queueId\r\n                        ? `${i18n.t(\"queueModal.buttons.okEdit\")}`\r\n                        : `${i18n.t(\"queueModal.buttons.okAdd\")}`}\r\n                      {isSubmitting && (\r\n                        <CircularProgress\r\n                          size={24}\r\n                          className={classes.buttonProgress}\r\n                        />\r\n                      )}\r\n                    </Button>\r\n                  </DialogActions>\r\n                </Form>\r\n              )}\r\n            </Formik>\r\n          </Paper>\r\n        )}\r\n        {tab === 1 && (\r\n          <Paper style={{ padding: 20 }}>\r\n            <SchedulesForm\r\n              loading={false}\r\n              onSubmit={handleSaveSchedules}\r\n              initialValues={schedules}\r\n              labelSaveButton=\"Adicionar\"\r\n            />\r\n          </Paper>\r\n        )}\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default QueueModal;\r\n","import React, { useEffect, useReducer, useState } from \"react\";\r\n\r\nimport {\r\n  Button,\r\n  IconButton,\r\n  makeStyles,\r\n  Paper,\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableHead,\r\n  TableRow,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\n\r\nimport MainContainer from \"../../components/MainContainer\";\r\nimport MainHeader from \"../../components/MainHeader\";\r\nimport MainHeaderButtonsWrapper from \"../../components/MainHeaderButtonsWrapper\";\r\nimport TableRowSkeleton from \"../../components/TableRowSkeleton\";\r\nimport Title from \"../../components/Title\";\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport api from \"../../services/api\";\r\nimport { DeleteOutline, Edit } from \"@material-ui/icons\";\r\nimport QueueModal from \"../../components/QueueModal\";\r\nimport { toast } from \"react-toastify\";\r\nimport ConfirmationModal from \"../../components/ConfirmationModal\";\r\nimport { socketConnection } from \"../../services/socket\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  mainPaper: {\r\n    flex: 1,\r\n    padding: theme.spacing(1),\r\n    overflowY: \"scroll\",\r\n    ...theme.scrollbarStyles,\r\n  },\r\n  customTableCell: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n  },\r\n}));\r\n\r\nconst reducer = (state, action) => {\r\n  if (action.type === \"LOAD_QUEUES\") {\r\n    const queues = action.payload;\r\n    const newQueues = [];\r\n\r\n    queues.forEach((queue) => {\r\n      const queueIndex = state.findIndex((q) => q.id === queue.id);\r\n      if (queueIndex !== -1) {\r\n        state[queueIndex] = queue;\r\n      } else {\r\n        newQueues.push(queue);\r\n      }\r\n    });\r\n\r\n    return [...state, ...newQueues];\r\n  }\r\n\r\n  if (action.type === \"UPDATE_QUEUES\") {\r\n    const queue = action.payload;\r\n    const queueIndex = state.findIndex((u) => u.id === queue.id);\r\n\r\n    if (queueIndex !== -1) {\r\n      state[queueIndex] = queue;\r\n      return [...state];\r\n    } else {\r\n      return [queue, ...state];\r\n    }\r\n  }\r\n\r\n  if (action.type === \"DELETE_QUEUE\") {\r\n    const queueId = action.payload;\r\n    const queueIndex = state.findIndex((q) => q.id === queueId);\r\n    if (queueIndex !== -1) {\r\n      state.splice(queueIndex, 1);\r\n    }\r\n    return [...state];\r\n  }\r\n\r\n  if (action.type === \"RESET\") {\r\n    return [];\r\n  }\r\n};\r\n\r\nconst Queues = () => {\r\n  const classes = useStyles();\r\n\r\n  const [queues, dispatch] = useReducer(reducer, []);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const [queueModalOpen, setQueueModalOpen] = useState(false);\r\n  const [selectedQueue, setSelectedQueue] = useState(null);\r\n  const [confirmModalOpen, setConfirmModalOpen] = useState(false);\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      setLoading(true);\r\n      try {\r\n        const { data } = await api.get(\"/queue\");\r\n        dispatch({ type: \"LOAD_QUEUES\", payload: data });\r\n\r\n        setLoading(false);\r\n      } catch (err) {\r\n        toastError(err);\r\n        setLoading(false);\r\n      }\r\n    })();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const companyId = localStorage.getItem(\"companyId\");\r\n    const socket = socketConnection({ companyId });\r\n\r\n    socket.on(`company-${companyId}-queue`, (data) => {\r\n      if (data.action === \"update\" || data.action === \"create\") {\r\n        dispatch({ type: \"UPDATE_QUEUES\", payload: data.queue });\r\n      }\r\n\r\n      if (data.action === \"delete\") {\r\n        dispatch({ type: \"DELETE_QUEUE\", payload: data.queueId });\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      socket.disconnect();\r\n    };\r\n  }, []);\r\n\r\n  const handleOpenQueueModal = () => {\r\n    setQueueModalOpen(true);\r\n    setSelectedQueue(null);\r\n  };\r\n\r\n  const handleCloseQueueModal = () => {\r\n    setQueueModalOpen(false);\r\n    setSelectedQueue(null);\r\n  };\r\n\r\n  const handleEditQueue = (queue) => {\r\n    setSelectedQueue(queue);\r\n    setQueueModalOpen(true);\r\n  };\r\n\r\n  const handleCloseConfirmationModal = () => {\r\n    setConfirmModalOpen(false);\r\n    setSelectedQueue(null);\r\n  };\r\n\r\n  const handleDeleteQueue = async (queueId) => {\r\n    try {\r\n      await api.delete(`/queue/${queueId}`);\r\n      toast.success(i18n.t(\"Queue deleted successfully!\"));\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n    setSelectedQueue(null);\r\n  };\r\n\r\n  return (\r\n    <MainContainer>\r\n      <ConfirmationModal\r\n        title={\r\n          selectedQueue &&\r\n          `${i18n.t(\"queues.confirmationModal.deleteTitle\")} ${\r\n            selectedQueue.name\r\n          }?`\r\n        }\r\n        open={confirmModalOpen}\r\n        onClose={handleCloseConfirmationModal}\r\n        onConfirm={() => handleDeleteQueue(selectedQueue.id)}\r\n      >\r\n        {i18n.t(\"queues.confirmationModal.deleteMessage\")}\r\n      </ConfirmationModal>\r\n      <QueueModal\r\n        open={queueModalOpen}\r\n        onClose={handleCloseQueueModal}\r\n        queueId={selectedQueue?.id}\r\n      />\r\n      <MainHeader>\r\n        <Title>{i18n.t(\"queues.title\")}</Title>\r\n        <MainHeaderButtonsWrapper>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            onClick={handleOpenQueueModal}\r\n          >\r\n            {i18n.t(\"queues.buttons.add\")}\r\n          </Button>\r\n        </MainHeaderButtonsWrapper>\r\n      </MainHeader>\r\n      <Paper className={classes.mainPaper} variant=\"outlined\">\r\n        <Table size=\"small\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"queues.table.name\")}\r\n              </TableCell>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"queues.table.color\")}\r\n              </TableCell>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"queues.table.orderQueue\")}\r\n              </TableCell>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"queues.table.greeting\")}\r\n              </TableCell>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"queues.table.actions\")}\r\n              </TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            <>\r\n              {queues.map((queue) => (\r\n                <TableRow key={queue.id}>\r\n                  <TableCell align=\"center\">{queue.name}</TableCell>\r\n                  <TableCell align=\"center\">\r\n                    <div className={classes.customTableCell}>\r\n                      <span\r\n                        style={{\r\n                          backgroundColor: queue.color,\r\n                          width: 60,\r\n                          height: 20,\r\n                          alignSelf: \"center\",\r\n                        }}\r\n                      />\r\n                    </div>\r\n                  </TableCell>\r\n                  <TableCell align=\"center\">\r\n                    <div className={classes.customTableCell}>\r\n                      <Typography\r\n                        style={{ width: 300, align: \"center\" }}\r\n                        noWrap\r\n                        variant=\"body2\"\r\n                      >\r\n                        {queue.orderQueue}\r\n                      </Typography>\r\n                    </div>\r\n                  </TableCell>\r\n                  <TableCell align=\"center\">\r\n                    <div className={classes.customTableCell}>\r\n                      <Typography\r\n                        style={{ width: 300, align: \"center\" }}\r\n                        noWrap\r\n                        variant=\"body2\"\r\n                      >\r\n                        {queue.greetingMessage}\r\n                      </Typography>\r\n                    </div>\r\n                  </TableCell>\r\n                  <TableCell align=\"center\">\r\n                    <IconButton\r\n                      size=\"small\"\r\n                      onClick={() => handleEditQueue(queue)}\r\n                    >\r\n                      <Edit />\r\n                    </IconButton>\r\n\r\n                    <IconButton\r\n                      size=\"small\"\r\n                      onClick={() => {\r\n                        setSelectedQueue(queue);\r\n                        setConfirmModalOpen(true);\r\n                      }}\r\n                    >\r\n                      <DeleteOutline />\r\n                    </IconButton>\r\n                  </TableCell>\r\n                </TableRow>\r\n              ))}\r\n              {loading && <TableRowSkeleton columns={4} />}\r\n            </>\r\n          </TableBody>\r\n        </Table>\r\n      </Paper>\r\n    </MainContainer>\r\n  );\r\n};\r\n\r\nexport default Queues;\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\n\r\nimport * as Yup from \"yup\";\r\nimport { Formik, Form, Field } from \"formik\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { green } from \"@material-ui/core/colors\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport { Colorize } from \"@material-ui/icons\";\r\nimport { ColorBox } from 'material-ui-color';\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\n\r\nimport api from \"../../services/api\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\nimport { IconButton, InputAdornment } from \"@material-ui/core\";\r\nimport { FormControlLabel, Switch } from '@material-ui/core';\r\nimport Select from \"@material-ui/core/Select\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\troot: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexWrap: \"wrap\",\r\n\t},\r\n\tmultFieldLine: {\r\n\t\tdisplay: \"flex\",\r\n\t\t\"& > *:not(:last-child)\": {\r\n\t\t\tmarginRight: theme.spacing(1),\r\n\t\t},\r\n\t},\r\n\r\n\tbtnWrapper: {\r\n\t\tposition: \"relative\",\r\n\t},\r\n\r\n\tbuttonProgress: {\r\n\t\tcolor: green[500],\r\n\t\tposition: \"absolute\",\r\n\t\ttop: \"50%\",\r\n\t\tleft: \"50%\",\r\n\t\tmarginTop: -12,\r\n\t\tmarginLeft: -12,\r\n\t},\r\n\tformControl: {\r\n\t\tmargin: theme.spacing(1),\r\n\t\tminWidth: 120,\r\n\t},\r\n\tcolorAdorment: {\r\n\t\twidth: 20,\r\n\t\theight: 20,\r\n\t},\r\n}));\r\n\r\nconst TagSchema = Yup.object().shape({\r\n\tname: Yup.string()\r\n\t\t.min(3, \"Mensagem muito curta\")\r\n\t\t.required(\"Obrigatório\")\r\n});\r\n\r\nconst TagModal = ({ open, onClose, tagId, reload }) => {\r\n\tconst classes = useStyles();\r\n\tconst { user } = useContext(AuthContext);\r\n\tconst [colorPickerModalOpen, setColorPickerModalOpen] = useState(false);\r\n\r\n\tconst initialState = {\r\n\t\tname: \"\",\r\n\t\tcolor: \"\",\r\n\t\tkanban: 0\r\n\t};\r\n\r\n\tconst [tag, setTag] = useState(initialState);\r\n\tconst [ kanban, setKanban] = useState(0);\r\n\r\n\tuseEffect(() => {\r\n\t\ttry {\r\n\t\t\t(async () => {\r\n\t\t\t\tif (!tagId) return;\r\n\r\n\t\t\t\tconst { data } = await api.get(`/tags/${tagId}`);\r\n\t\t\t\tsetKanban(data.kanban);\r\n\t\t\t\tsetTag(prevState => {\r\n\t\t\t\t\treturn { ...prevState, ...data };\r\n\t\t\t\t});\r\n\t\t\t})()\r\n\t\t} catch (err) {\r\n\t\t\ttoastError(err);\r\n\t\t}\r\n\t}, [tagId, open]);\r\n\r\n\tconst handleClose = () => {\r\n\t\tsetTag(initialState);\r\n\t\tsetColorPickerModalOpen(false);\r\n\t\tonClose();\r\n\t};\r\n\r\n\tconst handleKanbanChange = (e) => {\r\n\t\tsetKanban( e.target.checked ? 1 : 0);\r\n\t};\r\n\r\n\tconst handleSaveTag = async values => {\r\n\t\tconst tagData = { ...values, userId: user.id, kanban };\r\n\t\ttry {\r\n\t\t\tif (tagId) {\r\n\t\t\t\tawait api.put(`/tags/${tagId}`, tagData);\r\n\t\t\t} else {\r\n\t\t\t\tawait api.post(\"/tags\", tagData);\r\n\t\t\t}\r\n\t\t\ttoast.success(i18n.t(\"tagModal.success\"));\r\n\t\t\tif (typeof reload == 'function') {\r\n\t\t\t\treload();\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\ttoastError(err);\r\n\t\t}\r\n\t\thandleClose();\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<Dialog\r\n\t\t\t\topen={open}\r\n\t\t\t\tonClose={handleClose}\r\n\t\t\t\tmaxWidth=\"xs\"\r\n\t\t\t\tfullWidth\r\n\t\t\t\tscroll=\"paper\"\r\n\t\t\t>\r\n\t\t\t\t<DialogTitle id=\"form-dialog-title\">\r\n\t\t\t\t\t{(tagId ? `${i18n.t(\"tagModal.title.edit\")}` : `${i18n.t(\"tagModal.title.add\")}`)}\r\n\t\t\t\t</DialogTitle>\r\n\t\t\t\t<Formik\r\n\t\t\t\t\tinitialValues={tag}\r\n\t\t\t\t\tenableReinitialize={true}\r\n\t\t\t\t\tvalidationSchema={TagSchema}\r\n\t\t\t\t\tonSubmit={(values, actions) => {\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\thandleSaveTag(values);\r\n\t\t\t\t\t\t\tactions.setSubmitting(false);\r\n\t\t\t\t\t\t}, 400);\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{({ touched, errors, isSubmitting, values }) => (\r\n\t\t\t\t\t\t<Form>\r\n\t\t\t\t\t\t\t<DialogContent dividers>\r\n\t\t\t\t\t\t\t\t<div className={classes.multFieldLine}>\r\n\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\tas={TextField}\r\n\t\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"tagModal.form.name\")}\r\n\t\t\t\t\t\t\t\t\t\tname=\"name\"\r\n\t\t\t\t\t\t\t\t\t\terror={touched.name && Boolean(errors.name)}\r\n\t\t\t\t\t\t\t\t\t\thelperText={touched.name && errors.name}\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t\tmargin=\"dense\"\r\n\t\t\t\t\t\t\t\t\t\tonChange={(e) => setTag(prev => ({ ...prev, name: e.target.value }))}\r\n\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t<div className={classes.multFieldLine}>\r\n\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\tas={TextField}\r\n\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"tagModal.form.color\")}\r\n\t\t\t\t\t\t\t\t\t\tname=\"color\"\r\n\t\t\t\t\t\t\t\t\t\tid=\"color\"\r\n\t\t\t\t\t\t\t\t\t\terror={touched.color && Boolean(errors.color)}\r\n\t\t\t\t\t\t\t\t\t\thelperText={touched.color && errors.color}\r\n\t\t\t\t\t\t\t\t\t\tInputProps={{\r\n\t\t\t\t\t\t\t\t\t\t\tstartAdornment: (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<InputAdornment position=\"start\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ backgroundColor: values.color }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.colorAdorment}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t></div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</InputAdornment>\r\n\t\t\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\t\t\tendAdornment: (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"default\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => setColorPickerModalOpen(!colorPickerModalOpen)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Colorize />\r\n\t\t\t\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t\tmargin=\"dense\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t{(user.profile === \"admin\" || user.profile === \"supervisor\") && (\r\n                                <>\r\n\t\t\t\t\t\t\t\t<div className={classes.multFieldLine}>\r\n        \t\t\t\t\t\t\t<FormControlLabel\r\n          \t\t\t\t\t\t\t\tcontrol={\r\n            \t\t\t\t\t\t\t\t<Checkbox\r\n             \t\t\t\t\t\t\t\t\tchecked={kanban === 1}\r\n             \t\t\t\t\t\t\t\t\tonChange={handleKanbanChange}\r\n              \t\t\t\t\t\t\t\t\tvalue={kanban}\r\n              \t\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n            \t\t\t\t\t\t\t\t/>\r\n          \t\t\t\t\t\t\t\t}\r\n          \t\t\t\t\t\t\t\tlabel=\"Kanban\"\r\n          \t\t\t\t\t\t\t\tlabelPlacement=\"start\"\r\n        \t\t\t\t\t\t\t/>\r\n      \t\t\t\t\t\t\t</div>\r\n      \t\t\t\t\t\t\t<br />\r\n                                </>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t{colorPickerModalOpen && (\r\n\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t<ColorBox\r\n\t\t\t\t\t\t\t\t\t\t\tdisableAlpha={true}\r\n\t\t\t\t\t\t\t\t\t\t\thslGradient={false}\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={{ margin: '20px auto 0' }}\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={tag.color}\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={val => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetTag(prev => ({ ...prev, color: `#${val.hex}` }));\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</DialogContent>\r\n\t\t\t\t\t\t\t<DialogActions>\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\tonClick={handleClose}\r\n\t\t\t\t\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\t\t\t\t\tdisabled={isSubmitting}\r\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{i18n.t(\"tagModal.buttons.cancel\")}\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\t\tdisabled={isSubmitting}\r\n\t\t\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\t\t\tclassName={classes.btnWrapper}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{tagId\r\n\t\t\t\t\t\t\t\t\t\t? `${i18n.t(\"tagModal.buttons.okEdit\")}`\r\n\t\t\t\t\t\t\t\t\t\t: `${i18n.t(\"tagModal.buttons.okAdd\")}`}\r\n\t\t\t\t\t\t\t\t\t{isSubmitting && (\r\n\t\t\t\t\t\t\t\t\t\t<CircularProgress\r\n\t\t\t\t\t\t\t\t\t\t\tsize={24}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName={classes.buttonProgress}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</DialogActions>\r\n\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Formik>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default TagModal;\r\n","import React, {\r\n  useState,\r\n  useEffect,\r\n  useReducer,\r\n  useCallback,\r\n  useContext,\r\n} from \"react\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport SearchIcon from \"@material-ui/icons/Search\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\n\r\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\r\nimport EditIcon from \"@material-ui/icons/Edit\";\r\n\r\nimport MainContainer from \"../../components/MainContainer\";\r\nimport MainHeader from \"../../components/MainHeader\";\r\nimport MainHeaderButtonsWrapper from \"../../components/MainHeaderButtonsWrapper\";\r\nimport Title from \"../../components/Title\";\r\n\r\nimport api from \"../../services/api\";\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport TableRowSkeleton from \"../../components/TableRowSkeleton\";\r\nimport TagModal from \"../../components/TagModal\";\r\nimport ConfirmationModal from \"../../components/ConfirmationModal\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport { Chip } from \"@material-ui/core\";\r\nimport { socketConnection } from \"../../services/socket\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\n\r\nconst reducer = (state, action) => {\r\n  if (action.type === \"LOAD_TAGS\") {\r\n    const tags = action.payload;\r\n    const newTags = [];\r\n\r\n    tags.forEach((tag) => {\r\n      const tagIndex = state.findIndex((s) => s.id === tag.id);\r\n      if (tagIndex !== -1) {\r\n        state[tagIndex] = tag;\r\n      } else {\r\n        newTags.push(tag);\r\n      }\r\n    });\r\n\r\n    return [...state, ...newTags];\r\n  }\r\n\r\n  if (action.type === \"UPDATE_TAGS\") {\r\n    const tag = action.payload;\r\n    const tagIndex = state.findIndex((s) => s.id === tag.id);\r\n\r\n    if (tagIndex !== -1) {\r\n      state[tagIndex] = tag;\r\n      return [...state];\r\n    } else {\r\n      return [tag, ...state];\r\n    }\r\n  }\r\n\r\n  if (action.type === \"DELETE_TAG\") {\r\n    const tagId = action.payload;\r\n\r\n    const tagIndex = state.findIndex((s) => s.id === tagId);\r\n    if (tagIndex !== -1) {\r\n      state.splice(tagIndex, 1);\r\n    }\r\n    return [...state];\r\n  }\r\n\r\n  if (action.type === \"RESET\") {\r\n    return [];\r\n  }\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  mainPaper: {\r\n    flex: 1,\r\n    padding: theme.spacing(1),\r\n    overflowY: \"scroll\",\r\n    ...theme.scrollbarStyles,\r\n  },\r\n}));\r\n\r\nconst Tags = () => {\r\n  const classes = useStyles();\r\n\r\n  const { user } = useContext(AuthContext);\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [pageNumber, setPageNumber] = useState(1);\r\n  const [hasMore, setHasMore] = useState(false);\r\n  const [selectedTag, setSelectedTag] = useState(null);\r\n  const [deletingTag, setDeletingTag] = useState(null);\r\n  const [confirmModalOpen, setConfirmModalOpen] = useState(false);\r\n  const [searchParam, setSearchParam] = useState(\"\");\r\n  const [tags, dispatch] = useReducer(reducer, []);\r\n  const [tagModalOpen, setTagModalOpen] = useState(false);\r\n\r\n  const fetchTags = useCallback(async () => {\r\n    try {\r\n      const { data } = await api.get(\"/tags/\", {\r\n        params: { searchParam, pageNumber },\r\n      });\r\n      dispatch({ type: \"LOAD_TAGS\", payload: data.tags });\r\n      setHasMore(data.hasMore);\r\n      setLoading(false);\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n  }, [searchParam, pageNumber]);\r\n\r\n  useEffect(() => {\r\n    dispatch({ type: \"RESET\" });\r\n    setPageNumber(1);\r\n  }, [searchParam]);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    const delayDebounceFn = setTimeout(() => {\r\n      fetchTags();\r\n    }, 500);\r\n    return () => clearTimeout(delayDebounceFn);\r\n  }, [searchParam, pageNumber, fetchTags]);\r\n\r\n  useEffect(() => {\r\n    const socket = socketConnection({ companyId: user.companyId });\r\n\r\n    socket.on(\"user\", (data) => {\r\n      if (data.action === \"update\" || data.action === \"create\") {\r\n        dispatch({ type: \"UPDATE_TAGS\", payload: data.tags });\r\n      }\r\n\r\n      if (data.action === \"delete\") {\r\n        dispatch({ type: \"DELETE_USER\", payload: +data.tagId });\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      socket.disconnect();\r\n    };\r\n  }, [user]);\r\n\r\n  const handleOpenTagModal = () => {\r\n    setSelectedTag(null);\r\n    setTagModalOpen(true);\r\n  };\r\n\r\n  const handleCloseTagModal = () => {\r\n    setSelectedTag(null);\r\n    setTagModalOpen(false);\r\n  };\r\n\r\n  const handleSearch = (event) => {\r\n    setSearchParam(event.target.value.toLowerCase());\r\n  };\r\n\r\n  const handleEditTag = (tag) => {\r\n    setSelectedTag(tag);\r\n    setTagModalOpen(true);\r\n  };\r\n\r\n  const handleDeleteTag = async (tagId) => {\r\n    try {\r\n      await api.delete(`/tags/${tagId}`);\r\n      toast.success(i18n.t(\"tags.toasts.deleted\"));\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n    setDeletingTag(null);\r\n    setSearchParam(\"\");\r\n    setPageNumber(1);\r\n\r\n    dispatch({ type: \"RESET\" });\r\n    setPageNumber(1);\r\n    await fetchTags();\r\n  };\r\n\r\n  const loadMore = () => {\r\n    setPageNumber((prevState) => prevState + 1);\r\n  };\r\n\r\n  const handleScroll = (e) => {\r\n    if (!hasMore || loading) return;\r\n    const { scrollTop, scrollHeight, clientHeight } = e.currentTarget;\r\n    if (scrollHeight - (scrollTop + 100) < clientHeight) {\r\n      loadMore();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <MainContainer>\r\n      <ConfirmationModal\r\n        title={deletingTag && `${i18n.t(\"tags.confirmationModal.deleteTitle\")}`}\r\n        open={confirmModalOpen}\r\n        onClose={setConfirmModalOpen}\r\n        onConfirm={() => handleDeleteTag(deletingTag.id)}\r\n      >\r\n        {i18n.t(\"tags.confirmationModal.deleteMessage\")}\r\n      </ConfirmationModal>\r\n      <TagModal\r\n        open={tagModalOpen}\r\n        onClose={handleCloseTagModal}\r\n        reload={fetchTags}\r\n        aria-labelledby=\"form-dialog-title\"\r\n        tagId={selectedTag && selectedTag.id}\r\n      />\r\n      <MainHeader>\r\n        <Title>{i18n.t(\"tags.title\")}</Title>\r\n        <MainHeaderButtonsWrapper>\r\n          <TextField\r\n            placeholder={i18n.t(\"contacts.searchPlaceholder\")}\r\n            type=\"search\"\r\n            value={searchParam}\r\n            onChange={handleSearch}\r\n            InputProps={{\r\n              startAdornment: (\r\n                <InputAdornment position=\"start\">\r\n                  <SearchIcon style={{ color: \"gray\" }} />\r\n                </InputAdornment>\r\n              ),\r\n            }}\r\n          />\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            onClick={handleOpenTagModal}\r\n          >\r\n            {i18n.t(\"tags.buttons.add\")}\r\n          </Button>\r\n        </MainHeaderButtonsWrapper>\r\n      </MainHeader>\r\n      <Paper\r\n        className={classes.mainPaper}\r\n        variant=\"outlined\"\r\n        onScroll={handleScroll}\r\n      >\r\n        <Table size=\"small\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell align=\"center\">{i18n.t(\"tags.table.name\")}</TableCell>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"tags.table.tickets\")}\r\n              </TableCell>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"tags.table.actions\")}\r\n              </TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            <>\r\n              {tags.map((tag) => (\r\n                <TableRow key={tag.id}>\r\n                  <TableCell align=\"center\">\r\n                    <Chip\r\n                      variant=\"outlined\"\r\n                      style={{\r\n                        backgroundColor: tag.color,\r\n                        textShadow: \"1px 1px 1px #000\",\r\n                        color: \"white\",\r\n                      }}\r\n                      label={tag.name}\r\n                      size=\"small\"\r\n                    />\r\n                  </TableCell>\r\n                  <TableCell align=\"center\">{tag.ticketsCount}</TableCell>\r\n                  <TableCell align=\"center\">\r\n                    <IconButton size=\"small\" onClick={() => handleEditTag(tag)}>\r\n                      <EditIcon />\r\n                    </IconButton>\r\n\r\n                    <IconButton\r\n                      size=\"small\"\r\n                      onClick={(e) => {\r\n                        setConfirmModalOpen(true);\r\n                        setDeletingTag(tag);\r\n                      }}\r\n                    >\r\n                      <DeleteOutlineIcon />\r\n                    </IconButton>\r\n                  </TableCell>\r\n                </TableRow>\r\n              ))}\r\n              {loading && <TableRowSkeleton columns={4} />}\r\n            </>\r\n          </TableBody>\r\n        </Table>\r\n      </Paper>\r\n    </MainContainer>\r\n  );\r\n};\r\n\r\nexport default Tags;\r\n","import React, { useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport { Button, CircularProgress, Grid, TextField, Typography } from \"@material-ui/core\";\r\nimport { Field, Form, Formik } from \"formik\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport { toast } from \"react-toastify\";\r\nimport api from \"../../services/api\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  mainPaper: {\r\n    flex: 1,\r\n    padding: theme.spacing(2),\r\n    paddingBottom: 100\r\n  },\r\n  mainHeader: {\r\n    marginTop: theme.spacing(1),\r\n  },\r\n  elementMargin: {\r\n    marginTop: theme.spacing(2),\r\n  },\r\n  formContainer: {\r\n    maxWidth: 500,\r\n  },\r\n  textRight: {\r\n    textAlign: \"right\"\r\n  }\r\n}));\r\n\r\nconst MessagesAPI = () => {\r\n  const classes = useStyles();\r\n\r\n  const [formMessageTextData,] = useState({ token: '',number: '', body: '' })\r\n  const [formMessageMediaData,] = useState({ token: '', number: '', medias: '' })\r\n  const [file, setFile] = useState({})\r\n\r\n  const getEndpoint = () => {\r\n    return process.env.REACT_APP_BACKEND_URL + '/api/messages/send'\r\n  }\r\n\r\n  const handleSendTextMessage = async (values) => {\r\n    const { number, body } = values;\r\n    const data = { number, body };\r\n    var options = {\r\n      method: 'POST',\r\n      url: `${process.env.REACT_APP_BACKEND_URL}/api/messages/send`,\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        Authorization: `Bearer ${values.token}`\r\n      },\r\n      data\r\n    };\r\n    \r\n    axios.request(options).then(function (response) {\r\n      toast.success('Mensagem enviada com sucesso');\r\n    }).catch(function (error) {\r\n      toastError(error);\r\n    });    \r\n  }\r\n\r\n  const handleSendMediaMessage = async (values) => { \r\n    try {\r\n      const firstFile =  file[0];\r\n      const data = new FormData();\r\n      data.append('number', values.number);\r\n      data.append('body', firstFile.name);\r\n      data.append('medias', firstFile);\r\n      var options = {\r\n        method: 'POST',\r\n        url: `${process.env.REACT_APP_BACKEND_URL}/api/messages/send`,\r\n        headers: {\r\n          'Content-Type': 'multipart/form-data',\r\n          Authorization: `Bearer ${values.token}`\r\n        },\r\n        data\r\n      };\r\n      \r\n      axios.request(options).then(function (response) {\r\n        toast.success('Mensagem enviada com sucesso');\r\n      }).catch(function (error) {\r\n        toastError(error);\r\n      });      \r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n  }\r\n\r\n  const renderFormMessageText = () => {\r\n    return (\r\n      <Formik\r\n        initialValues={formMessageTextData}\r\n        enableReinitialize={true}\r\n        onSubmit={(values, actions) => {\r\n          setTimeout(async () => {\r\n            await handleSendTextMessage(values);\r\n            actions.setSubmitting(false);\r\n            actions.resetForm()\r\n          }, 400);\r\n        }}\r\n        className={classes.elementMargin}\r\n      >\r\n        {({ isSubmitting }) => (\r\n          <Form className={classes.formContainer}>\r\n            <Grid container spacing={2}>\r\n              <Grid item xs={12} md={6}>\r\n                <Field\r\n                  as={TextField}\r\n                  label={i18n.t(\"messagesAPI.textMessage.token\")}\r\n                  name=\"token\"\r\n                  autoFocus\r\n                  variant=\"outlined\"\r\n                  margin=\"dense\"\r\n                  fullWidth\r\n                  className={classes.textField}\r\n                  required\r\n                />\r\n              </Grid>\r\n              <Grid item xs={12} md={6}>\r\n                <Field\r\n                  as={TextField}\r\n                  label={i18n.t(\"messagesAPI.textMessage.number\")}\r\n                  name=\"number\"\r\n                  autoFocus\r\n                  variant=\"outlined\"\r\n                  margin=\"dense\"\r\n                  fullWidth\r\n                  className={classes.textField}\r\n                  required\r\n                />\r\n              </Grid>\r\n              <Grid item xs={12}>\r\n                <Field\r\n                  as={TextField}\r\n                  label={i18n.t(\"messagesAPI.textMessage.body\")}\r\n                  name=\"body\"\r\n                  autoFocus\r\n                  variant=\"outlined\"\r\n                  margin=\"dense\"\r\n                  fullWidth\r\n                  className={classes.textField}\r\n                  required\r\n                />\r\n              </Grid>\r\n              <Grid item xs={12} className={classes.textRight}>\r\n                <Button\r\n\t\t\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\t\t\tclassName={classes.btnWrapper}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{isSubmitting ? (\r\n\t\t\t\t\t\t\t\t\t\t<CircularProgress\r\n\t\t\t\t\t\t\t\t\t\t\tsize={24}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName={classes.buttonProgress}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t) : 'Enviar'}\r\n\t\t\t\t\t\t\t\t</Button>\r\n              </Grid>\r\n            </Grid>\r\n          </Form>\r\n        )}\r\n      </Formik>\r\n    )\r\n  }\r\n\r\n  const renderFormMessageMedia = () => {\r\n    return (\r\n      <Formik\r\n        initialValues={formMessageMediaData}\r\n        enableReinitialize={true}\r\n        onSubmit={(values, actions) => {\r\n          setTimeout(async () => {\r\n           \r\n            await handleSendMediaMessage(values);\r\n            actions.setSubmitting(false);\r\n            actions.resetForm()\r\n            document.getElementById('medias').files = null\r\n            document.getElementById('medias').value = null\r\n          }, 400);\r\n        }}\r\n        className={classes.elementMargin}\r\n      >\r\n        {({ isSubmitting }) => (\r\n          <Form className={classes.formContainer}>\r\n            <Grid container spacing={2}>\r\n              <Grid item xs={12} md={6}>\r\n                <Field\r\n                  as={TextField}\r\n                  label={i18n.t(\"messagesAPI.mediaMessage.token\")}\r\n                  name=\"token\"\r\n                  autoFocus\r\n                  variant=\"outlined\"\r\n                  margin=\"dense\"\r\n                  fullWidth\r\n                  className={classes.textField}\r\n                  required\r\n                />\r\n              </Grid>\r\n              <Grid item xs={12} md={6}>\r\n                <Field\r\n                  as={TextField}\r\n                  label={i18n.t(\"messagesAPI.mediaMessage.number\")}\r\n                  name=\"number\"\r\n                  autoFocus\r\n                  variant=\"outlined\"\r\n                  margin=\"dense\"\r\n                  fullWidth\r\n                  className={classes.textField}\r\n                  required\r\n                />\r\n              </Grid>\r\n              <Grid item xs={12}>\r\n                <input type=\"file\" name=\"medias\" id=\"medias\" required onChange={(e) => setFile(e.target.files)} />\r\n              </Grid>\r\n              <Grid item xs={12} className={classes.textRight}>\r\n                <Button\r\n\t\t\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\t\t\tclassName={classes.btnWrapper}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{isSubmitting ? (\r\n\t\t\t\t\t\t\t\t\t\t<CircularProgress\r\n\t\t\t\t\t\t\t\t\t\t\tsize={24}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName={classes.buttonProgress}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t) : 'Enviar'}\r\n\t\t\t\t\t\t\t\t</Button>\r\n              </Grid>\r\n            </Grid>\r\n          </Form>\r\n        )}\r\n      </Formik>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <Paper\r\n      className={classes.mainPaper}\r\n      variant=\"outlined\"\r\n    >\r\n      <Typography variant=\"h5\">\r\n        Documentação para envio de mensagens\r\n      </Typography>\r\n      <Typography variant=\"h6\" color=\"primary\" className={classes.elementMargin}>\r\n        Métodos de Envio\r\n      </Typography>\r\n      <Typography component=\"div\">\r\n        <ol>\r\n          <li>Mensagens de Texto</li>\r\n          <li>Mensagens de Media</li>\r\n        </ol>\r\n      </Typography>\r\n      <Typography variant=\"h6\" color=\"primary\" className={classes.elementMargin}>\r\n        Instruções\r\n      </Typography>\r\n      <Typography className={classes.elementMargin} component=\"div\">\r\n        <b>Observações importantes</b><br />\r\n        <ul>\r\n          <li>Antes de enviar mensagens, é necessário o cadastro do token vinculado à conexão que enviará as mensagens. <br/>Para realizar o cadastro acesse o menu \"Conexões\", clique no botão editar da conexão e insira o token no devido campo.</li>\r\n          <li>\r\n            O número para envio não deve ter mascara ou caracteres especiais e deve ser composto por:\r\n              <ul>\r\n                <li>Código do país</li>\r\n                <li>DDD</li>\r\n                <li>Número</li>\r\n              </ul>\r\n          </li>\r\n        </ul>\r\n      </Typography>\r\n      <Typography variant=\"h6\" color=\"primary\" className={classes.elementMargin}>\r\n        1. Mensagens de Texto\r\n      </Typography>\r\n      <Grid container>\r\n        <Grid item xs={12} sm={6}>\r\n          <Typography className={classes.elementMargin} component=\"div\">\r\n            <p>Seguem abaixo a lista de informações necessárias para envio das mensagens de texto:</p>\r\n            <b>Endpoint: </b> {getEndpoint()} <br />\r\n            <b>Método: </b> POST <br />\r\n            <b>Headers: </b> X_TOKEN (token cadastrado) e Content-Type (application/json) <br />\r\n            <b>Body: </b> {\"{ \\\"number\\\": \\\"5551998917243\\\", \\\"body\\\": \\\"Sua mensagem\\\" }\"}\r\n          </Typography>\r\n        </Grid>\r\n        <Grid item xs={12} sm={6}>\r\n          <Typography className={classes.elementMargin}>\r\n            <b>Teste de Envio</b>\r\n          </Typography>\r\n          {renderFormMessageText()}\r\n        </Grid>\r\n      </Grid>\r\n      <Typography variant=\"h6\" color=\"primary\" className={classes.elementMargin}>\r\n        2. Mensagens de Media\r\n      </Typography>\r\n      <Grid container>\r\n        <Grid item xs={12} sm={6}>\r\n          <Typography className={classes.elementMargin} component=\"div\">\r\n            <p>Seguem abaixo a lista de informações necessárias para envio das mensagens de texto:</p>\r\n            <b>Endpoint: </b> {getEndpoint()} <br />\r\n            <b>Método: </b> POST <br />\r\n            <b>Headers: </b> X_TOKEN (token cadastrado) e Content-Type (multipart/form-data) <br />\r\n            <b>FormData: </b> <br />\r\n            <ul>\r\n              <li>\r\n                <b>number: </b> 5551998917243\r\n              </li>\r\n              <li>\r\n                <b>medias: </b> arquivo\r\n              </li>\r\n            </ul>\r\n          </Typography>\r\n        </Grid>\r\n        <Grid item xs={12} sm={6}>\r\n          <Typography className={classes.elementMargin}>\r\n            <b>Teste de Envio</b>\r\n          </Typography>\r\n          {renderFormMessageMedia()}\r\n        </Grid>\r\n      </Grid>\r\n    </Paper>\r\n  );\r\n};\r\n\r\nexport default MessagesAPI;","import React, { useState, useEffect, useCallback } from \"react\";\r\nimport { makeStyles, Paper, Typography, Modal, IconButton } from \"@material-ui/core\";\r\nimport MainContainer from \"../../components/MainContainer\";\r\nimport MainHeader from \"../../components/MainHeader\";\r\nimport MainHeaderButtonsWrapper from \"../../components/MainHeaderButtonsWrapper\";\r\nimport Title from \"../../components/Title\";\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport useHelps from \"../../hooks/useHelps\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  mainPaperContainer: {\r\n    overflowY: 'auto',\r\n    maxHeight: 'calc(100vh - 200px)',\r\n  },\r\n  mainPaper: {\r\n    width: '100%',\r\n    display: 'grid',\r\n    gridTemplateColumns: 'repeat(auto-fit, minmax(320px, 1fr))',\r\n    gap: theme.spacing(3),\r\n    padding: theme.spacing(2),\r\n    marginBottom: theme.spacing(3),\r\n  },\r\n  helpPaper: {\r\n    position: 'relative',\r\n    width: '100%',\r\n    minHeight: '340px',\r\n    padding: theme.spacing(2),\r\n    boxShadow: theme.shadows[3],\r\n    borderRadius: theme.spacing(1),\r\n    cursor: 'pointer',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    justifyContent: 'space-between',\r\n    maxWidth: '340px',\r\n  },\r\n  paperHover: {\r\n    transition: 'transform 0.3s, box-shadow 0.3s',\r\n    '&:hover': {\r\n      transform: 'scale(1.03)',\r\n      boxShadow: `0 0 8px`,\r\n      color: theme.palette.primary.main,\r\n    },\r\n  },\r\n  videoThumbnail: {\r\n    width: '100%',\r\n    height: 'calc(100% - 56px)',\r\n    objectFit: 'cover',\r\n    borderRadius: `${theme.spacing(1)}px ${theme.spacing(1)}px 0 0`,\r\n  },\r\n  videoTitle: {\r\n    marginTop: theme.spacing(1),\r\n    flex: 1,\r\n  },\r\n  videoDescription: {\r\n    maxHeight: '100px',\r\n    overflow: 'hidden',\r\n  },\r\n  videoModal: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n  },\r\n  videoModalContent: {\r\n    outline: 'none',\r\n    width: '90%',\r\n    maxWidth: 1024,\r\n    aspectRatio: '16/9',\r\n    position: 'relative',\r\n    backgroundColor: 'white',\r\n    borderRadius: theme.spacing(1),\r\n    overflow: 'hidden',\r\n  },\r\n}));\r\n\r\nconst Helps = () => {\r\n  const classes = useStyles();\r\n  const [records, setRecords] = useState([]);\r\n  const { list } = useHelps();\r\n  const [selectedVideo, setSelectedVideo] = useState(null);\r\n\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      const helps = await list();\r\n      setRecords(helps);\r\n    }\r\n    fetchData();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  const openVideoModal = (video) => {\r\n    setSelectedVideo(video);\r\n  };\r\n\r\n  const closeVideoModal = () => {\r\n    setSelectedVideo(null);\r\n  };\r\n\r\n  const handleModalClose = useCallback((event) => {\r\n    if (event.key === \"Escape\") {\r\n      closeVideoModal();\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    document.addEventListener(\"keydown\", handleModalClose);\r\n    return () => {\r\n      document.removeEventListener(\"keydown\", handleModalClose);\r\n    };\r\n  }, [handleModalClose]);\r\n\r\n  const renderVideoModal = () => {\r\n    return (\r\n      <Modal\r\n        open={Boolean(selectedVideo)}\r\n        onClose={closeVideoModal}\r\n        className={classes.videoModal}\r\n      >\r\n        <div className={classes.videoModalContent}>\r\n          {selectedVideo && (\r\n            <iframe\r\n              style={{ width: \"100%\", height: \"100%\", position: \"absolute\", top: 0, left: 0 }}\r\n              src={`https://www.youtube.com/embed/${selectedVideo}`}\r\n              title=\"YouTube video player\"\r\n              frameBorder=\"0\"\r\n              allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\r\n              allowFullScreen\r\n            />\r\n          )}\r\n        </div>\r\n      </Modal>\r\n    );\r\n  };\r\n\r\n  const renderHelps = () => {\r\n    return (\r\n      <>\r\n        <div className={`${classes.mainPaper} ${classes.mainPaperContainer}`}>\r\n          {records.length ? records.map((record, key) => (\r\n            <Paper key={key} className={`${classes.helpPaper} ${classes.paperHover}`} onClick={() => openVideoModal(record.video)}>\r\n              <img\r\n                src={`https://img.youtube.com/vi/${record.video}/mqdefault.jpg`}\r\n                alt=\"Thumbnail\"\r\n                className={classes.videoThumbnail}\r\n              />\r\n              <Typography variant=\"button\" className={classes.videoTitle}>\r\n                {record.title}\r\n              </Typography>\r\n              <Typography variant=\"caption\" className={classes.videoDescription}>\r\n                {record.description}\r\n              </Typography>\r\n            </Paper>\r\n          )) : null}\r\n        </div>\r\n      </>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <MainContainer>\r\n      <MainHeader>\r\n        <Title>{i18n.t(\"helps.title\")} ({records.length})</Title>\r\n        <MainHeaderButtonsWrapper></MainHeaderButtonsWrapper>\r\n      </MainHeader>\r\n      <div className={classes.mainPaper}>\r\n        {renderHelps()}\r\n      </div>\r\n      {renderVideoModal()}\r\n    </MainContainer>\r\n  );\r\n};\r\n\r\nexport default Helps;","import React, { useState, useEffect } from \"react\";\r\n\r\nimport * as Yup from \"yup\";\r\nimport { Formik, Form, Field } from \"formik\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { green } from \"@material-ui/core/colors\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\n\r\nimport api from \"../../services/api\";\r\nimport toastError from \"../../errors/toastError\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n    flexWrap: \"wrap\",\r\n  },\r\n  multFieldLine: {\r\n    display: \"flex\",\r\n    \"& > *:not(:last-child)\": {\r\n      marginRight: theme.spacing(1),\r\n    },\r\n  },\r\n\r\n  btnWrapper: {\r\n    position: \"relative\",\r\n  },\r\n\r\n  buttonProgress: {\r\n    color: green[500],\r\n    position: \"absolute\",\r\n    top: \"50%\",\r\n    left: \"50%\",\r\n    marginTop: -12,\r\n    marginLeft: -12,\r\n  },\r\n  formControl: {\r\n    margin: theme.spacing(1),\r\n    minWidth: 120,\r\n  },\r\n}));\r\n\r\nconst ContactListSchema = Yup.object().shape({\r\n  name: Yup.string()\r\n    .min(2, \"Too Short!\")\r\n    .max(50, \"Too Long!\")\r\n    .required(\"Required\"),\r\n});\r\n\r\nconst ContactListModal = ({ open, onClose, contactListId }) => {\r\n  const classes = useStyles();\r\n\r\n  const initialState = {\r\n    name: \"\",\r\n  };\r\n\r\n  const [contactList, setContactList] = useState(initialState);\r\n\r\n  useEffect(() => {\r\n    const fetchContactList = async () => {\r\n      if (!contactListId) return;\r\n      try {\r\n        const { data } = await api.get(`/contact-lists/${contactListId}`);\r\n        setContactList((prevState) => {\r\n          return { ...prevState, ...data };\r\n        });\r\n      } catch (err) {\r\n        toastError(err);\r\n      }\r\n    };\r\n\r\n    fetchContactList();\r\n  }, [contactListId, open]);\r\n\r\n  const handleClose = () => {\r\n    onClose();\r\n    setContactList(initialState);\r\n  };\r\n\r\n  const handleSaveContactList = async (values) => {\r\n    const contactListData = { ...values };\r\n    try {\r\n      if (contactListId) {\r\n        await api.put(`/contact-lists/${contactListId}`, contactListData);\r\n      } else {\r\n        await api.post(\"/contact-lists\", contactListData);\r\n      }\r\n      toast.success(i18n.t(\"contactList.dialog\"));\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n    handleClose();\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Dialog\r\n        open={open}\r\n        onClose={handleClose}\r\n        maxWidth=\"xs\"\r\n        fullWidth\r\n        scroll=\"paper\"\r\n      >\r\n        <DialogTitle id=\"form-dialog-title\">\r\n          {contactListId\r\n            ? `${i18n.t(\"contactLists.dialog.edit\")}`\r\n            : `${i18n.t(\"contactLists.dialog.add\")}`}\r\n        </DialogTitle>\r\n        <Formik\r\n          initialValues={contactList}\r\n          enableReinitialize={true}\r\n          validationSchema={ContactListSchema}\r\n          onSubmit={(values, actions) => {\r\n            setTimeout(() => {\r\n              handleSaveContactList(values);\r\n              actions.setSubmitting(false);\r\n            }, 400);\r\n          }}\r\n        >\r\n          {({ touched, errors, isSubmitting }) => (\r\n            <Form>\r\n              <DialogContent dividers>\r\n                <div className={classes.multFieldLine}>\r\n                  <Field\r\n                    as={TextField}\r\n                    label={i18n.t(\"contactLists.dialog.name\")}\r\n                    autoFocus\r\n                    name=\"name\"\r\n                    error={touched.name && Boolean(errors.name)}\r\n                    helperText={touched.name && errors.name}\r\n                    variant=\"outlined\"\r\n                    margin=\"dense\"\r\n                    fullWidth\r\n                  />\r\n                </div>\r\n              </DialogContent>\r\n              <DialogActions>\r\n                <Button\r\n                  onClick={handleClose}\r\n                  color=\"secondary\"\r\n                  disabled={isSubmitting}\r\n                  variant=\"outlined\"\r\n                >\r\n                  {i18n.t(\"contactLists.dialog.cancel\")}\r\n                </Button>\r\n                <Button\r\n                  type=\"submit\"\r\n                  color=\"primary\"\r\n                  disabled={isSubmitting}\r\n                  variant=\"contained\"\r\n                  className={classes.btnWrapper}\r\n                >\r\n                  {contactListId\r\n                    ? `${i18n.t(\"contactLists.dialog.okEdit\")}`\r\n                    : `${i18n.t(\"contactLists.dialog.okAdd\")}`}\r\n                  {isSubmitting && (\r\n                    <CircularProgress\r\n                      size={24}\r\n                      className={classes.buttonProgress}\r\n                    />\r\n                  )}\r\n                </Button>\r\n              </DialogActions>\r\n            </Form>\r\n          )}\r\n        </Formik>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ContactListModal;\r\n","import React, { useState, useEffect, useReducer } from \"react\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport SearchIcon from \"@material-ui/icons/Search\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\n\r\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\r\nimport EditIcon from \"@material-ui/icons/Edit\";\r\nimport PeopleIcon from \"@material-ui/icons/People\";\r\nimport DownloadIcon from \"@material-ui/icons/GetApp\";\r\n\r\nimport MainContainer from \"../../components/MainContainer\";\r\nimport MainHeader from \"../../components/MainHeader\";\r\nimport Title from \"../../components/Title\";\r\n\r\nimport api from \"../../services/api\";\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport TableRowSkeleton from \"../../components/TableRowSkeleton\";\r\nimport ContactListDialog from \"../../components/ContactListDialog\";\r\nimport ConfirmationModal from \"../../components/ConfirmationModal\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport { Grid } from \"@material-ui/core\";\r\n\r\nimport planilhaExemplo from \"../../assets/planilha.xlsx\";\r\nimport { socketConnection } from \"../../services/socket\";\r\n\r\nconst reducer = (state, action) => {\r\n  if (action.type === \"LOAD_CONTACTLISTS\") {\r\n    const contactLists = action.payload;\r\n    const newContactLists = [];\r\n\r\n    contactLists.forEach((contactList) => {\r\n      const contactListIndex = state.findIndex((u) => u.id === contactList.id);\r\n      if (contactListIndex !== -1) {\r\n        state[contactListIndex] = contactList;\r\n      } else {\r\n        newContactLists.push(contactList);\r\n      }\r\n    });\r\n\r\n    return [...state, ...newContactLists];\r\n  }\r\n\r\n  if (action.type === \"UPDATE_CONTACTLIST\") {\r\n    const contactList = action.payload;\r\n    const contactListIndex = state.findIndex((u) => u.id === contactList.id);\r\n\r\n    if (contactListIndex !== -1) {\r\n      state[contactListIndex] = contactList;\r\n      return [...state];\r\n    } else {\r\n      return [contactList, ...state];\r\n    }\r\n  }\r\n\r\n  if (action.type === \"DELETE_CONTACTLIST\") {\r\n    const contactListId = action.payload;\r\n\r\n    const contactListIndex = state.findIndex((u) => u.id === contactListId);\r\n    if (contactListIndex !== -1) {\r\n      state.splice(contactListIndex, 1);\r\n    }\r\n    return [...state];\r\n  }\r\n\r\n  if (action.type === \"RESET\") {\r\n    return [];\r\n  }\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  mainPaper: {\r\n    flex: 1,\r\n    padding: theme.spacing(1),\r\n    overflowY: \"scroll\",\r\n    ...theme.scrollbarStyles,\r\n  },\r\n}));\r\n\r\nconst ContactLists = () => {\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [pageNumber, setPageNumber] = useState(1);\r\n  const [hasMore, setHasMore] = useState(false);\r\n  const [selectedContactList, setSelectedContactList] = useState(null);\r\n  const [deletingContactList, setDeletingContactList] = useState(null);\r\n  const [contactListModalOpen, setContactListModalOpen] = useState(false);\r\n  const [confirmModalOpen, setConfirmModalOpen] = useState(false);\r\n  const [searchParam, setSearchParam] = useState(\"\");\r\n  const [contactLists, dispatch] = useReducer(reducer, []);\r\n\r\n  useEffect(() => {\r\n    dispatch({ type: \"RESET\" });\r\n    setPageNumber(1);\r\n  }, [searchParam]);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    const delayDebounceFn = setTimeout(() => {\r\n      const fetchContactLists = async () => {\r\n        try {\r\n          const { data } = await api.get(\"/contact-lists/\", {\r\n            params: { searchParam, pageNumber },\r\n          });\r\n          dispatch({ type: \"LOAD_CONTACTLISTS\", payload: data.records });\r\n          setHasMore(data.hasMore);\r\n          setLoading(false);\r\n        } catch (err) {\r\n          toastError(err);\r\n        }\r\n      };\r\n      fetchContactLists();\r\n    }, 500);\r\n    return () => clearTimeout(delayDebounceFn);\r\n  }, [searchParam, pageNumber]);\r\n\r\n  useEffect(() => {\r\n    const companyId = localStorage.getItem(\"companyId\");\r\n    const socket = socketConnection({ companyId });\r\n\r\n    socket.on(`company-${companyId}-ContactList`, (data) => {\r\n      if (data.action === \"update\" || data.action === \"create\") {\r\n        dispatch({ type: \"UPDATE_CONTACTLIST\", payload: data.record });\r\n      }\r\n\r\n      if (data.action === \"delete\") {\r\n        dispatch({ type: \"DELETE_CONTACTLIST\", payload: +data.id });\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      socket.disconnect();\r\n    };\r\n  }, []);\r\n\r\n  const handleOpenContactListModal = () => {\r\n    setSelectedContactList(null);\r\n    setContactListModalOpen(true);\r\n  };\r\n\r\n  const handleCloseContactListModal = () => {\r\n    setSelectedContactList(null);\r\n    setContactListModalOpen(false);\r\n  };\r\n\r\n  const handleSearch = (event) => {\r\n    setSearchParam(event.target.value.toLowerCase());\r\n  };\r\n\r\n  const handleEditContactList = (contactList) => {\r\n    setSelectedContactList(contactList);\r\n    setContactListModalOpen(true);\r\n  };\r\n\r\n  const handleDeleteContactList = async (contactListId) => {\r\n    try {\r\n      await api.delete(`/contact-lists/${contactListId}`);\r\n      toast.success(i18n.t(\"contactLists.toasts.deleted\"));\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n    setDeletingContactList(null);\r\n    setSearchParam(\"\");\r\n    setPageNumber(1);\r\n  };\r\n\r\n  const loadMore = () => {\r\n    setPageNumber((prevState) => prevState + 1);\r\n  };\r\n\r\n  const handleScroll = (e) => {\r\n    if (!hasMore || loading) return;\r\n    const { scrollTop, scrollHeight, clientHeight } = e.currentTarget;\r\n    if (scrollHeight - (scrollTop + 100) < clientHeight) {\r\n      loadMore();\r\n    }\r\n  };\r\n\r\n  const goToContacts = (id) => {\r\n    history.push(`/contact-lists/${id}/contacts`);\r\n  };\r\n\r\n  return (\r\n    <MainContainer>\r\n      <ConfirmationModal\r\n        title={\r\n          deletingContactList &&\r\n          `${i18n.t(\"contactLists.confirmationModal.deleteTitle\")} ${\r\n            deletingContactList.name\r\n          }?`\r\n        }\r\n        open={confirmModalOpen}\r\n        onClose={setConfirmModalOpen}\r\n        onConfirm={() => handleDeleteContactList(deletingContactList.id)}\r\n      >\r\n        {i18n.t(\"contactLists.confirmationModal.deleteMessage\")}\r\n      </ConfirmationModal>\r\n      <ContactListDialog\r\n        open={contactListModalOpen}\r\n        onClose={handleCloseContactListModal}\r\n        aria-labelledby=\"form-dialog-title\"\r\n        contactListId={selectedContactList && selectedContactList.id}\r\n      />\r\n      <MainHeader>\r\n        <Grid style={{ width: \"99.6%\" }} container>\r\n          <Grid xs={12} sm={8} item>\r\n            <Title>{i18n.t(\"contactLists.title\")}</Title>\r\n          </Grid>\r\n          <Grid xs={12} sm={4} item>\r\n            <Grid spacing={2} container>\r\n              <Grid xs={7} sm={6} item>\r\n                <TextField\r\n                  fullWidth\r\n                  placeholder={i18n.t(\"contacts.searchPlaceholder\")}\r\n                  type=\"search\"\r\n                  value={searchParam}\r\n                  onChange={handleSearch}\r\n                  InputProps={{\r\n                    startAdornment: (\r\n                      <InputAdornment position=\"start\">\r\n                        <SearchIcon style={{ color: \"gray\" }} />\r\n                      </InputAdornment>\r\n                    ),\r\n                  }}\r\n                />\r\n              </Grid>\r\n              <Grid xs={5} sm={6} item>\r\n                <Button\r\n                  fullWidth\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  onClick={handleOpenContactListModal}\r\n                >\r\n                  {i18n.t(\"contactLists.buttons.add\")}\r\n                </Button>\r\n              </Grid>\r\n            </Grid>\r\n          </Grid>\r\n        </Grid>\r\n      </MainHeader>\r\n      <Paper\r\n        className={classes.mainPaper}\r\n        variant=\"outlined\"\r\n        onScroll={handleScroll}\r\n      >\r\n        <Table size=\"small\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"contactLists.table.name\")}\r\n              </TableCell>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"contactLists.table.contacts\")}\r\n              </TableCell>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"contactLists.table.actions\")}\r\n              </TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            <>\r\n              {contactLists.map((contactList) => (\r\n                <TableRow key={contactList.id}>\r\n                  <TableCell align=\"center\">{contactList.name}</TableCell>\r\n                  <TableCell align=\"center\">\r\n                    {contactList.contactsCount || 0}\r\n                  </TableCell>\r\n                  <TableCell align=\"center\">\r\n                    <a href={planilhaExemplo} download=\"planilha.xlsx\">\r\n                      <IconButton size=\"small\" title=\"Baixar Planilha Exemplo\">\r\n                        <DownloadIcon />\r\n                      </IconButton>\r\n                    </a>\r\n\r\n                    <IconButton\r\n                      size=\"small\"\r\n                      onClick={() => goToContacts(contactList.id)}\r\n                    >\r\n                      <PeopleIcon />\r\n                    </IconButton>\r\n\r\n                    <IconButton\r\n                      size=\"small\"\r\n                      onClick={() => handleEditContactList(contactList)}\r\n                    >\r\n                      <EditIcon />\r\n                    </IconButton>\r\n\r\n                    <IconButton\r\n                      size=\"small\"\r\n                      onClick={(e) => {\r\n                        setConfirmModalOpen(true);\r\n                        setDeletingContactList(contactList);\r\n                      }}\r\n                    >\r\n                      <DeleteOutlineIcon />\r\n                    </IconButton>\r\n                  </TableCell>\r\n                </TableRow>\r\n              ))}\r\n              {loading && <TableRowSkeleton columns={3} />}\r\n            </>\r\n          </TableBody>\r\n        </Table>\r\n      </Paper>\r\n    </MainContainer>\r\n  );\r\n};\r\n\r\nexport default ContactLists;\r\n","import React, { useState, useEffect, useRef, useContext } from \"react\";\r\n\r\nimport * as Yup from \"yup\";\r\nimport { Formik, Form, Field } from \"formik\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { green } from \"@material-ui/core/colors\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\n\r\nimport api from \"../../services/api\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n    flexWrap: \"wrap\",\r\n  },\r\n  textField: {\r\n    marginRight: theme.spacing(1),\r\n    flex: 1,\r\n  },\r\n\r\n  extraAttr: {\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n  },\r\n\r\n  btnWrapper: {\r\n    position: \"relative\",\r\n  },\r\n\r\n  buttonProgress: {\r\n    color: green[500],\r\n    position: \"absolute\",\r\n    top: \"50%\",\r\n    left: \"50%\",\r\n    marginTop: -12,\r\n    marginLeft: -12,\r\n  },\r\n}));\r\n\r\nconst ContactSchema = Yup.object().shape({\r\n  name: Yup.string()\r\n    .min(2, \"Too Short!\")\r\n    .max(50, \"Too Long!\")\r\n    .required(\"Required\"),\r\n  number: Yup.string().min(8, \"Too Short!\").max(50, \"Too Long!\"),\r\n  email: Yup.string().email(\"Invalid email\"),\r\n});\r\n\r\nconst ContactListItemModal = ({\r\n  open,\r\n  onClose,\r\n  contactId,\r\n  initialValues,\r\n  onSave,\r\n}) => {\r\n  const classes = useStyles();\r\n  const isMounted = useRef(true);\r\n\r\n  const {\r\n    user: { companyId },\r\n  } = useContext(AuthContext);\r\n  const { contactListId } = useParams();\r\n\r\n  const initialState = {\r\n    name: \"\",\r\n    number: \"\",\r\n    email: \"\",\r\n  };\r\n\r\n  const [contact, setContact] = useState(initialState);\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      isMounted.current = false;\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const fetchContact = async () => {\r\n      if (initialValues) {\r\n        setContact((prevState) => {\r\n          return { ...prevState, ...initialValues };\r\n        });\r\n      }\r\n\r\n      if (!contactId) return;\r\n\r\n      try {\r\n        const { data } = await api.get(`/contact-list-items/${contactId}`);\r\n        if (isMounted.current) {\r\n          setContact(data);\r\n        }\r\n      } catch (err) {\r\n        toastError(err);\r\n      }\r\n    };\r\n\r\n    fetchContact();\r\n  }, [contactId, open, initialValues]);\r\n\r\n  const handleClose = () => {\r\n    onClose();\r\n    setContact(initialState);\r\n  };\r\n\r\n  const handleSaveContact = async (values) => {\r\n    try {\r\n      if (contactId) {\r\n        await api.put(`/contact-list-items/${contactId}`, {\r\n          ...values,\r\n          companyId,\r\n          contactListId,\r\n        });\r\n        handleClose();\r\n      } else {\r\n        const { data } = await api.post(\"/contact-list-items\", {\r\n          ...values,\r\n          companyId,\r\n          contactListId,\r\n        });\r\n        if (onSave) {\r\n          onSave(data);\r\n        }\r\n        handleClose();\r\n      }\r\n      toast.success(i18n.t(\"contactModal.success\"));\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Dialog open={open} onClose={handleClose} maxWidth=\"lg\" scroll=\"paper\">\r\n        <DialogTitle id=\"form-dialog-title\">\r\n          {contactId\r\n            ? `${i18n.t(\"contactModal.title.edit\")}`\r\n            : `${i18n.t(\"contactModal.title.add\")}`}\r\n        </DialogTitle>\r\n        <Formik\r\n          initialValues={contact}\r\n          enableReinitialize={true}\r\n          validationSchema={ContactSchema}\r\n          onSubmit={(values, actions) => {\r\n            setTimeout(() => {\r\n              handleSaveContact(values);\r\n              actions.setSubmitting(false);\r\n            }, 400);\r\n          }}\r\n        >\r\n          {({ values, errors, touched, isSubmitting }) => (\r\n            <Form>\r\n              <DialogContent dividers>\r\n                <Typography variant=\"subtitle1\" gutterBottom>\r\n                  {i18n.t(\"contactModal.form.mainInfo\")}\r\n                </Typography>\r\n                <Field\r\n                  as={TextField}\r\n                  label={i18n.t(\"contactModal.form.name\")}\r\n                  name=\"name\"\r\n                  autoFocus\r\n                  error={touched.name && Boolean(errors.name)}\r\n                  helperText={touched.name && errors.name}\r\n                  variant=\"outlined\"\r\n                  margin=\"dense\"\r\n                  className={classes.textField}\r\n                />\r\n                <Field\r\n                  as={TextField}\r\n                  label={i18n.t(\"contactModal.form.number\")}\r\n                  name=\"number\"\r\n                  error={touched.number && Boolean(errors.number)}\r\n                  helperText={touched.number && errors.number}\r\n                  placeholder=\"5513912344321\"\r\n                  variant=\"outlined\"\r\n                  margin=\"dense\"\r\n                />\r\n                <div>\r\n                  <Field\r\n                    as={TextField}\r\n                    label={i18n.t(\"contactModal.form.email\")}\r\n                    name=\"email\"\r\n                    error={touched.email && Boolean(errors.email)}\r\n                    helperText={touched.email && errors.email}\r\n                    placeholder=\"Email address\"\r\n                    fullWidth\r\n                    margin=\"dense\"\r\n                    variant=\"outlined\"\r\n                  />\r\n                </div>\r\n              </DialogContent>\r\n              <DialogActions>\r\n                <Button\r\n                  onClick={handleClose}\r\n                  color=\"secondary\"\r\n                  disabled={isSubmitting}\r\n                  variant=\"outlined\"\r\n                >\r\n                  {i18n.t(\"contactModal.buttons.cancel\")}\r\n                </Button>\r\n                <Button\r\n                  type=\"submit\"\r\n                  color=\"primary\"\r\n                  disabled={isSubmitting}\r\n                  variant=\"contained\"\r\n                  className={classes.btnWrapper}\r\n                >\r\n                  {contactId\r\n                    ? `${i18n.t(\"contactModal.buttons.okEdit\")}`\r\n                    : `${i18n.t(\"contactModal.buttons.okAdd\")}`}\r\n                  {isSubmitting && (\r\n                    <CircularProgress\r\n                      size={24}\r\n                      className={classes.buttonProgress}\r\n                    />\r\n                  )}\r\n                </Button>\r\n              </DialogActions>\r\n            </Form>\r\n          )}\r\n        </Formik>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ContactListItemModal;\r\n","import api from \"../../services/api\";\r\n\r\nconst useContactLists = () => {\r\n  const save = async (data) => {\r\n    const { data: responseData } = await api.request({\r\n      url: \"/contact-lists\",\r\n      method: \"POST\",\r\n      data,\r\n    });\r\n    return responseData;\r\n  };\r\n\r\n  const update = async (data) => {\r\n    const { data: responseData } = await api.request({\r\n      url: `/contact-lists/${data.id}`,\r\n      method: \"PUT\",\r\n      data,\r\n    });\r\n    return responseData;\r\n  };\r\n\r\n  const deleteRecord = async (id) => {\r\n    const { data } = await api.request({\r\n      url: `/contact-lists/${id}`,\r\n      method: \"DELETE\",\r\n    });\r\n    return data;\r\n  };\r\n\r\n  const findById = async (id) => {\r\n    const { data } = await api.request({\r\n      url: `/contact-lists/${id}`,\r\n      method: \"GET\",\r\n    });\r\n    return data;\r\n  };\r\n\r\n  const list = async (params) => {\r\n    const { data } = await api.request({\r\n      url: \"/contact-lists/list\",\r\n      method: \"GET\",\r\n      params,\r\n    });\r\n    return data;\r\n  };\r\n\r\n  return {\r\n    findById,\r\n    save,\r\n    update,\r\n    deleteRecord,\r\n    list,\r\n  };\r\n};\r\n\r\nexport default useContactLists;\r\n","import React, {\r\n  useState,\r\n  useEffect,\r\n  useReducer,\r\n  useContext,\r\n  useRef,\r\n} from \"react\";\r\n\r\nimport { toast } from \"react-toastify\";\r\nimport { useParams, useHistory } from \"react-router-dom\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport SearchIcon from \"@material-ui/icons/Search\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\n\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\r\nimport EditIcon from \"@material-ui/icons/Edit\";\r\nimport CheckCircleIcon from \"@material-ui/icons/CheckCircle\";\r\nimport BlockIcon from \"@material-ui/icons/Block\";\r\n\r\nimport api from \"../../services/api\";\r\nimport TableRowSkeleton from \"../../components/TableRowSkeleton\";\r\nimport ContactListItemModal from \"../../components/ContactListItemModal\";\r\nimport ConfirmationModal from \"../../components/ConfirmationModal/\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport MainHeader from \"../../components/MainHeader\";\r\nimport Title from \"../../components/Title\";\r\nimport MainContainer from \"../../components/MainContainer\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\nimport { Can } from \"../../components/Can\";\r\nimport useContactLists from \"../../hooks/useContactLists\";\r\nimport { Grid } from \"@material-ui/core\";\r\n\r\nimport planilhaExemplo from \"../../assets/planilha.xlsx\";\r\nimport { socketConnection } from \"../../services/socket\";\r\n\r\nconst reducer = (state, action) => {\r\n  if (action.type === \"LOAD_CONTACTS\") {\r\n    const contacts = action.payload;\r\n    const newContacts = [];\r\n\r\n    contacts.forEach((contact) => {\r\n      const contactIndex = state.findIndex((c) => c.id === contact.id);\r\n      if (contactIndex !== -1) {\r\n        state[contactIndex] = contact;\r\n      } else {\r\n        newContacts.push(contact);\r\n      }\r\n    });\r\n\r\n    return [...state, ...newContacts];\r\n  }\r\n\r\n  if (action.type === \"UPDATE_CONTACTS\") {\r\n    const contact = action.payload;\r\n    const contactIndex = state.findIndex((c) => c.id === contact.id);\r\n\r\n    if (contactIndex !== -1) {\r\n      state[contactIndex] = contact;\r\n      return [...state];\r\n    } else {\r\n      return [contact, ...state];\r\n    }\r\n  }\r\n\r\n  if (action.type === \"DELETE_CONTACT\") {\r\n    const contactId = action.payload;\r\n\r\n    const contactIndex = state.findIndex((c) => c.id === contactId);\r\n    if (contactIndex !== -1) {\r\n      state.splice(contactIndex, 1);\r\n    }\r\n    return [...state];\r\n  }\r\n\r\n  if (action.type === \"RESET\") {\r\n    return [];\r\n  }\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  mainPaper: {\r\n    flex: 1,\r\n    padding: theme.spacing(1),\r\n    overflowY: \"scroll\",\r\n    ...theme.scrollbarStyles,\r\n  },\r\n}));\r\n\r\nconst ContactListItems = () => {\r\n  const classes = useStyles();\r\n\r\n  const { user } = useContext(AuthContext);\r\n  const { contactListId } = useParams();\r\n  const history = useHistory();\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [pageNumber, setPageNumber] = useState(1);\r\n  const [searchParam, setSearchParam] = useState(\"\");\r\n  const [contacts, dispatch] = useReducer(reducer, []);\r\n  const [selectedContactId, setSelectedContactId] = useState(null);\r\n  const [contactListItemModalOpen, setContactListItemModalOpen] =\r\n    useState(false);\r\n  const [deletingContact, setDeletingContact] = useState(null);\r\n  const [confirmOpen, setConfirmOpen] = useState(false);\r\n  const [hasMore, setHasMore] = useState(false);\r\n  const [contactList, setContactList] = useState({});\r\n  const fileUploadRef = useRef(null);\r\n\r\n  const { findById: findContactList } = useContactLists();\r\n\r\n  useEffect(() => {\r\n    findContactList(contactListId).then((data) => {\r\n      setContactList(data);\r\n    });\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [contactListId]);\r\n\r\n  useEffect(() => {\r\n    dispatch({ type: \"RESET\" });\r\n    setPageNumber(1);\r\n  }, [searchParam]);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    const delayDebounceFn = setTimeout(() => {\r\n      const fetchContacts = async () => {\r\n        try {\r\n          const { data } = await api.get(`contact-list-items`, {\r\n            params: { searchParam, pageNumber, contactListId },\r\n          });\r\n          dispatch({ type: \"LOAD_CONTACTS\", payload: data.contacts });\r\n          setHasMore(data.hasMore);\r\n          setLoading(false);\r\n        } catch (err) {\r\n          toastError(err);\r\n        }\r\n      };\r\n      fetchContacts();\r\n    }, 500);\r\n    return () => clearTimeout(delayDebounceFn);\r\n  }, [searchParam, pageNumber, contactListId]);\r\n\r\n  useEffect(() => {\r\n    const companyId = localStorage.getItem(\"companyId\");\r\n    const socket = socketConnection({ companyId });\r\n\r\n    socket.on(`company-${companyId}-ContactListItem`, (data) => {\r\n      if (data.action === \"update\" || data.action === \"create\") {\r\n        dispatch({ type: \"UPDATE_CONTACTS\", payload: data.record });\r\n      }\r\n\r\n      if (data.action === \"delete\") {\r\n        dispatch({ type: \"DELETE_CONTACT\", payload: +data.id });\r\n      }\r\n\r\n      if (data.action === \"reload\") {\r\n        dispatch({ type: \"LOAD_CONTACTS\", payload: data.records });\r\n      }\r\n    });\r\n\r\n    socket.on(\r\n      `company-${companyId}-ContactListItem-${contactListId}`,\r\n      (data) => {\r\n        if (data.action === \"reload\") {\r\n          dispatch({ type: \"LOAD_CONTACTS\", payload: data.records });\r\n        }\r\n      }\r\n    );\r\n\r\n    return () => {\r\n      socket.disconnect();\r\n    };\r\n  }, [contactListId]);\r\n\r\n  const handleSearch = (event) => {\r\n    setSearchParam(event.target.value.toLowerCase());\r\n  };\r\n\r\n  const handleOpenContactListItemModal = () => {\r\n    setSelectedContactId(null);\r\n    setContactListItemModalOpen(true);\r\n  };\r\n\r\n  const handleCloseContactListItemModal = () => {\r\n    setSelectedContactId(null);\r\n    setContactListItemModalOpen(false);\r\n  };\r\n\r\n  const hadleEditContact = (contactId) => {\r\n    setSelectedContactId(contactId);\r\n    setContactListItemModalOpen(true);\r\n  };\r\n\r\n  const handleDeleteContact = async (contactId) => {\r\n    try {\r\n      await api.delete(`/contact-list-items/${contactId}`);\r\n      toast.success(i18n.t(\"contacts.toasts.deleted\"));\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n    setDeletingContact(null);\r\n    setSearchParam(\"\");\r\n    setPageNumber(1);\r\n  };\r\n\r\n  const handleImportContacts = async () => {\r\n    try {\r\n      const formData = new FormData();\r\n      formData.append(\"file\", fileUploadRef.current.files[0]);\r\n      await api.request({\r\n        url: `contact-lists/${contactListId}/upload`,\r\n        method: \"POST\",\r\n        data: formData,\r\n      });\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n  };\r\n\r\n  const loadMore = () => {\r\n    setPageNumber((prevState) => prevState + 1);\r\n  };\r\n\r\n  const handleScroll = (e) => {\r\n    if (!hasMore || loading) return;\r\n    const { scrollTop, scrollHeight, clientHeight } = e.currentTarget;\r\n    if (scrollHeight - (scrollTop + 100) < clientHeight) {\r\n      loadMore();\r\n    }\r\n  };\r\n\r\n  const goToContactLists = () => {\r\n    history.push(\"/contact-lists\");\r\n  };\r\n\r\n  return (\r\n    <MainContainer className={classes.mainContainer}>\r\n      <ContactListItemModal\r\n        open={contactListItemModalOpen}\r\n        onClose={handleCloseContactListItemModal}\r\n        aria-labelledby=\"form-dialog-title\"\r\n        contactId={selectedContactId}\r\n      ></ContactListItemModal>\r\n      <ConfirmationModal\r\n        title={\r\n          deletingContact\r\n            ? `${i18n.t(\"contactListItems.confirmationModal.deleteTitle\")} ${\r\n                deletingContact.name\r\n              }?`\r\n            : `${i18n.t(\"contactListItems.confirmationModal.importTitlte\")}`\r\n        }\r\n        open={confirmOpen}\r\n        onClose={setConfirmOpen}\r\n        onConfirm={() =>\r\n          deletingContact\r\n            ? handleDeleteContact(deletingContact.id)\r\n            : handleImportContacts()\r\n        }\r\n      >\r\n        {deletingContact ? (\r\n          `${i18n.t(\"contactListItems.confirmationModal.deleteMessage\")}`\r\n        ) : (\r\n          <>\r\n            {i18n.t(\"contactListItems.confirmationModal.importMessage\")}\r\n            <a href={planilhaExemplo} download=\"planilha.xlsx\">\r\n              Clique aqui para baixar planilha exemplo.\r\n            </a>\r\n          </>\r\n        )}\r\n      </ConfirmationModal>\r\n      <MainHeader>\r\n        <Grid style={{ width: \"99.6%\" }} container>\r\n          <Grid xs={12} sm={5} item>\r\n            <Title>{contactList.name}</Title>\r\n          </Grid>\r\n          <Grid xs={12} sm={7} item>\r\n            <Grid spacing={2} container>\r\n              <Grid xs={12} sm={6} item>\r\n                <TextField\r\n                  fullWidth\r\n                  placeholder={i18n.t(\"contactListItems.searchPlaceholder\")}\r\n                  type=\"search\"\r\n                  value={searchParam}\r\n                  onChange={handleSearch}\r\n                  InputProps={{\r\n                    startAdornment: (\r\n                      <InputAdornment position=\"start\">\r\n                        <SearchIcon style={{ color: \"gray\" }} />\r\n                      </InputAdornment>\r\n                    ),\r\n                  }}\r\n                />\r\n              </Grid>\r\n              <Grid xs={4} sm={2} item>\r\n                <Button\r\n                  fullWidth\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  onClick={goToContactLists}\r\n                >\r\n                  {i18n.t(\"contactListItems.buttons.lists\")}\r\n                </Button>\r\n              </Grid>\r\n              <Grid xs={4} sm={2} item>\r\n                <Button\r\n                  fullWidth\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  onClick={() => {\r\n                    fileUploadRef.current.value = null;\r\n                    fileUploadRef.current.click();\r\n                  }}\r\n                >\r\n                  {i18n.t(\"contactListItems.buttons.import\")}\r\n                </Button>\r\n              </Grid>\r\n              <Grid xs={4} sm={2} item>\r\n                <Button\r\n                  fullWidth\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  onClick={handleOpenContactListItemModal}\r\n                >\r\n                  {i18n.t(\"contactListItems.buttons.add\")}\r\n                </Button>\r\n              </Grid>\r\n            </Grid>\r\n          </Grid>\r\n        </Grid>\r\n      </MainHeader>\r\n      <Paper\r\n        className={classes.mainPaper}\r\n        variant=\"outlined\"\r\n        onScroll={handleScroll}\r\n      >\r\n        <>\r\n          <input\r\n            style={{ display: \"none\" }}\r\n            id=\"upload\"\r\n            name=\"file\"\r\n            type=\"file\"\r\n            accept=\".xls,.xlsx\"\r\n            onChange={() => {\r\n              setConfirmOpen(true);\r\n            }}\r\n            ref={fileUploadRef}\r\n          />\r\n        </>\r\n        <Table size=\"small\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell align=\"center\" style={{ width: \"0%\" }}>\r\n                #\r\n              </TableCell>\r\n              <TableCell>{i18n.t(\"contactListItems.table.name\")}</TableCell>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"contactListItems.table.number\")}\r\n              </TableCell>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"contactListItems.table.email\")}\r\n              </TableCell>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"contactListItems.table.actions\")}\r\n              </TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            <>\r\n              {contacts.map((contact) => (\r\n                <TableRow key={contact.id}>\r\n                  <TableCell align=\"center\" style={{ width: \"0%\" }}>\r\n                    <IconButton>\r\n                      {contact.isWhatsappValid ? (\r\n                        <CheckCircleIcon\r\n                          titleAccess=\"Whatsapp Válido\"\r\n                          htmlColor=\"green\"\r\n                        />\r\n                      ) : (\r\n                        <BlockIcon\r\n                          titleAccess=\"Whatsapp Inválido\"\r\n                          htmlColor=\"grey\"\r\n                        />\r\n                      )}\r\n                    </IconButton>\r\n                  </TableCell>\r\n                  <TableCell>{contact.name}</TableCell>\r\n                  <TableCell align=\"center\">{contact.number}</TableCell>\r\n                  <TableCell align=\"center\">{contact.email}</TableCell>\r\n                  <TableCell align=\"center\">\r\n                    <IconButton\r\n                      size=\"small\"\r\n                      onClick={() => hadleEditContact(contact.id)}\r\n                    >\r\n                      <EditIcon />\r\n                    </IconButton>\r\n                    <Can\r\n                      role={user.profile}\r\n                      perform=\"contacts-page:deleteContact\"\r\n                      yes={() => (\r\n                        <IconButton\r\n                          size=\"small\"\r\n                          onClick={() => {\r\n                            setConfirmOpen(true);\r\n                            setDeletingContact(contact);\r\n                          }}\r\n                        >\r\n                          <DeleteOutlineIcon />\r\n                        </IconButton>\r\n                      )}\r\n                    />\r\n                  </TableCell>\r\n                </TableRow>\r\n              ))}\r\n              {loading && <TableRowSkeleton columns={4} />}\r\n            </>\r\n          </TableBody>\r\n        </Table>\r\n      </Paper>\r\n    </MainContainer>\r\n  );\r\n};\r\n\r\nexport default ContactListItems;\r\n","import React, { useContext, useState, useEffect, useRef } from \"react\";\r\n\r\nimport * as Yup from \"yup\";\r\nimport { Formik, Form, Field } from \"formik\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { green } from \"@material-ui/core/colors\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport AttachFileIcon from \"@material-ui/icons/AttachFile\";\r\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport { head } from \"lodash\";\r\nimport api from \"../../services/api\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\nimport MessageVariablesPicker from \"../MessageVariablesPicker\";\r\nimport ButtonWithSpinner from \"../ButtonWithSpinner\";\r\n\r\nimport {\r\n    FormControl,\r\n    Grid,\r\n    InputLabel,\r\n    MenuItem,\r\n    Select,\r\n} from \"@material-ui/core\";\r\nimport ConfirmationModal from \"../ConfirmationModal\";\r\n\r\nconst path = require('path');\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        display: \"flex\",\r\n        flexWrap: \"wrap\",\r\n    },\r\n    multFieldLine: {\r\n        display: \"flex\",\r\n        \"& > *:not(:last-child)\": {\r\n            marginRight: theme.spacing(1),\r\n        },\r\n    },\r\n\r\n    btnWrapper: {\r\n        position: \"relative\",\r\n    },\r\n\r\n    buttonProgress: {\r\n        color: green[500],\r\n        position: \"absolute\",\r\n        top: \"50%\",\r\n        left: \"50%\",\r\n        marginTop: -12,\r\n        marginLeft: -12,\r\n    },\r\n    formControl: {\r\n        margin: theme.spacing(1),\r\n        minWidth: 120,\r\n    },\r\n    colorAdorment: {\r\n        width: 20,\r\n        height: 20,\r\n    },\r\n}));\r\n\r\nconst QuickeMessageSchema = Yup.object().shape({\r\n    shortcode: Yup.string().required(\"Obrigatório\"),\r\n    //   message: Yup.string().required(\"Obrigatório\"),\r\n});\r\n\r\nconst QuickMessageDialog = ({ open, onClose, quickemessageId, reload }) => {\r\n    const classes = useStyles();\r\n    const { user } = useContext(AuthContext);\r\n    const { profile } = user;\r\n    const messageInputRef = useRef();\r\n\r\n    const initialState = {\r\n        shortcode: \"\",\r\n        message: \"\",\r\n        geral: false,\r\n        status: true,\r\n    };\r\n\r\n    const [confirmationOpen, setConfirmationOpen] = useState(false);\r\n    const [quickemessage, setQuickemessage] = useState(initialState);\r\n    const [attachment, setAttachment] = useState(null);\r\n    const attachmentFile = useRef(null);\r\n\r\n    useEffect(() => {\r\n        try {\r\n            (async () => {\r\n                if (!quickemessageId) return;\r\n\r\n                const { data } = await api.get(`/quick-messages/${quickemessageId}`);\r\n\r\n                setQuickemessage((prevState) => {\r\n                    return { ...prevState, ...data };\r\n                });\r\n            })();\r\n        } catch (err) {\r\n            toastError(err);\r\n        }\r\n    }, [quickemessageId, open]);\r\n\r\n    const handleClose = () => {\r\n        setQuickemessage(initialState);\r\n        setAttachment(null);\r\n        onClose();\r\n    };\r\n\r\n    const handleAttachmentFile = (e) => {\r\n      \r\n        const file = head(e.target.files);\r\n        if (file) {\r\n            setAttachment(file);\r\n        }\r\n    };\r\n\r\n    const handleSaveQuickeMessage = async (values) => {\r\n\r\n        const quickemessageData = { ...values, isMedia: true, mediaPath: attachment ? String(attachment.name).replace(/ /g, \"_\") : values.mediaPath ? path.basename(values.mediaPath).replace(/ /g, \"_\") : null };\r\n\r\n        try {\r\n            if (quickemessageId) {\r\n                await api.put(`/quick-messages/${quickemessageId}`, quickemessageData);\r\n                if (attachment != null) {\r\n                    const formData = new FormData();\r\n                    formData.append(\"typeArch\", \"quickMessage\");\r\n                    formData.append(\"file\", attachment);\r\n                    await api.post(\r\n                        `/quick-messages/${quickemessageId}/media-upload`,\r\n                        formData\r\n                    );\r\n                }\r\n            } else {\r\n                const { data } = await api.post(\"/quick-messages\", quickemessageData);\r\n                if (attachment != null) {\r\n                    const formData = new FormData();\r\n                    formData.append(\"typeArch\", \"quickMessage\");\r\n                    formData.append(\"file\", attachment);\r\n                    await api.post(`/quick-messages/${data.id}/media-upload`, formData);\r\n                }\r\n            }\r\n            toast.success(i18n.t(\"quickMessages.toasts.success\"));\r\n            if (typeof reload == \"function\") {\r\n\r\n                reload();\r\n            }\r\n        } catch (err) {\r\n            toastError(err);\r\n        }\r\n        handleClose();\r\n    };\r\n\r\n    const deleteMedia = async () => {\r\n        if (attachment) {\r\n            setAttachment(null);\r\n            attachmentFile.current.value = null;\r\n        }\r\n\r\n        if (quickemessage.mediaPath) {\r\n            await api.delete(`/quick-messages/${quickemessage.id}/media-upload`);\r\n            setQuickemessage((prev) => ({\r\n                ...prev,\r\n                mediaPath: null,\r\n            }));\r\n            toast.success(i18n.t(\"quickMessages.toasts.deleted\"));\r\n            if (typeof reload == \"function\") {\r\n\r\n                reload();\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleClickMsgVar = async (msgVar, setValueFunc) => {\r\n        const el = messageInputRef.current;\r\n        const firstHalfText = el.value.substring(0, el.selectionStart);\r\n        const secondHalfText = el.value.substring(el.selectionEnd);\r\n        const newCursorPos = el.selectionStart + msgVar.length;\r\n\r\n        setValueFunc(\"message\", `${firstHalfText}${msgVar}${secondHalfText}`);\r\n\r\n        await new Promise(r => setTimeout(r, 100));\r\n        messageInputRef.current.setSelectionRange(newCursorPos, newCursorPos);\r\n    };\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <ConfirmationModal\r\n                title={i18n.t(\"quickMessages.confirmationModal.deleteTitle\")}\r\n                open={confirmationOpen}\r\n                onClose={() => setConfirmationOpen(false)}\r\n                onConfirm={deleteMedia}\r\n            >\r\n                {i18n.t(\"quickMessages.confirmationModal.deleteMessage\")}\r\n            </ConfirmationModal>\r\n            <Dialog\r\n                open={open}\r\n                onClose={handleClose}\r\n                maxWidth=\"xs\"\r\n                fullWidth\r\n                scroll=\"paper\"\r\n            >\r\n                <DialogTitle id=\"form-dialog-title\">\r\n                    {quickemessageId\r\n                        ? `${i18n.t(\"quickMessages.dialog.edit\")}`\r\n                        : `${i18n.t(\"quickMessages.dialog.add\")}`}\r\n                </DialogTitle>\r\n                <div style={{ display: \"none\" }}>\r\n                    <input\r\n                        type=\"file\"\r\n                        ref={attachmentFile}\r\n                        onChange={(e) => handleAttachmentFile(e)}\r\n                    />\r\n                </div>\r\n                <Formik\r\n                    initialValues={quickemessage}\r\n                    enableReinitialize={true}\r\n                    validationSchema={QuickeMessageSchema}\r\n                    onSubmit={(values, actions) => {\r\n                        setTimeout(() => {\r\n                            handleSaveQuickeMessage(values);\r\n                            actions.setSubmitting(false);\r\n                        }, 400);\r\n                    }}\r\n                >\r\n                    {({ touched, errors, isSubmitting, setFieldValue, values }) => (\r\n                        <Form>\r\n                            <DialogContent dividers>\r\n                                <Grid spacing={2} container>\r\n                                    <Grid xs={12} item>\r\n                                        <Field\r\n                                            as={TextField}\r\n                                            autoFocus\r\n                                            label={i18n.t(\"quickMessages.dialog.shortcode\")}\r\n                                            name=\"shortcode\"\r\n                                            error={touched.shortcode && Boolean(errors.shortcode)}\r\n                                            helperText={touched.shortcode && errors.shortcode}\r\n                                            variant=\"outlined\"\r\n                                            margin=\"dense\"\r\n                                            fullWidth\r\n                                        />\r\n                                    </Grid>\r\n                                    <Grid xs={12} item>\r\n                                        <Field\r\n                                            as={TextField}\r\n                                            label={i18n.t(\"quickMessages.dialog.message\")}\r\n                                            name=\"message\"\r\n                                            inputRef={messageInputRef}\r\n                                            error={touched.message && Boolean(errors.message)}\r\n                                            helperText={touched.message && errors.message}\r\n                                            variant=\"outlined\"\r\n                                            margin=\"dense\"\r\n                                            multiline={true}\r\n                                            rows={7}\r\n                                            fullWidth\r\n                                        // disabled={quickemessage.mediaPath || attachment ? true : false}\r\n                                        />\r\n                                    </Grid>\r\n                                    <Grid item>\r\n                                        <MessageVariablesPicker\r\n                                            disabled={isSubmitting}\r\n                                            onClick={value => handleClickMsgVar(value, setFieldValue)}\r\n                                        />\r\n                                    </Grid>\r\n                                    {(quickemessage.mediaPath || attachment) && (\r\n                                        <Grid xs={12} item>\r\n                                            <Button startIcon={<AttachFileIcon />}>\r\n                                                {attachment ? attachment.name : quickemessage.mediaName}\r\n                                            </Button>\r\n                                            <IconButton\r\n                                                onClick={() => setConfirmationOpen(true)}\r\n                                                color=\"secondary\"\r\n                                            >\r\n                                                <DeleteOutlineIcon color=\"secondary\" />\r\n                                            </IconButton>\r\n                                        </Grid>\r\n                                    )}\r\n                                </Grid>\r\n                            </DialogContent>\r\n                            <DialogActions>\r\n                                {!attachment && !quickemessage.mediaPath && (\r\n                                    <Button\r\n                                        color=\"primary\"\r\n                                        onClick={() => attachmentFile.current.click()}\r\n                                        disabled={isSubmitting}\r\n                                        variant=\"outlined\"\r\n                                    >\r\n                                        {i18n.t(\"quickMessages.buttons.attach\")}\r\n                                    </Button>\r\n                                )}\r\n                                <Button\r\n                                    onClick={handleClose}\r\n                                    color=\"secondary\"\r\n                                    disabled={isSubmitting}\r\n                                    variant=\"outlined\"\r\n                                >\r\n                                    {i18n.t(\"quickMessages.buttons.cancel\")}\r\n                                </Button>\r\n                                <Button\r\n                                    type=\"submit\"\r\n                                    color=\"primary\"\r\n                                    disabled={isSubmitting}\r\n                                    variant=\"contained\"\r\n                                    className={classes.btnWrapper}\r\n                                >\r\n                                    {quickemessageId\r\n                                        ? `${i18n.t(\"quickMessages.buttons.edit\")}`\r\n                                        : `${i18n.t(\"quickMessages.buttons.add\")}`}\r\n                                    {isSubmitting && (\r\n                                        <CircularProgress\r\n                                            size={24}\r\n                                            className={classes.buttonProgress}\r\n                                        />\r\n                                    )}\r\n                                </Button>\r\n                            </DialogActions>\r\n                        </Form>\r\n                    )}\r\n                </Formik>\r\n            </Dialog>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default QuickMessageDialog;","import React, { useState, useEffect, useReducer, useContext, useCallback } from \"react\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport SearchIcon from \"@material-ui/icons/Search\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\r\n\r\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\r\nimport EditIcon from \"@material-ui/icons/Edit\";\r\n\r\nimport MainContainer from \"../../components/MainContainer\";\r\nimport MainHeader from \"../../components/MainHeader\";\r\nimport Title from \"../../components/Title\";\r\n\r\nimport api from \"../../services/api\";\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport TableRowSkeleton from \"../../components/TableRowSkeleton\";\r\nimport QuickMessageDialog from \"../../components/QuickMessageDialog\";\r\nimport ConfirmationModal from \"../../components/ConfirmationModal\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport { Grid } from \"@material-ui/core\";\r\nimport { isArray } from \"lodash\";\r\nimport { socketConnection } from \"../../services/socket\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\n\r\n\r\nconst reducer = (state, action) => {\r\n  if (action.type === \"LOAD_QUICKMESSAGES\") {\r\n    //console.log(\"aqui\");\r\n    //console.log(action);\r\n    //console.log(action.payload);\r\n    const quickmessages = action.payload;\r\n    const newQuickmessages = [];\r\n    //console.log(newQuickmessages);\r\n\r\n    if (isArray(quickmessages)) {\r\n      quickmessages.forEach((quickemessage) => {\r\n        const quickemessageIndex = state.findIndex(\r\n          (u) => u.id === quickemessage.id\r\n        );\r\n        if (quickemessageIndex !== -1) {\r\n          state[quickemessageIndex] = quickemessage;\r\n        } else {\r\n          newQuickmessages.push(quickemessage);\r\n        }\r\n      });\r\n    }\r\n\r\n    return [...state, ...newQuickmessages];\r\n  }\r\n\r\n  if (action.type === \"UPDATE_QUICKMESSAGES\") {\r\n    const quickemessage = action.payload;\r\n    const quickemessageIndex = state.findIndex((u) => u.id === quickemessage.id);\r\n\r\n    if (quickemessageIndex !== -1) {\r\n      state[quickemessageIndex] = quickemessage;\r\n      return [...state];\r\n    } else {\r\n      return [quickemessage, ...state];\r\n    }\r\n  }\r\n\r\n  if (action.type === \"DELETE_QUICKMESSAGE\") {\r\n    const quickemessageId = action.payload;\r\n\r\n    const quickemessageIndex = state.findIndex((u) => u.id === quickemessageId);\r\n    if (quickemessageIndex !== -1) {\r\n      state.splice(quickemessageIndex, 1);\r\n    }\r\n    return [...state];\r\n  }\r\n\r\n  if (action.type === \"RESET\") {\r\n    return [];\r\n  }\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  mainPaper: {\r\n    flex: 1,\r\n    padding: theme.spacing(1),\r\n    overflowY: \"scroll\",\r\n    ...theme.scrollbarStyles,\r\n  },\r\n}));\r\n\r\nconst Quickemessages = () => {\r\n  const classes = useStyles();\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [pageNumber, setPageNumber] = useState(1);\r\n  const [hasMore, setHasMore] = useState(false);\r\n  const [selectedQuickemessage, setSelectedQuickemessage] = useState(null);\r\n  const [deletingQuickemessage, setDeletingQuickemessage] = useState(null);\r\n  const [quickemessageModalOpen, setQuickMessageDialogOpen] = useState(false);\r\n  const [confirmModalOpen, setConfirmModalOpen] = useState(false);\r\n  const [searchParam, setSearchParam] = useState(\"\");\r\n  const [quickemessages, dispatch] = useReducer(reducer, []);\r\n  const { user } = useContext(AuthContext);\r\n  const { profile } = user;\r\n\r\n  useEffect(() => {\r\n    dispatch({ type: \"RESET\" });\r\n    setPageNumber(1);\r\n  }, [searchParam]);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    const delayDebounceFn = setTimeout(() => {\r\n      fetchQuickemessages();\r\n    }, 500);\r\n    return () => clearTimeout(delayDebounceFn);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [searchParam, pageNumber]);\r\n\r\n  useEffect(() => {\r\n    const companyId = user.companyId;\r\n    const socket = socketConnection({ companyId, userId: user.id });\r\n\r\n    socket.on(`company${companyId}-quickemessage`, (data) => {\r\n      if (data.action === \"update\" || data.action === \"create\") {\r\n        dispatch({ type: \"UPDATE_QUICKMESSAGES\", payload: data.record });\r\n      }\r\n      if (data.action === \"delete\") {\r\n        dispatch({ type: \"DELETE_QUICKMESSAGE\", payload: +data.id });\r\n      }\r\n    });\r\n    return () => {\r\n      socket.disconnect();\r\n    };\r\n  }, []);\r\n\r\n  const fetchQuickemessages = async () => {\r\n    try {\r\n      const companyId = user.companyId;\r\n      //const searchParam = ({ companyId, userId: user.id });\r\n      const { data } = await api.get(\"/quick-messages\", {\r\n        params: { searchParam, pageNumber, userId: user.id },\r\n      });\r\n\r\n      dispatch({ type: \"LOAD_QUICKMESSAGES\", payload: data.records });\r\n      setHasMore(data.hasMore);\r\n      setLoading(false);\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n  };\r\n\r\n  const handleOpenQuickMessageDialog = () => {\r\n    setSelectedQuickemessage(null);\r\n    setQuickMessageDialogOpen(true);\r\n  };\r\n\r\n  const handleCloseQuickMessageDialog = () => {\r\n    setSelectedQuickemessage(null);\r\n    setQuickMessageDialogOpen(false);\r\n    //window.location.reload();\r\n    fetchQuickemessages();\r\n  };\r\n\r\n  const handleSearch = (event) => {\r\n    setSearchParam(event.target.value.toLowerCase());\r\n  };\r\n\r\n  const handleEditQuickemessage = (quickemessage) => {\r\n    //console.log(quickemessage);\r\n    setSelectedQuickemessage(quickemessage);\r\n    setQuickMessageDialogOpen(true);\r\n  };\r\n\r\n  const handleDeleteQuickemessage = async (quickemessageId) => {\r\n    try {\r\n      await api.delete(`/quick-messages/${quickemessageId}`);\r\n      toast.success(i18n.t(\"quickemessages.toasts.deleted\"));\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n    setDeletingQuickemessage(null);\r\n    setSearchParam(\"\");\r\n    setPageNumber(1);\r\n    fetchQuickemessages();\r\n    dispatch({ type: \"RESET\" });\r\n\r\n  };\r\n\r\n  const loadMore = () => {\r\n    setPageNumber((prevState) => prevState + 1);\r\n  };\r\n\r\n  const handleScroll = (e) => {\r\n    if (!hasMore || loading) return;\r\n    const { scrollTop, scrollHeight, clientHeight } = e.currentTarget;\r\n    if (scrollHeight - (scrollTop + 100) < clientHeight) {\r\n      loadMore();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <MainContainer>\r\n      <ConfirmationModal\r\n        title={deletingQuickemessage && `${i18n.t(\"quickMessages.confirmationModal.deleteTitle\")} ${deletingQuickemessage.shortcode}?`}\r\n        open={confirmModalOpen}\r\n        onClose={setConfirmModalOpen}\r\n        onConfirm={() => handleDeleteQuickemessage(deletingQuickemessage.id)}\r\n      >\r\n        {i18n.t(\"quickMessages.confirmationModal.deleteMessage\")}\r\n      </ConfirmationModal>\r\n      <QuickMessageDialog\r\n        resetPagination={() => {\r\n          setPageNumber(1);\r\n          fetchQuickemessages();\r\n        }}\r\n        open={quickemessageModalOpen}\r\n        onClose={handleCloseQuickMessageDialog}\r\n        aria-labelledby=\"form-dialog-title\"\r\n        quickemessageId={selectedQuickemessage && selectedQuickemessage.id}\r\n      />\r\n      <MainHeader>\r\n        <Grid style={{ width: \"99.6%\" }} container>\r\n          <Grid xs={12} sm={8} item>\r\n            <Title>{i18n.t(\"quickMessages.title\")}</Title>\r\n          </Grid>\r\n          <Grid xs={12} sm={4} item>\r\n            <Grid spacing={2} container>\r\n              <Grid xs={6} sm={6} item>\r\n                <TextField\r\n                  fullWidth\r\n                  placeholder={i18n.t(\"quickMessages.searchPlaceholder\")}\r\n                  type=\"search\"\r\n                  value={searchParam}\r\n                  onChange={handleSearch}\r\n                  InputProps={{\r\n                    startAdornment: (\r\n                      <InputAdornment position=\"start\">\r\n                        <SearchIcon style={{ color: \"gray\" }} />\r\n                      </InputAdornment>\r\n                    ),\r\n                  }}\r\n                />\r\n              </Grid>\r\n              <Grid xs={6} sm={6} item>\r\n                <Button\r\n                  fullWidth\r\n                  variant=\"contained\"\r\n                  onClick={handleOpenQuickMessageDialog}\r\n                  color=\"primary\"\r\n                >\r\n                  {i18n.t(\"quickMessages.buttons.add\")}\r\n                </Button>\r\n              </Grid>\r\n            </Grid>\r\n          </Grid>\r\n        </Grid>\r\n      </MainHeader>\r\n      <Paper\r\n        className={classes.mainPaper}\r\n        variant=\"outlined\"\r\n        onScroll={handleScroll}\r\n      >\r\n        <Table size=\"small\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"quickMessages.table.shortcode\")}\r\n              </TableCell>\r\n\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"quickMessages.table.mediaName\")}\r\n              </TableCell>        \r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"quickMessages.table.actions\")}\r\n              </TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            <>\r\n              {quickemessages.map((quickemessage) => (\r\n                <TableRow key={quickemessage.id}>\r\n                  <TableCell align=\"center\">{quickemessage.shortcode}</TableCell>\r\n\r\n                  <TableCell align=\"center\">\r\n                    {quickemessage.mediaName ?? i18n.t(\"quickMessages.noAttachment\")}\r\n                  </TableCell>\r\n                  <TableCell align=\"center\">\r\n                    <IconButton\r\n                      size=\"small\"\r\n                      onClick={() => handleEditQuickemessage(quickemessage)}\r\n                    >\r\n                      <EditIcon />\r\n                    </IconButton>\r\n\r\n\r\n                    <IconButton\r\n                      size=\"small\"\r\n                      onClick={(e) => {\r\n                        setConfirmModalOpen(true);\r\n                        setDeletingQuickemessage(quickemessage);\r\n                      }}\r\n                    >\r\n                      <DeleteOutlineIcon />\r\n                    </IconButton>\r\n                  </TableCell>\r\n                </TableRow>\r\n              ))}\r\n              {loading && <TableRowSkeleton columns={5} />}\r\n            </>\r\n          </TableBody>\r\n        </Table>\r\n      </Paper>\r\n    </MainContainer>\r\n  );\r\n};\r\n\r\nexport default Quickemessages;","import React, { useState, useEffect, useReducer, useContext, useCallback } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport api from \"../../services/api\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\nimport Board from 'react-trello';\r\nimport { toast } from \"react-toastify\";\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport { useHistory } from 'react-router-dom';\r\nimport { socketConnection } from \"../../services/socket\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    padding: theme.spacing(1),\r\n  },\r\n  button: {\r\n    background: \"#10a110\",\r\n    border: \"none\",\r\n    padding: \"10px\",\r\n    color: \"white\",\r\n    fontWeight: \"bold\",\r\n    borderRadius: \"5px\",\r\n  },\r\n  \r\n}));\r\n\r\nconst Kanban = () => {\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n\r\n  const [tags, setTags] = useState([]);\r\n  const [reloadData, setReloadData] = useState(false);\r\n  const [isInitialLoadComplete, setIsInitialLoadComplete] = useState(false);\r\n\r\n\r\n  const fetchTags = async () => {\r\n    try {\r\n      const response = await api.get(\"/tags/kanban\");\r\n      const fetchedTags = response.data.lista || []; \r\n\r\n      setTags(fetchedTags);\r\n\r\n      // Fetch tickets after fetching tags\r\n      await fetchTickets(jsonString);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchTags();\r\n  }, []);\r\n\r\n  const [file, setFile] = useState({\r\n    lanes: []\r\n  });\r\n\r\n\r\n  const [tickets, setTickets] = useState([]);\r\n  const { user } = useContext(AuthContext);\r\n  const { profile, queues } = user;\r\n  const jsonString = user.queues.map(queue => queue.UserQueue.queueId);\r\n\r\n  const fetchTickets = async (jsonString) => {\r\n    try {\r\n      \r\n      const { data } = await api.get(\"/ticket/kanban\", {\r\n        params: {\r\n          queueIds: JSON.stringify(jsonString),\r\n          teste: true\r\n        }\r\n      });\r\n      setTickets(data.tickets);\r\n    } catch (err) {\r\n      console.log(err);\r\n      setTickets([]);\r\n    }\r\n  };\r\n\r\n\r\n  const popularCards = (jsonString) => {\r\n    const filteredTickets = tickets.filter(ticket => ticket.tags.length === 0);\r\n\r\n    const lanes = [\r\n      {\r\n        id: \"lane0\",\r\n        title: i18n.t(\"Em aberto\"),\r\n        label: \"0\",\r\n        cards: filteredTickets.map(ticket => ({\r\n          id: ticket.id.toString(),\r\n          label: \"Ticket nº \" + ticket.id.toString(),\r\n          description: (\r\n              <div>\r\n                <p>\r\n                  {ticket.contact.number}\r\n                  <br />\r\n                  {ticket.lastMessage}\r\n                </p>\r\n                <button \r\n                  className={classes.button} \r\n                  onClick={() => {\r\n                    handleCardClick(ticket.uuid)\r\n                  }}>\r\n                    Ver Ticket\r\n                </button>\r\n              </div>\r\n            ),\r\n          title: ticket.contact.name,\r\n          draggable: true,\r\n          href: \"/tickets/\" + ticket.uuid,\r\n        })),\r\n      },\r\n      ...tags.map(tag => {\r\n        const filteredTickets = tickets.filter(ticket => {\r\n          const tagIds = ticket.tags.map(tag => tag.id);\r\n          return tagIds.includes(tag.id);\r\n        });\r\n\r\n        return {\r\n          id: tag.id.toString(),\r\n          title: tag.name,\r\n          label: tag.id.toString(),\r\n          cards: filteredTickets.map(ticket => ({\r\n            id: ticket.id.toString(),\r\n            label: \"Ticket nº \" + ticket.id.toString(),\r\n            description: (\r\n              <div>\r\n                <p>\r\n                  {ticket.contact.number}\r\n                  <br />\r\n                  {ticket.lastMessage}\r\n                </p>\r\n                <button \r\n                  className={classes.button} \r\n                  onClick={() => {\r\n                    \r\n                    handleCardClick(ticket.uuid)\r\n                  }}>\r\n                    Ver Ticket\r\n                </button>\r\n              </div>\r\n            ),\r\n            title: ticket.contact.name,\r\n            draggable: true,\r\n            href: \"/tickets/\" + ticket.uuid,          \r\n          })),\r\n          style: { backgroundColor: tag.color, color: \"white\" }\r\n        };\r\n      }),\r\n    ];\r\n\r\n    setFile({ lanes });\r\n  };\r\n\r\n  const handleCardClick = (uuid) => {  \r\n    //console.log(\"Clicked on card with UUID:\", uuid);\r\n    history.push('/tickets/' + uuid);\r\n  };\r\n\r\n  useEffect(() => {\r\n    popularCards(jsonString);\r\n}, [tags, tickets, reloadData]);\r\n\r\n  const handleCardMove = async (cardId, sourceLaneId, targetLaneId) => {\r\n    try {\r\n        \r\n          await api.delete(`/ticket-tags/${targetLaneId}`);\r\n        toast.success('Ticket Tag Removido!');\r\n          await api.put(`/ticket-tags/${targetLaneId}/${sourceLaneId}`);\r\n        toast.success('Ticket Tag Adicionado com Sucesso!');\r\n\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Board \r\n\t\tdata={file} \r\n\t\tonCardMoveAcrossLanes={handleCardMove}\r\n\t\tstyle={{backgroundColor: 'rgba(252, 252, 252, 0.03)'}}\r\n    />\r\n    </div>\r\n  );\r\n};\r\n\r\n\r\nexport default Kanban;\r\n","import React, { useContext } from \"react\";\r\nimport { Route as RouterRoute, Redirect } from \"react-router-dom\";\r\n\r\nimport { AuthContext } from \"../context/Auth/AuthContext\";\r\nimport BackdropLoading from \"../components/BackdropLoading\";\r\n\r\nconst Route = ({ component: Component, isPrivate = false, ...rest }) => {\r\n\tconst { isAuth, loading } = useContext(AuthContext);\r\n\r\n\tif (!isAuth && isPrivate) {\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t{loading && <BackdropLoading />}\r\n\t\t\t\t<Redirect to={{ pathname: \"/login\", state: { from: rest.location } }} />\r\n\t\t\t</>\r\n\t\t);\r\n\t}\r\n\r\n\tif (isAuth && !isPrivate) {\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t{loading && <BackdropLoading />}\r\n\t\t\t\t<Redirect to={{ pathname: \"/\", state: { from: rest.location } }} />;\r\n\t\t\t</>\r\n\t\t);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{loading && <BackdropLoading />}\r\n\t\t\t<RouterRoute {...rest} component={Component} />\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default Route;\r\n","import React, { useState, useEffect, useReducer, useCallback, useContext } from \"react\";\r\nimport { toast } from \"react-toastify\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport MainContainer from \"../../components/MainContainer\";\r\nimport MainHeader from \"../../components/MainHeader\";\r\nimport Title from \"../../components/Title\";\r\nimport api from \"../../services/api\";\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport MainHeaderButtonsWrapper from \"../../components/MainHeaderButtonsWrapper\";\r\nimport ScheduleModal from \"../../components/ScheduleModal\";\r\nimport ConfirmationModal from \"../../components/ConfirmationModal\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport moment from \"moment\";\r\nimport { socketConnection } from \"../../services/socket\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\nimport usePlans from \"../../hooks/usePlans\";\r\nimport { Calendar, momentLocalizer } from \"react-big-calendar\";\r\nimport \"moment/locale/pt-br\";\r\nimport \"react-big-calendar/lib/css/react-big-calendar.css\";\r\nimport SearchIcon from \"@material-ui/icons/Search\";\r\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\r\nimport EditIcon from \"@material-ui/icons/Edit\";\r\n\r\nimport \"./Schedules.css\"; // Importe o arquivo CSS\r\n\r\n// Defina a função getUrlParam antes de usá-la\r\nfunction getUrlParam(paramName) {\r\n  const searchParams = new URLSearchParams(window.location.search);\r\n  return searchParams.get(paramName);\r\n}\r\n\r\nconst eventTitleStyle = {\r\n  fontSize: \"14px\", // Defina um tamanho de fonte menor\r\n  overflow: \"hidden\", // Oculte qualquer conteúdo excedente\r\n  whiteSpace: \"nowrap\", // Evite a quebra de linha do texto\r\n  textOverflow: \"ellipsis\", // Exiba \"...\" se o texto for muito longo\r\n};\r\n\r\nconst localizer = momentLocalizer(moment);\r\nvar defaultMessages = {\r\n  date: \"Data\",\r\n  time: \"Hora\",\r\n  event: \"Evento\",\r\n  allDay: \"Dia Todo\",\r\n  week: \"Semana\",\r\n  work_week: \"Agendamentos\",\r\n  day: \"Dia\",\r\n  month: \"Mês\",\r\n  previous: \"Anterior\",\r\n  next: \"Próximo\",\r\n  yesterday: \"Ontem\",\r\n  tomorrow: \"Amanhã\",\r\n  today: \"Hoje\",\r\n  agenda: \"Agenda\",\r\n  noEventsInRange: \"Não há agendamentos no período.\",\r\n  showMore: function showMore(total) {\r\n    return \"+\" + total + \" mais\";\r\n  }\r\n};\r\n\r\nconst reducer = (state, action) => {\r\n  if (action.type === \"LOAD_SCHEDULES\") {\r\n    return [...state, ...action.payload];\r\n  }\r\n\r\n  if (action.type === \"UPDATE_SCHEDULES\") {\r\n    const schedule = action.payload;\r\n    const scheduleIndex = state.findIndex((s) => s.id === schedule.id);\r\n\r\n    if (scheduleIndex !== -1) {\r\n      state[scheduleIndex] = schedule;\r\n      return [...state];\r\n    } else {\r\n      return [schedule, ...state];\r\n    }\r\n  }\r\n\r\n  if (action.type === \"DELETE_SCHEDULE\") {\r\n    const scheduleId = action.payload;\r\n    return state.filter((s) => s.id !== scheduleId);\r\n  }\r\n\r\n  if (action.type === \"RESET\") {\r\n    return [];\r\n  }\r\n\r\n  return state;\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  mainPaper: {\r\n    flex: 1,\r\n    padding: theme.spacing(1),\r\n    overflowY: \"scroll\",\r\n    ...theme.scrollbarStyles,\r\n  },\r\n}));\r\n\r\nconst Schedules = () => {\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n\r\n  const { user } = useContext(AuthContext);\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [pageNumber, setPageNumber] = useState(1);\r\n  const [hasMore, setHasMore] = useState(false);\r\n  const [selectedSchedule, setSelectedSchedule] = useState(null);\r\n  const [deletingSchedule, setDeletingSchedule] = useState(null);\r\n  const [confirmModalOpen, setConfirmModalOpen] = useState(false);\r\n  const [searchParam, setSearchParam] = useState(\"\");\r\n  const [schedules, dispatch] = useReducer(reducer, []);\r\n  const [scheduleModalOpen, setScheduleModalOpen] = useState(false);\r\n  const [contactId, setContactId] = useState(+getUrlParam(\"contactId\"));\r\n\r\n\r\n  const fetchSchedules = useCallback(async () => {\r\n    try {\r\n      const { data } = await api.get(\"/schedules/\", {\r\n        params: { searchParam, pageNumber },\r\n      });\r\n\r\n      dispatch({ type: \"LOAD_SCHEDULES\", payload: data.schedules });\r\n      setHasMore(data.hasMore);\r\n      setLoading(false);\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n  }, [searchParam, pageNumber]);\r\n\r\n  const handleOpenScheduleModalFromContactId = useCallback(() => {\r\n    if (contactId) {\r\n      handleOpenScheduleModal();\r\n    }\r\n  }, [contactId]);\r\n\r\n  useEffect(() => {\r\n    dispatch({ type: \"RESET\" });\r\n    setPageNumber(1);\r\n  }, [searchParam]);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    const delayDebounceFn = setTimeout(() => {\r\n      fetchSchedules();\r\n    }, 500);\r\n    return () => clearTimeout(delayDebounceFn);\r\n  }, [\r\n    searchParam,\r\n    pageNumber,\r\n    contactId,\r\n    fetchSchedules,\r\n    handleOpenScheduleModalFromContactId,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    handleOpenScheduleModalFromContactId();\r\n    const socket = socketConnection({ companyId: user.companyId });\r\n\r\n    socket.on(`company${user.companyId}-schedule`, (data) => {\r\n      if (data.action === \"update\" || data.action === \"create\") {\r\n        dispatch({ type: \"UPDATE_SCHEDULES\", payload: data.schedule });\r\n      }\r\n\r\n      if (data.action === \"delete\") {\r\n        dispatch({ type: \"DELETE_SCHEDULE\", payload: +data.scheduleId });\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      socket.disconnect();\r\n    };\r\n  }, [handleOpenScheduleModalFromContactId, user]);\r\n\r\n  const cleanContact = () => {\r\n    setContactId(\"\");\r\n  };\r\n\r\n  const handleOpenScheduleModal = () => {\r\n    setSelectedSchedule(null);\r\n    setScheduleModalOpen(true);\r\n  };\r\n\r\n  const handleCloseScheduleModal = () => {\r\n    setSelectedSchedule(null);\r\n    setScheduleModalOpen(false);\r\n  };\r\n\r\n  const handleSearch = (event) => {\r\n    setSearchParam(event.target.value.toLowerCase());\r\n  };\r\n\r\n  const handleEditSchedule = (schedule) => {\r\n    setSelectedSchedule(schedule);\r\n    setScheduleModalOpen(true);\r\n  };\r\n\r\n  const handleDeleteSchedule = async (scheduleId) => {\r\n    try {\r\n      await api.delete(`/schedules/${scheduleId}`);\r\n      toast.success(i18n.t(\"schedules.toasts.deleted\"));\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n    setDeletingSchedule(null);\r\n    setSearchParam(\"\");\r\n    setPageNumber(1);\r\n\r\n    dispatch({ type: \"RESET\" });\r\n    setPageNumber(1);\r\n    await fetchSchedules();\r\n  };\r\n\r\n  const loadMore = () => {\r\n    setPageNumber((prevState) => prevState + 1);\r\n  };\r\n\r\n  const handleScroll = (e) => {\r\n    if (!hasMore || loading) return;\r\n    const { scrollTop, scrollHeight, clientHeight } = e.currentTarget;\r\n    if (scrollHeight - (scrollTop + 100) < clientHeight) {\r\n      loadMore();\r\n    }\r\n  };\r\n\r\n  const truncate = (str, len) => {\r\n    if (str.length > len) {\r\n      return str.substring(0, len) + \"...\";\r\n    }\r\n    return str;\r\n  };\r\n\r\n  return (\r\n    <MainContainer>\r\n      <ConfirmationModal\r\n        title={\r\n          deletingSchedule &&\r\n          `${i18n.t(\"schedules.confirmationModal.deleteTitle\")}`\r\n        }\r\n        open={confirmModalOpen}\r\n        onClose={() => setConfirmModalOpen(false)}\r\n        onConfirm={() => handleDeleteSchedule(deletingSchedule.id)}\r\n      >\r\n        {i18n.t(\"schedules.confirmationModal.deleteMessage\")}\r\n      </ConfirmationModal>\r\n      <ScheduleModal\r\n        open={scheduleModalOpen}\r\n        onClose={handleCloseScheduleModal}\r\n        reload={fetchSchedules}\r\n        aria-labelledby=\"form-dialog-title\"\r\n        scheduleId={selectedSchedule && selectedSchedule.id}\r\n        contactId={contactId}\r\n        cleanContact={cleanContact}\r\n      />\r\n      <MainHeader>\r\n        <Title>{i18n.t(\"schedules.title\")} ({schedules.length})</Title>\r\n        <MainHeaderButtonsWrapper>\r\n          <TextField\r\n            placeholder={i18n.t(\"contacts.searchPlaceholder\")}\r\n            type=\"search\"\r\n            value={searchParam}\r\n            onChange={handleSearch}\r\n            InputProps={{\r\n              startAdornment: (\r\n                <InputAdornment position=\"start\">\r\n                  <SearchIcon style={{ color: \"gray\" }} />\r\n                </InputAdornment>\r\n              ),\r\n            }}\r\n          />\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            onClick={handleOpenScheduleModal}\r\n          >\r\n            {i18n.t(\"schedules.buttons.add\")}\r\n          </Button>\r\n        </MainHeaderButtonsWrapper>\r\n      </MainHeader>\r\n      <Paper className={classes.mainPaper} variant=\"outlined\" onScroll={handleScroll}>\r\n        <Calendar\r\n          messages={defaultMessages}\r\n          formats={{\r\n          agendaDateFormat: \"DD/MM ddd\",\r\n          weekdayFormat: \"dddd\"\r\n      }}\r\n          localizer={localizer}\r\n          events={schedules.map((schedule) => ({\r\n            title: (\r\n              <div className=\"event-container\">\r\n                <div style={eventTitleStyle}>{schedule.contact.name}</div>\r\n                <DeleteOutlineIcon\r\n                  onClick={() => handleDeleteSchedule(schedule.id)}\r\n                  className=\"delete-icon\"\r\n                />\r\n                <EditIcon\r\n                  onClick={() => {\r\n                    handleEditSchedule(schedule);\r\n                    setScheduleModalOpen(true);\r\n                  }}\r\n                  className=\"edit-icon\"\r\n                />\r\n              </div>\r\n            ),\r\n            start: new Date(schedule.sendAt),\r\n            end: new Date(schedule.sendAt),\r\n          }))}\r\n          startAccessor=\"start\"\r\n          endAccessor=\"end\"\r\n          style={{ height: 500 }}\r\n        />\r\n      </Paper>\r\n    </MainContainer>\r\n  );\r\n};\r\n\r\nexport default Schedules;","import React, { useState, useEffect, useRef, useContext } from \"react\";\r\n\r\nimport * as Yup from \"yup\";\r\nimport { Formik, Form, Field } from \"formik\";\r\nimport { toast } from \"react-toastify\";\r\nimport { head } from \"lodash\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { green } from \"@material-ui/core/colors\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport AttachFileIcon from \"@material-ui/icons/AttachFile\";\r\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport moment from \"moment\";\r\n\r\nimport api from \"../../services/api\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport {\r\n  Box,\r\n  FormControl,\r\n  Grid,\r\n  InputLabel,\r\n  MenuItem,\r\n  Select,\r\n  Tab,\r\n  Tabs,\r\n} from \"@material-ui/core\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\nimport ConfirmationModal from \"../ConfirmationModal\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n    flexWrap: \"wrap\",\r\n    backgroundColor: \"#fff\"\r\n  },\r\n\r\n  tabmsg: {\r\n    backgroundColor: theme.palette.campaigntab,\r\n  },\r\n\r\n  textField: {\r\n    marginRight: theme.spacing(1),\r\n    flex: 1,\r\n  },\r\n\r\n  extraAttr: {\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n  },\r\n\r\n  btnWrapper: {\r\n    position: \"relative\",\r\n  },\r\n\r\n  buttonProgress: {\r\n    color: green[500],\r\n    position: \"absolute\",\r\n    top: \"50%\",\r\n    left: \"50%\",\r\n    marginTop: -12,\r\n    marginLeft: -12,\r\n  },\r\n}));\r\n\r\nconst CampaignSchema = Yup.object().shape({\r\n  name: Yup.string()\r\n    .min(2, \"Too Short!\")\r\n    .max(50, \"Too Long!\")\r\n    .required(\"Required\"),\r\n});\r\n\r\nconst CampaignModal = ({\r\n  open,\r\n  onClose,\r\n  campaignId,\r\n  initialValues,\r\n  onSave,\r\n  resetPagination,\r\n}) => {\r\n  const classes = useStyles();\r\n  const isMounted = useRef(true);\r\n  const { user } = useContext(AuthContext);\r\n  const { companyId } = user;\r\n  const [file, setFile] = useState(null);\r\n\r\n  const initialState = {\r\n    name: \"\",\r\n    message1: \"\",\r\n    message2: \"\",\r\n    message3: \"\",\r\n    message4: \"\",\r\n    message5: \"\",\r\n    confirmationMessage1: \"\",\r\n    confirmationMessage2: \"\",\r\n    confirmationMessage3: \"\",\r\n    confirmationMessage4: \"\",\r\n    confirmationMessage5: \"\",\r\n    status: \"INATIVA\", // INATIVA, PROGRAMADA, EM_ANDAMENTO, CANCELADA, FINALIZADA,\r\n    confirmation: false,\r\n    scheduledAt: \"\",\r\n    whatsappId: \"\",\r\n    contactListId: \"\",\r\n    tagListId: \"Nenhuma\",\r\n    companyId,\r\n  };\r\n\r\n  const [campaign, setCampaign] = useState(initialState);\r\n  const [whatsapps, setWhatsapps] = useState([]);\r\n  const [contactLists, setContactLists] = useState([]);\r\n  const [messageTab, setMessageTab] = useState(0);\r\n  const [attachment, setAttachment] = useState(null);\r\n  const [confirmationOpen, setConfirmationOpen] = useState(false);\r\n  const [campaignEditable, setCampaignEditable] = useState(true);\r\n  const attachmentFile = useRef(null);\r\n  const [tagLists, setTagLists] = useState([]);\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      isMounted.current = false;\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      try {\r\n        const { data } = await api.get(\"/files/\", {\r\n          params: { companyId }\r\n        });\r\n\r\n        setFile(data.files);\r\n      } catch (err) {\r\n        toastError(err);\r\n      }\r\n    })();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (isMounted.current) {\r\n      if (initialValues) {\r\n        setCampaign((prevState) => {\r\n          return { ...prevState, ...initialValues };\r\n        });\r\n      }\r\n\r\n      api\r\n        .get(`/contact-lists/list`, { params: { companyId } })\r\n        .then(({ data }) => setContactLists(data));\r\n\r\n      api\r\n        .get(`/whatsapp`, { params: { companyId, session: 0 } })\r\n        .then(({ data }) => setWhatsapps(data));\r\n\r\n      api.get(`/tags`, { params: { companyId } })\r\n        .then(({ data }) => {\r\n          const fetchedTags = data.tags;\r\n          // Perform any necessary data transformation here\r\n          const formattedTagLists = fetchedTags.map((tag) => ({\r\n            id: tag.id,\r\n            name: tag.name,\r\n          }));\r\n          setTagLists(formattedTagLists);\r\n        })\r\n        .catch((error) => {\r\n          console.error(\"Error retrieving tags:\", error);\r\n        });\r\n        \r\n      if (!campaignId) return;\r\n\r\n      api.get(`/campaigns/${campaignId}`).then(({ data }) => {\r\n        setCampaign((prev) => {\r\n          let prevCampaignData = Object.assign({}, prev);\r\n\r\n          Object.entries(data).forEach(([key, value]) => {\r\n            if (key === \"scheduledAt\" && value !== \"\" && value !== null) {\r\n              prevCampaignData[key] = moment(value).format(\"YYYY-MM-DDTHH:mm\");\r\n            } else {\r\n              prevCampaignData[key] = value === null ? \"\" : value;\r\n            }\r\n          });\r\n\r\n          return prevCampaignData;\r\n        });\r\n      });\r\n    }\r\n  }, [campaignId, open, initialValues, companyId]);\r\n\r\n  useEffect(() => {\r\n    const now = moment();\r\n    const scheduledAt = moment(campaign.scheduledAt);\r\n    const moreThenAnHour =\r\n      !Number.isNaN(scheduledAt.diff(now)) && scheduledAt.diff(now, \"hour\") > 1;\r\n    const isEditable =\r\n      campaign.status === \"INATIVA\" ||\r\n      (campaign.status === \"PROGRAMADA\" && moreThenAnHour);\r\n\r\n    setCampaignEditable(isEditable);\r\n  }, [campaign.status, campaign.scheduledAt]);\r\n\r\n  const handleClose = () => {\r\n    onClose();\r\n    setCampaign(initialState);\r\n  };\r\n\r\n  const handleAttachmentFile = (e) => {\r\n    const file = head(e.target.files);\r\n    if (file) {\r\n      setAttachment(file);\r\n    }\r\n  };\r\n\r\n  const handleSaveCampaign = async (values) => {\r\n    try {\r\n      const dataValues = {};\r\n      Object.entries(values).forEach(([key, value]) => {\r\n        if (key === \"scheduledAt\" && value !== \"\" && value !== null) {\r\n          dataValues[key] = moment(value).format(\"YYYY-MM-DD HH:mm:ss\");\r\n        } else {\r\n          dataValues[key] = value === \"\" ? null : value;\r\n        }\r\n      });\r\n\r\n      if (campaignId) {\r\n        await api.put(`/campaigns/${campaignId}`, dataValues);\r\n\r\n        if (attachment != null) {\r\n          const formData = new FormData();\r\n          formData.append(\"file\", attachment);\r\n          await api.post(`/campaigns/${campaignId}/media-upload`, formData);\r\n        }\r\n        handleClose();\r\n      } else {\r\n        const { data } = await api.post(\"/campaigns\", dataValues);\r\n\r\n        if (attachment != null) {\r\n          const formData = new FormData();\r\n          formData.append(\"file\", attachment);\r\n          await api.post(`/campaigns/${data.id}/media-upload`, formData);\r\n        }\r\n        if (onSave) {\r\n          onSave(data);\r\n        }\r\n        handleClose();\r\n      }\r\n      toast.success(i18n.t(\"campaigns.toasts.success\"));\r\n    } catch (err) {\r\n      console.log(err);\r\n      toastError(err);\r\n    }\r\n  };\r\n\r\n  const deleteMedia = async () => {\r\n    if (attachment) {\r\n      setAttachment(null);\r\n      attachmentFile.current.value = null;\r\n    }\r\n\r\n    if (campaign.mediaPath) {\r\n      await api.delete(`/campaigns/${campaign.id}/media-upload`);\r\n      setCampaign((prev) => ({ ...prev, mediaPath: null, mediaName: null }));\r\n      toast.success(i18n.t(\"campaigns.toasts.deleted\"));\r\n    }\r\n  };\r\n\r\n  const renderMessageField = (identifier) => {\r\n    return (\r\n      <Field\r\n        as={TextField}\r\n        id={identifier}\r\n        name={identifier}\r\n        fullWidth\r\n        rows={5}\r\n        label={i18n.t(`campaigns.dialog.form.${identifier}`)}\r\n        placeholder={i18n.t(\"campaigns.dialog.form.messagePlaceholder\")}\r\n        multiline={true}\r\n        variant=\"outlined\"\r\n        helperText=\"Utilize variáveis como {nome}, {numero}, {email} ou defina variáveis personalziadas.\"\r\n        disabled={!campaignEditable && campaign.status !== \"CANCELADA\"}\r\n      />\r\n    );\r\n  };\r\n\r\n  const renderConfirmationMessageField = (identifier) => {\r\n    return (\r\n      <Field\r\n        as={TextField}\r\n        id={identifier}\r\n        name={identifier}\r\n        fullWidth\r\n        rows={5}\r\n        label={i18n.t(`campaigns.dialog.form.${identifier}`)}\r\n        placeholder={i18n.t(\"campaigns.dialog.form.messagePlaceholder\")}\r\n        multiline={true}\r\n        variant=\"outlined\"\r\n        disabled={!campaignEditable && campaign.status !== \"CANCELADA\"}\r\n      />\r\n    );\r\n  };\r\n\r\n  const cancelCampaign = async () => {\r\n    try {\r\n      await api.post(`/campaigns/${campaign.id}/cancel`);\r\n      toast.success(i18n.t(\"campaigns.toasts.cancel\"));\r\n      setCampaign((prev) => ({ ...prev, status: \"CANCELADA\" }));\r\n      resetPagination();\r\n    } catch (err) {\r\n      toast.error(err.message);\r\n    }\r\n  };\r\n\r\n  const restartCampaign = async () => {\r\n    try {\r\n      await api.post(`/campaigns/${campaign.id}/restart`);\r\n      toast.success(i18n.t(\"campaigns.toasts.restart\"));\r\n      setCampaign((prev) => ({ ...prev, status: \"EM_ANDAMENTO\" }));\r\n      resetPagination();\r\n    } catch (err) {\r\n      toast.error(err.message);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <ConfirmationModal\r\n        title={i18n.t(\"campaigns.confirmationModal.deleteTitle\")}\r\n        open={confirmationOpen}\r\n        onClose={() => setConfirmationOpen(false)}\r\n        onConfirm={deleteMedia}\r\n      >\r\n        {i18n.t(\"campaigns.confirmationModal.deleteMessage\")}\r\n      </ConfirmationModal>\r\n      <Dialog\r\n        open={open}\r\n        onClose={handleClose}\r\n        fullWidth\r\n        maxWidth=\"md\"\r\n        scroll=\"paper\"\r\n      >\r\n        <DialogTitle id=\"form-dialog-title\">\r\n          {campaignEditable ? (\r\n            <>\r\n              {campaignId\r\n                ? `${i18n.t(\"campaigns.dialog.update\")}`\r\n                : `${i18n.t(\"campaigns.dialog.new\")}`}\r\n            </>\r\n          ) : (\r\n            <>{`${i18n.t(\"campaigns.dialog.readonly\")}`}</>\r\n          )}\r\n        </DialogTitle>\r\n        <div style={{ display: \"none\" }}>\r\n          <input\r\n            type=\"file\"\r\n            ref={attachmentFile}\r\n            onChange={(e) => handleAttachmentFile(e)}\r\n          />\r\n        </div>\r\n        <Formik\r\n          initialValues={campaign}\r\n          enableReinitialize={true}\r\n          validationSchema={CampaignSchema}\r\n          onSubmit={(values, actions) => {\r\n            setTimeout(() => {\r\n              handleSaveCampaign(values);\r\n              actions.setSubmitting(false);\r\n            }, 400);\r\n          }}\r\n        >\r\n          {({ values, errors, touched, isSubmitting }) => (\r\n            <Form>\r\n              <DialogContent dividers>\r\n                <Grid spacing={2} container>\r\n                  <Grid xs={12} md={9} item>\r\n                    <Field\r\n                      as={TextField}\r\n                      label={i18n.t(\"campaigns.dialog.form.name\")}\r\n                      name=\"name\"\r\n                      error={touched.name && Boolean(errors.name)}\r\n                      helperText={touched.name && errors.name}\r\n                      variant=\"outlined\"\r\n                      margin=\"dense\"\r\n                      fullWidth\r\n                      className={classes.textField}\r\n                      disabled={!campaignEditable}\r\n                    />\r\n                  </Grid>\r\n                  <Grid xs={12} md={3} item>\r\n                    <FormControl\r\n                      variant=\"outlined\"\r\n                      margin=\"dense\"\r\n                      fullWidth\r\n                      className={classes.formControl}\r\n                    >\r\n                      <InputLabel id=\"confirmation-selection-label\">\r\n                        {i18n.t(\"campaigns.dialog.form.confirmation\")}\r\n                      </InputLabel>\r\n                      <Field\r\n                        as={Select}\r\n                        label={i18n.t(\"campaigns.dialog.form.confirmation\")}\r\n                        placeholder={i18n.t(\r\n                          \"campaigns.dialog.form.confirmation\"\r\n                        )}\r\n                        labelId=\"confirmation-selection-label\"\r\n                        id=\"confirmation\"\r\n                        name=\"confirmation\"\r\n                        error={\r\n                          touched.confirmation && Boolean(errors.confirmation)\r\n                        }\r\n                        disabled={!campaignEditable}\r\n                      >\r\n                        <MenuItem value={false}>Desabilitada</MenuItem>\r\n                        <MenuItem value={true}>Habilitada</MenuItem>\r\n                      </Field>\r\n                    </FormControl>\r\n                  </Grid>\r\n                  <Grid xs={12} md={4} item>\r\n                    <FormControl\r\n                      variant=\"outlined\"\r\n                      margin=\"dense\"\r\n                      fullWidth\r\n                      className={classes.formControl}\r\n                    >\r\n                      <InputLabel id=\"contactList-selection-label\">\r\n                        {i18n.t(\"campaigns.dialog.form.contactList\")}\r\n                      </InputLabel>\r\n                      <Field\r\n                        as={Select}\r\n                        label={i18n.t(\"campaigns.dialog.form.contactList\")}\r\n                        placeholder={i18n.t(\r\n                          \"campaigns.dialog.form.contactList\"\r\n                        )}\r\n                        labelId=\"contactList-selection-label\"\r\n                        id=\"contactListId\"\r\n                        name=\"contactListId\"\r\n                        error={\r\n                          touched.contactListId && Boolean(errors.contactListId)\r\n                        }\r\n                        disabled={!campaignEditable}\r\n                      >\r\n                        <MenuItem value=\"\">Nenhuma</MenuItem>\r\n                        {contactLists &&\r\n                          contactLists.map((contactList) => (\r\n                            <MenuItem\r\n                              key={contactList.id}\r\n                              value={contactList.id}\r\n                            >\r\n                              {contactList.name}\r\n                            </MenuItem>\r\n                          ))}\r\n                      </Field>\r\n                    </FormControl>\r\n                  </Grid>\r\n                  <Grid xs={12} md={4} item>\r\n                    <FormControl\r\n                      variant=\"outlined\"\r\n                      margin=\"dense\"\r\n                      fullWidth\r\n                      className={classes.formControl}\r\n                    >\r\n                      <InputLabel id=\"tagList-selection-label\">\r\n                        {i18n.t(\"campaigns.dialog.form.tagList\")}\r\n                      </InputLabel>\r\n                      <Field\r\n                        as={Select}\r\n                        label={i18n.t(\"campaigns.dialog.form.tagList\")}\r\n                        placeholder={i18n.t(\"campaigns.dialog.form.tagList\")}\r\n                        labelId=\"tagList-selection-label\"\r\n                        id=\"tagListId\"\r\n                        name=\"tagListId\"\r\n                        error={touched.tagListId && Boolean(errors.tagListId)}\r\n                        disabled={!campaignEditable}\r\n                      >\r\n                        <MenuItem value=\"\">Nenhuma</MenuItem>\r\n                        {Array.isArray(tagLists) &&\r\n                          tagLists.map((tagList) => (\r\n                            <MenuItem key={tagList.id} value={tagList.id}>\r\n                              {tagList.name}\r\n                            </MenuItem>\r\n                          ))}\r\n                      </Field>\r\n                    </FormControl>\r\n                  </Grid>\r\n                  <Grid xs={12} md={4} item>\r\n                    <FormControl\r\n                      variant=\"outlined\"\r\n                      margin=\"dense\"\r\n                      fullWidth\r\n                      className={classes.formControl}\r\n                    >\r\n                      <InputLabel id=\"whatsapp-selection-label\">\r\n                        {i18n.t(\"campaigns.dialog.form.whatsapp\")}\r\n                      </InputLabel>\r\n                      <Field\r\n                        as={Select}\r\n                        label={i18n.t(\"campaigns.dialog.form.whatsapp\")}\r\n                        placeholder={i18n.t(\"campaigns.dialog.form.whatsapp\")}\r\n                        labelId=\"whatsapp-selection-label\"\r\n                        id=\"whatsappId\"\r\n                        name=\"whatsappId\"\r\n                        error={touched.whatsappId && Boolean(errors.whatsappId)}\r\n                        disabled={!campaignEditable}\r\n                      >\r\n                        <MenuItem value=\"\">Nenhuma</MenuItem>\r\n                        {whatsapps &&\r\n                          whatsapps.map((whatsapp) => (\r\n                            <MenuItem key={whatsapp.id} value={whatsapp.id}>\r\n                              {whatsapp.name}\r\n                            </MenuItem>\r\n                          ))}\r\n                      </Field>\r\n                    </FormControl>\r\n                  </Grid>\r\n                  <Grid xs={12} md={4} item>\r\n                    <Field\r\n                      as={TextField}\r\n                      label={i18n.t(\"campaigns.dialog.form.scheduledAt\")}\r\n                      name=\"scheduledAt\"\r\n                      error={touched.scheduledAt && Boolean(errors.scheduledAt)}\r\n                      helperText={touched.scheduledAt && errors.scheduledAt}\r\n                      variant=\"outlined\"\r\n                      margin=\"dense\"\r\n                      type=\"datetime-local\"\r\n                      InputLabelProps={{\r\n                        shrink: true,\r\n                      }}\r\n                      fullWidth\r\n                      className={classes.textField}\r\n                      disabled={!campaignEditable}\r\n                    />\r\n                  </Grid>\r\n                  <Grid xs={12} md={4} item>\r\n                  <FormControl\r\n                      variant=\"outlined\"\r\n                      margin=\"dense\"\r\n                      className={classes.FormControl}\r\n                      fullWidth\r\n                    >\r\n                      <InputLabel id=\"fileListId-selection-label\">{i18n.t(\"campaigns.dialog.form.fileList\")}</InputLabel>\r\n                      <Field\r\n                        as={Select}\r\n                        label={i18n.t(\"campaigns.dialog.form.fileList\")}\r\n                        name=\"fileListId\"\r\n                        id=\"fileListId\"\r\n                        placeholder={i18n.t(\"campaigns.dialog.form.fileList\")}\r\n                        labelId=\"fileListId-selection-label\"\r\n                        value={values.fileListId || \"\"}\r\n                      >\r\n                        <MenuItem value={\"\"} >{\"Nenhum\"}</MenuItem>\r\n                        {file.map(f => (\r\n                          <MenuItem key={f.id} value={f.id}>\r\n                            {f.name}\r\n                          </MenuItem>\r\n                        ))}\r\n                      </Field>\r\n                    </FormControl>\r\n                  </Grid>\r\n                  <Grid xs={12} item>\r\n                    <Tabs\r\n                      value={messageTab}\r\n                      indicatorColor=\"primary\"\r\n                      textColor=\"primary\"\r\n                      className={classes.tabmsg}\r\n                      onChange={(e, v) => setMessageTab(v)}\r\n                      variant=\"fullWidth\"\r\n                      centered\r\n                      style={{\r\n                        borderRadius: 2,\r\n                      }}\r\n                    >\r\n                      <Tab label=\"Msg. 1\" index={0} />\r\n                      <Tab label=\"Msg. 2\" index={1} />\r\n                      <Tab label=\"Msg. 3\" index={2} />\r\n                      <Tab label=\"Msg. 4\" index={3} />\r\n                      <Tab label=\"Msg. 5\" index={4} />\r\n                    </Tabs>\r\n                    <Box style={{ paddingTop: 20, border: \"none\" }}>\r\n                      {messageTab === 0 && (\r\n                        <>\r\n                          {values.confirmation ? (\r\n                            <Grid spacing={2} container>\r\n                              <Grid xs={12} md={8} item>\r\n                                <>{renderMessageField(\"message1\")}</>\r\n                              </Grid>\r\n                              <Grid xs={12} md={4} item>\r\n                                <>\r\n                                  {renderConfirmationMessageField(\r\n                                    \"confirmationMessage1\"\r\n                                  )}\r\n                                </>\r\n                              </Grid>\r\n                            </Grid>\r\n                          ) : (\r\n                            <>{renderMessageField(\"message1\")}</>\r\n                          )}\r\n                        </>\r\n                      )}\r\n                      {messageTab === 1 && (\r\n                        <>\r\n                          {values.confirmation ? (\r\n                            <Grid spacing={2} container>\r\n                              <Grid xs={12} md={8} item>\r\n                                <>{renderMessageField(\"message2\")}</>\r\n                              </Grid>\r\n                              <Grid xs={12} md={4} item>\r\n                                <>\r\n                                  {renderConfirmationMessageField(\r\n                                    \"confirmationMessage2\"\r\n                                  )}\r\n                                </>\r\n                              </Grid>\r\n                            </Grid>\r\n                          ) : (\r\n                            <>{renderMessageField(\"message2\")}</>\r\n                          )}\r\n                        </>\r\n                      )}\r\n                      {messageTab === 2 && (\r\n                        <>\r\n                          {values.confirmation ? (\r\n                            <Grid spacing={2} container>\r\n                              <Grid xs={12} md={8} item>\r\n                                <>{renderMessageField(\"message3\")}</>\r\n                              </Grid>\r\n                              <Grid xs={12} md={4} item>\r\n                                <>\r\n                                  {renderConfirmationMessageField(\r\n                                    \"confirmationMessage3\"\r\n                                  )}\r\n                                </>\r\n                              </Grid>\r\n                            </Grid>\r\n                          ) : (\r\n                            <>{renderMessageField(\"message3\")}</>\r\n                          )}\r\n                        </>\r\n                      )}\r\n                      {messageTab === 3 && (\r\n                        <>\r\n                          {values.confirmation ? (\r\n                            <Grid spacing={2} container>\r\n                              <Grid xs={12} md={8} item>\r\n                                <>{renderMessageField(\"message4\")}</>\r\n                              </Grid>\r\n                              <Grid xs={12} md={4} item>\r\n                                <>\r\n                                  {renderConfirmationMessageField(\r\n                                    \"confirmationMessage4\"\r\n                                  )}\r\n                                </>\r\n                              </Grid>\r\n                            </Grid>\r\n                          ) : (\r\n                            <>{renderMessageField(\"message4\")}</>\r\n                          )}\r\n                        </>\r\n                      )}\r\n                      {messageTab === 4 && (\r\n                        <>\r\n                          {values.confirmation ? (\r\n                            <Grid spacing={2} container>\r\n                              <Grid xs={12} md={8} item>\r\n                                <>{renderMessageField(\"message5\")}</>\r\n                              </Grid>\r\n                              <Grid xs={12} md={4} item>\r\n                                <>\r\n                                  {renderConfirmationMessageField(\r\n                                    \"confirmationMessage5\"\r\n                                  )}\r\n                                </>\r\n                              </Grid>\r\n                            </Grid>\r\n                          ) : (\r\n                            <>{renderMessageField(\"message5\")}</>\r\n                          )}\r\n                        </>\r\n                      )}\r\n                    </Box>\r\n                  </Grid>\r\n                  {(campaign.mediaPath || attachment) && (\r\n                    <Grid xs={12} item>\r\n                      <Button startIcon={<AttachFileIcon />}>\r\n                        {attachment != null\r\n                          ? attachment.name\r\n                          : campaign.mediaName}\r\n                      </Button>\r\n                      {campaignEditable && (\r\n                        <IconButton\r\n                          onClick={() => setConfirmationOpen(true)}\r\n                          color=\"secondary\"\r\n                        >\r\n                          <DeleteOutlineIcon />\r\n                        </IconButton>\r\n                      )}\r\n                    </Grid>\r\n                  )}\r\n                </Grid>\r\n              </DialogContent>\r\n              <DialogActions>\r\n                {campaign.status === \"CANCELADA\" && (\r\n                  <Button\r\n                    color=\"primary\"\r\n                    onClick={() => restartCampaign()}\r\n                    variant=\"outlined\"\r\n                  >\r\n                    {i18n.t(\"campaigns.dialog.buttons.restart\")}\r\n                  </Button>\r\n                )}\r\n                {campaign.status === \"EM_ANDAMENTO\" && (\r\n                  <Button\r\n                    color=\"primary\"\r\n                    onClick={() => cancelCampaign()}\r\n                    variant=\"outlined\"\r\n                  >\r\n                    {i18n.t(\"campaigns.dialog.buttons.cancel\")}\r\n                  </Button>\r\n                )}\r\n                {!attachment && !campaign.mediaPath && campaignEditable && (\r\n                  <Button\r\n                    color=\"primary\"\r\n                    onClick={() => attachmentFile.current.click()}\r\n                    disabled={isSubmitting}\r\n                    variant=\"outlined\"\r\n                  >\r\n                    {i18n.t(\"campaigns.dialog.buttons.attach\")}\r\n                  </Button>\r\n                )}\r\n                <Button\r\n                  onClick={handleClose}\r\n                  color=\"secondary\"\r\n                  disabled={isSubmitting}\r\n                  variant=\"outlined\"\r\n                >\r\n                  {i18n.t(\"campaigns.dialog.buttons.close\")}\r\n                </Button>\r\n                {(campaignEditable || campaign.status === \"CANCELADA\") && (\r\n                  <Button\r\n                    type=\"submit\"\r\n                    color=\"primary\"\r\n                    disabled={isSubmitting}\r\n                    variant=\"contained\"\r\n                    className={classes.btnWrapper}\r\n                  >\r\n                    {campaignId\r\n                      ? `${i18n.t(\"campaigns.dialog.buttons.edit\")}`\r\n                      : `${i18n.t(\"campaigns.dialog.buttons.add\")}`}\r\n                    {isSubmitting && (\r\n                      <CircularProgress\r\n                        size={24}\r\n                        className={classes.buttonProgress}\r\n                      />\r\n                    )}\r\n                  </Button>\r\n                )}\r\n              </DialogActions>\r\n            </Form>\r\n          )}\r\n        </Formik>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CampaignModal;\r\n","/* eslint-disable no-unused-vars */\r\n\r\nimport React, { useState, useEffect, useReducer } from \"react\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport SearchIcon from \"@material-ui/icons/Search\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\n\r\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\r\nimport EditIcon from \"@material-ui/icons/Edit\";\r\nimport DescriptionIcon from \"@material-ui/icons/Description\";\r\nimport TimerOffIcon from \"@material-ui/icons/TimerOff\";\r\nimport PlayCircleOutlineIcon from \"@material-ui/icons/PlayCircleOutline\";\r\nimport PauseCircleOutlineIcon from \"@material-ui/icons/PauseCircleOutline\";\r\n\r\nimport MainContainer from \"../../components/MainContainer\";\r\nimport MainHeader from \"../../components/MainHeader\";\r\nimport Title from \"../../components/Title\";\r\n\r\nimport api from \"../../services/api\";\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport TableRowSkeleton from \"../../components/TableRowSkeleton\";\r\nimport CampaignModal from \"../../components/CampaignModal\";\r\nimport ConfirmationModal from \"../../components/ConfirmationModal\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport { Grid } from \"@material-ui/core\";\r\nimport { isArray } from \"lodash\";\r\nimport { useDate } from \"../../hooks/useDate\";\r\nimport { socketConnection } from \"../../services/socket\";\r\n\r\nconst reducer = (state, action) => {\r\n  if (action.type === \"LOAD_CAMPAIGNS\") {\r\n    const campaigns = action.payload;\r\n    const newCampaigns = [];\r\n\r\n    if (isArray(campaigns)) {\r\n      campaigns.forEach((campaign) => {\r\n        const campaignIndex = state.findIndex((u) => u.id === campaign.id);\r\n        if (campaignIndex !== -1) {\r\n          state[campaignIndex] = campaign;\r\n        } else {\r\n          newCampaigns.push(campaign);\r\n        }\r\n      });\r\n    }\r\n\r\n    return [...state, ...newCampaigns];\r\n  }\r\n\r\n  if (action.type === \"UPDATE_CAMPAIGNS\") {\r\n    const campaign = action.payload;\r\n    const campaignIndex = state.findIndex((u) => u.id === campaign.id);\r\n\r\n    if (campaignIndex !== -1) {\r\n      state[campaignIndex] = campaign;\r\n      return [...state];\r\n    } else {\r\n      return [campaign, ...state];\r\n    }\r\n  }\r\n\r\n  if (action.type === \"DELETE_CAMPAIGN\") {\r\n    const campaignId = action.payload;\r\n\r\n    const campaignIndex = state.findIndex((u) => u.id === campaignId);\r\n    if (campaignIndex !== -1) {\r\n      state.splice(campaignIndex, 1);\r\n    }\r\n    return [...state];\r\n  }\r\n\r\n  if (action.type === \"RESET\") {\r\n    return [];\r\n  }\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  mainPaper: {\r\n    flex: 1,\r\n    padding: theme.spacing(1),\r\n    overflowY: \"scroll\",\r\n    ...theme.scrollbarStyles,\r\n  },\r\n}));\r\n\r\nconst Campaigns = () => {\r\n  const classes = useStyles();\r\n\r\n  const history = useHistory();\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [pageNumber, setPageNumber] = useState(1);\r\n  const [hasMore, setHasMore] = useState(false);\r\n  const [selectedCampaign, setSelectedCampaign] = useState(null);\r\n  const [deletingCampaign, setDeletingCampaign] = useState(null);\r\n  const [campaignModalOpen, setCampaignModalOpen] = useState(false);\r\n  const [confirmModalOpen, setConfirmModalOpen] = useState(false);\r\n  const [searchParam, setSearchParam] = useState(\"\");\r\n  const [campaigns, dispatch] = useReducer(reducer, []);\r\n\r\n  const { datetimeToClient } = useDate();\r\n\r\n  useEffect(() => {\r\n    dispatch({ type: \"RESET\" });\r\n    setPageNumber(1);\r\n  }, [searchParam]);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    const delayDebounceFn = setTimeout(() => {\r\n      fetchCampaigns();\r\n    }, 500);\r\n    return () => clearTimeout(delayDebounceFn);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [searchParam, pageNumber]);\r\n\r\n  useEffect(() => {\r\n    const companyId = localStorage.getItem(\"companyId\");\r\n    const socket = socketConnection({ companyId });\r\n\r\n    socket.on(`company-${companyId}-campaign`, (data) => {\r\n      if (data.action === \"update\" || data.action === \"create\") {\r\n        dispatch({ type: \"UPDATE_CAMPAIGNS\", payload: data.record });\r\n      }\r\n      if (data.action === \"delete\") {\r\n        dispatch({ type: \"DELETE_CAMPAIGN\", payload: +data.id });\r\n      }\r\n    });\r\n    return () => {\r\n      socket.disconnect();\r\n    };\r\n  }, []);\r\n\r\n  const fetchCampaigns = async () => {\r\n    try {\r\n      const { data } = await api.get(\"/campaigns/\", {\r\n        params: { searchParam, pageNumber },\r\n      });\r\n      dispatch({ type: \"LOAD_CAMPAIGNS\", payload: data.records });\r\n      setHasMore(data.hasMore);\r\n      setLoading(false);\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n  };\r\n\r\n  const handleOpenCampaignModal = () => {\r\n    setSelectedCampaign(null);\r\n    setCampaignModalOpen(true);\r\n  };\r\n\r\n  const handleCloseCampaignModal = () => {\r\n    setSelectedCampaign(null);\r\n    setCampaignModalOpen(false);\r\n  };\r\n\r\n  const handleSearch = (event) => {\r\n    setSearchParam(event.target.value.toLowerCase());\r\n  };\r\n\r\n  const handleEditCampaign = (campaign) => {\r\n    setSelectedCampaign(campaign);\r\n    setCampaignModalOpen(true);\r\n  };\r\n\r\n  const handleDeleteCampaign = async (campaignId) => {\r\n    try {\r\n      await api.delete(`/campaigns/${campaignId}`);\r\n      toast.success(i18n.t(\"campaigns.toasts.deleted\"));\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n    setDeletingCampaign(null);\r\n    setSearchParam(\"\");\r\n    setPageNumber(1);\r\n  };\r\n\r\n  const loadMore = () => {\r\n    setPageNumber((prevState) => prevState + 1);\r\n  };\r\n\r\n  const handleScroll = (e) => {\r\n    if (!hasMore || loading) return;\r\n    const { scrollTop, scrollHeight, clientHeight } = e.currentTarget;\r\n    if (scrollHeight - (scrollTop + 100) < clientHeight) {\r\n      loadMore();\r\n    }\r\n  };\r\n\r\n  const formatStatus = (val) => {\r\n    switch (val) {\r\n      case \"INATIVA\":\r\n        return \"Inativa\";\r\n      case \"PROGRAMADA\":\r\n        return \"Programada\";\r\n      case \"EM_ANDAMENTO\":\r\n        return \"Em Andamento\";\r\n      case \"CANCELADA\":\r\n        return \"Cancelada\";\r\n      case \"FINALIZADA\":\r\n        return \"Finalizada\";\r\n      default:\r\n        return val;\r\n    }\r\n  };\r\n\r\n  const cancelCampaign = async (campaign) => {\r\n    try {\r\n      await api.post(`/campaigns/${campaign.id}/cancel`);\r\n      toast.success(i18n.t(\"campaigns.toasts.cancel\"));\r\n      setPageNumber(1);\r\n      fetchCampaigns();\r\n    } catch (err) {\r\n      toast.error(err.message);\r\n    }\r\n  };\r\n\r\n  const restartCampaign = async (campaign) => {\r\n    try {\r\n      await api.post(`/campaigns/${campaign.id}/restart`);\r\n      toast.success(i18n.t(\"campaigns.toasts.restart\"));\r\n      setPageNumber(1);\r\n      fetchCampaigns();\r\n    } catch (err) {\r\n      toast.error(err.message);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <MainContainer>\r\n      <ConfirmationModal\r\n        title={\r\n          deletingCampaign &&\r\n          `${i18n.t(\"campaigns.confirmationModal.deleteTitle\")} ${\r\n            deletingCampaign.name\r\n          }?`\r\n        }\r\n        open={confirmModalOpen}\r\n        onClose={setConfirmModalOpen}\r\n        onConfirm={() => handleDeleteCampaign(deletingCampaign.id)}\r\n      >\r\n        {i18n.t(\"campaigns.confirmationModal.deleteMessage\")}\r\n      </ConfirmationModal>\r\n      <CampaignModal\r\n        resetPagination={() => {\r\n          setPageNumber(1);\r\n          fetchCampaigns();\r\n        }}\r\n        open={campaignModalOpen}\r\n        onClose={handleCloseCampaignModal}\r\n        aria-labelledby=\"form-dialog-title\"\r\n        campaignId={selectedCampaign && selectedCampaign.id}\r\n      />\r\n      <MainHeader>\r\n        <Grid style={{ width: \"99.6%\" }} container>\r\n          <Grid xs={12} sm={8} item>\r\n            <Title>{i18n.t(\"campaigns.title\")}</Title>\r\n          </Grid>\r\n          <Grid xs={12} sm={4} item>\r\n            <Grid spacing={2} container>\r\n              <Grid xs={6} sm={6} item>\r\n                <TextField\r\n                  fullWidth\r\n                  placeholder={i18n.t(\"campaigns.searchPlaceholder\")}\r\n                  type=\"search\"\r\n                  value={searchParam}\r\n                  onChange={handleSearch}\r\n                  InputProps={{\r\n                    startAdornment: (\r\n                      <InputAdornment position=\"start\">\r\n                        <SearchIcon style={{ color: \"gray\" }} />\r\n                      </InputAdornment>\r\n                    ),\r\n                  }}\r\n                />\r\n              </Grid>\r\n              <Grid xs={6} sm={6} item>\r\n                <Button\r\n                  fullWidth\r\n                  variant=\"contained\"\r\n                  onClick={handleOpenCampaignModal}\r\n                  color=\"primary\"\r\n                >\r\n                  {i18n.t(\"campaigns.buttons.add\")}\r\n                </Button>\r\n              </Grid>\r\n            </Grid>\r\n          </Grid>\r\n        </Grid>\r\n      </MainHeader>\r\n      <Paper\r\n        className={classes.mainPaper}\r\n        variant=\"outlined\"\r\n        onScroll={handleScroll}\r\n      >\r\n        <Table size=\"small\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"campaigns.table.name\")}\r\n              </TableCell>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"campaigns.table.status\")}\r\n              </TableCell>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"campaigns.table.contactList\")}\r\n              </TableCell>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"campaigns.table.whatsapp\")}\r\n              </TableCell>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"campaigns.table.scheduledAt\")}\r\n              </TableCell>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"campaigns.table.completedAt\")}\r\n              </TableCell>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"campaigns.table.confirmation\")}\r\n              </TableCell>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"campaigns.table.actions\")}\r\n              </TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            <>\r\n              {campaigns.map((campaign) => (\r\n                <TableRow key={campaign.id}>\r\n                  <TableCell align=\"center\">{campaign.name}</TableCell>\r\n                  <TableCell align=\"center\">\r\n                    {formatStatus(campaign.status)}\r\n                  </TableCell>\r\n                  <TableCell align=\"center\">\r\n                    {campaign.contactListId\r\n                      ? campaign.contactList.name\r\n                      : \"Não definida\"}\r\n                  </TableCell>\r\n                  <TableCell align=\"center\">\r\n                    {campaign.whatsappId\r\n                      ? campaign.whatsapp.name\r\n                      : \"Não definido\"}\r\n                  </TableCell>\r\n                  <TableCell align=\"center\">\r\n                    {campaign.scheduledAt\r\n                      ? datetimeToClient(campaign.scheduledAt)\r\n                      : \"Sem agendamento\"}\r\n                  </TableCell>\r\n                  <TableCell align=\"center\">\r\n                    {campaign.completedAt\r\n                      ? datetimeToClient(campaign.completedAt)\r\n                      : \"Não concluída\"}\r\n                  </TableCell>\r\n                  <TableCell align=\"center\">\r\n                    {campaign.confirmation ? \"Habilitada\" : \"Desabilitada\"}\r\n                  </TableCell>\r\n                  <TableCell align=\"center\">\r\n                    {campaign.status === \"EM_ANDAMENTO\" && (\r\n                      <IconButton\r\n                        onClick={() => cancelCampaign(campaign)}\r\n                        title=\"Parar Campanha\"\r\n                        size=\"small\"\r\n                      >\r\n                        <PauseCircleOutlineIcon />\r\n                      </IconButton>\r\n                    )}\r\n                    {campaign.status === \"CANCELADA\" && (\r\n                      <IconButton\r\n                        onClick={() => restartCampaign(campaign)}\r\n                        title=\"Parar Campanha\"\r\n                        size=\"small\"\r\n                      >\r\n                        <PlayCircleOutlineIcon />\r\n                      </IconButton>\r\n                    )}\r\n                    <IconButton\r\n                      onClick={() =>\r\n                        history.push(`/campaign/${campaign.id}/report`)\r\n                      }\r\n                      size=\"small\"\r\n                    >\r\n                      <DescriptionIcon />\r\n                    </IconButton>\r\n                    <IconButton\r\n                      size=\"small\"\r\n                      onClick={() => handleEditCampaign(campaign)}\r\n                    >\r\n                      <EditIcon />\r\n                    </IconButton>\r\n\r\n                    <IconButton\r\n                      size=\"small\"\r\n                      onClick={(e) => {\r\n                        setConfirmModalOpen(true);\r\n                        setDeletingCampaign(campaign);\r\n                      }}\r\n                    >\r\n                      <DeleteOutlineIcon />\r\n                    </IconButton>\r\n                  </TableCell>\r\n                </TableRow>\r\n              ))}\r\n              {loading && <TableRowSkeleton columns={8} />}\r\n            </>\r\n          </TableBody>\r\n        </Table>\r\n      </Paper>\r\n    </MainContainer>\r\n  );\r\n};\r\n\r\nexport default Campaigns;\r\n","import React, { useEffect, useState } from \"react\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport MainContainer from \"../../components/MainContainer\";\r\nimport MainHeader from \"../../components/MainHeader\";\r\nimport Title from \"../../components/Title\";\r\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\r\nimport api from \"../../services/api\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  FormControl,\r\n  Grid,\r\n  IconButton,\r\n  InputLabel,\r\n  MenuItem,\r\n  Select,\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableHead,\r\n  TableRow,\r\n  TextField,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport ConfirmationModal from \"../../components/ConfirmationModal\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  mainPaper: {\r\n    flex: 1,\r\n    padding: theme.spacing(1),\r\n    overflowY: \"scroll\",\r\n    ...theme.scrollbarStyles,\r\n  },\r\n  textRight: {\r\n    textAlign: \"right\",\r\n  },\r\n  tabPanelsContainer: {\r\n    padding: theme.spacing(2),\r\n  },\r\n}));\r\n\r\nconst initialSettings = {\r\n  messageInterval: 20,\r\n  longerIntervalAfter: 20,\r\n  greaterInterval: 60,\r\n  variables: [],\r\n};\r\n\r\nconst CampaignsConfig = () => {\r\n  const classes = useStyles();\r\n\r\n  const [settings, setSettings] = useState(initialSettings);\r\n  const [showVariablesForm, setShowVariablesForm] = useState(false);\r\n  const [confirmationOpen, setConfirmationOpen] = useState(false);\r\n  const [selectedKey, setSelectedKey] = useState(null);\r\n  const [variable, setVariable] = useState({ key: \"\", value: \"\" });\r\n\r\n  useEffect(() => {\r\n    api.get(\"/campaign-settings\").then(({ data }) => {\r\n      const settingsList = [];\r\n      if (Array.isArray(data) && data.length > 0) {\r\n        data.forEach((item) => {\r\n          settingsList.push([item.key, JSON.parse(item.value)]);\r\n        });\r\n        setSettings(Object.fromEntries(settingsList));\r\n      }\r\n    });\r\n  }, []);\r\n\r\n  const handleOnChangeVariable = (e) => {\r\n    if (e.target.value !== null) {\r\n      const changedProp = {};\r\n      changedProp[e.target.name] = e.target.value;\r\n      setVariable((prev) => ({ ...prev, ...changedProp }));\r\n    }\r\n  };\r\n\r\n  const handleOnChangeSettings = (e) => {\r\n    const changedProp = {};\r\n    changedProp[e.target.name] = e.target.value;\r\n    setSettings((prev) => ({ ...prev, ...changedProp }));\r\n  };\r\n\r\n  const addVariable = () => {\r\n    setSettings((prev) => {\r\n      const variablesExists = settings.variables.filter(\r\n        (v) => v.key === variable.key\r\n      );\r\n      const variables = prev.variables;\r\n      if (variablesExists.length === 0) {\r\n        variables.push(Object.assign({}, variable));\r\n        setVariable({ key: \"\", value: \"\" });\r\n      }\r\n      return { ...prev, variables };\r\n    });\r\n  };\r\n\r\n  const removeVariable = () => {\r\n    const newList = settings.variables.filter((v) => v.key !== selectedKey);\r\n    setSettings((prev) => ({ ...prev, variables: newList }));\r\n    setSelectedKey(null);\r\n  };\r\n\r\n  const saveSettings = async () => {\r\n    await api.post(\"/campaign-settings\", { settings });\r\n    toast.success(\"Configurações salvas\");\r\n  };\r\n\r\n  return (\r\n    <MainContainer>\r\n      <ConfirmationModal\r\n        title={i18n.t(\"campaigns.confirmationModal.deleteTitle\")}\r\n        open={confirmationOpen}\r\n        onClose={() => setConfirmationOpen(false)}\r\n        onConfirm={removeVariable}\r\n      >\r\n        {i18n.t(\"campaigns.confirmationModal.deleteMessage\")}\r\n      </ConfirmationModal>\r\n      <MainHeader>\r\n        <Grid style={{ width: \"99.6%\" }} container>\r\n          <Grid xs={12} item>\r\n            <Title>{i18n.t(\"campaignsConfig.title\")}</Title>\r\n          </Grid>\r\n        </Grid>\r\n      </MainHeader>\r\n      <Paper className={classes.mainPaper} variant=\"outlined\">\r\n        <Box className={classes.tabPanelsContainer}>\r\n          <Grid spacing={2} container>\r\n            <Grid xs={12} item>\r\n              <Typography component={\"h3\"}>Intervalos</Typography>\r\n            </Grid>\r\n            <Grid xs={12} md={4} item>\r\n              <FormControl\r\n                variant=\"outlined\"\r\n                className={classes.formControl}\r\n                fullWidth\r\n              >\r\n                <InputLabel id=\"messageInterval-label\">\r\n                  Intervalo Randômico de Disparo\r\n                </InputLabel>\r\n                <Select\r\n                  name=\"messageInterval\"\r\n                  id=\"messageInterval\"\r\n                  labelId=\"messageInterval-label\"\r\n                  label=\"Intervalo Randômico de Disparo\"\r\n                  value={settings.messageInterval}\r\n                  onChange={(e) => handleOnChangeSettings(e)}\r\n                >\r\n                  <MenuItem value={0}>Sem Intervalo</MenuItem>\r\n                  <MenuItem value={5}>5 segundos</MenuItem>\r\n                  <MenuItem value={10}>10 segundos</MenuItem>\r\n                  <MenuItem value={15}>15 segundos</MenuItem>\r\n                  <MenuItem value={20}>20 segundos</MenuItem>\r\n                </Select>\r\n              </FormControl>\r\n            </Grid>\r\n            <Grid xs={12} md={4} item>\r\n              <FormControl\r\n                variant=\"outlined\"\r\n                className={classes.formControl}\r\n                fullWidth\r\n              >\r\n                <InputLabel id=\"longerIntervalAfter-label\">\r\n                  Intervalo Maior Após\r\n                </InputLabel>\r\n                <Select\r\n                  name=\"longerIntervalAfter\"\r\n                  id=\"longerIntervalAfter\"\r\n                  labelId=\"longerIntervalAfter-label\"\r\n                  label=\"Intervalo Maior Após\"\r\n                  value={settings.longerIntervalAfter}\r\n                  onChange={(e) => handleOnChangeSettings(e)}\r\n                >\r\n                  <MenuItem value={0}>Não definido</MenuItem>\r\n                  <MenuItem value={1}>1 segundo</MenuItem>\r\n                  <MenuItem value={5}>5 segundos</MenuItem>\r\n                  <MenuItem value={10}>10 segundos</MenuItem>\r\n                  <MenuItem value={15}>15 segundos</MenuItem>\r\n                  <MenuItem value={20}>20 segundos</MenuItem>\r\n                  <MenuItem value={30}>30 segundos</MenuItem>\r\n                  <MenuItem value={40}>40 segundos</MenuItem>\r\n                  <MenuItem value={60}>60 segundos</MenuItem>\r\n                  <MenuItem value={80}>80 segundos</MenuItem>\r\n                  <MenuItem value={100}>100 segundos</MenuItem>\r\n                  <MenuItem value={120}>120 segundos</MenuItem>\r\n                </Select>\r\n              </FormControl>\r\n            </Grid>\r\n            <Grid xs={12} md={4} item>\r\n              <FormControl\r\n                variant=\"outlined\"\r\n                className={classes.formControl}\r\n                fullWidth\r\n              >\r\n                <InputLabel id=\"greaterInterval-label\">\r\n                  Intervalo de Disparo Maior\r\n                </InputLabel>\r\n                <Select\r\n                  name=\"greaterInterval\"\r\n                  id=\"greaterInterval\"\r\n                  labelId=\"greaterInterval-label\"\r\n                  label=\"Intervalo de Disparo Maior\"\r\n                  value={settings.greaterInterval}\r\n                  onChange={(e) => handleOnChangeSettings(e)}\r\n                >\r\n                  <MenuItem value={0}>Sem Intervalo</MenuItem>\r\n                  <MenuItem value={1}>1 segundo</MenuItem>\r\n                  <MenuItem value={5}>5 segundos</MenuItem>\r\n                  <MenuItem value={10}>10 segundos</MenuItem>\r\n                  <MenuItem value={15}>15 segundos</MenuItem>\r\n                  <MenuItem value={20}>20 segundos</MenuItem>\r\n                  <MenuItem value={30}>30 segundos</MenuItem>\r\n                  <MenuItem value={40}>40 segundos</MenuItem>\r\n                  <MenuItem value={60}>60 segundos</MenuItem>\r\n                  <MenuItem value={80}>80 segundos</MenuItem>\r\n                  <MenuItem value={100}>100 segundos</MenuItem>\r\n                  <MenuItem value={120}>120 segundos</MenuItem>\r\n                </Select>\r\n              </FormControl>\r\n            </Grid>\r\n            <Grid xs={12} className={classes.textRight} item>\r\n              <Button\r\n                onClick={() => setShowVariablesForm(!showVariablesForm)}\r\n                color=\"primary\"\r\n                style={{ marginRight: 10 }}\r\n              >\r\n                Adicionar Variável\r\n              </Button>\r\n              <Button\r\n                onClick={saveSettings}\r\n                color=\"primary\"\r\n                variant=\"contained\"\r\n              >\r\n                Salvar Configurações\r\n              </Button>\r\n            </Grid>\r\n            {showVariablesForm && (\r\n              <>\r\n                <Grid xs={12} md={6} item>\r\n                  <TextField\r\n                    label=\"Atalho\"\r\n                    variant=\"outlined\"\r\n                    value={variable.key}\r\n                    name=\"key\"\r\n                    onChange={handleOnChangeVariable}\r\n                    fullWidth\r\n                  />\r\n                </Grid>\r\n                <Grid xs={12} md={6} item>\r\n                  <TextField\r\n                    label=\"Conteúdo\"\r\n                    variant=\"outlined\"\r\n                    value={variable.value}\r\n                    name=\"value\"\r\n                    onChange={handleOnChangeVariable}\r\n                    fullWidth\r\n                  />\r\n                </Grid>\r\n                <Grid xs={12} className={classes.textRight} item>\r\n                  <Button\r\n                    onClick={() => setShowVariablesForm(!showVariablesForm)}\r\n                    color=\"primary\"\r\n                    style={{ marginRight: 10 }}\r\n                  >\r\n                    Fechar\r\n                  </Button>\r\n                  <Button\r\n                    onClick={addVariable}\r\n                    color=\"primary\"\r\n                    variant=\"contained\"\r\n                  >\r\n                    Adicionar\r\n                  </Button>\r\n                </Grid>\r\n              </>\r\n            )}\r\n            {settings.variables.length > 0 && (\r\n              <Grid xs={12} className={classes.textRight} item>\r\n                <Table size=\"small\">\r\n                  <TableHead>\r\n                    <TableRow>\r\n                      <TableCell style={{ width: \"1%\" }}></TableCell>\r\n                      <TableCell>Atalho</TableCell>\r\n                      <TableCell>Conteúdo</TableCell>\r\n                    </TableRow>\r\n                  </TableHead>\r\n                  <TableBody>\r\n                    {Array.isArray(settings.variables) &&\r\n                      settings.variables.map((v, k) => (\r\n                        <TableRow key={k}>\r\n                          <TableCell>\r\n                            <IconButton\r\n                              size=\"small\"\r\n                              onClick={() => {\r\n                                setSelectedKey(v.key);\r\n                                setConfirmationOpen(true);\r\n                              }}\r\n                            >\r\n                              <DeleteOutlineIcon />\r\n                            </IconButton>\r\n                          </TableCell>\r\n                          <TableCell>{\"{\" + v.key + \"}\"}</TableCell>\r\n                          <TableCell>{v.value}</TableCell>\r\n                        </TableRow>\r\n                      ))}\r\n                  </TableBody>\r\n                </Table>\r\n              </Grid>\r\n            )}\r\n          </Grid>\r\n        </Box>\r\n      </Paper>\r\n    </MainContainer>\r\n  );\r\n};\r\n\r\nexport default CampaignsConfig;\r\n","import React, { useEffect, useRef, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\n\r\nimport MainContainer from \"../../components/MainContainer\";\r\nimport MainHeader from \"../../components/MainHeader\";\r\nimport Title from \"../../components/Title\";\r\n\r\nimport { Grid, LinearProgress, Typography } from \"@material-ui/core\";\r\nimport api from \"../../services/api\";\r\nimport { has, get, isNull } from \"lodash\";\r\nimport CardCounter from \"../../components/Dashboard/CardCounter\";\r\nimport GroupIcon from \"@material-ui/icons/Group\";\r\nimport ScheduleIcon from \"@material-ui/icons/Schedule\";\r\nimport EventAvailableIcon from \"@material-ui/icons/EventAvailable\";\r\nimport DoneIcon from \"@material-ui/icons/Done\";\r\nimport DoneAllIcon from \"@material-ui/icons/DoneAll\";\r\nimport CheckCircleIcon from \"@material-ui/icons/CheckCircle\";\r\nimport WhatsAppIcon from \"@material-ui/icons/WhatsApp\";\r\nimport ListAltIcon from \"@material-ui/icons/ListAlt\";\r\nimport { useDate } from \"../../hooks/useDate\";\r\n\r\nimport { socketConnection } from \"../../services/socket\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  mainPaper: {\r\n    flex: 1,\r\n    padding: theme.spacing(2),\r\n    overflowY: \"scroll\",\r\n    ...theme.scrollbarStyles,\r\n  },\r\n  textRight: {\r\n    textAlign: \"right\",\r\n  },\r\n  tabPanelsContainer: {\r\n    padding: theme.spacing(2),\r\n  },\r\n}));\r\n\r\nconst CampaignReport = () => {\r\n  const classes = useStyles();\r\n\r\n  const { campaignId } = useParams();\r\n\r\n  const [campaign, setCampaign] = useState({});\r\n  const [validContacts, setValidContacts] = useState(0);\r\n  const [delivered, setDelivered] = useState(0);\r\n  const [confirmationRequested, setConfirmationRequested] = useState(0);\r\n  const [confirmed, setConfirmed] = useState(0);\r\n  const [percent, setPercent] = useState(0);\r\n  const [loading, setLoading] = useState(false);\r\n  const mounted = useRef(true);\r\n\r\n  const { datetimeToClient } = useDate();\r\n\r\n  useEffect(() => {\r\n    if (mounted.current) {\r\n      findCampaign();\r\n    }\r\n\r\n    return () => {\r\n      mounted.current = false;\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (mounted.current && has(campaign, \"shipping\")) {\r\n      if (has(campaign, \"contactList\")) {\r\n        const contactList = get(campaign, \"contactList\");\r\n        const valids = contactList.contacts.filter((c) => c.isWhatsappValid);\r\n        setValidContacts(valids.length);\r\n      }\r\n\r\n      if (has(campaign, \"shipping\")) {\r\n        const contacts = get(campaign, \"shipping\");\r\n        const delivered = contacts.filter((c) => !isNull(c.deliveredAt));\r\n        const confirmationRequested = contacts.filter(\r\n          (c) => !isNull(c.confirmationRequestedAt)\r\n        );\r\n        const confirmed = contacts.filter(\r\n          (c) => !isNull(c.deliveredAt) && !isNull(c.confirmationRequestedAt)\r\n        );\r\n        setDelivered(delivered.length);\r\n        setConfirmationRequested(confirmationRequested.length);\r\n        setConfirmed(confirmed.length);\r\n        setDelivered(delivered.length);\r\n      }\r\n    }\r\n  }, [campaign]);\r\n\r\n  useEffect(() => {\r\n    setPercent((delivered / validContacts) * 100);\r\n  }, [delivered, validContacts]);\r\n\r\n  useEffect(() => {\r\n    const companyId = localStorage.getItem(\"companyId\");\r\n    const socket = socketConnection({ companyId });\r\n\r\n    socket.on(`company-${companyId}-campaign`, (data) => {\r\n     \r\n      if (data.record.id === +campaignId) {\r\n        setCampaign(data.record);\r\n\r\n        if (data.record.status === \"FINALIZADA\") {\r\n          setTimeout(() => {\r\n            findCampaign();\r\n          }, 5000);\r\n        }\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      socket.disconnect();\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [campaignId]);\r\n\r\n  const findCampaign = async () => {\r\n    setLoading(true);\r\n    const { data } = await api.get(`/campaigns/${campaignId}`);\r\n    setCampaign(data);\r\n    setLoading(false);\r\n  };\r\n\r\n  const formatStatus = (val) => {\r\n    switch (val) {\r\n      case \"INATIVA\":\r\n        return \"Inativa\";\r\n      case \"PROGRAMADA\":\r\n        return \"Programada\";\r\n      case \"EM_ANDAMENTO\":\r\n        return \"Em Andamento\";\r\n      case \"CANCELADA\":\r\n        return \"Cancelada\";\r\n      case \"FINALIZADA\":\r\n        return \"Finalizada\";\r\n      default:\r\n        return val;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <MainContainer>\r\n      <MainHeader>\r\n        <Grid style={{ width: \"99.6%\" }} container>\r\n          <Grid xs={12} item>\r\n            <Title>Relatório da {campaign.name || \"Campanha\"}</Title>\r\n          </Grid>\r\n        </Grid>\r\n      </MainHeader>\r\n      <Paper className={classes.mainPaper} variant=\"outlined\">\r\n        <Typography variant=\"h6\" component=\"h2\">\r\n          Status: {formatStatus(campaign.status)} {delivered} de {validContacts}\r\n        </Typography>\r\n        <Grid spacing={2} container>\r\n          <Grid xs={12} item>\r\n            <LinearProgress\r\n              variant=\"determinate\"\r\n              style={{ height: 15, borderRadius: 3, margin: \"20px 0\" }}\r\n              value={percent}\r\n            />\r\n          </Grid>\r\n          <Grid xs={12} md={4} item>\r\n            <CardCounter\r\n              icon={<GroupIcon fontSize=\"inherit\" />}\r\n              title=\"Contatos Válidos\"\r\n              value={validContacts}\r\n              loading={loading}\r\n            />\r\n          </Grid>\r\n          {campaign.confirmation && (\r\n            <>\r\n              <Grid xs={12} md={4} item>\r\n                <CardCounter\r\n                  icon={<DoneIcon fontSize=\"inherit\" />}\r\n                  title=\"Confirmações Solicitadas\"\r\n                  value={confirmationRequested}\r\n                  loading={loading}\r\n                />\r\n              </Grid>\r\n              <Grid xs={12} md={4} item>\r\n                <CardCounter\r\n                  icon={<DoneAllIcon fontSize=\"inherit\" />}\r\n                  title=\"Confirmações\"\r\n                  value={confirmed}\r\n                  loading={loading}\r\n                />\r\n              </Grid>\r\n            </>\r\n          )}\r\n          <Grid xs={12} md={4} item>\r\n            <CardCounter\r\n              icon={<CheckCircleIcon fontSize=\"inherit\" />}\r\n              title=\"Entregues\"\r\n              value={delivered}\r\n              loading={loading}\r\n            />\r\n          </Grid>\r\n          {campaign.whatsappId && (\r\n            <Grid xs={12} md={4} item>\r\n              <CardCounter\r\n                icon={<WhatsAppIcon fontSize=\"inherit\" />}\r\n                title=\"Conexão\"\r\n                value={campaign.whatsapp.name}\r\n                loading={loading}\r\n              />\r\n            </Grid>\r\n          )}\r\n          {campaign.contactListId && (\r\n            <Grid xs={12} md={4} item>\r\n              <CardCounter\r\n                icon={<ListAltIcon fontSize=\"inherit\" />}\r\n                title=\"Lista de Contatos\"\r\n                value={campaign.contactList.name}\r\n                loading={loading}\r\n              />\r\n            </Grid>\r\n          )}\r\n          <Grid xs={12} md={4} item>\r\n            <CardCounter\r\n              icon={<ScheduleIcon fontSize=\"inherit\" />}\r\n              title=\"Agendamento\"\r\n              value={datetimeToClient(campaign.scheduledAt)}\r\n              loading={loading}\r\n            />\r\n          </Grid>\r\n          <Grid xs={12} md={4} item>\r\n            <CardCounter\r\n              icon={<EventAvailableIcon fontSize=\"inherit\" />}\r\n              title=\"Conclusão\"\r\n              value={datetimeToClient(campaign.completedAt)}\r\n              loading={loading}\r\n            />\r\n          </Grid>\r\n        </Grid>\r\n      </Paper>\r\n    </MainContainer>\r\n  );\r\n};\r\n\r\nexport default CampaignReport;\r\n","import React, { useState, useEffect, useRef } from \"react\";\r\n\r\nimport * as Yup from \"yup\";\r\nimport { Formik, Form, Field } from \"formik\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { green } from \"@material-ui/core/colors\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport AttachFileIcon from \"@material-ui/icons/AttachFile\";\r\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport { head } from \"lodash\";\r\n\r\nimport api from \"../../services/api\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport {\r\n  FormControl,\r\n  Grid,\r\n  InputLabel,\r\n  MenuItem,\r\n  Select,\r\n} from \"@material-ui/core\";\r\nimport ConfirmationModal from \"../ConfirmationModal\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n    flexWrap: \"wrap\",\r\n  },\r\n  multFieldLine: {\r\n    display: \"flex\",\r\n    \"& > *:not(:last-child)\": {\r\n      marginRight: theme.spacing(1),\r\n    },\r\n  },\r\n\r\n  btnWrapper: {\r\n    position: \"relative\",\r\n  },\r\n\r\n  buttonProgress: {\r\n    color: green[500],\r\n    position: \"absolute\",\r\n    top: \"50%\",\r\n    left: \"50%\",\r\n    marginTop: -12,\r\n    marginLeft: -12,\r\n  },\r\n  formControl: {\r\n    margin: theme.spacing(1),\r\n    minWidth: 120,\r\n  },\r\n  colorAdorment: {\r\n    width: 20,\r\n    height: 20,\r\n  },\r\n}));\r\n\r\nconst AnnouncementSchema = Yup.object().shape({\r\n  title: Yup.string().required(\"Obrigatório\"),\r\n  text: Yup.string().required(\"Obrigatório\"),\r\n});\r\n\r\nconst AnnouncementModal = ({ open, onClose, announcementId, reload }) => {\r\n  const classes = useStyles();\r\n\r\n  const initialState = {\r\n    title: \"\",\r\n    text: \"\",\r\n    priority: 3,\r\n    status: true,\r\n  };\r\n\r\n  const [confirmationOpen, setConfirmationOpen] = useState(false);\r\n  const [announcement, setAnnouncement] = useState(initialState);\r\n  const [attachment, setAttachment] = useState(null);\r\n  const attachmentFile = useRef(null);\r\n\r\n  useEffect(() => {\r\n    try {\r\n      (async () => {\r\n        if (!announcementId) return;\r\n\r\n        const { data } = await api.get(`/announcements/${announcementId}`);\r\n        setAnnouncement((prevState) => {\r\n          return { ...prevState, ...data };\r\n        });\r\n      })();\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n  }, [announcementId, open]);\r\n\r\n  const handleClose = () => {\r\n    setAnnouncement(initialState);\r\n    setAttachment(null);\r\n    onClose();\r\n  };\r\n\r\n  const handleAttachmentFile = (e) => {\r\n    const file = head(e.target.files);\r\n    if (file) {\r\n      setAttachment(file);\r\n    }\r\n  };\r\n\r\n  const handleSaveAnnouncement = async (values) => {\r\n    const announcementData = { ...values };\r\n    try {\r\n      if (announcementId) {\r\n        await api.put(`/announcements/${announcementId}`, announcementData);\r\n        if (attachment != null) {\r\n          const formData = new FormData();\r\n          formData.append(\"file\", attachment);\r\n          await api.post(\r\n            `/announcements/${announcementId}/media-upload`,\r\n            formData\r\n          );\r\n        }\r\n      } else {\r\n        const { data } = await api.post(\"/announcements\", announcementData);\r\n        if (attachment != null) {\r\n          const formData = new FormData();\r\n          formData.append(\"file\", attachment);\r\n          await api.post(`/announcements/${data.id}/media-upload`, formData);\r\n        }\r\n      }\r\n      toast.success(i18n.t(\"announcements.toasts.success\"));\r\n      if (typeof reload == \"function\") {\r\n        reload();\r\n      }\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n    handleClose();\r\n  };\r\n\r\n  const deleteMedia = async () => {\r\n    if (attachment) {\r\n      setAttachment(null);\r\n      attachmentFile.current.value = null;\r\n    }\r\n\r\n    if (announcement.mediaPath) {\r\n      await api.delete(`/announcements/${announcement.id}/media-upload`);\r\n      setAnnouncement((prev) => ({\r\n        ...prev,\r\n        mediaPath: null,\r\n      }));\r\n      toast.success(i18n.t(\"announcements.toasts.deleted\"));\r\n      if (typeof reload == \"function\") {\r\n        reload();\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <ConfirmationModal\r\n        title={i18n.t(\"announcements.confirmationModal.deleteTitle\")}\r\n        open={confirmationOpen}\r\n        onClose={() => setConfirmationOpen(false)}\r\n        onConfirm={deleteMedia}\r\n      >\r\n        {i18n.t(\"announcements.confirmationModal.deleteMessage\")}\r\n      </ConfirmationModal>\r\n      <Dialog\r\n        open={open}\r\n        onClose={handleClose}\r\n        maxWidth=\"xs\"\r\n        fullWidth\r\n        scroll=\"paper\"\r\n      >\r\n        <DialogTitle id=\"form-dialog-title\">\r\n          {announcementId\r\n            ? `${i18n.t(\"announcements.dialog.edit\")}`\r\n            : `${i18n.t(\"announcements.dialog.add\")}`}\r\n        </DialogTitle>\r\n        <div style={{ display: \"none\" }}>\r\n          <input\r\n            type=\"file\"\r\n            accept=\".png,.jpg,.jpeg\"\r\n            ref={attachmentFile}\r\n            onChange={(e) => handleAttachmentFile(e)}\r\n          />\r\n        </div>\r\n        <Formik\r\n          initialValues={announcement}\r\n          enableReinitialize={true}\r\n          validationSchema={AnnouncementSchema}\r\n          onSubmit={(values, actions) => {\r\n            setTimeout(() => {\r\n              handleSaveAnnouncement(values);\r\n              actions.setSubmitting(false);\r\n            }, 400);\r\n          }}\r\n        >\r\n          {({ touched, errors, isSubmitting, values }) => (\r\n            <Form>\r\n              <DialogContent dividers>\r\n                <Grid spacing={2} container>\r\n                  <Grid xs={12} item>\r\n                    <Field\r\n                      as={TextField}\r\n                      label={i18n.t(\"announcements.dialog.form.title\")}\r\n                      name=\"title\"\r\n                      error={touched.title && Boolean(errors.title)}\r\n                      helperText={touched.title && errors.title}\r\n                      variant=\"outlined\"\r\n                      margin=\"dense\"\r\n                      fullWidth\r\n                    />\r\n                  </Grid>\r\n                  <Grid xs={12} item>\r\n                    <Field\r\n                      as={TextField}\r\n                      label={i18n.t(\"announcements.dialog.form.text\")}\r\n                      name=\"text\"\r\n                      error={touched.text && Boolean(errors.text)}\r\n                      helperText={touched.text && errors.text}\r\n                      variant=\"outlined\"\r\n                      margin=\"dense\"\r\n                      multiline={true}\r\n                      rows={7}\r\n                      fullWidth\r\n                    />\r\n                  </Grid>\r\n                  <Grid xs={12} item>\r\n                    <FormControl variant=\"outlined\" margin=\"dense\" fullWidth>\r\n                      <InputLabel id=\"status-selection-label\">\r\n                        {i18n.t(\"announcements.dialog.form.status\")}\r\n                      </InputLabel>\r\n                      <Field\r\n                        as={Select}\r\n                        label={i18n.t(\"announcements.dialog.form.status\")}\r\n                        placeholder={i18n.t(\"announcements.dialog.form.status\")}\r\n                        labelId=\"status-selection-label\"\r\n                        id=\"status\"\r\n                        name=\"status\"\r\n                        error={touched.status && Boolean(errors.status)}\r\n                      >\r\n                        <MenuItem value={true}>Ativo</MenuItem>\r\n                        <MenuItem value={false}>Inativo</MenuItem>\r\n                      </Field>\r\n                    </FormControl>\r\n                  </Grid>\r\n                  <Grid xs={12} item>\r\n                    <FormControl variant=\"outlined\" margin=\"dense\" fullWidth>\r\n                      <InputLabel id=\"priority-selection-label\">\r\n                        {i18n.t(\"announcements.dialog.form.priority\")}\r\n                      </InputLabel>\r\n                      <Field\r\n                        as={Select}\r\n                        label={i18n.t(\"announcements.dialog.form.priority\")}\r\n                        placeholder={i18n.t(\r\n                          \"announcements.dialog.form.priority\"\r\n                        )}\r\n                        labelId=\"priority-selection-label\"\r\n                        id=\"priority\"\r\n                        name=\"priority\"\r\n                        error={touched.priority && Boolean(errors.priority)}\r\n                      >\r\n                        <MenuItem value={1}>Alta</MenuItem>\r\n                        <MenuItem value={2}>Média</MenuItem>\r\n                        <MenuItem value={3}>Baixa</MenuItem>\r\n                      </Field>\r\n                    </FormControl>\r\n                  </Grid>\r\n                  {(announcement.mediaPath || attachment) && (\r\n                    <Grid xs={12} item>\r\n                      <Button startIcon={<AttachFileIcon />}>\r\n                        {attachment ? attachment.name : announcement.mediaName}\r\n                      </Button>\r\n                      <IconButton\r\n                        onClick={() => setConfirmationOpen(true)}\r\n                        color=\"secondary\"\r\n                      >\r\n                        <DeleteOutlineIcon />\r\n                      </IconButton>\r\n                    </Grid>\r\n                  )}\r\n                </Grid>\r\n              </DialogContent>\r\n              <DialogActions>\r\n                {!attachment && !announcement.mediaPath && (\r\n                  <Button\r\n                    color=\"primary\"\r\n                    onClick={() => attachmentFile.current.click()}\r\n                    disabled={isSubmitting}\r\n                    variant=\"outlined\"\r\n                  >\r\n                    {i18n.t(\"announcements.dialog.buttons.attach\")}\r\n                  </Button>\r\n                )}\r\n                <Button\r\n                  onClick={handleClose}\r\n                  color=\"secondary\"\r\n                  disabled={isSubmitting}\r\n                  variant=\"outlined\"\r\n                >\r\n                  {i18n.t(\"announcements.dialog.buttons.cancel\")}\r\n                </Button>\r\n                <Button\r\n                  type=\"submit\"\r\n                  color=\"primary\"\r\n                  disabled={isSubmitting}\r\n                  variant=\"contained\"\r\n                  className={classes.btnWrapper}\r\n                >\r\n                  {announcementId\r\n                    ? `${i18n.t(\"announcements.dialog.buttons.add\")}`\r\n                    : `${i18n.t(\"announcements.dialog.buttons.edit\")}`}\r\n                  {isSubmitting && (\r\n                    <CircularProgress\r\n                      size={24}\r\n                      className={classes.buttonProgress}\r\n                    />\r\n                  )}\r\n                </Button>\r\n              </DialogActions>\r\n            </Form>\r\n          )}\r\n        </Formik>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AnnouncementModal;\r\n","import React, { useState, useEffect, useReducer, useContext } from \"react\";\r\nimport { toast } from \"react-toastify\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport SearchIcon from \"@material-ui/icons/Search\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\n\r\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\r\nimport EditIcon from \"@material-ui/icons/Edit\";\r\n\r\nimport MainContainer from \"../../components/MainContainer\";\r\nimport MainHeader from \"../../components/MainHeader\";\r\nimport Title from \"../../components/Title\";\r\n\r\nimport api from \"../../services/api\";\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport TableRowSkeleton from \"../../components/TableRowSkeleton\";\r\nimport AnnouncementModal from \"../../components/AnnouncementModal\";\r\nimport ConfirmationModal from \"../../components/ConfirmationModal\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport { Grid } from \"@material-ui/core\";\r\nimport { isArray } from \"lodash\";\r\nimport { socketConnection } from \"../../services/socket\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\n\r\nconst reducer = (state, action) => {\r\n  if (action.type === \"LOAD_ANNOUNCEMENTS\") {\r\n    const announcements = action.payload;\r\n    const newAnnouncements = [];\r\n\r\n    if (isArray(announcements)) {\r\n      announcements.forEach((announcement) => {\r\n        const announcementIndex = state.findIndex(\r\n          (u) => u.id === announcement.id\r\n        );\r\n        if (announcementIndex !== -1) {\r\n          state[announcementIndex] = announcement;\r\n        } else {\r\n          newAnnouncements.push(announcement);\r\n        }\r\n      });\r\n    }\r\n\r\n    return [...state, ...newAnnouncements];\r\n  }\r\n\r\n  if (action.type === \"UPDATE_ANNOUNCEMENTS\") {\r\n    const announcement = action.payload;\r\n    const announcementIndex = state.findIndex((u) => u.id === announcement.id);\r\n\r\n    if (announcementIndex !== -1) {\r\n      state[announcementIndex] = announcement;\r\n      return [...state];\r\n    } else {\r\n      return [announcement, ...state];\r\n    }\r\n  }\r\n\r\n  if (action.type === \"DELETE_ANNOUNCEMENT\") {\r\n    const announcementId = action.payload;\r\n\r\n    const announcementIndex = state.findIndex((u) => u.id === announcementId);\r\n    if (announcementIndex !== -1) {\r\n      state.splice(announcementIndex, 1);\r\n    }\r\n    return [...state];\r\n  }\r\n\r\n  if (action.type === \"RESET\") {\r\n    return [];\r\n  }\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  mainPaper: {\r\n    flex: 1,\r\n    // padding: theme.spacing(1),\r\n    padding: theme.padding,\r\n    overflowY: \"scroll\",\r\n    ...theme.scrollbarStyles,\r\n  },\r\n}));\r\n\r\nconst Announcements = () => {\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n\r\n  const { user } = useContext(AuthContext);\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [pageNumber, setPageNumber] = useState(1);\r\n  const [hasMore, setHasMore] = useState(false);\r\n  const [selectedAnnouncement, setSelectedAnnouncement] = useState(null);\r\n  const [deletingAnnouncement, setDeletingAnnouncement] = useState(null);\r\n  const [announcementModalOpen, setAnnouncementModalOpen] = useState(false);\r\n  const [confirmModalOpen, setConfirmModalOpen] = useState(false);\r\n  const [searchParam, setSearchParam] = useState(\"\");\r\n  const [announcements, dispatch] = useReducer(reducer, []);\r\n\r\n  // trava para nao acessar pagina que não pode  \r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      if (!user.super) {\r\n        toast.error(\"Esta empresa não possui permissão para acessar essa página! Estamos lhe redirecionando.\");\r\n        setTimeout(() => {\r\n          history.push(`/`)\r\n        }, 1000);\r\n      }\r\n    }\r\n    fetchData();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    dispatch({ type: \"RESET\" });\r\n    setPageNumber(1);\r\n  }, [searchParam]);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    const delayDebounceFn = setTimeout(() => {\r\n      fetchAnnouncements();\r\n    }, 500);\r\n    return () => clearTimeout(delayDebounceFn);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [searchParam, pageNumber]);\r\n\r\n  useEffect(() => {\r\n    const companyId = user.companyId;\r\n    const socket = socketConnection({ companyId, userId: user.id });\r\n\r\n    socket.on(`company-announcement`, (data) => {\r\n      if (data.action === \"update\" || data.action === \"create\") {\r\n        dispatch({ type: \"UPDATE_ANNOUNCEMENTS\", payload: data.record });\r\n      }\r\n      if (data.action === \"delete\") {\r\n        dispatch({ type: \"DELETE_ANNOUNCEMENT\", payload: +data.id });\r\n      }\r\n    });\r\n    return () => {\r\n      socket.disconnect();\r\n    };\r\n  }, []);\r\n\r\n  const fetchAnnouncements = async () => {\r\n    try {\r\n      const { data } = await api.get(\"/announcements/\", {\r\n        params: { searchParam, pageNumber },\r\n      });\r\n      dispatch({ type: \"LOAD_ANNOUNCEMENTS\", payload: data.records });\r\n      setHasMore(data.hasMore);\r\n      setLoading(false);\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n  };\r\n\r\n  const handleOpenAnnouncementModal = () => {\r\n    setSelectedAnnouncement(null);\r\n    setAnnouncementModalOpen(true);\r\n  };\r\n\r\n  const handleCloseAnnouncementModal = () => {\r\n    setSelectedAnnouncement(null);\r\n    setAnnouncementModalOpen(false);\r\n  };\r\n\r\n  const handleSearch = (event) => {\r\n    setSearchParam(event.target.value.toLowerCase());\r\n  };\r\n\r\n  const handleEditAnnouncement = (announcement) => {\r\n    setSelectedAnnouncement(announcement);\r\n    setAnnouncementModalOpen(true);\r\n  };\r\n\r\n  const handleDeleteAnnouncement = async (announcement) => {\r\n    try {\r\n      if (announcement.mediaName)\r\n      await api.delete(`/announcements/${announcement.id}/media-upload`);\r\n\r\n      await api.delete(`/announcements/${announcement.id}`);\r\n      \r\n      toast.success(i18n.t(\"announcements.toasts.deleted\"));\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n    setDeletingAnnouncement(null);\r\n    setSearchParam(\"\");\r\n    setPageNumber(1);\r\n  };\r\n\r\n  const loadMore = () => {\r\n    setPageNumber((prevState) => prevState + 1);\r\n  };\r\n\r\n  const handleScroll = (e) => {\r\n    if (!hasMore || loading) return;\r\n    const { scrollTop, scrollHeight, clientHeight } = e.currentTarget;\r\n    if (scrollHeight - (scrollTop + 100) < clientHeight) {\r\n      loadMore();\r\n    }\r\n  };\r\n\r\n  const translatePriority = (val) => {\r\n    if (val === 1) {\r\n      return \"Alta\";\r\n    }\r\n    if (val === 2) {\r\n      return \"Média\";\r\n    }\r\n    if (val === 3) {\r\n      return \"Baixa\";\r\n    }\r\n  };\r\n\r\n  return (\r\n    <MainContainer >\r\n      <ConfirmationModal\r\n        title={\r\n          deletingAnnouncement &&\r\n          `${i18n.t(\"announcements.confirmationModal.deleteTitle\")} ${deletingAnnouncement.name\r\n          }?`\r\n        }\r\n        open={confirmModalOpen}\r\n        onClose={setConfirmModalOpen}\r\n        onConfirm={() => handleDeleteAnnouncement(deletingAnnouncement)}\r\n      >\r\n        {i18n.t(\"announcements.confirmationModal.deleteMessage\")}\r\n      </ConfirmationModal>\r\n      <AnnouncementModal\r\n        resetPagination={() => {\r\n          setPageNumber(1);\r\n          fetchAnnouncements();\r\n        }}\r\n        open={announcementModalOpen}\r\n        onClose={handleCloseAnnouncementModal}\r\n        aria-labelledby=\"form-dialog-title\"\r\n        announcementId={selectedAnnouncement && selectedAnnouncement.id}\r\n      />\r\n      <MainHeader>\r\n        <Grid style={{ width: \"99.6%\" }} container>\r\n          <Grid xs={12} sm={8} item>\r\n            <Title>{i18n.t(\"announcements.title\")} ({announcements.length})</Title>\r\n          </Grid>\r\n          <Grid xs={12} sm={4} item>\r\n            <Grid spacing={2} container>\r\n              <Grid xs={6} sm={6} item>\r\n                <TextField\r\n                  fullWidth\r\n                  placeholder={i18n.t(\"announcements.searchPlaceholder\")}\r\n                  type=\"search\"\r\n                  value={searchParam}\r\n                  onChange={handleSearch}\r\n                  InputProps={{\r\n                    startAdornment: (\r\n                      <InputAdornment position=\"start\">\r\n                        <SearchIcon style={{ color: \"gray\" }} />\r\n                      </InputAdornment>\r\n                    ),\r\n                  }}\r\n                />\r\n              </Grid>\r\n              <Grid xs={6} sm={6} item>\r\n                <Button\r\n                  fullWidth\r\n                  variant=\"contained\"\r\n                  onClick={handleOpenAnnouncementModal}\r\n                  color=\"primary\"\r\n                >\r\n                  {i18n.t(\"announcements.buttons.add\")}\r\n                </Button>\r\n              </Grid>\r\n            </Grid>\r\n          </Grid>\r\n        </Grid>\r\n      </MainHeader>\r\n      <Paper\r\n        className={classes.mainPaper}\r\n        variant=\"outlined\"\r\n        onScroll={handleScroll}\r\n      >\r\n        <Table size=\"small\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"announcements.table.title\")}\r\n              </TableCell>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"announcements.table.priority\")}\r\n              </TableCell>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"announcements.table.mediaName\")}\r\n              </TableCell>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"announcements.table.status\")}\r\n              </TableCell>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"announcements.table.actions\")}\r\n              </TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            <>\r\n              {announcements.map((announcement) => (\r\n                <TableRow key={announcement.id}>\r\n                  <TableCell align=\"center\">{announcement.title}</TableCell>\r\n                  <TableCell align=\"center\">\r\n                    {translatePriority(announcement.priority)}\r\n                  </TableCell>\r\n                  <TableCell align=\"center\">\r\n                    {announcement.mediaName ?? i18n.t(\"quickMessages.noAttachment\")}\r\n                  </TableCell>\r\n                  <TableCell align=\"center\">\r\n                    {announcement.status ? i18n.t(\"announcements.active\") : i18n.t(\"announcements.inactive\")}\r\n                  </TableCell>\r\n                  <TableCell align=\"center\">\r\n                    <IconButton\r\n                      size=\"small\"\r\n                      onClick={() => handleEditAnnouncement(announcement)}\r\n                    >\r\n                      <EditIcon />\r\n                    </IconButton>\r\n\r\n                    <IconButton\r\n                      size=\"small\"\r\n                      onClick={(e) => {\r\n                        setConfirmModalOpen(true);\r\n                        setDeletingAnnouncement(announcement);\r\n                      }}\r\n                    >\r\n                      <DeleteOutlineIcon />\r\n                    </IconButton>\r\n                  </TableCell>\r\n                </TableRow>\r\n              ))}\r\n              {loading && <TableRowSkeleton columns={5} />}\r\n            </>\r\n          </TableBody>\r\n        </Table>\r\n      </Paper>\r\n    </MainContainer >\r\n  )\r\n};\r\n\r\nexport default Announcements;","import React, { useContext, useState } from \"react\";\r\nimport {\r\n  Chip,\r\n  IconButton,\r\n  List,\r\n  ListItem,\r\n  ListItemSecondaryAction,\r\n  ListItemText,\r\n  makeStyles,\r\n} from \"@material-ui/core\";\r\n\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\nimport { useDate } from \"../../hooks/useDate\";\r\n\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport EditIcon from \"@material-ui/icons/Edit\";\r\n\r\nimport ConfirmationModal from \"../../components/ConfirmationModal\";\r\nimport api from \"../../services/api\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  mainContainer: {\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    position: \"relative\",\r\n    flex: 1,\r\n    height: \"calc(100% - 58px)\",\r\n    overflow: \"hidden\",\r\n    borderRadius: 0,\r\n    backgroundColor: theme.palette.boxlist, //DARK MODE PLW DESIGN//\r\n  },\r\n  chatList: {\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    position: \"relative\",\r\n    flex: 1,\r\n    overflowY: \"scroll\",\r\n    ...theme.scrollbarStyles,\r\n  },\r\n  listItem: {\r\n    cursor: \"pointer\",\r\n  },\r\n}));\r\n\r\nexport default function ChatList({\r\n  chats,\r\n  handleSelectChat,\r\n  handleDeleteChat,\r\n  handleEditChat,\r\n  pageInfo,\r\n  loading,\r\n}) {\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n  const { user } = useContext(AuthContext);\r\n  const { datetimeToClient } = useDate();\r\n\r\n  const [confirmationModal, setConfirmModalOpen] = useState(false);\r\n  const [selectedChat, setSelectedChat] = useState({});\r\n\r\n  const { id } = useParams();\r\n\r\n  const goToMessages = async (chat) => {\r\n    if (unreadMessages(chat) > 0) {\r\n      try {\r\n        await api.post(`/chats/${chat.id}/read`, { userId: user.id });\r\n      } catch (err) {}\r\n    }\r\n\r\n    if (id !== chat.uuid) {\r\n      history.push(`/chats/${chat.uuid}`);\r\n      handleSelectChat(chat);\r\n    }\r\n  };\r\n\r\n  const handleDelete = () => {\r\n    handleDeleteChat(selectedChat);\r\n  };\r\n\r\n  const unreadMessages = (chat) => {\r\n    const currentUser = chat.users.find((u) => u.userId === user.id);\r\n    return currentUser.unreads;\r\n  };\r\n\r\n  const getPrimaryText = (chat) => {\r\n    const mainText = chat.title;\r\n    const unreads = unreadMessages(chat);\r\n    return (\r\n      <>\r\n        {mainText}\r\n        {unreads > 0 && (\r\n          <Chip\r\n            size=\"small\"\r\n            style={{ marginLeft: 5 }}\r\n            label={unreads}\r\n            color=\"secondary\"\r\n          />\r\n        )}\r\n      </>\r\n    );\r\n  };\r\n\r\n  const getSecondaryText = (chat) => {\r\n    return chat.lastMessage !== \"\"\r\n      ? `${datetimeToClient(chat.updatedAt)}: ${chat.lastMessage}`\r\n      : \"\";\r\n  };\r\n\r\n  const getItemStyle = (chat) => {\r\n    return {\r\n      borderLeft: chat.uuid === id ? \"6px solid #002d6e\" : null,\r\n      backgroundColor: chat.uuid === id ? \"theme.palette.chatlist\" : null,\r\n    };\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <ConfirmationModal\r\n        title={\"Excluir Conversa\"}\r\n        open={confirmationModal}\r\n        onClose={setConfirmModalOpen}\r\n        onConfirm={handleDelete}\r\n      >\r\n        Esta ação não pode ser revertida, confirmar?\r\n      </ConfirmationModal>\r\n      <div className={classes.mainContainer}>\r\n        <div className={classes.chatList}>\r\n          <List>\r\n            {Array.isArray(chats) &&\r\n              chats.length > 0 &&\r\n              chats.map((chat, key) => (\r\n                <ListItem\r\n                  onClick={() => goToMessages(chat)}\r\n                  key={key}\r\n                  className={classes.listItem}\r\n                  style={getItemStyle(chat)}\r\n                  button\r\n                >\r\n                  <ListItemText\r\n                    primary={getPrimaryText(chat)}\r\n                    secondary={getSecondaryText(chat)}\r\n                  />\r\n                  {chat.ownerId === user.id && (\r\n                    <ListItemSecondaryAction>\r\n                      <IconButton\r\n                        onClick={() => {\r\n                          goToMessages(chat).then(() => {\r\n                            handleEditChat(chat);\r\n                          });\r\n                        }}\r\n                        edge=\"end\"\r\n                        aria-label=\"delete\"\r\n                        size=\"small\"\r\n                        style={{ marginRight: 5 }}\r\n                      >\r\n                        <EditIcon />\r\n                      </IconButton>\r\n                      <IconButton\r\n                        onClick={() => {\r\n                          setSelectedChat(chat);\r\n                          setConfirmModalOpen(true);\r\n                        }}\r\n                        edge=\"end\"\r\n                        aria-label=\"delete\"\r\n                        size=\"small\"\r\n                      >\r\n                        <DeleteIcon />\r\n                      </IconButton>\r\n                    </ListItemSecondaryAction>\r\n                  )}\r\n                </ListItem>\r\n              ))}\r\n          </List>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n","import React, { useContext, useEffect, useRef, useState } from \"react\";\r\nimport {\r\n  Box,\r\n  FormControl,\r\n  IconButton,\r\n  Input,\r\n  InputAdornment,\r\n  makeStyles,\r\n  Paper,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport SendIcon from \"@material-ui/icons/Send\";\r\n\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\nimport { useDate } from \"../../hooks/useDate\";\r\nimport api from \"../../services/api\";\r\nimport { green } from \"@material-ui/core/colors\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  mainContainer: {\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    position: \"relative\",\r\n    flex: 1,\r\n    overflow: \"hidden\",\r\n    borderRadius: 0,\r\n    height: \"100%\",\r\n    borderLeft: \"1px solid rgba(0, 0, 0, 0.12)\",\r\n  },\r\n  messageList: {\r\n    position: \"relative\",\r\n    overflowY: \"auto\",\r\n    height: \"100%\",\r\n    ...theme.scrollbarStyles,\r\n    backgroundColor: theme.palette.chatlist, //DARK MODE PLW DESIGN//\r\n  },\r\n  inputArea: {\r\n    position: \"relative\",\r\n    height: \"auto\",\r\n  },\r\n  input: {\r\n    padding: \"20px\",\r\n  },\r\n  buttonSend: {\r\n    margin: theme.spacing(1),\r\n  },\r\n  boxLeft: {\r\n    padding: \"10px 10px 5px\",\r\n    margin: \"10px\",\r\n    position: \"relative\",\r\n    backgroundColor: \"blue\",\r\n    maxWidth: 300,\r\n    borderRadius: 10,\r\n    borderBottomLeftRadius: 0,\r\n    border: \"1px solid rgba(0, 0, 0, 0.12)\",\r\n  },\r\n  boxRight: {\r\n    padding: \"10px 10px 5px\",\r\n    margin: \"10px 10px 10px auto\",\r\n    position: \"relative\",\r\n    backgroundColor: \"green\", //DARK MODE PLW DESIGN//\r\n    textAlign: \"right\",\r\n    maxWidth: 300,\r\n    borderRadius: 10,\r\n    borderBottomRightRadius: 0,\r\n    border: \"1px solid rgba(0, 0, 0, 0.12)\",\r\n  },\r\n}));\r\n\r\nexport default function ChatMessages({\r\n  chat,\r\n  messages,\r\n  handleSendMessage,\r\n  handleLoadMore,\r\n  scrollToBottomRef,\r\n  pageInfo,\r\n  loading,\r\n}) {\r\n  const classes = useStyles();\r\n  const { user } = useContext(AuthContext);\r\n  const { datetimeToClient } = useDate();\r\n  const baseRef = useRef();\r\n\r\n  const [contentMessage, setContentMessage] = useState(\"\");\r\n\r\n  const scrollToBottom = () => {\r\n    if (baseRef.current) {\r\n      baseRef.current.scrollIntoView({});\r\n    }\r\n  };\r\n\r\n  const unreadMessages = (chat) => {\r\n    if (chat !== undefined) {\r\n      const currentUser = chat.users.find((u) => u.userId === user.id);\r\n      return currentUser.unreads > 0;\r\n    }\r\n    return 0;\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (unreadMessages(chat) > 0) {\r\n      try {\r\n        api.post(`/chats/${chat.id}/read`, { userId: user.id });\r\n      } catch (err) {}\r\n    }\r\n    scrollToBottomRef.current = scrollToBottom;\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  const handleScroll = (e) => {\r\n    const { scrollTop } = e.currentTarget;\r\n    if (!pageInfo.hasMore || loading) return;\r\n    if (scrollTop < 600) {\r\n      handleLoadMore();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Paper className={classes.mainContainer}>\r\n      <div onScroll={handleScroll} className={classes.messageList}>\r\n        {Array.isArray(messages) &&\r\n          messages.map((item, key) => {\r\n            if (item.senderId === user.id) {\r\n              return (\r\n                <Box key={key} className={classes.boxRight}>\r\n                  <Typography variant=\"subtitle2\">\r\n                    {item.sender.name}\r\n                  </Typography>\r\n                  {item.message}\r\n                  <Typography variant=\"caption\" display=\"block\">\r\n                    {datetimeToClient(item.createdAt)}\r\n                  </Typography>\r\n                </Box>\r\n              );\r\n            } else {\r\n              return (\r\n                <Box key={key} className={classes.boxLeft}>\r\n                  <Typography variant=\"subtitle2\">\r\n                    {item.sender.name}\r\n                  </Typography>\r\n                  {item.message}\r\n                  <Typography variant=\"caption\" display=\"block\">\r\n                    {datetimeToClient(item.createdAt)}\r\n                  </Typography>\r\n                </Box>\r\n              );\r\n            }\r\n          })}\r\n        <div ref={baseRef}></div>\r\n      </div>\r\n      <div className={classes.inputArea}>\r\n        <FormControl variant=\"outlined\" fullWidth>\r\n          <Input\r\n            multiline\r\n            value={contentMessage}\r\n            onKeyUp={(e) => {\r\n              if (e.key === \"Enter\" && contentMessage.trim() !== \"\") {\r\n                handleSendMessage(contentMessage);\r\n                setContentMessage(\"\");\r\n              }\r\n            }}\r\n            onChange={(e) => setContentMessage(e.target.value)}\r\n            className={classes.input}\r\n            endAdornment={\r\n              <InputAdornment position=\"end\">\r\n                <IconButton\r\n                  onClick={() => {\r\n                    if (contentMessage.trim() !== \"\") {\r\n                      handleSendMessage(contentMessage);\r\n                      setContentMessage(\"\");\r\n                    }\r\n                  }}\r\n                  className={classes.buttonSend}\r\n                >\r\n                  <SendIcon />\r\n                </IconButton>\r\n              </InputAdornment>\r\n            }\r\n          />\r\n        </FormControl>\r\n      </div>\r\n    </Paper>\r\n  );\r\n}\r\n","import React, { useContext, useEffect, useRef, useState } from \"react\";\r\n\r\nimport { useParams, useHistory } from \"react-router-dom\";\r\n\r\nimport {\r\n  Button,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogTitle,\r\n  Grid,\r\n  makeStyles,\r\n  Paper,\r\n  Tab,\r\n  Tabs,\r\n  TextField,\r\n} from \"@material-ui/core\";\r\nimport ChatList from \"./ChatList\";\r\nimport ChatMessages from \"./ChatMessages\";\r\nimport { UsersFilter } from \"../../components/UsersFilter\";\r\nimport api from \"../../services/api\";\r\nimport { socketConnection } from \"../../services/socket\";\r\n\r\nimport { has, isObject } from \"lodash\";\r\n\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\nimport withWidth, { isWidthUp } from \"@material-ui/core/withWidth\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  mainContainer: {\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    position: \"relative\",\r\n    flex: 1,\r\n    padding: theme.spacing(2),\r\n    height: `calc(100% - 48px)`,\r\n    overflowY: \"hidden\",\r\n    border: \"1px solid rgba(0, 0, 0, 0.12)\",\r\n  },\r\n  gridContainer: {\r\n    flex: 1,\r\n    height: \"100%\",\r\n    border: \"1px solid rgba(0, 0, 0, 0.12)\",\r\n    backgroundColor: theme.palette.dark,\r\n  },\r\n  gridItem: {\r\n    height: \"100%\",\r\n  },\r\n  gridItemTab: {\r\n    height: \"92%\",\r\n    width: \"100%\",\r\n  },\r\n  btnContainer: {\r\n    textAlign: \"right\",\r\n    padding: 10,\r\n  },\r\n}));\r\n\r\nexport function ChatModal({\r\n  open,\r\n  chat,\r\n  type,\r\n  handleClose,\r\n  handleLoadNewChat,\r\n}) {\r\n  const [users, setUsers] = useState([]);\r\n  const [title, setTitle] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    setTitle(\"\");\r\n    setUsers([]);\r\n    if (type === \"edit\") {\r\n      const userList = chat.users.map((u) => ({\r\n        id: u.user.id,\r\n        name: u.user.name,\r\n      }));\r\n      setUsers(userList);\r\n      setTitle(chat.title);\r\n    }\r\n  }, [chat, open, type]);\r\n\r\n  const handleSave = async () => {\r\n    try {\r\n      if (!title) {\r\n        alert(\"Por favor, preencha o título da conversa.\");\r\n        return;\r\n      }\r\n\r\n      if (!users || users.length === 0) {\r\n        alert(\"Por favor, selecione pelo menos um usuário.\");\r\n        return;\r\n      }\r\n\r\n      if (type === \"edit\") {\r\n        await api.put(`/chats/${chat.id}`, {\r\n          users,\r\n          title,\r\n        });\r\n      } else {\r\n        const { data } = await api.post(\"/chats\", {\r\n          users,\r\n          title,\r\n        });\r\n        handleLoadNewChat(data);\r\n      }\r\n      handleClose();\r\n    } catch (err) {}\r\n  };  \r\n\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      onClose={handleClose}\r\n      aria-labelledby=\"alert-dialog-title\"\r\n      aria-describedby=\"alert-dialog-description\"\r\n    >\r\n      <DialogTitle id=\"alert-dialog-title\">Conversa</DialogTitle>\r\n      <DialogContent>\r\n        <Grid spacing={2} container>\r\n          <Grid xs={12} style={{ padding: 18 }} item>\r\n            <TextField\r\n              label=\"Título\"\r\n              placeholder=\"Título\"\r\n              value={title}\r\n              onChange={(e) => setTitle(e.target.value)}\r\n              variant=\"outlined\"\r\n              size=\"small\"\r\n              fullWidth\r\n            />\r\n          </Grid>\r\n          <Grid xs={12} item>\r\n            <UsersFilter\r\n              onFiltered={(users) => setUsers(users)}\r\n              initialUsers={users}\r\n            />\r\n          </Grid>\r\n        </Grid>\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={handleClose} color=\"primary\">\r\n          Fechar\r\n        </Button>\r\n        <Button onClick={handleSave} color=\"primary\" variant=\"contained\">\r\n          Salvar\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nfunction Chat(props) {\r\n  const classes = useStyles();\r\n  const { user } = useContext(AuthContext);\r\n  const history = useHistory();\r\n\r\n  const [showDialog, setShowDialog] = useState(false);\r\n  const [dialogType, setDialogType] = useState(\"new\");\r\n  const [currentChat, setCurrentChat] = useState({});\r\n  const [chats, setChats] = useState([]);\r\n  const [chatsPageInfo, setChatsPageInfo] = useState({ hasMore: false });\r\n  const [messages, setMessages] = useState([]);\r\n  const [messagesPageInfo, setMessagesPageInfo] = useState({ hasMore: false });\r\n  const [messagesPage, setMessagesPage] = useState(1);\r\n  const [loading, setLoading] = useState(false);\r\n  const [tab, setTab] = useState(0);\r\n  const isMounted = useRef(true);\r\n  const scrollToBottomRef = useRef();\r\n  const { id } = useParams();\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      isMounted.current = false;\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (isMounted.current) {\r\n      findChats().then((data) => {\r\n        const { records } = data;\r\n        if (records.length > 0) {\r\n          setChats(records);\r\n          setChatsPageInfo(data);\r\n\r\n          if (id && records.length) {\r\n            const chat = records.find((r) => r.uuid === id);\r\n            selectChat(chat);\r\n          }\r\n        }\r\n      });\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (isObject(currentChat) && has(currentChat, \"id\")) {\r\n      findMessages(currentChat.id).then(() => {\r\n        if (typeof scrollToBottomRef.current === \"function\") {\r\n          setTimeout(() => {\r\n            scrollToBottomRef.current();\r\n          }, 300);\r\n        }\r\n      });\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [currentChat]);\r\n\r\n  useEffect(() => {\r\n    const companyId = localStorage.getItem(\"companyId\");\r\n    const socket = socketConnection({ companyId });\r\n\r\n    socket.on(`company-${companyId}-chat-user-${user.id}`, (data) => {\r\n      if (data.action === \"create\") {\r\n        setChats((prev) => [data.record, ...prev]);\r\n      }\r\n      if (data.action === \"update\") {\r\n        const changedChats = chats.map((chat) => {\r\n          if (chat.id === data.record.id) {\r\n            setCurrentChat(data.record);\r\n            return {\r\n              ...data.record,\r\n            };\r\n          }\r\n          return chat;\r\n        });\r\n        setChats(changedChats);\r\n      }\r\n    });\r\n\r\n    socket.on(`company-${companyId}-chat`, (data) => {\r\n      if (data.action === \"delete\") {\r\n        const filteredChats = chats.filter((c) => c.id !== +data.id);\r\n        setChats(filteredChats);\r\n        setMessages([]);\r\n        setMessagesPage(1);\r\n        setMessagesPageInfo({ hasMore: false });\r\n        setCurrentChat({});\r\n        history.push(\"/chats\");\r\n      }\r\n    });\r\n\r\n    if (isObject(currentChat) && has(currentChat, \"id\")) {\r\n      socket.on(`company-${companyId}-chat-${currentChat.id}`, (data) => {\r\n        if (data.action === \"new-message\") {\r\n          setMessages((prev) => [...prev, data.newMessage]);\r\n          const changedChats = chats.map((chat) => {\r\n            if (chat.id === data.newMessage.chatId) {\r\n              return {\r\n                ...data.chat,\r\n              };\r\n            }\r\n            return chat;\r\n          });\r\n          setChats(changedChats);\r\n          scrollToBottomRef.current();\r\n        }\r\n\r\n        if (data.action === \"update\") {\r\n          const changedChats = chats.map((chat) => {\r\n            if (chat.id === data.chat.id) {\r\n              return {\r\n                ...data.chat,\r\n              };\r\n            }\r\n            return chat;\r\n          });\r\n          setChats(changedChats);\r\n          scrollToBottomRef.current();\r\n        }\r\n      });\r\n    }\r\n\r\n    return () => {\r\n      socket.disconnect();\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [currentChat]);\r\n\r\n  const selectChat = (chat) => {\r\n    try {\r\n      setMessages([]);\r\n      setMessagesPage(1);\r\n      setCurrentChat(chat);\r\n      setTab(1);\r\n    } catch (err) {}\r\n  };\r\n\r\n  const sendMessage = async (contentMessage) => {\r\n    setLoading(true);\r\n    try {\r\n      await api.post(`/chats/${currentChat.id}/messages`, {\r\n        message: contentMessage,\r\n      });\r\n    } catch (err) {}\r\n    setLoading(false);\r\n  };\r\n\r\n  const deleteChat = async (chat) => {\r\n    try {\r\n      await api.delete(`/chats/${chat.id}`);\r\n    } catch (err) {}\r\n  };\r\n\r\n  const findMessages = async (chatId) => {\r\n    setLoading(true);\r\n    try {\r\n      const { data } = await api.get(\r\n        `/chats/${chatId}/messages?pageNumber=${messagesPage}`\r\n      );\r\n      setMessagesPage((prev) => prev + 1);\r\n      setMessagesPageInfo(data);\r\n      setMessages((prev) => [...data.records, ...prev]);\r\n    } catch (err) {}\r\n    setLoading(false);\r\n  };\r\n\r\n  const loadMoreMessages = async () => {\r\n    if (!loading) {\r\n      findMessages(currentChat.id);\r\n    }\r\n  };\r\n\r\n  const findChats = async () => {\r\n    try {\r\n      const { data } = await api.get(\"/chats\");\r\n      return data;\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n\r\n  const renderGrid = () => {\r\n    return (\r\n      <Grid className={classes.gridContainer} container>\r\n        <Grid className={classes.gridItem} md={3} item>\r\n          \r\n            <div className={classes.btnContainer}>\r\n              <Button\r\n                onClick={() => {\r\n                  setDialogType(\"new\");\r\n                  setShowDialog(true);\r\n                }}\r\n                color=\"primary\"\r\n                variant=\"contained\"\r\n              >\r\n                Nova\r\n              </Button>\r\n            </div>\r\n          \r\n          <ChatList\r\n            chats={chats}\r\n            pageInfo={chatsPageInfo}\r\n            loading={loading}\r\n            handleSelectChat={(chat) => selectChat(chat)}\r\n            handleDeleteChat={(chat) => deleteChat(chat)}\r\n            handleEditChat={() => {\r\n              setDialogType(\"edit\");\r\n              setShowDialog(true);\r\n            }}\r\n          />\r\n        </Grid>\r\n        <Grid className={classes.gridItem} md={9} item>\r\n          {isObject(currentChat) && has(currentChat, \"id\") && (\r\n            <ChatMessages\r\n              chat={currentChat}\r\n              scrollToBottomRef={scrollToBottomRef}\r\n              pageInfo={messagesPageInfo}\r\n              messages={messages}\r\n              loading={loading}\r\n              handleSendMessage={sendMessage}\r\n              handleLoadMore={loadMoreMessages}\r\n            />\r\n          )}\r\n        </Grid>\r\n      </Grid>\r\n    );\r\n  };\r\n\r\n  const renderTab = () => {\r\n    return (\r\n      <Grid className={classes.gridContainer} container>\r\n        <Grid md={12} item>\r\n          <Tabs\r\n            value={tab}\r\n            indicatorColor=\"primary\"\r\n            textColor=\"primary\"\r\n            onChange={(e, v) => setTab(v)}\r\n            aria-label=\"disabled tabs example\"\r\n          >\r\n            <Tab label=\"Chats\" />\r\n            <Tab label=\"Mensagens\" />\r\n          </Tabs>\r\n        </Grid>\r\n        {tab === 0 && (\r\n          <Grid className={classes.gridItemTab} md={12} item>\r\n            <div className={classes.btnContainer}>\r\n              <Button\r\n                onClick={() => setShowDialog(true)}\r\n                color=\"primary\"\r\n                variant=\"contained\"\r\n              >\r\n                Novo\r\n              </Button>\r\n            </div>\r\n            <ChatList\r\n              chats={chats}\r\n              pageInfo={chatsPageInfo}\r\n              loading={loading}\r\n              handleSelectChat={(chat) => selectChat(chat)}\r\n              handleDeleteChat={(chat) => deleteChat(chat)}\r\n            />\r\n          </Grid>\r\n        )}\r\n        {tab === 1 && (\r\n          <Grid className={classes.gridItemTab} md={12} item>\r\n            {isObject(currentChat) && has(currentChat, \"id\") && (\r\n              <ChatMessages\r\n                scrollToBottomRef={scrollToBottomRef}\r\n                pageInfo={messagesPageInfo}\r\n                messages={messages}\r\n                loading={loading}\r\n                handleSendMessage={sendMessage}\r\n                handleLoadMore={loadMoreMessages}\r\n              />\r\n            )}\r\n          </Grid>\r\n        )}\r\n      </Grid>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <ChatModal\r\n        type={dialogType}\r\n        open={showDialog}\r\n        chat={currentChat}\r\n        handleLoadNewChat={(data) => {\r\n          setMessages([]);\r\n          setMessagesPage(1);\r\n          setCurrentChat(data);\r\n          setTab(1);\r\n          history.push(`/chats/${data.uuid}`);\r\n        }}\r\n        handleClose={() => setShowDialog(false)}\r\n      />\r\n      <Paper className={classes.mainContainer}>\r\n        {isWidthUp(\"md\", props.width) ? renderGrid() : renderTab()}\r\n      </Paper>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default withWidth()(Chat);\r\n","import React, { useState, useContext } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Grid from '@material-ui/core/Grid';\r\nimport TextField from '@material-ui/core/TextField';\r\n\r\nimport SubscriptionModal from \"../../components/SubscriptionModal\";\r\nimport MainHeader from \"../../components/MainHeader\";\r\nimport Title from \"../../components/Title\";\r\nimport MainContainer from \"../../components/MainContainer\";\r\n\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  mainPaper: {\r\n    flex: 1,\r\n    padding: theme.spacing(1),\r\n    overflowY: \"scroll\",\r\n    ...theme.scrollbarStyles,\r\n  },\r\n}));\r\n\r\nconst _formatDate = (date) => {\r\n  const now = new Date();\r\n  const past = new Date(date);\r\n  const diff = Math.abs(now.getTime() - past.getTime());\r\n  const days = Math.ceil(diff / (1000 * 60 * 60 * 24));\r\n\r\n  return days;\r\n}\r\n\r\nconst Contacts = () => {\r\n  const classes = useStyles();\r\n  const { user } = useContext(AuthContext);\r\n\r\n  const [loading,] = useState(false);\r\n  const [, setPageNumber] = useState(1);\r\n  const [selectedContactId, setSelectedContactId] = useState(null);\r\n  const [contactModalOpen, setContactModalOpen] = useState(false);\r\n  const [hasMore,] = useState(false);\r\n\r\n\r\n  const handleOpenContactModal = () => {\r\n    setSelectedContactId(null);\r\n    setContactModalOpen(true);\r\n  };\r\n\r\n  const handleCloseContactModal = () => {\r\n    setSelectedContactId(null);\r\n    setContactModalOpen(false);\r\n  };\r\n\r\n  const loadMore = () => {\r\n    setPageNumber((prevState) => prevState + 1);\r\n  };\r\n\r\n  const handleScroll = (e) => {\r\n    if (!hasMore || loading) return;\r\n    const { scrollTop, scrollHeight, clientHeight } = e.currentTarget;\r\n    if (scrollHeight - (scrollTop + 100) < clientHeight) {\r\n      loadMore();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <MainContainer className={classes.mainContainer}>\r\n      <SubscriptionModal\r\n        open={contactModalOpen}\r\n        onClose={handleCloseContactModal}\r\n        aria-labelledby=\"form-dialog-title\"\r\n        contactId={selectedContactId}\r\n      ></SubscriptionModal>\r\n\r\n      <MainHeader>\r\n        <Title>Assinatura</Title>\r\n      </MainHeader>\r\n      <Grid item xs={12} sm={4}>\r\n        <Paper\r\n          className={classes.mainPaper}\r\n          variant=\"outlined\"\r\n          onScroll={handleScroll}\r\n        >\r\n\r\n          <div>\r\n            <TextField\r\n              id=\"outlined-full-width\"\r\n              label=\"Período de teste\"\r\n              defaultValue={`Seu período de teste termina em ${_formatDate(user?.company?.trialExpiration)} dias!`}\r\n              fullWidth\r\n              margin=\"normal\"\r\n              InputLabelProps={{\r\n                shrink: true,\r\n              }}\r\n              InputProps={{\r\n                readOnly: true,\r\n              }}\r\n              variant=\"outlined\"\r\n            />\r\n\r\n          </div>\r\n\r\n          <div>\r\n            <TextField\r\n              id=\"outlined-full-width\"\r\n              label=\"Email de cobrança\"\r\n              defaultValue={user?.company?.email}\r\n              fullWidth\r\n              margin=\"normal\"\r\n              InputLabelProps={{\r\n                shrink: true,\r\n              }}\r\n              InputProps={{\r\n                readOnly: true,\r\n              }}\r\n              variant=\"outlined\"\r\n            />\r\n\r\n          </div>\r\n\r\n          <div>\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              onClick={handleOpenContactModal}\r\n              fullWidth\r\n            >\r\n              Assine Agora!\r\n            </Button>\r\n          </div>\r\n\r\n        </Paper>\r\n      </Grid>\r\n    </MainContainer>\r\n  );\r\n};\r\n\r\nexport default Contacts;\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\n\r\nimport * as Yup from \"yup\";\r\nimport {\r\n    Formik,\r\n    Form,\r\n    Field,\r\n    FieldArray\r\n} from \"formik\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport {\r\n    Box,\r\n    Button,\r\n    CircularProgress,\r\n    Dialog,\r\n    DialogActions,\r\n    DialogContent,\r\n    DialogTitle,\r\n    Divider,\r\n    Grid,\r\n    makeStyles,\r\n    TextField\r\n} from \"@material-ui/core\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\r\nimport AttachFileIcon from \"@material-ui/icons/AttachFile\";\r\n\r\nimport { green } from \"@material-ui/core/colors\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\n\r\nimport api from \"../../services/api\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root: {\r\n        display: \"flex\",\r\n        flexWrap: \"wrap\",\r\n        gap: 4\r\n    },\r\n    multFieldLine: {\r\n        display: \"flex\",\r\n        \"& > *:not(:last-child)\": {\r\n            marginRight: theme.spacing(1),\r\n        },\r\n    },\r\n    textField: {\r\n        marginRight: theme.spacing(1),\r\n        flex: 1,\r\n    },\r\n\r\n    extraAttr: {\r\n        display: \"flex\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n    },\r\n\r\n    btnWrapper: {\r\n        position: \"relative\",\r\n    },\r\n\r\n    buttonProgress: {\r\n        color: green[500],\r\n        position: \"absolute\",\r\n        top: \"50%\",\r\n        left: \"50%\",\r\n        marginTop: -12,\r\n        marginLeft: -12,\r\n    },\r\n    formControl: {\r\n        margin: theme.spacing(1),\r\n        minWidth: 2000,\r\n    },\r\n    colorAdorment: {\r\n        width: 20,\r\n        height: 20,\r\n    },\r\n}));\r\n\r\nconst FileListSchema = Yup.object().shape({\r\n    name: Yup.string()\r\n        .min(3, \"nome muito curto\")\r\n        .required(\"Obrigatório\"),\r\n    message: Yup.string()\r\n        .required(\"Obrigatório\")\r\n});\r\n\r\nconst FilesModal = ({ open, onClose, fileListId, reload }) => {\r\n    const classes = useStyles();\r\n    const { user } = useContext(AuthContext);\r\n    const [ files, setFiles ] = useState([]);\r\n    const [selectedFileNames, setSelectedFileNames] = useState([]);\r\n\r\n\r\n    const initialState = {\r\n        name: \"\",\r\n        message: \"\",\r\n        options: [{ name: \"\", path:\"\", mediaType:\"\" }],\r\n    };\r\n\r\n    const [fileList, setFileList] = useState(initialState);\r\n\r\n    useEffect(() => {\r\n        try {\r\n            (async () => {\r\n                if (!fileListId) return;\r\n\r\n                const { data } = await api.get(`/files/${fileListId}`);\r\n                setFileList(data);\r\n            })()\r\n        } catch (err) {\r\n            toastError(err);\r\n        }\r\n    }, [fileListId, open]);\r\n\r\n    const handleClose = () => {\r\n        setFileList(initialState);\r\n        setFiles([]);\r\n        onClose();\r\n    };\r\n\r\n    const handleSaveFileList = async (values) => {\r\n\r\n        const uploadFiles = async (options, filesOptions, id) => {\r\n                const formData = new FormData();\r\n                formData.append(\"fileId\", id);\r\n                formData.append(\"typeArch\", \"fileList\")\r\n                filesOptions.forEach((fileOption, index) => {\r\n                    if (fileOption.file) {\r\n                        formData.append(\"files\", fileOption.file);\r\n                        formData.append(\"mediaType\", fileOption.file.type)\r\n                        formData.append(\"name\", options[index].name);\r\n                        formData.append(\"id\", options[index].id);\r\n                    }\r\n                });\r\n      \r\n              try {\r\n                const { data } = await api.post(`/files/uploadList/${id}`, formData);\r\n                setFiles([]);\r\n                return data;\r\n              } catch (err) {\r\n                toastError(err);\r\n              }\r\n            return null;\r\n        }\r\n\r\n        const fileData = { ...values, userId: user.id };\r\n        \r\n        try {\r\n            if (fileListId) {\r\n                const { data } = await api.put(`/files/${fileListId}`, fileData)\r\n                if (data.options.length > 0)\r\n\r\n                    uploadFiles(data.options, values.options, fileListId)\r\n            } else {\r\n                const { data } = await api.post(\"/files\", fileData);\r\n                if (data.options.length > 0)\r\n                    uploadFiles(data.options, values.options, data.id)\r\n            }\r\n            toast.success(i18n.t(\"fileModal.success\"));\r\n            if (typeof reload == 'function') {\r\n                reload();\r\n            }            \r\n        } catch (err) {\r\n            toastError(err);\r\n        }\r\n        handleClose();\r\n    };\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <Dialog\r\n                open={open}\r\n                onClose={handleClose}\r\n                maxWidth=\"md\"\r\n                fullWidth\r\n                scroll=\"paper\">\r\n                <DialogTitle id=\"form-dialog-title\">\r\n                    {(fileListId ? `${i18n.t(\"fileModal.title.edit\")}` : `${i18n.t(\"fileModal.title.add\")}`)}\r\n                </DialogTitle>\r\n                <Formik\r\n                    initialValues={fileList}\r\n                    enableReinitialize={true}\r\n                    validationSchema={FileListSchema}\r\n                    onSubmit={(values, actions) => {\r\n                        setTimeout(() => {\r\n                            handleSaveFileList(values);\r\n                            actions.setSubmitting(false);\r\n                        }, 400);\r\n                    }}\r\n                >\r\n                    {({ touched, errors, isSubmitting, values }) => (\r\n                        <Form>\r\n                            <DialogContent dividers>\r\n                                <div className={classes.multFieldLine}>\r\n                                    <Field\r\n                                        as={TextField}\r\n                                        label={i18n.t(\"fileModal.form.name\")}\r\n                                        name=\"name\"\r\n                                        error={touched.name && Boolean(errors.name)}\r\n                                        helperText={touched.name && errors.name}\r\n                                        variant=\"outlined\"\r\n                                        margin=\"dense\"\r\n                                        fullWidth\r\n                                    />\r\n                                </div>\r\n                                <br />\r\n                                <div className={classes.multFieldLine}>\r\n                                    <Field\r\n                                        as={TextField}\r\n                                        label={i18n.t(\"fileModal.form.message\")}\r\n                                        type=\"message\"\r\n                                        multiline\r\n                                        minRows={5}\r\n                                        fullWidth\r\n                                        name=\"message\"\r\n                                        error={\r\n                                            touched.message && Boolean(errors.message)\r\n                                        }\r\n                                        helperText={\r\n                                            touched.message && errors.message\r\n                                        }\r\n                                        variant=\"outlined\"\r\n                                        margin=\"dense\"\r\n                                    />\r\n                                </div>\r\n                                <Typography\r\n                                    style={{ marginBottom: 8, marginTop: 12 }}\r\n                                    variant=\"subtitle1\"\r\n                                >\r\n                                    {i18n.t(\"fileModal.form.fileOptions\")}\r\n                                </Typography>\r\n\r\n                                <FieldArray name=\"options\">\r\n                                    {({ push, remove }) => (\r\n                                        <>\r\n                                            {values.options &&\r\n                                                values.options.length > 0 &&\r\n                                                values.options.map((info, index) => (    \r\n                                                    <div\r\n                                                        className={classes.extraAttr}\r\n                                                        key={`${index}-info`}\r\n                                                    >\r\n                                                        <Grid container  spacing={0}>\r\n                                                            <Grid xs={6} md={10} item> \r\n                                                                <Field\r\n                                                                    as={TextField}\r\n                                                                    label={i18n.t(\"fileModal.form.extraName\")}\r\n                                                                    name={`options[${index}].name`}\r\n                                                                    variant=\"outlined\"\r\n                                                                    margin=\"dense\"\r\n                                                                    multiline\r\n                                                                    fullWidth\r\n                                                                    minRows={2}\r\n                                                                    className={classes.textField}\r\n                                                                />\r\n                                                            </Grid>     \r\n                                                            <Grid xs={2} md={2} item style={{ display: 'flex', alignItems: 'center', justifyContent: 'flex-end' }}>\r\n                                                                <input\r\n                                                                    type=\"file\"\r\n                                                                    onChange={(e) => {\r\n                                                                        const selectedFile = e.target.files[0];\r\n                                                                        const updatedOptions = [...values.options];                                                                \r\n                                                                        updatedOptions[index].file = selectedFile;\r\n                                                                       \r\n                                                                        setFiles('options', updatedOptions);\r\n\r\n                                                                        // Atualize a lista selectedFileNames para o campo específico\r\n                                                                        const updatedFileNames = [...selectedFileNames];\r\n                                                                        updatedFileNames[index] = selectedFile ? selectedFile.name : '';\r\n                                                                        setSelectedFileNames(updatedFileNames);\r\n                                                                    }}\r\n                                                                    style={{ display: 'none' }}\r\n                                                                    name={`options[${index}].file`}\r\n                                                                    id={`file-upload-${index}`}\r\n                                                                />\r\n                                                                <label htmlFor={`file-upload-${index}`}>\r\n                                                                    <IconButton component=\"span\">\r\n                                                                        <AttachFileIcon />\r\n                                                                    </IconButton>\r\n                                                                </label>\r\n                                                                <IconButton\r\n                                                                    size=\"small\"\r\n                                                                    onClick={() => remove(index)}\r\n                                                                >\r\n                                                                    <DeleteOutlineIcon />\r\n                                                                </IconButton>    \r\n                                                            </Grid>\r\n                                                            <Grid xs={12} md={12} item>\r\n                                                                {info.path? info.path : selectedFileNames[index]}                               \r\n                                                            </Grid> \r\n                                                        </Grid>                                                    \r\n                                                </div>                     \r\n                                                                                           \r\n                                                ))}\r\n                                            <div className={classes.extraAttr}>\r\n                                                <Button\r\n                                                    style={{ flex: 1, marginTop: 8 }}\r\n                                                    variant=\"outlined\"\r\n                                                    color=\"primary\"\r\n                                                    onClick={() => {push({ name: \"\", path: \"\"});\r\n                                                    setSelectedFileNames([...selectedFileNames, \"\"]);\r\n                                                }}\r\n                                                >\r\n                                                    {`+ ${i18n.t(\"fileModal.buttons.fileOptions\")}`}\r\n                                                </Button>\r\n                                            </div>\r\n                                        </>\r\n                                    )}\r\n                                </FieldArray>\r\n                            </DialogContent>\r\n                            <DialogActions>\r\n                                <Button\r\n                                    onClick={handleClose}\r\n                                    color=\"secondary\"\r\n                                    disabled={isSubmitting}\r\n                                    variant=\"outlined\"\r\n                                >\r\n                                    {i18n.t(\"fileModal.buttons.cancel\")}\r\n                                </Button>\r\n                                <Button\r\n                                    type=\"submit\"\r\n                                    color=\"primary\"\r\n                                    disabled={isSubmitting}\r\n                                    variant=\"contained\"\r\n                                    className={classes.btnWrapper}\r\n                                >\r\n                                    {fileListId\r\n                                        ? `${i18n.t(\"fileModal.buttons.okEdit\")}`\r\n                                        : `${i18n.t(\"fileModal.buttons.okAdd\")}`}\r\n                                    {isSubmitting && (\r\n                                        <CircularProgress\r\n                                            size={24}\r\n                                            className={classes.buttonProgress}\r\n                                        />\r\n                                    )}\r\n                                </Button>\r\n                            </DialogActions>\r\n                        </Form>\r\n                    )}\r\n                </Formik>\r\n            </Dialog>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default FilesModal;","import React, {\r\n    useState,\r\n    useEffect,\r\n    useReducer,\r\n    useCallback,\r\n    useContext,\r\n} from \"react\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport SearchIcon from \"@material-ui/icons/Search\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\n\r\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\r\nimport EditIcon from \"@material-ui/icons/Edit\";\r\n\r\nimport MainContainer from \"../../components/MainContainer\";\r\nimport MainHeader from \"../../components/MainHeader\";\r\nimport MainHeaderButtonsWrapper from \"../../components/MainHeaderButtonsWrapper\";\r\nimport Title from \"../../components/Title\";\r\n\r\nimport api from \"../../services/api\";\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport TableRowSkeleton from \"../../components/TableRowSkeleton\";\r\nimport FileModal from \"../../components/FileModal\";\r\nimport ConfirmationModal from \"../../components/ConfirmationModal\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport { socketConnection } from \"../../services/socket\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\n\r\nconst reducer = (state, action) => {\r\n    if (action.type === \"LOAD_FILES\") {\r\n        const files = action.payload;\r\n        const newFiles = [];\r\n\r\n        files.forEach((fileList) => {\r\n            const fileListIndex = state.findIndex((s) => s.id === fileList.id);\r\n            if (fileListIndex !== -1) {\r\n                state[fileListIndex] = fileList;\r\n            } else {\r\n                newFiles.push(fileList);\r\n            }\r\n        });\r\n\r\n        return [...state, ...newFiles];\r\n    }\r\n\r\n    if (action.type === \"UPDATE_FILES\") {\r\n        const fileList = action.payload;\r\n        const fileListIndex = state.findIndex((s) => s.id === fileList.id);\r\n\r\n        if (fileListIndex !== -1) {\r\n            state[fileListIndex] = fileList;\r\n            return [...state];\r\n        } else {\r\n            return [fileList, ...state];\r\n        }\r\n    }\r\n\r\n    if (action.type === \"DELETE_TAG\") {\r\n        const fileListId = action.payload;\r\n\r\n        const fileListIndex = state.findIndex((s) => s.id === fileListId);\r\n        if (fileListIndex !== -1) {\r\n            state.splice(fileListIndex, 1);\r\n        }\r\n        return [...state];\r\n    }\r\n\r\n    if (action.type === \"RESET\") {\r\n        return [];\r\n    }\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    mainPaper: {\r\n        flex: 1,\r\n        padding: theme.spacing(1),\r\n        overflowY: \"scroll\",\r\n        ...theme.scrollbarStyles,\r\n    },\r\n}));\r\n\r\nconst FileLists = () => {\r\n    const classes = useStyles();\r\n\r\n    const { user } = useContext(AuthContext);\r\n\r\n    const [loading, setLoading] = useState(false);\r\n    const [pageNumber, setPageNumber] = useState(1);\r\n    const [hasMore, setHasMore] = useState(false);\r\n    const [selectedFileList, setSelectedFileList] = useState(null);\r\n    const [deletingFileList, setDeletingFileList] = useState(null);\r\n    const [confirmModalOpen, setConfirmModalOpen] = useState(false);\r\n    const [searchParam, setSearchParam] = useState(\"\");\r\n    const [files, dispatch] = useReducer(reducer, []);\r\n    const [fileListModalOpen, setFileListModalOpen] = useState(false);\r\n\r\n    const fetchFileLists = useCallback(async () => {\r\n        try {\r\n            const { data } = await api.get(\"/files/\", {\r\n                params: { searchParam, pageNumber },\r\n            });\r\n            dispatch({ type: \"LOAD_FILES\", payload: data.files });\r\n            setHasMore(data.hasMore);\r\n            setLoading(false);\r\n        } catch (err) {\r\n            toastError(err);\r\n        }\r\n    }, [searchParam, pageNumber]);\r\n\r\n    useEffect(() => {\r\n        dispatch({ type: \"RESET\" });\r\n        setPageNumber(1);\r\n    }, [searchParam]);\r\n\r\n    useEffect(() => {\r\n        setLoading(true);\r\n        const delayDebounceFn = setTimeout(() => {\r\n            fetchFileLists();\r\n        }, 500);\r\n        return () => clearTimeout(delayDebounceFn);\r\n    }, [searchParam, pageNumber, fetchFileLists]);\r\n\r\n    useEffect(() => {\r\n        const socket = socketConnection({ companyId: user.companyId });\r\n\r\n        socket.on(`company-${user.companyId}-file`, (data) => {\r\n            if (data.action === \"update\" || data.action === \"create\") {\r\n                dispatch({ type: \"UPDATE_FILES\", payload: data.files });\r\n            }\r\n\r\n            if (data.action === \"delete\") {\r\n                dispatch({ type: \"DELETE_USER\", payload: +data.fileId });\r\n            }\r\n        });\r\n\r\n        return () => {\r\n            socket.disconnect();\r\n        };\r\n    }, [user]);\r\n\r\n    const handleOpenFileListModal = () => {\r\n        setSelectedFileList(null);\r\n        setFileListModalOpen(true);\r\n    };\r\n\r\n    const handleCloseFileListModal = () => {\r\n        setSelectedFileList(null);\r\n        setFileListModalOpen(false);\r\n    };\r\n\r\n    const handleSearch = (event) => {\r\n        setSearchParam(event.target.value.toLowerCase());\r\n    };\r\n\r\n    const handleEditFileList = (fileList) => {\r\n        setSelectedFileList(fileList);\r\n        setFileListModalOpen(true);\r\n    };\r\n\r\n    const handleDeleteFileList = async (fileListId) => {\r\n        try {\r\n            await api.delete(`/files/${fileListId}`);\r\n            toast.success(i18n.t(\"files.toasts.deleted\"));\r\n        } catch (err) {\r\n            toastError(err);\r\n        }\r\n        setDeletingFileList(null);\r\n        setSearchParam(\"\");\r\n        setPageNumber(1);\r\n\r\n        dispatch({ type: \"RESET\" });\r\n        setPageNumber(1);\r\n        await fetchFileLists();\r\n    };\r\n\r\n    const loadMore = () => {\r\n        setPageNumber((prevState) => prevState + 1);\r\n    };\r\n\r\n    const handleScroll = (e) => {\r\n        if (!hasMore || loading) return;\r\n        const { scrollTop, scrollHeight, clientHeight } = e.currentTarget;\r\n        if (scrollHeight - (scrollTop + 100) < clientHeight) {\r\n            loadMore();\r\n        }\r\n    };\r\n\r\n    return (\r\n        <MainContainer>\r\n            <ConfirmationModal\r\n                title={deletingFileList && `${i18n.t(\"files.confirmationModal.deleteTitle\")}`}\r\n                open={confirmModalOpen}\r\n                onClose={setConfirmModalOpen}\r\n                onConfirm={() => handleDeleteFileList(deletingFileList.id)}\r\n            >\r\n                {i18n.t(\"files.confirmationModal.deleteMessage\")}\r\n            </ConfirmationModal>\r\n            <FileModal\r\n                open={fileListModalOpen}\r\n                onClose={handleCloseFileListModal}\r\n                reload={fetchFileLists}\r\n                aria-labelledby=\"form-dialog-title\"\r\n                fileListId={selectedFileList && selectedFileList.id}\r\n            />\r\n            <MainHeader>\r\n                <Title>{i18n.t(\"files.title\")} ({files.length})</Title>\r\n                <MainHeaderButtonsWrapper>\r\n                    <TextField\r\n                        placeholder={i18n.t(\"contacts.searchPlaceholder\")}\r\n                        type=\"search\"\r\n                        value={searchParam}\r\n                        onChange={handleSearch}\r\n                        InputProps={{\r\n                            startAdornment: (\r\n                                <InputAdornment position=\"start\">\r\n                                    <SearchIcon style={{ color: \"gray\" }} />\r\n                                </InputAdornment>\r\n                            ),\r\n                        }}\r\n                    />\r\n                    <Button\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        onClick={handleOpenFileListModal}\r\n                    >\r\n                        {i18n.t(\"files.buttons.add\")}\r\n                    </Button>\r\n                </MainHeaderButtonsWrapper>\r\n            </MainHeader>\r\n            <Paper\r\n                className={classes.mainPaper}\r\n                variant=\"outlined\"\r\n                onScroll={handleScroll}\r\n            >\r\n                <Table size=\"small\">\r\n                    <TableHead>\r\n                        <TableRow>\r\n                            <TableCell align=\"center\">{i18n.t(\"files.table.name\")}</TableCell>\r\n                            <TableCell align=\"center\">\r\n                                {i18n.t(\"files.table.actions\")}\r\n                            </TableCell>\r\n                        </TableRow>\r\n                    </TableHead>\r\n                    <TableBody>\r\n                        <>\r\n                            {files.map((fileList) => (\r\n                                <TableRow key={fileList.id}>\r\n                                    <TableCell align=\"center\">\r\n                                        {fileList.name}\r\n                                    </TableCell>\r\n                                    <TableCell align=\"center\">\r\n                                        <IconButton size=\"small\" onClick={() => handleEditFileList(fileList)}>\r\n                                            <EditIcon />\r\n                                        </IconButton>\r\n\r\n                                        <IconButton\r\n                                            size=\"small\"\r\n                                            onClick={(e) => {\r\n                                                setConfirmModalOpen(true);\r\n                                                setDeletingFileList(fileList);\r\n                                            }}\r\n                                        >\r\n                                            <DeleteOutlineIcon />\r\n                                        </IconButton>\r\n                                    </TableCell>\r\n                                </TableRow>\r\n                            ))}\r\n                            {loading && <TableRowSkeleton columns={4} />}\r\n                        </>\r\n                    </TableBody>\r\n                </Table>\r\n            </Paper>\r\n        </MainContainer>\r\n    );\r\n};\r\n\r\nexport default FileLists;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Field } from \"formik\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport api from \"../../services/api\";\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    formControl: {\r\n        margin: theme.spacing(1),\r\n        minWidth: 120,\r\n    },\r\n}));\r\n\r\nconst QueueSelectSingle = () => {\r\n    const classes = useStyles();\r\n    const [queues, setQueues] = useState([]);\r\n\r\n    useEffect(() => {\r\n        (async () => {\r\n            try {\r\n                const { data } = await api.get(\"/queue\");\r\n                setQueues(data);\r\n            } catch (err) {\r\n                toastError(`QUEUESELETSINGLE >>> ${err}`);\r\n            }\r\n        })();\r\n    }, []);\r\n\r\n    return (\r\n        <div style={{ marginTop: 6 }}>\r\n            <FormControl\r\n                variant=\"outlined\"\r\n                className={classes.FormControl}\r\n                margin=\"dense\"\r\n                fullWidth\r\n            >\r\n                <div>\r\n                    <Typography>\r\n                        {i18n.t(\"queueSelect.inputLabel\")}\r\n                    </Typography>\r\n                    <Field\r\n                        as={Select}\r\n                        label={i18n.t(\"queueSelect.inputLabel\")}\r\n                        name=\"queueId\"\r\n                        labelId=\"queue-selection-label\"\r\n                        id=\"queue-selection\"\r\n                        fullWidth\r\n                    >\r\n                        {queues.map(queue => (\r\n                            <MenuItem key={queue.id} value={queue.id}>\r\n                                {queue.name}\r\n                            </MenuItem>\r\n                        ))}\r\n                    </Field>\r\n                </div>\r\n            </FormControl>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default QueueSelectSingle;\r\n","import React, { useState, useEffect } from \"react\";\r\n\r\nimport * as Yup from \"yup\";\r\nimport { Formik, Form, Field } from \"formik\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { green } from \"@material-ui/core/colors\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport { MenuItem, FormControl, InputLabel, Select } from \"@material-ui/core\";\r\nimport { Visibility, VisibilityOff } from \"@material-ui/icons\";\r\nimport { InputAdornment, IconButton } from \"@material-ui/core\";\r\nimport QueueSelectSingle from \"../../components/QueueSelectSingle\";\r\n\r\nimport api from \"../../services/api\";\r\nimport toastError from \"../../errors/toastError\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root: {\r\n        display: \"flex\",\r\n        flexWrap: \"wrap\",\r\n    },\r\n    multFieldLine: {\r\n        display: \"flex\",\r\n        \"& > *:not(:last-child)\": {\r\n            marginRight: theme.spacing(1),\r\n        },\r\n    },\r\n\r\n    btnWrapper: {\r\n        position: \"relative\",\r\n    },\r\n\r\n    buttonProgress: {\r\n        color: green[500],\r\n        position: \"absolute\",\r\n        top: \"50%\",\r\n        left: \"50%\",\r\n        marginTop: -12,\r\n        marginLeft: -12,\r\n    },\r\n    formControl: {\r\n        margin: theme.spacing(1),\r\n        minWidth: 120,\r\n    },\r\n    colorAdorment: {\r\n        width: 20,\r\n        height: 20,\r\n    },\r\n}));\r\n\r\nconst PromptSchema = Yup.object().shape({\r\n    name: Yup.string().min(5, \"Muito curto!\").max(100, \"Muito longo!\").required(\"Obrigatório\"),\r\n    prompt: Yup.string().min(50, \"Muito curto!\").required(\"Descreva o treinamento para Inteligência Artificial\"),\r\n    voice: Yup.string().required(\"Informe o modo para Voz\"),\r\n    max_tokens: Yup.number().required(\"Informe o número máximo de tokens\"),\r\n    temperature: Yup.number().required(\"Informe a temperatura\"),\r\n    apikey: Yup.string().required(\"Informe a API Key\"),\r\n    queueId: Yup.number().required(\"Informe a fila\"),\r\n    max_messages: Yup.number().required(\"Informe o número máximo de mensagens\")\r\n});\r\n\r\nconst PromptModal = ({ open, onClose, promptId }) => {\r\n    const classes = useStyles();\r\n    const [selectedVoice, setSelectedVoice] = useState(\"texto\");\r\n    const [showApiKey, setShowApiKey] = useState(false);\r\n\r\n    const handleToggleApiKey = () => {\r\n        setShowApiKey(!showApiKey);\r\n    };\r\n\r\n    const initialState = {\r\n        name: \"\",\r\n        prompt: \"\",\r\n        voice: \"texto\",\r\n        voiceKey: \"\",\r\n        voiceRegion: \"\",\r\n        maxTokens: 100,\r\n        temperature: 1,\r\n        apiKey: \"\",\r\n        queueId: null,\r\n        maxMessages: 10\r\n    };\r\n\r\n    const [prompt, setPrompt] = useState(initialState);\r\n\r\n    useEffect(() => {\r\n        const fetchPrompt = async () => {\r\n            if (!promptId) {\r\n                setPrompt(initialState);\r\n                return;\r\n            }\r\n            try {\r\n                const { data } = await api.get(`/prompt/${promptId}`);\r\n                setPrompt(prevState => {\r\n                    return { ...prevState, ...data };\r\n                });\r\n                setSelectedVoice(data.voice);\r\n            } catch (err) {\r\n                toastError(err);\r\n            }\r\n        };\r\n\r\n        fetchPrompt();\r\n    }, [promptId, open]);\r\n\r\n    const handleClose = () => {\r\n        setPrompt(initialState);\r\n        setSelectedVoice(\"texto\");\r\n        onClose();\r\n    };\r\n\r\n    const handleChangeVoice = (e) => {\r\n        setSelectedVoice(e.target.value);\r\n    };\r\n\r\n    const handleSavePrompt = async values => {\r\n        const promptData = { ...values, voice: selectedVoice };\r\n        if (!values.queueId) {\r\n            toastError(\"Informe o setor\");\r\n            return;\r\n        }\r\n        try {\r\n            if (promptId) {\r\n                await api.put(`/prompt/${promptId}`, promptData);\r\n            } else {\r\n                await api.post(\"/prompt\", promptData);\r\n            }\r\n            toast.success(i18n.t(\"promptModal.success\"));\r\n        } catch (err) {\r\n            toastError(err);\r\n        }\r\n        handleClose();\r\n    };\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <Dialog\r\n                open={open}\r\n                onClose={handleClose}\r\n                maxWidth=\"md\"\r\n                scroll=\"paper\"\r\n                fullWidth\r\n            >\r\n                <DialogTitle id=\"form-dialog-title\">\r\n                    {promptId\r\n                        ? `${i18n.t(\"promptModal.title.edit\")}`\r\n                        : `${i18n.t(\"promptModal.title.add\")}`}\r\n                </DialogTitle>\r\n                <Formik\r\n                    initialValues={prompt}\r\n                    enableReinitialize={true}\r\n                    onSubmit={(values, actions) => {\r\n                        setTimeout(() => {\r\n                            handleSavePrompt(values);\r\n                            actions.setSubmitting(false);\r\n                        }, 400);\r\n                    }}\r\n                >\r\n                    {({ touched, errors, isSubmitting, values }) => (\r\n                        <Form style={{ width: \"100%\" }}>\r\n                            <DialogContent dividers>\r\n                                <Field\r\n                                    as={TextField}\r\n                                    label={i18n.t(\"promptModal.form.name\")}\r\n                                    name=\"name\"\r\n                                    error={touched.name && Boolean(errors.name)}\r\n                                    helperText={touched.name && errors.name}\r\n                                    variant=\"outlined\"\r\n                                    margin=\"dense\"\r\n                                    fullWidth\r\n                                />\r\n                                <FormControl fullWidth margin=\"dense\" variant=\"outlined\">\r\n                                    <Field\r\n                                        as={TextField}\r\n                                        label={i18n.t(\"promptModal.form.apikey\")}\r\n                                        name=\"apiKey\"\r\n                                        type={showApiKey ? 'text' : 'password'}\r\n                                        error={touched.apiKey && Boolean(errors.apiKey)}\r\n                                        helperText={touched.apiKey && errors.apiKey}\r\n                                        variant=\"outlined\"\r\n                                        margin=\"dense\"\r\n                                        fullWidth\r\n                                        InputProps={{\r\n                                            endAdornment: (\r\n                                                <InputAdornment position=\"end\">\r\n                                                    <IconButton onClick={handleToggleApiKey}>\r\n                                                        {showApiKey ? <VisibilityOff /> : <Visibility />}\r\n                                                    </IconButton>\r\n                                                </InputAdornment>\r\n                                            ),\r\n                                        }}\r\n                                    />\r\n                                </FormControl>\r\n                                <Field\r\n                                    as={TextField}\r\n                                    label={i18n.t(\"promptModal.form.prompt\")}\r\n                                    name=\"prompt\"\r\n                                    error={touched.prompt && Boolean(errors.prompt)}\r\n                                    helperText={touched.prompt && errors.prompt}\r\n                                    variant=\"outlined\"\r\n                                    margin=\"dense\"\r\n                                    fullWidth\r\n                                    rows={10}\r\n                                    multiline={true}\r\n                                />\r\n                                <QueueSelectSingle />\r\n                                <div className={classes.multFieldLine}>\r\n                                    <FormControl fullWidth margin=\"dense\" variant=\"outlined\">\r\n                                    <InputLabel>{i18n.t(\"promptModal.form.voice\")}</InputLabel>\r\n                                        <Select\r\n                                            id=\"type-select\"\r\n                                            labelWidth={60}\r\n                                            name=\"voice\"\r\n                                            value={selectedVoice}\r\n                                            onChange={handleChangeVoice}\r\n                                            multiple={false}\r\n                                        >\r\n                                            <MenuItem key={\"texto\"} value={\"texto\"}>\r\n                                                Texto\r\n                                            </MenuItem>\r\n                                            <MenuItem key={\"pt-BR-FranciscaNeural\"} value={\"pt-BR-FranciscaNeural\"}>\r\n                                                Francisa\r\n                                            </MenuItem>\r\n                                            <MenuItem key={\"pt-BR-AntonioNeural\"} value={\"pt-BR-AntonioNeural\"}>\r\n                                                Antônio\r\n                                            </MenuItem>\r\n                                            <MenuItem key={\"pt-BR-BrendaNeural\"} value={\"pt-BR-BrendaNeural\"}>\r\n                                                Brenda\r\n                                            </MenuItem>\r\n                                            <MenuItem key={\"pt-BR-DonatoNeural\"} value={\"pt-BR-DonatoNeural\"}>\r\n                                                Donato\r\n                                            </MenuItem>\r\n                                            <MenuItem key={\"pt-BR-ElzaNeural\"} value={\"pt-BR-ElzaNeural\"}>\r\n                                                Elza\r\n                                            </MenuItem>\r\n                                            <MenuItem key={\"pt-BR-FabioNeural\"} value={\"pt-BR-FabioNeural\"}>\r\n                                                Fábio\r\n                                            </MenuItem>\r\n                                            <MenuItem key={\"pt-BR-GiovannaNeural\"} value={\"pt-BR-GiovannaNeural\"}>\r\n                                                Giovanna\r\n                                            </MenuItem>\r\n                                            <MenuItem key={\"pt-BR-HumbertoNeural\"} value={\"pt-BR-HumbertoNeural\"}>\r\n                                                Humberto\r\n                                            </MenuItem>\r\n                                            <MenuItem key={\"pt-BR-JulioNeural\"} value={\"pt-BR-JulioNeural\"}>\r\n                                                Julio\r\n                                            </MenuItem>\r\n                                            <MenuItem key={\"pt-BR-LeilaNeural\"} value={\"pt-BR-LeilaNeural\"}>\r\n                                                Leila\r\n                                            </MenuItem>\r\n                                            <MenuItem key={\"pt-BR-LeticiaNeural\"} value={\"pt-BR-LeticiaNeural\"}>\r\n                                                Letícia\r\n                                            </MenuItem>\r\n                                            <MenuItem key={\"pt-BR-ManuelaNeural\"} value={\"pt-BR-ManuelaNeural\"}>\r\n                                                Manuela\r\n                                            </MenuItem>\r\n                                            <MenuItem key={\"pt-BR-NicolauNeural\"} value={\"pt-BR-NicolauNeural\"}>\r\n                                                Nicolau\r\n                                            </MenuItem>\r\n                                            <MenuItem key={\"pt-BR-ValerioNeural\"} value={\"pt-BR-ValerioNeural\"}>\r\n                                                Valério\r\n                                            </MenuItem>\r\n                                            <MenuItem key={\"pt-BR-YaraNeural\"} value={\"pt-BR-YaraNeural\"}>\r\n                                                Yara\r\n                                            </MenuItem>\r\n                                        </Select>\r\n                                    </FormControl>\r\n                                    <Field\r\n                                        as={TextField}\r\n                                        label={i18n.t(\"promptModal.form.voiceKey\")}\r\n                                        name=\"voiceKey\"\r\n                                        error={touched.voiceKey && Boolean(errors.voiceKey)}\r\n                                        helperText={touched.voiceKey && errors.voiceKey}\r\n                                        variant=\"outlined\"\r\n                                        margin=\"dense\"\r\n                                        fullWidth\r\n                                    />\r\n                                    <Field\r\n                                        as={TextField}\r\n                                        label={i18n.t(\"promptModal.form.voiceRegion\")}\r\n                                        name=\"voiceRegion\"\r\n                                        error={touched.voiceRegion && Boolean(errors.voiceRegion)}\r\n                                        helperText={touched.voiceRegion && errors.voiceRegion}\r\n                                        variant=\"outlined\"\r\n                                        margin=\"dense\"\r\n                                        fullWidth\r\n                                    />\r\n                                </div>\r\n                                \r\n                                <div className={classes.multFieldLine}>\r\n                                    <Field\r\n                                        as={TextField}\r\n                                        label={i18n.t(\"promptModal.form.temperature\")}\r\n                                        name=\"temperature\"\r\n                                        error={touched.temperature && Boolean(errors.temperature)}\r\n                                        helperText={touched.temperature && errors.temperature}\r\n                                        variant=\"outlined\"\r\n                                        margin=\"dense\"\r\n                                        fullWidth\r\n                                    />\r\n                                    <Field\r\n                                        as={TextField}\r\n                                        label={i18n.t(\"promptModal.form.max_tokens\")}\r\n                                        name=\"maxTokens\"\r\n                                        error={touched.maxTokens && Boolean(errors.maxTokens)}\r\n                                        helperText={touched.maxTokens && errors.maxTokens}\r\n                                        variant=\"outlined\"\r\n                                        margin=\"dense\"\r\n                                        fullWidth\r\n                                    />\r\n                                    <Field\r\n                                        as={TextField}\r\n                                        label={i18n.t(\"promptModal.form.max_messages\")}\r\n                                        name=\"maxMessages\"\r\n                                        error={touched.maxMessages && Boolean(errors.maxMessages)}\r\n                                        helperText={touched.maxMessages && errors.maxMessages}\r\n                                        variant=\"outlined\"\r\n                                        margin=\"dense\"\r\n                                        fullWidth\r\n                                    />\r\n                                </div>\r\n                            </DialogContent>\r\n                            <DialogActions>\r\n                                <Button\r\n                                    onClick={handleClose}\r\n                                    color=\"secondary\"\r\n                                    disabled={isSubmitting}\r\n                                    variant=\"outlined\"\r\n                                >\r\n                                    {i18n.t(\"promptModal.buttons.cancel\")}\r\n                                </Button>\r\n                                <Button\r\n                                    type=\"submit\"\r\n                                    color=\"primary\"\r\n                                    disabled={isSubmitting}\r\n                                    variant=\"contained\"\r\n                                    className={classes.btnWrapper}\r\n                                >\r\n                                    {promptId\r\n                                        ? `${i18n.t(\"promptModal.buttons.okEdit\")}`\r\n                                        : `${i18n.t(\"promptModal.buttons.okAdd\")}`}\r\n                                    {isSubmitting && (\r\n                                        <CircularProgress\r\n                                            size={24}\r\n                                            className={classes.buttonProgress}\r\n                                        />\r\n                                    )}\r\n                                </Button>\r\n                            </DialogActions>\r\n                        </Form>\r\n                    )}\r\n                </Formik>\r\n            </Dialog>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default PromptModal;","import React, { useEffect, useReducer, useState } from \"react\";\r\n\r\nimport openSocket from \"socket.io-client\";\r\n\r\nimport {\r\n  Button,\r\n  IconButton,\r\n  Paper,\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableHead,\r\n  TableRow\r\n} from \"@material-ui/core\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nimport MainContainer from \"../../components/MainContainer\";\r\nimport MainHeader from \"../../components/MainHeader\";\r\nimport MainHeaderButtonsWrapper from \"../../components/MainHeaderButtonsWrapper\";\r\nimport TableRowSkeleton from \"../../components/TableRowSkeleton\";\r\nimport Title from \"../../components/Title\";\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport api from \"../../services/api\";\r\nimport { DeleteOutline, Edit } from \"@material-ui/icons\";\r\nimport PromptModal from \"../../components/PromptModal\";\r\nimport { toast } from \"react-toastify\";\r\nimport ConfirmationModal from \"../../components/ConfirmationModal\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  mainPaper: {\r\n    flex: 1,\r\n    padding: theme.spacing(1),\r\n    overflowY: \"scroll\",\r\n    ...theme.scrollbarStyles,\r\n  },\r\n  customTableCell: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n  },\r\n}));\r\n\r\nconst reducer = (state, action) => {\r\n  if (action.type === \"LOAD_PROMPTS\") {\r\n    const prompts = action.payload;\r\n    const newPrompts = [];\r\n\r\n    prompts.forEach((prompt) => {\r\n      const promptIndex = state.findIndex((p) => p.id === prompt.id);\r\n      if (promptIndex !== -1) {\r\n        state[promptIndex] = prompt;\r\n      } else {\r\n        newPrompts.push(prompt);\r\n      }\r\n    });\r\n\r\n    return [...state, ...newPrompts];\r\n  }\r\n\r\n  if (action.type === \"UPDATE_PROMPTS\") {\r\n    const prompt = action.payload;\r\n    const promptIndex = state.findIndex((p) => p.id === prompt.id);\r\n\r\n    if (promptIndex !== -1) {\r\n      state[promptIndex] = prompt;\r\n      return [...state];\r\n    } else {\r\n      return [prompt, ...state];\r\n    }\r\n  }\r\n\r\n  if (action.type === \"DELETE_PROMPT\") {\r\n    const promptId = action.payload;\r\n    const promptIndex = state.findIndex((p) => p.id === promptId);\r\n    if (promptIndex !== -1) {\r\n      state.splice(promptIndex, 1);\r\n    }\r\n    return [...state];\r\n  }\r\n\r\n  if (action.type === \"RESET\") {\r\n    return [];\r\n  }\r\n};\r\n\r\nconst Prompts = () => {\r\n  const classes = useStyles();\r\n\r\n  const [prompts, dispatch] = useReducer(reducer, []);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const [promptModalOpen, setPromptModalOpen] = useState(false);\r\n  const [selectedPrompt, setSelectedPrompt] = useState(null);\r\n  const [confirmModalOpen, setConfirmModalOpen] = useState(false);\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      setLoading(true);\r\n      try {\r\n        const { data } = await api.get(\"/prompt\");\r\n        dispatch({ type: \"LOAD_PROMPTS\", payload: data.prompts });\r\n\r\n        setLoading(false);\r\n      } catch (err) {\r\n        toastError(err);\r\n        setLoading(false);\r\n      }\r\n    })();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const socket = openSocket(process.env.REACT_APP_BACKEND_URL);\r\n\r\n    socket.on(\"prompt\", (data) => {\r\n      if (data.action === \"update\" || data.action === \"create\") {\r\n        dispatch({ type: \"UPDATE_PROMPTS\", payload: data.prompt });\r\n      }\r\n\r\n      if (data.action === \"delete\") {\r\n        dispatch({ type: \"DELETE_PROMPT\", payload: data.promptId });\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      socket.disconnect();\r\n    };\r\n  }, []);\r\n\r\n  const handleOpenPromptModal = () => {\r\n    setPromptModalOpen(true);\r\n    setSelectedPrompt(null);\r\n  };\r\n\r\n  const handleClosePromptModal = () => {\r\n    setPromptModalOpen(false);\r\n    setSelectedPrompt(null);\r\n  };\r\n\r\n  const handleEditPrompt = (prompt) => {\r\n    setSelectedPrompt(prompt);\r\n    setPromptModalOpen(true);\r\n  };\r\n\r\n  const handleCloseConfirmationModal = () => {\r\n    setConfirmModalOpen(false);\r\n    setSelectedPrompt(null);\r\n  };\r\n\r\n  const handleDeletePrompt = async (promptId) => {\r\n    try {\r\n      const { data } = await api.delete(`/prompt/${promptId}`);\r\n      toast.info(i18n.t(data.message));\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n    setSelectedPrompt(null);\r\n  };\r\n\r\n  return (\r\n    <MainContainer>\r\n      <ConfirmationModal\r\n        title={\r\n          selectedPrompt &&\r\n          `${i18n.t(\"prompts.confirmationModal.deleteTitle\")} ${selectedPrompt.name\r\n          }?`\r\n        }\r\n        open={confirmModalOpen}\r\n        onClose={handleCloseConfirmationModal}\r\n        onConfirm={() => handleDeletePrompt(selectedPrompt.id)}\r\n      >\r\n        {i18n.t(\"prompts.confirmationModal.deleteMessage\")}\r\n      </ConfirmationModal>\r\n      <PromptModal\r\n        open={promptModalOpen}\r\n        onClose={handleClosePromptModal}\r\n        promptId={selectedPrompt?.id}\r\n      />\r\n      <MainHeader>\r\n        <Title>{i18n.t(\"prompts.title\")}</Title>\r\n        <MainHeaderButtonsWrapper>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            onClick={handleOpenPromptModal}\r\n          >\r\n            {i18n.t(\"prompts.buttons.add\")}\r\n          </Button>\r\n        </MainHeaderButtonsWrapper>\r\n      </MainHeader>\r\n      <Paper className={classes.mainPaper} variant=\"outlined\">\r\n        <Table size=\"small\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell align=\"left\">\r\n                {i18n.t(\"prompts.table.name\")}\r\n              </TableCell>\r\n              <TableCell align=\"left\">\r\n                {i18n.t(\"prompts.table.queue\")}\r\n              </TableCell>\r\n              <TableCell align=\"left\">\r\n                {i18n.t(\"prompts.table.max_tokens\")}\r\n              </TableCell> \r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"prompts.table.actions\")}\r\n              </TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            <>\r\n              {prompts.map((prompt) => (\r\n                <TableRow key={prompt.id}>\r\n                  <TableCell align=\"left\">{prompt.name}</TableCell>\r\n                  <TableCell align=\"left\">{prompt.queue.name}</TableCell>\r\n                  <TableCell align=\"left\">{prompt.maxTokens}</TableCell>\r\n                  <TableCell align=\"center\">\r\n                    <IconButton\r\n                      size=\"small\"\r\n                      onClick={() => handleEditPrompt(prompt)}\r\n                    >\r\n                      <Edit />\r\n                    </IconButton>\r\n\r\n                    <IconButton\r\n                      size=\"small\"\r\n                      onClick={() => {\r\n                        setSelectedPrompt(prompt);\r\n                        setConfirmModalOpen(true);\r\n                      }}\r\n                    >\r\n                      <DeleteOutline />\r\n                    </IconButton>\r\n                  </TableCell>\r\n                </TableRow>\r\n              ))}\r\n              {loading && <TableRowSkeleton columns={4} />}\r\n            </>\r\n          </TableBody>\r\n        </Table>\r\n      </Paper>\r\n    </MainContainer>\r\n  );\r\n};\r\n\r\nexport default Prompts;\r\n","import React, { useState, useEffect } from \"react\";\r\n\r\nimport * as Yup from \"yup\";\r\nimport { Formik, Form, Field } from \"formik\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport {\r\n  Button,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogTitle,\r\n  CircularProgress,\r\n  Select,\r\n  InputLabel,\r\n  MenuItem,\r\n  FormControl,\r\n  TextField,\r\n  Grid,\r\n  Paper,\r\n} from \"@material-ui/core\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { green } from \"@material-ui/core/colors\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\n\r\nimport api from \"../../services/api\";\r\nimport toastError from \"../../errors/toastError\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n    flexWrap: \"wrap\",\r\n    gap: 4\r\n  },\r\n  textField: {\r\n    marginRight: theme.spacing(1),\r\n    flex: 1,\r\n  },\r\n\r\n  btnWrapper: {\r\n    position: \"relative\",\r\n  },\r\n\r\n  buttonProgress: {\r\n    color: green[500],\r\n    position: \"absolute\",\r\n    top: \"50%\",\r\n    left: \"50%\",\r\n    marginTop: -12,\r\n    marginLeft: -12,\r\n  },\r\n  btnLeft: {\r\n    display: \"flex\",\r\n    marginRight: \"auto\",\r\n    marginLeft: 12,\r\n  },\r\n  colorAdorment: {\r\n    width: 20,\r\n    height: 20,\r\n  },\r\n}));\r\n\r\nconst DialogflowSchema = Yup.object().shape({\r\n  name: Yup.string()\r\n    .min(2, \"Too Short!\")\r\n    .max(50, \"Too Long!\")\r\n    .required(\"Required\"),\r\n  // projectName: Yup.string()\r\n  //   .min(3, \"Too Short!\")\r\n  //   .max(100, \"Too Long!\")\r\n  //   .required(),\r\n  // jsonContent: Yup.string().min(3, \"Too Short!\").required(),\r\n  // language: Yup.string().min(2, \"Too Short!\").max(50, \"Too Long!\").required(),\r\n});\r\n\r\n\r\n\r\nconst QueueIntegration = ({ open, onClose, integrationId }) => {\r\n  const classes = useStyles();\r\n\r\n  const initialState = {\r\n    type: \"typebot\",\r\n    name: \"\",\r\n    projectName: \"\",\r\n    jsonContent: \"\",\r\n    language: \"\",\r\n    urlN8N: \"\",\r\n    typebotDelayMessage: 1000,\r\n    typebotExpires: 1,\r\n    typebotKeywordFinish: \"\",\r\n    typebotKeywordRestart: \"\",\r\n    typebotRestartMessage: \"\",\r\n    typebotSlug: \"\",\r\n    typebotUnknownMessage: \"\",\r\n\r\n  };\r\n\r\n  const [integration, setIntegration] = useState(initialState);\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      if (!integrationId) return;\r\n      try {\r\n        const { data } = await api.get(`/queueIntegration/${integrationId}`);\r\n        setIntegration((prevState) => {\r\n          return { ...prevState, ...data };\r\n        });\r\n      } catch (err) {\r\n        toastError(err);\r\n      }\r\n    })();\r\n\r\n    return () => {\r\n      setIntegration({\r\n        type: \"dialogflow\",\r\n        name: \"\",\r\n        projectName: \"\",\r\n        jsonContent: \"\",\r\n        language: \"\",\r\n        urlN8N: \"\",\r\n        typebotDelayMessage: 1000\r\n      });\r\n    };\r\n\r\n  }, [integrationId, open]);\r\n\r\n  const handleClose = () => {\r\n    onClose();\r\n    setIntegration(initialState);\r\n  };\r\n\r\n  const handleTestSession = async (event, values) => {\r\n    try {\r\n      const { projectName, jsonContent, language } = values;\r\n\r\n      await api.post(`/queueIntegration/testSession`, {\r\n        projectName,\r\n        jsonContent,\r\n        language,\r\n      });\r\n\r\n      toast.success(i18n.t(\"queueIntegrationModal.messages.testSuccess\"));\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n  };\r\n\r\n  const handleSaveDialogflow = async (values) => {\r\n    try {\r\n      if (values.type === 'n8n' || values.type === 'webhook' || values.type === 'typebot') values.projectName = values.name\r\n      if (integrationId) {\r\n        await api.put(`/queueIntegration/${integrationId}`, values);\r\n        toast.success(i18n.t(\"queueIntegrationModal.messages.editSuccess\"));\r\n      } else {\r\n        await api.post(\"/queueIntegration\", values);\r\n        toast.success(i18n.t(\"queueIntegrationModal.messages.addSuccess\"));\r\n      }\r\n      handleClose();\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Dialog open={open} onClose={handleClose} fullWidth maxWidth=\"md\" scroll=\"paper\">\r\n        <DialogTitle>\r\n          {integrationId\r\n            ? `${i18n.t(\"queueIntegrationModal.title.edit\")}`\r\n            : `${i18n.t(\"queueIntegrationModal.title.add\")}`}\r\n        </DialogTitle>\r\n        <Formik\r\n          initialValues={integration}\r\n          enableReinitialize={true}\r\n          validationSchema={DialogflowSchema}\r\n          onSubmit={(values, actions, event) => {\r\n            setTimeout(() => {\r\n              handleSaveDialogflow(values);\r\n              actions.setSubmitting(false);\r\n            }, 400);\r\n          }}\r\n        >\r\n          {({ touched, errors, isSubmitting, values }) => (\r\n            <Form>\r\n              <Paper square className={classes.mainPaper} elevation={1}>\r\n                <DialogContent dividers>\r\n                  <Grid container spacing={1}>\r\n                    <Grid item xs={12} md={6} xl={6}>\r\n                      <FormControl\r\n                        variant=\"outlined\"\r\n                        className={classes.formControl}\r\n                        margin=\"dense\"\r\n                        fullWidth\r\n                      >\r\n                        <InputLabel id=\"type-selection-input-label\">\r\n                          {i18n.t(\"queueIntegrationModal.form.type\")}\r\n                        </InputLabel>\r\n\r\n                        <Field\r\n                          as={Select}\r\n                          label={i18n.t(\"queueIntegrationModal.form.type\")}\r\n                          name=\"type\"\r\n                          labelId=\"profile-selection-label\"\r\n                          error={touched.type && Boolean(errors.type)}\r\n                          helpertext={touched.type && errors.type}\r\n                          id=\"type\"\r\n                          required\r\n                        >\r\n                          <MenuItem value=\"dialogflow\">DialogFlow</MenuItem>\r\n                          <MenuItem value=\"n8n\">N8N</MenuItem>\r\n                          <MenuItem value=\"webhook\">WebHooks</MenuItem>\r\n                          <MenuItem value=\"typebot\">Typebot</MenuItem>\r\n                        </Field>\r\n                      </FormControl>\r\n                    </Grid>\r\n                    {values.type === \"dialogflow\" && (\r\n                      <>\r\n                        <Grid item xs={12} md={6} xl={6} >\r\n                          <Field\r\n                            as={TextField}\r\n                            label={i18n.t(\"queueIntegrationModal.form.name\")}\r\n                            autoFocus\r\n                            name=\"name\"\r\n                            fullWidth\r\n                            error={touched.name && Boolean(errors.name)}\r\n                            helpertext={touched.name && errors.name}\r\n                            variant=\"outlined\"\r\n                            margin=\"dense\"\r\n                            className={classes.textField}\r\n                          />\r\n                        </Grid>\r\n                        <Grid item xs={12} md={6} xl={6} >\r\n                          <FormControl\r\n                            variant=\"outlined\"\r\n                            className={classes.formControl}\r\n                            margin=\"dense\"\r\n                            fullWidth\r\n                          >\r\n                            <InputLabel id=\"language-selection-input-label\">\r\n                              {i18n.t(\"queueIntegrationModal.form.language\")}\r\n                            </InputLabel>\r\n\r\n                            <Field\r\n                              as={Select}\r\n                              label={i18n.t(\"queueIntegrationModal.form.language\")}\r\n                              name=\"language\"\r\n                              labelId=\"profile-selection-label\"\r\n                              fullWidth\r\n                              error={touched.language && Boolean(errors.language)}\r\n                              helpertext={touched.language && errors.language}\r\n                              id=\"language-selection\"\r\n                              required\r\n                            >\r\n                              <MenuItem value=\"pt-BR\">Portugues</MenuItem>\r\n                              <MenuItem value=\"en\">Inglês</MenuItem>\r\n                              <MenuItem value=\"es\">Español</MenuItem>\r\n                            </Field>\r\n                          </FormControl>\r\n                        </Grid>\r\n                        <Grid item xs={12} md={6} xl={6} >\r\n                          <Field\r\n                            as={TextField}\r\n                            label={i18n.t(\"queueIntegrationModal.form.projectName\")}\r\n                            name=\"projectName\"\r\n                            error={touched.projectName && Boolean(errors.projectName)}\r\n                            helpertext={touched.projectName && errors.projectName}\r\n                            fullWidth\r\n                            variant=\"outlined\"\r\n                            margin=\"dense\"\r\n                          />\r\n                        </Grid>\r\n                        <Grid item xs={12} md={12} xl={12} >\r\n                          <Field\r\n                            as={TextField}\r\n                            label={i18n.t(\"queueIntegrationModal.form.jsonContent\")}\r\n                            type=\"jsonContent\"\r\n                            multiline\r\n                            //inputRef={greetingRef}\r\n                            maxRows={5}\r\n                            minRows={5}\r\n                            fullWidth\r\n                            name=\"jsonContent\"\r\n                            error={touched.jsonContent && Boolean(errors.jsonContent)}\r\n                            helpertext={touched.jsonContent && errors.jsonContent}\r\n                            variant=\"outlined\"\r\n                            margin=\"dense\"\r\n                          />\r\n                        </Grid>\r\n                      </>\r\n                    )}\r\n\r\n                    {(values.type === \"n8n\" || values.type === \"webhook\") && (\r\n                      <>\r\n                        <Grid item xs={12} md={6} xl={6} >\r\n                          <Field\r\n                            as={TextField}\r\n                            label={i18n.t(\"queueIntegrationModal.form.name\")}\r\n                            autoFocus\r\n                            required\r\n                            name=\"name\"\r\n                            error={touched.name && Boolean(errors.name)}\r\n                            helpertext={touched.name && errors.name}\r\n                            variant=\"outlined\"\r\n                            margin=\"dense\"\r\n                            fullWidth\r\n                            className={classes.textField}\r\n                          />\r\n                        </Grid>\r\n                        <Grid item xs={12} md={12} xl={12} >\r\n                          <Field\r\n                            as={TextField}\r\n                            label={i18n.t(\"queueIntegrationModal.form.urlN8N\")}\r\n                            name=\"urlN8N\"\r\n                            error={touched.urlN8N && Boolean(errors.urlN8N)}\r\n                            helpertext={touched.urlN8N && errors.urlN8N}\r\n                            variant=\"outlined\"\r\n                            margin=\"dense\"\r\n                            required\r\n                            fullWidth\r\n                            className={classes.textField}\r\n                          />\r\n                        </Grid>\r\n                      </>\r\n                    )}\r\n                    {(values.type === \"typebot\") && (\r\n                      <>\r\n                        <Grid item xs={12} md={6} xl={6} >\r\n                          <Field\r\n                            as={TextField}\r\n                            label={i18n.t(\"queueIntegrationModal.form.name\")}\r\n                            autoFocus\r\n                            name=\"name\"\r\n                            error={touched.name && Boolean(errors.name)}\r\n                            helpertext={touched.name && errors.name}\r\n                            variant=\"outlined\"\r\n                            margin=\"dense\"\r\n                            required\r\n                            fullWidth\r\n                            className={classes.textField}\r\n                          />\r\n                        </Grid>\r\n                        <Grid item xs={12} md={12} xl={12} >\r\n                          <Field\r\n                            as={TextField}\r\n                            label={i18n.t(\"queueIntegrationModal.form.urlN8N\")}\r\n                            name=\"urlN8N\"\r\n                            error={touched.urlN8N && Boolean(errors.urlN8N)}\r\n                            helpertext={touched.urlN8N && errors.urlN8N}\r\n                            variant=\"outlined\"\r\n                            margin=\"dense\"\r\n                            required\r\n                            fullWidth\r\n                            className={classes.textField}\r\n                          />\r\n                        </Grid>\r\n                        <Grid item xs={12} md={6} xl={6} >\r\n                          <Field\r\n                            as={TextField}\r\n                            label={i18n.t(\"queueIntegrationModal.form.typebotSlug\")}\r\n                            name=\"typebotSlug\"\r\n                            error={touched.typebotSlug && Boolean(errors.typebotSlug)}\r\n                            helpertext={touched.typebotSlug && errors.typebotSlug}\r\n                            required\r\n                            variant=\"outlined\"\r\n                            margin=\"dense\"\r\n                            fullWidth\r\n                            className={classes.textField}\r\n                          />\r\n                        </Grid>\r\n                        <Grid item xs={12} md={6} xl={6} >\r\n                          <Field\r\n                            as={TextField}\r\n                            label={i18n.t(\"queueIntegrationModal.form.typebotExpires\")}\r\n                            name=\"typebotExpires\"\r\n                            error={touched.typebotExpires && Boolean(errors.typebotExpires)}\r\n                            helpertext={touched.typebotExpires && errors.typebotExpires}\r\n                            variant=\"outlined\"\r\n                            margin=\"dense\"\r\n                            fullWidth\r\n                            className={classes.textField}\r\n                          />\r\n                        </Grid>\r\n                        <Grid item xs={12} md={6} xl={6} >\r\n                          <Field\r\n                            as={TextField}\r\n                            label={i18n.t(\"queueIntegrationModal.form.typebotDelayMessage\")}\r\n                            name=\"typebotDelayMessage\"\r\n                            error={touched.typebotDelayMessage && Boolean(errors.typebotDelayMessage)}\r\n                            helpertext={touched.typebotDelayMessage && errors.typebotDelayMessage}\r\n                            variant=\"outlined\"\r\n                            margin=\"dense\"\r\n                            fullWidth\r\n                            className={classes.textField}\r\n                          />\r\n                        </Grid>\r\n                        <Grid item xs={12} md={6} xl={6} >\r\n                          <Field\r\n                            as={TextField}\r\n                            label={i18n.t(\"queueIntegrationModal.form.typebotKeywordFinish\")}\r\n                            name=\"typebotKeywordFinish\"\r\n                            error={touched.typebotKeywordFinish && Boolean(errors.typebotKeywordFinish)}\r\n                            helpertext={touched.typebotKeywordFinish && errors.typebotKeywordFinish}\r\n                            variant=\"outlined\"\r\n                            margin=\"dense\"\r\n                            fullWidth\r\n                            className={classes.textField}\r\n                          />\r\n                        </Grid>\r\n                        <Grid item xs={12} md={6} xl={6} >\r\n                          <Field\r\n                            as={TextField}\r\n                            label={i18n.t(\"queueIntegrationModal.form.typebotKeywordRestart\")}\r\n                            name=\"typebotKeywordRestart\"\r\n                            error={touched.typebotKeywordRestart && Boolean(errors.typebotKeywordRestart)}\r\n                            helpertext={touched.typebotKeywordRestart && errors.typebotKeywordRestart}\r\n                            variant=\"outlined\"\r\n                            margin=\"dense\"\r\n                            fullWidth\r\n                            className={classes.textField}\r\n                          />\r\n                        </Grid>\r\n                        <Grid item xs={12} md={6} xl={6} >\r\n                          <Field\r\n                            as={TextField}\r\n                            label={i18n.t(\"queueIntegrationModal.form.typebotUnknownMessage\")}\r\n                            name=\"typebotUnknownMessage\"\r\n                            error={touched.typebotUnknownMessage && Boolean(errors.typebotUnknownMessage)}\r\n                            helpertext={touched.typebotUnknownMessage && errors.typebotUnknownMessage}\r\n                            variant=\"outlined\"\r\n                            margin=\"dense\"\r\n                            fullWidth\r\n                            className={classes.textField}\r\n                          />\r\n                        </Grid>\r\n                        <Grid item xs={12} md={12} xl={12} >\r\n                          <Field\r\n                            as={TextField}\r\n                            label={i18n.t(\"queueIntegrationModal.form.typebotRestartMessage\")}\r\n                            name=\"typebotRestartMessage\"\r\n                            error={touched.typebotRestartMessage && Boolean(errors.typebotRestartMessage)}\r\n                            helpertext={touched.typebotRestartMessage && errors.typebotRestartMessage}\r\n                            variant=\"outlined\"\r\n                            margin=\"dense\"\r\n                            fullWidth\r\n                            className={classes.textField}\r\n                          />\r\n                        </Grid>\r\n                        \r\n                      </>\r\n                    )}\r\n                  </Grid>\r\n                </DialogContent>\r\n              </Paper>\r\n\r\n              <DialogActions>\r\n                {values.type === \"dialogflow\" && (\r\n                  <Button\r\n                    //type=\"submit\"\r\n                    onClick={(e) => handleTestSession(e, values)}\r\n                    color=\"inherit\"\r\n                    disabled={isSubmitting}\r\n                    name=\"testSession\"\r\n                    variant=\"outlined\"\r\n                    className={classes.btnLeft}\r\n                  >\r\n                    {i18n.t(\"queueIntegrationModal.buttons.test\")}\r\n                  </Button>\r\n                )}\r\n                <Button\r\n                  onClick={handleClose}\r\n                  color=\"secondary\"\r\n                  disabled={isSubmitting}\r\n                  variant=\"outlined\"\r\n                >\r\n                  {i18n.t(\"queueIntegrationModal.buttons.cancel\")}\r\n                </Button>\r\n                <Button\r\n                  type=\"submit\"\r\n                  color=\"primary\"\r\n                  disabled={isSubmitting}\r\n                  variant=\"contained\"\r\n                  className={classes.btnWrapper}\r\n                >\r\n                  {integrationId\r\n                    ? `${i18n.t(\"queueIntegrationModal.buttons.okEdit\")}`\r\n                    : `${i18n.t(\"queueIntegrationModal.buttons.okAdd\")}`}\r\n                  {isSubmitting && (\r\n                    <CircularProgress\r\n                      size={24}\r\n                      className={classes.buttonProgress}\r\n                    />\r\n                  )}\r\n                </Button>\r\n              </DialogActions>\r\n            </Form>\r\n          )}\r\n        </Formik>\r\n      </Dialog>\r\n    </div >\r\n  );\r\n};\r\n\r\nexport default QueueIntegration;","import React, { useState, useEffect, useReducer, useContext } from \"react\";\r\nimport { toast } from \"react-toastify\";\r\nimport { socketConnection } from \"../../services/socket\";\r\nimport n8n from \"../../assets/n8n.png\";\r\nimport dialogflow from \"../../assets/dialogflow.png\";\r\nimport webhooks from \"../../assets/webhook.png\";\r\nimport typebot from \"../../assets/typebot.jpg\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nimport {\r\n  Avatar,\r\n  Button,\r\n  IconButton,\r\n  InputAdornment,\r\n  Paper,\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableHead,\r\n  TableRow,\r\n  TextField,\r\n  Tooltip\r\n} from \"@material-ui/core\";\r\n\r\nimport {\r\n  DeleteOutline,\r\n  Edit\r\n} from \"@material-ui/icons\";\r\n\r\nimport SearchIcon from \"@material-ui/icons/Search\";\r\n\r\nimport MainContainer from \"../../components/MainContainer\";\r\nimport MainHeader from \"../../components/MainHeader\";\r\nimport MainHeaderButtonsWrapper from \"../../components/MainHeaderButtonsWrapper\";\r\nimport Title from \"../../components/Title\";\r\nimport TableRowSkeleton from \"../../components/TableRowSkeleton\";\r\nimport IntegrationModal from \"../../components/QueueIntegrationModal\";\r\nimport ConfirmationModal from \"../../components/ConfirmationModal\";\r\n\r\nimport api from \"../../services/api\";\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\nimport usePlans from \"../../hooks/usePlans\";\r\nimport { useHistory } from \"react-router-dom/cjs/react-router-dom.min\";\r\n\r\nconst reducer = (state, action) => {\r\n  if (action.type === \"LOAD_INTEGRATIONS\") {\r\n    const queueIntegration = action.payload;\r\n    const newIntegrations = [];\r\n\r\n    queueIntegration.forEach((integration) => {\r\n      const integrationIndex = state.findIndex((u) => u.id === integration.id);\r\n      if (integrationIndex !== -1) {\r\n        state[integrationIndex] = integration;\r\n      } else {\r\n        newIntegrations.push(integration);\r\n      }\r\n    });\r\n\r\n    return [...state, ...newIntegrations];\r\n  }\r\n\r\n  if (action.type === \"UPDATE_INTEGRATIONS\") {\r\n    const queueIntegration = action.payload;\r\n    const integrationIndex = state.findIndex((u) => u.id === queueIntegration.id);\r\n\r\n    if (integrationIndex !== -1) {\r\n      state[integrationIndex] = queueIntegration;\r\n      return [...state];\r\n    } else {\r\n      return [queueIntegration, ...state];\r\n    }\r\n  }\r\n\r\n  if (action.type === \"DELETE_INTEGRATION\") {\r\n    const integrationId = action.payload;\r\n\r\n    const integrationIndex = state.findIndex((u) => u.id === integrationId);\r\n    if (integrationIndex !== -1) {\r\n      state.splice(integrationIndex, 1);\r\n    }\r\n    return [...state];\r\n  }\r\n\r\n  if (action.type === \"RESET\") {\r\n    return [];\r\n  }\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  mainPaper: {\r\n    flex: 1,\r\n    padding: theme.spacing(2),\r\n    margin: theme.spacing(1),\r\n    overflowY: \"scroll\",\r\n    ...theme.scrollbarStyles,\r\n  },\r\n  avatar: {\r\n    width: \"140px\",\r\n    height: \"40px\",\r\n    borderRadius: 4\r\n  },\r\n}));\r\n\r\nconst QueueIntegration = () => {\r\n  const classes = useStyles();\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [pageNumber, setPageNumber] = useState(1);\r\n  const [hasMore, setHasMore] = useState(false);\r\n  const [selectedIntegration, setSelectedIntegration] = useState(null);\r\n  const [deletingUser, setDeletingUser] = useState(null);\r\n  const [userModalOpen, setUserModalOpen] = useState(false);\r\n  const [confirmModalOpen, setConfirmModalOpen] = useState(false);\r\n  const [searchParam, setSearchParam] = useState(\"\");\r\n  const [queueIntegration, dispatch] = useReducer(reducer, []);\r\n  const { user } = useContext(AuthContext);\r\n  const { getPlanCompany } = usePlans();\r\n  const companyId = user.companyId;\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      const planConfigs = await getPlanCompany(undefined, companyId);\r\n      if (!planConfigs.plan.useIntegrations) {\r\n        toast.error(\"Esta empresa não possui permissão para acessar essa página! Estamos lhe redirecionando.\");\r\n        setTimeout(() => {\r\n          history.push(`/`)\r\n        }, 1000);\r\n      }\r\n    }\r\n    fetchData();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    dispatch({ type: \"RESET\" });\r\n    setPageNumber(1);\r\n  }, [searchParam]);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    const delayDebounceFn = setTimeout(() => {\r\n      const fetchIntegrations = async () => {\r\n        try {\r\n          const { data } = await api.get(\"/queueIntegration/\", {\r\n            params: { searchParam, pageNumber },\r\n          });\r\n          dispatch({ type: \"LOAD_INTEGRATIONS\", payload: data.queueIntegrations });\r\n          setHasMore(data.hasMore);\r\n          setLoading(false);\r\n        } catch (err) {\r\n          toastError(err);\r\n        }\r\n      };\r\n      fetchIntegrations();\r\n    }, 500);\r\n    return () => clearTimeout(delayDebounceFn);\r\n  }, [searchParam, pageNumber]);\r\n\r\n  useEffect(() => {\r\n    const companyId = localStorage.getItem(\"companyId\");\r\n    const socket = socketConnection({ companyId });\r\n\r\n    socket.on(`company-${companyId}-queueIntegration`, (data) => {\r\n      if (data.action === \"update\" || data.action === \"create\") {\r\n        dispatch({ type: \"UPDATE_INTEGRATIONS\", payload: data.queueIntegration });\r\n      }\r\n\r\n      if (data.action === \"delete\") {\r\n        dispatch({ type: \"DELETE_INTEGRATION\", payload: +data.integrationId });\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      socket.disconnect();\r\n    };\r\n  }, []);\r\n\r\n  const handleOpenUserModal = () => {\r\n    setSelectedIntegration(null);\r\n    setUserModalOpen(true);\r\n  };\r\n\r\n  const handleCloseIntegrationModal = () => {\r\n    setSelectedIntegration(null);\r\n    setUserModalOpen(false);\r\n  };\r\n\r\n  const handleSearch = (event) => {\r\n    setSearchParam(event.target.value.toLowerCase());\r\n  };\r\n\r\n  const handleEditIntegration = (queueIntegration) => {\r\n    setSelectedIntegration(queueIntegration);\r\n    setUserModalOpen(true);\r\n  };\r\n\r\n  const handleDeleteIntegration = async (integrationId) => {\r\n    try {\r\n      await api.delete(`/queueIntegration/${integrationId}`);\r\n      toast.success(i18n.t(\"queueIntegration.toasts.deleted\"));\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n    setDeletingUser(null);\r\n    setSearchParam(\"\");\r\n    setPageNumber(1);\r\n  };\r\n\r\n  const loadMore = () => {\r\n    setPageNumber((prevState) => prevState + 1);\r\n  };\r\n\r\n  const handleScroll = (e) => {\r\n    if (!hasMore || loading) return;\r\n    const { scrollTop, scrollHeight, clientHeight } = e.currentTarget;\r\n    if (scrollHeight - (scrollTop + 100) < clientHeight) {\r\n      loadMore();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <MainContainer>\r\n      <ConfirmationModal\r\n        title={\r\n          deletingUser &&\r\n          `${i18n.t(\"queueIntegration.confirmationModal.deleteTitle\")} ${deletingUser.name\r\n          }?`\r\n        }\r\n        open={confirmModalOpen}\r\n        onClose={setConfirmModalOpen}\r\n        onConfirm={() => handleDeleteIntegration(deletingUser.id)}\r\n      >\r\n        {i18n.t(\"queueIntegration.confirmationModal.deleteMessage\")}\r\n      </ConfirmationModal>\r\n      <IntegrationModal\r\n        open={userModalOpen}\r\n        onClose={handleCloseIntegrationModal}\r\n        aria-labelledby=\"form-dialog-title\"\r\n        integrationId={selectedIntegration && selectedIntegration.id}\r\n      />\r\n      <MainHeader>\r\n        <Title>{i18n.t(\"queueIntegration.title\")} ({queueIntegration.length})</Title>\r\n        <MainHeaderButtonsWrapper>\r\n          <TextField\r\n            placeholder={i18n.t(\"queueIntegration.searchPlaceholder\")}\r\n            type=\"search\"\r\n            value={searchParam}\r\n            onChange={handleSearch}\r\n            InputProps={{\r\n              startAdornment: (\r\n                <InputAdornment position=\"start\">\r\n                  <SearchIcon color=\"secondary\" />\r\n                </InputAdornment>\r\n              ),\r\n            }}\r\n          />\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            onClick={handleOpenUserModal}\r\n          >\r\n            {i18n.t(\"queueIntegration.buttons.add\")}\r\n          </Button>\r\n        </MainHeaderButtonsWrapper>\r\n      </MainHeader>\r\n      <Paper\r\n        className={classes.mainPaper}\r\n        variant=\"outlined\"\r\n        onScroll={handleScroll}\r\n      >\r\n        <Table size=\"small\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell padding=\"checkbox\"></TableCell>\r\n              <TableCell align=\"center\">{i18n.t(\"queueIntegration.table.id\")}</TableCell>\r\n              <TableCell align=\"center\">{i18n.t(\"queueIntegration.table.name\")}</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            <>\r\n              {queueIntegration.map((integration) => (\r\n                <TableRow key={integration.id}>\r\n                  <TableCell >\r\n                    {integration.type === \"dialogflow\" && (<Avatar \r\n                      src={dialogflow} className={classes.avatar} />)}\r\n                    {integration.type === \"n8n\" && (<Avatar\r\n                      src={n8n} className={classes.avatar} />)}\r\n                    {integration.type === \"webhook\" && (<Avatar\r\n                      src={webhooks} className={classes.avatar} />)}\r\n                    {integration.type === \"typebot\" && (<Avatar\r\n                      src={typebot} className={classes.avatar} />)}\r\n                  </TableCell>\r\n\r\n                  <TableCell align=\"center\">{integration.id}</TableCell>\r\n                  <TableCell align=\"center\">{integration.name}</TableCell>\r\n                  <TableCell align=\"center\">\r\n                    <IconButton\r\n                      size=\"small\"\r\n                      onClick={() => handleEditIntegration(integration)}\r\n                    >\r\n                      <Edit color=\"secondary\" />\r\n                    </IconButton>\r\n\r\n                    <IconButton\r\n                      size=\"small\"\r\n                      onClick={(e) => {\r\n                        setConfirmModalOpen(true);\r\n                        setDeletingUser(integration);\r\n                      }}\r\n                    >\r\n                      <DeleteOutline color=\"secondary\" />\r\n                    </IconButton>\r\n                  </TableCell>\r\n                </TableRow>\r\n              ))}\r\n              {loading && <TableRowSkeleton columns={7} />}\r\n            </>\r\n          </TableBody>\r\n        </Table>\r\n      </Paper>\r\n    </MainContainer>\r\n  );\r\n};\r\n\r\nexport default QueueIntegration;","import React, { useEffect, useState } from \"react\";\r\nimport { BrowserRouter, Switch } from \"react-router-dom\";\r\nimport { ToastContainer } from \"react-toastify\";\r\n\r\nimport LoggedInLayout from \"../layout\";\r\nimport Dashboard from \"../pages/Dashboard/\";\r\nimport TicketResponsiveContainer from \"../pages/TicketResponsiveContainer\";\r\nimport Signup from \"../pages/Signup/\";\r\nimport Login from \"../pages/Login/\";\r\nimport Connections from \"../pages/Connections/\";\r\nimport SettingsCustom from \"../pages/SettingsCustom/\";\r\nimport Financeiro from \"../pages/Financeiro/\";\r\nimport Users from \"../pages/Users\";\r\nimport Contacts from \"../pages/Contacts/\";\r\nimport Queues from \"../pages/Queues/\";\r\nimport Tags from \"../pages/Tags/\";\r\nimport MessagesAPI from \"../pages/MessagesAPI/\";\r\nimport Helps from \"../pages/Helps/\";\r\nimport ContactLists from \"../pages/ContactLists/\";\r\nimport ContactListItems from \"../pages/ContactListItems/\";\r\n// import Companies from \"../pages/Companies/\";\r\nimport QuickMessages from \"../pages/QuickMessages/\";\r\nimport Kanban from \"../pages/Kanban\";\r\nimport { AuthProvider } from \"../context/Auth/AuthContext\";\r\nimport { TicketsContextProvider } from \"../context/Tickets/TicketsContext\";\r\nimport { WhatsAppsProvider } from \"../context/WhatsApp/WhatsAppsContext\";\r\nimport Route from \"./Route\";\r\nimport Schedules from \"../pages/Schedules\";\r\nimport Campaigns from \"../pages/Campaigns\";\r\nimport CampaignsConfig from \"../pages/CampaignsConfig\";\r\nimport CampaignReport from \"../pages/CampaignReport\";\r\nimport Annoucements from \"../pages/Annoucements\";\r\nimport Chat from \"../pages/Chat\";\r\nimport ToDoList from \"../pages/ToDoList/\";\r\nimport Subscription from \"../pages/Subscription/\";\r\nimport Files from \"../pages/Files/\";\r\nimport Prompts from \"../pages/Prompts\";\r\nimport QueueIntegration from \"../pages/QueueIntegration\";\r\n\r\nconst Routes = () => {\r\n  const [showCampaigns, setShowCampaigns] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const cshow = localStorage.getItem(\"cshow\");\r\n    if (cshow !== undefined) {\r\n      setShowCampaigns(true);\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <BrowserRouter>\r\n      <AuthProvider>\r\n        <TicketsContextProvider>\r\n          <Switch>\r\n            <Route exact path=\"/login\" component={Login} />\r\n            <Route exact path=\"/signup\" component={Signup} />\r\n            {/* <Route exact path=\"/create-company\" component={Companies} /> */}\r\n            <WhatsAppsProvider>\r\n              <LoggedInLayout>\r\n                <Route exact path=\"/\" component={Dashboard} isPrivate />\r\n                <Route\r\n                  exact\r\n                  path=\"/tickets/:ticketId?\"\r\n                  component={TicketResponsiveContainer}\r\n                  isPrivate\r\n                />\r\n                <Route\r\n                  exact\r\n                  path=\"/connections\"\r\n                  component={Connections}\r\n                  isPrivate\r\n                />\r\n                <Route\r\n                  exact\r\n                  path=\"/quick-messages\"\r\n                  component={QuickMessages}\r\n                  isPrivate\r\n                />\r\n                <Route\r\n                  exact\r\n                  path=\"/todolist\"\r\n                  component={ToDoList}\r\n                  isPrivate\r\n                  />\r\n                <Route\r\n                  exact\r\n                  path=\"/schedules\"\r\n                  component={Schedules}\r\n                  isPrivate\r\n                />\r\n                <Route exact path=\"/tags\" component={Tags} isPrivate />\r\n                <Route exact path=\"/contacts\" component={Contacts} isPrivate />\r\n                <Route exact path=\"/helps\" component={Helps} isPrivate />\r\n                <Route exact path=\"/users\" component={Users} isPrivate />\r\n                <Route exact path=\"/files\" component={Files} isPrivate />\r\n                <Route exact path=\"/prompts\" component={Prompts} isPrivate />\r\n                <Route exact path=\"/queue-integration\" component={QueueIntegration} isPrivate />\r\n\r\n                <Route\r\n                  exact\r\n                  path=\"/messages-api\"\r\n                  component={MessagesAPI}\r\n                  isPrivate\r\n                />\r\n                <Route\r\n                  exact\r\n                  path=\"/settings\"\r\n                  component={SettingsCustom}\r\n                  isPrivate\r\n                />\r\n\t\t\t\t        <Route \r\n                  exact\r\n                  path=\"/kanban\"\r\n                  component={Kanban}\r\n                  isPrivate\r\n                />\r\n                <Route\r\n                  exact\r\n                  path=\"/financeiro\"\r\n                  component={Financeiro}\r\n                  isPrivate\r\n                />\r\n                <Route exact path=\"/queues\" component={Queues} isPrivate />\r\n                <Route\r\n                  exact\r\n                  path=\"/announcements\"\r\n                  component={Annoucements}\r\n                  isPrivate\r\n                />\r\n                <Route\r\n                  exact\r\n                  path=\"/subscription\"\r\n                  component={Subscription}\r\n                  isPrivate\r\n                />\r\n                <Route exact path=\"/chats/:id?\" component={Chat} isPrivate />\r\n                {showCampaigns && (\r\n                  <>\r\n                    <Route\r\n                      exact\r\n                      path=\"/contact-lists\"\r\n                      component={ContactLists}\r\n                      isPrivate\r\n                    />\r\n                    <Route\r\n                      exact\r\n                      path=\"/contact-lists/:contactListId/contacts\"\r\n                      component={ContactListItems}\r\n                      isPrivate\r\n                    />\r\n                    <Route\r\n                      exact\r\n                      path=\"/campaigns\"\r\n                      component={Campaigns}\r\n                      isPrivate\r\n                    />\r\n                    <Route\r\n                      exact\r\n                      path=\"/campaign/:campaignId/report\"\r\n                      component={CampaignReport}\r\n                      isPrivate\r\n                    />\r\n                    <Route\r\n                      exact\r\n                      path=\"/campaigns-config\"\r\n                      component={CampaignsConfig}\r\n                      isPrivate\r\n                    />\r\n                  </>\r\n                )}\r\n              </LoggedInLayout>\r\n            </WhatsAppsProvider>\r\n          </Switch>\r\n          <ToastContainer autoClose={3000} />\r\n        </TicketsContextProvider>\r\n      </AuthProvider>\r\n    </BrowserRouter>\r\n  );\r\n};\r\n\r\nexport default Routes;\r\n","import React, { useState, useEffect } from \"react\";\r\n\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport { QueryClient, QueryClientProvider } from \"react-query\";\r\n\r\nimport { ptBR } from \"@material-ui/core/locale\";\r\nimport { createTheme, ThemeProvider } from \"@material-ui/core/styles\";\r\nimport { useMediaQuery } from \"@material-ui/core\";\r\nimport ColorModeContext from \"./layout/themeContext\";\r\n\r\nimport Routes from \"./routes\";\r\n\r\nconst queryClient = new QueryClient();\r\n\r\nconst App = () => {\r\n    const [locale, setLocale] = useState();\r\n\r\n    const prefersDarkMode = useMediaQuery(\"(prefers-color-scheme: dark)\");\r\n    const preferredTheme = window.localStorage.getItem(\"preferredTheme\");\r\n    const [mode, setMode] = useState(preferredTheme ? preferredTheme : prefersDarkMode ? \"dark\" : \"light\");\r\n\r\n    const colorMode = React.useMemo(\r\n        () => ({\r\n            toggleColorMode: () => {\r\n                setMode((prevMode) => (prevMode === \"light\" ? \"dark\" : \"light\"));\r\n            },\r\n        }),\r\n        []\r\n    );\r\n\r\n    const theme = createTheme(\r\n        {\r\n            scrollbarStyles: {\r\n                \"&::-webkit-scrollbar\": {\r\n                    width: '8px',\r\n                    height: '8px',\r\n                },\r\n                \"&::-webkit-scrollbar-thumb\": {\r\n                    boxShadow: 'inset 0 0 6px rgba(0, 0, 0, 0.3)',\r\n                    backgroundColor: \"#08A46E\",\r\n                },\r\n            },\r\n            scrollbarStylesSoft: {\r\n                \"&::-webkit-scrollbar\": {\r\n                    width: \"8px\",\r\n                },\r\n                \"&::-webkit-scrollbar-thumb\": {\r\n                    backgroundColor: mode === \"light\" ? \"#F3F3F3\" : \"#333333\",\r\n                },\r\n            },\r\n            palette: {\r\n                type: mode,\r\n                primary: { main: mode === \"light\" ? \"#08A46E\" : \"#FFFFFF\" },\r\n                textPrimary: mode === \"light\" ? \"#08A46E\" : \"#FFFFFF\",\r\n                borderPrimary: mode === \"light\" ? \"#08A46E\" : \"#FFFFFF\",\r\n                dark: { main: mode === \"light\" ? \"#333333\" : \"#F3F3F3\" },\r\n                light: { main: mode === \"light\" ? \"#F3F3F3\" : \"#333333\" },\r\n                tabHeaderBackground: mode === \"light\" ? \"#EEE\" : \"#666\",\r\n                optionsBackground: mode === \"light\" ? \"#fafafa\" : \"#333\",\r\n\t\t\t\toptions: mode === \"light\" ? \"#fafafa\" : \"#666\",\r\n\t\t\t\tfontecor: mode === \"light\" ? \"#128c7e\" : \"#fff\",\r\n                fancyBackground: mode === \"light\" ? \"#fafafa\" : \"#333\",\r\n\t\t\t\tbordabox: mode === \"light\" ? \"#eee\" : \"#333\",\r\n\t\t\t\tnewmessagebox: mode === \"light\" ? \"#eee\" : \"#333\",\r\n\t\t\t\tinputdigita: mode === \"light\" ? \"#fff\" : \"#666\",\r\n\t\t\t\tcontactdrawer: mode === \"light\" ? \"#fff\" : \"#666\",\r\n\t\t\t\tannouncements: mode === \"light\" ? \"#ededed\" : \"#333\",\r\n\t\t\t\tlogin: mode === \"light\" ? \"#fff\" : \"#1C1C1C\",\r\n\t\t\t\tannouncementspopover: mode === \"light\" ? \"#fff\" : \"#666\",\r\n\t\t\t\tchatlist: mode === \"light\" ? \"#eee\" : \"#666\",\r\n\t\t\t\tboxlist: mode === \"light\" ? \"#ededed\" : \"#666\",\r\n\t\t\t\tboxchatlist: mode === \"light\" ? \"#ededed\" : \"#333\",\r\n                total: mode === \"light\" ? \"#fff\" : \"#222\",\r\n                messageIcons: mode === \"light\" ? \"grey\" : \"#F3F3F3\",\r\n                inputBackground: mode === \"light\" ? \"#FFFFFF\" : \"#333\",\r\n                barraSuperior: mode === \"light\" ? \"linear-gradient(to right, #08A46E, #08A46E , #08A46E)\" : \"#666\",\r\n\t\t\t\tboxticket: mode === \"light\" ? \"#EEE\" : \"#666\",\r\n\t\t\t\tcampaigntab: mode === \"light\" ? \"#ededed\" : \"#666\",\r\n\t\t\t\tmediainput: mode === \"light\" ? \"#ededed\" : \"#1c1c1c\",\r\n            },\r\n            mode,\r\n        },\r\n        locale\r\n    );\r\n\r\n    useEffect(() => {\r\n        const i18nlocale = localStorage.getItem(\"i18nextLng\");\r\n        const browserLocale =\r\n            i18nlocale.substring(0, 2) + i18nlocale.substring(3, 5);\r\n\r\n        if (browserLocale === \"ptBR\") {\r\n            setLocale(ptBR);\r\n        }\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        window.localStorage.setItem(\"preferredTheme\", mode);\r\n    }, [mode]);\r\n\r\n\r\n\r\n    return (\r\n        <ColorModeContext.Provider value={{ colorMode }}>\r\n            <ThemeProvider theme={theme}>\r\n                <QueryClientProvider client={queryClient}>\r\n                    <Routes />\r\n                </QueryClientProvider>\r\n            </ThemeProvider>\r\n        </ColorModeContext.Provider>\r\n    );\r\n};\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\n\r\nimport App from \"./App\";\r\n\r\nReactDOM.render(\r\n\t<CssBaseline>\r\n\t\t<App />\r\n\t</CssBaseline>,\r\n\tdocument.getElementById(\"root\")\r\n);\r\n\r\n// ReactDOM.render(\r\n// \t<React.StrictMode>\r\n// \t\t<CssBaseline>\r\n// \t\t\t<App />\r\n// \t\t</CssBaseline>,\r\n//   </React.StrictMode>\r\n\r\n// \tdocument.getElementById(\"root\")\r\n// );\r\n","module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"static/media/planilha.549edeba.xlsx\";","module.exports = __webpack_public_path__ + \"static/media/wa-background.2675a051.png\";","module.exports = __webpack_public_path__ + \"static/media/wa-background-dark.8244f042.png\";","module.exports = __webpack_public_path__ + \"static/media/sound.9fd5812c.mp3\";","module.exports = __webpack_public_path__ + \"static/media/chat_notify.2529c259.mp3\";","module.exports = __webpack_public_path__ + \"static/media/n8n.5c788b8d.png\";","module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"static/media/webhook.e5374d73.png\";","module.exports = \"data:image/jpeg;base64,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\""],"sourceRoot":""}